*version7.txt*  For Vim version 7.3.  最近更新: 2010年8月


		  VIM 參考手冊	  by Bram Moolenaar
				譯者: Willis
				http://vimcdoc.sf.net

					*vim7* *version-7.0* *version7.0*
歡迎來到 Vim 版本 7！新版本增加了很多新特性。本文檔列出所有加入的新項目、已
有特性的改動以及 Vim 6.x 以來的漏洞修正。使用這個命令可以看到你使用的版本: >
	:version

|vi_diff.txt| 提供 Vi 和 Vim 7.0 的區別的一個概述。
|version4.txt| 說明 Vim 3.x 和 Vim 4.x 的區別。
|version5.txt| 說明 Vim 4.x 和 Vim 5.x 的區別。
|version6.txt| 說明 Vim 5.x 和 Vim 6.x 的區別。

不 兼 容 的 改 動			|incompatible-7|

新 特 性				|new-7|

Vim 腳本增強            		|new-vim-script|
拼寫檢查				|new-spell|
全能補全				|new-omni-completion|
MzScheme 接口				|new-MzScheme|
打印多字節文本				|new-print-multi-byte|
標籤頁					|new-tab-pages|
撤銷分支				|new-undo-branches|
擴展的 Unicode 支持			|new-more-unicode|
更多高亮				|new-more-highlighting|
翻譯的手冊頁				|new-manpage-trans|
內部 grep				|new-vimgrep|
消息往回滾動				|new-scroll-back|
光標超越行尾				|new-onemore|
POSIX 兼容性				|new-posix|
調試器支持				|new-debug-support|
遠程文件探索器				|new-netrw-explore|
定義操作符				|new-define-operator|
映射到表達式				|new-map-expression|
可視和選擇模式映射			|new-map-select|
位置列表				|new-location-list|
若干新項目				|new-items-7|

改 進					|improvements-7|

編 譯 時 的 改 變			|compile-changes-7|

漏 洞 修 正				|bug-fixes-7|

7.1 版 本			|version-7.1|
改動					|changed-7.1|
新增					|added-7.1|
修正					|fixed-7.1|

7.2 版本			|version-7.2|
改動					|changed-7.2|
新增					|added-7.2|
修正					|fixed-7.2|

7.3 版本			|version-7.3|

永久化撤銷 				|new-persistent-undo|
更多加密				|new-more-encryption|
隱藏文本				|new-conceal|
Lua 接口				|new-lua|
Python3 接口				|new-python3|

改動					|changed-7.3|
新增					|added-7.3|
修正					|fixed-7.3|

(譯者注: 各版本的修正一節，因內容過於瑣碎，保留原文未翻譯)

==============================================================================
不 兼 容 的 改 動				*incompatible-7*

這些改動和以前版本不兼容。如果從 Vim 6.x 升級到 7.0 時出現問題，檢查這個列表。

":write file" 命令不再復位緩衝區的 'modified' 標誌位，除非 'cpoptions' 裡包含
'+' 標誌位 |cpo-+|。本來的行為不合邏輯，因為緩衝區和原來的文件相比，仍然有修改
的內容。另外，撤銷所有改變時，文件仍然會被標記為修改狀態。現在，執行此命令後用
":quit" 會失敗。

":helpgrep" 現在使用幫助窗口來顯示匹配。

參數列表裡本來可用雙引號在文件名裡包含空格。這使得 ":edit" 和 ":next" 轉義雙引
號時的行為不同，而且和 Vi 有些版本也不兼容。
	命令			Vim 6.x	文件名		Vim 7.x 文件名 ~
	:edit foo\"888		foo"888			foo"888
	:next foo\"888		foo888			foo"888
	:next a\"b c\"d		ab cd			a"b  和  c"d

在 |literal-string| 裡，單引號加倍可以得到一個。":echo 'a''b'" 本來返回
"a b"，現在因為兩個引號代表一個，它返回 "a'b"。

用 ":w! fname" 覆蓋文件時，本來不會警告 "fname" 正在被另一個 Vim 編輯。Vim 現
在給出錯誤信息 |E768|。

刪除了 Mac OS 9 的支持。

.tex 結尾的文件現在設置 'filetype' 為 "context"、"plaintex" 或 "tex"。
|ft-tex-plugin|


次要不兼容點:

文件類型檢測: 許多類型用 */.dir/filename 代替了 ~/.dir/filename，從而也能使用
別的用戶的文件。

不少文件類型的縮進設置從文件類型插件移到了縮進插件。如果你用: >
	:filetype plugin on
有些縮進設置可能會丟失。你需要用: >
	:filetype plugin indent on

":0verbose" 現在設置 'verbose' 為零而不是一。

刪除了舊且不完整的 "VimBuddy" 代碼。

無名緩衝區報告 "No Name" 而不是 "No File"。過去這和有名字但 'buftype' 設為
"nofile" 的緩衝區容易混淆。

如果 ":file xxx" 用於無名緩衝區，不設置輪換文件名。這避免了沒有意義的另一個無
名緩衝區的建立。

"2html.vim" 腳本現在把關閉折疊也轉換到 HTML。因為折疊的打開關閉相同，HTML 看上
去和顯示接近。如果 HTML 裡不要折疊，用 "zR" 或 "let html_ignore_folding=1"。
(部分來自 Carl Osterwisch)
diff 模式也被轉換到 HTML，和顯示一致。

Win32: <F10> 鍵的效果過去取決於 'winaltkeys'。現在它取決於 <F10> 是否被映射。
這樣就可以映射 <F10> 而不修改 'winaltkeys'。

如果 'nrformats' 包含 'octal'，"08" 上用 CTRL-A 過去得到 "018"，這不合邏輯。現
在得到 "9"。同時也刪除引導的一到多個零，以免 "009" 遞增到 "010" 後該數變成八進
制。

如果 'encoding' 設為一個 Unicode 編碼，'fileencodings' 的值現在在 "latin1" 之
前包含 "default"。這意味著如有可能，8 位編碼的文件缺省使用環境指定的編碼。以前
總是使用 latin1，在非 latin1 的環境下這是錯的，俄語就是如此。

如果有兩個窗口存在且都顯示幫助文件時，過去用 ":quit" 會退出。現在只關閉窗口。

"-w {scriptout}" 只有當 {scriptout} 不以數位開頭時才可用。否則，用它設置
'window' 選項。

<Home> 和 <xHome> 過去可以分別映射。這樣做的缺點是所有映射 (加上修飾符) 不得不
都重複一遍，因為你不能確信鍵盤會產生哪個值。現在所有的 <xHome> 在內部都被翻譯
為 <Home>，鍵碼和映射都是。同樣的改動也適用於 <xEnd>、<xF1> 等鍵。

":put" 現在把光標放在插入的末行。

如果 .gvimrc 存在，關閉 'compatible'，就像 ".vimrc" 文件存在時一樣。

用 "vlllU" 或類似的命令使字符串大寫時，德語 sharp s 被替換為 "SS"。因為兼容性
問題，"~" 不這麼做，這也是因為 "SS" 不能被改回 sharp s。

"gd" 過去在函數里找到變量的第一次出現，而這可以是沒有類型的函數參數。現在只會
去找包含類型的位置。

函數里的後繼行過去不參加計算，錯誤信息的行號是邏輯行而不是源代碼裡的行。這使得
定位錯誤十分困難。現在包含函數開始處起算的源代碼行號。這也意味著 ":breakadd
func" 裡的行號含義有了變化。

用 |:command| 定義用戶命令時，過去特殊項目可以是縮寫。這導致不可預測的行為，如
<li> 會被識別為 <line1>。現在這些項目不再允許縮寫。

執行 FileChangedRO 自動命令時，不再允許切換到另一個緩衝區或者編輯另一個文件。
這是為了防止崩潰 (激活事件所在的代碼埋藏得很深，那裡我們不期待改變緩衝區)。但
重新載入緩衝區仍然允許。

|more-prompt| 和 |hit-enter-prompt| 提示上，如果置位 'more' 選項，現在可以使用
'k'、'u'、'g' 和 'b' 鍵來往回滾動到以前的消息。它們不再用作預輸入。

==============================================================================
新 特 性						*new-7*

Vim 腳本增強						*new-vim-script*
------------

Vim 腳本加入以下類型:

	|List|		項目的有序列表
	|Dictionary|	項目的關聯數組
	|Funcref|	指向函數的引用

加入許多函數和命令以支持這些新類型。

用 |string()| 函數可以得到變量的字符串表示形式。這包括數值、字符串和它們的復合
形式。用 |eval()| 又可把字符串轉換變量值。

|:let| 命令現在可用 "+="，"-=" 和 ".="。 >
	:let var += expr	" 相當於 :let var = var + expr
	:let var -= expr	" 相當於 :let var = var - expr
	:let var .= string	" 相當於 :let var = var . string

用 |:profile| 命令，你可以確定哪個函數或腳本最耗時。

Python 接口 vim.eval() 也能處理字典和列表。|python-eval| (G. Sumner Hayes)

加入 |getscript| 插件，提供從 www.vim.org 自動更新腳本的便捷方法。
(Charles Campbell)

加入 |vimball| 插件，提供發佈包含一組文件 (插件文件、autoload 腳本、文檔) 的插
件的便捷方法。(Charles Campbell)


拼寫檢查						*new-spell*
--------

Vim 已經集成了拼寫檢查。本來有一些腳本的實現，但都較慢和/或需要外部程序。

用 'spell'	  選項切換拼寫檢查的開關。
用 'spelllang'	  選項指定能接受的語言。
用 'spellfile'	  選項指定加入新詞的文件名。
用 'spellsuggest' 選項指定提供建議的方法。

用 |]s| 和 |[s| 命令移動到下一個或前一個錯誤。
用 |zg| 和 |zw| 命令加入好詞和壞詞。
用 |z=| 	命令改正單詞。
用 |:mkspell|	命令從單詞列表生成 Vim 的拼寫文件。

加入 "undercurl" 高亮屬性，GUI 裡可以清楚地指出拼寫錯誤 (基於 Marcin Dalecki
的補丁)。
用 "guisp" 顏色指定和前景背景不同的第三種顏色。
可用高亮屬性的數目從大約 220 個增加到超過 30000 個。這使拼寫的屬性和語法高亮的
屬性可以進行合併。也可用於語法高亮和標注可視區域。

詳情可見: |spell|。


全能補全					*new-omni-completion*
----------

本來可以叫 "intellisense" 的，但它已經是註冊商標了。這是一種智能的補全形式，它
檢視光標前面的文本，然後尋找後面可以跟什麼內容。它可以用來提供結構和類的成員，
系統函數，等等。
(譯者注: 原文為 omni completion，但 omni 具體何義並無解釋。暫按其字面意思直譯
為 "全能"。)

插入模式下用 CTRL-X CTRL-O 開始全能補全。|i_CTRL-X_CTRL-O|

文件類型插件設置 'omnifunc' 選項來定義進行補全的函數。

目前支持的語言:
	C					|ft-c-omni|
	(X)HTML，帶有 CSS			|ft-html-omni|
	JavaScript				|ft-javascript-omni|
	PHP					|ft-php-omni|
	Python
	Ruby					|ft-ruby-omni|
	SQL					|ft-sql-omni|
	XML					|ft-xml-omni|
	任何支持語法高亮的語言			|ft-syntax-omni|

你可以加入自己的全能補全腳本。

如果 'completeopt' 選項包含 "menu"，使用 (相當原始的) 彈出菜單顯示插入模式的補
全匹配。


MzScheme 接口						*new-MzScheme*
-------------

支持 MzScheme 解釋器。|MzScheme|
用 |:mzscheme|	命令執行 MzScheme 命令。
用 |:mzfile|	命令執行 MzScheme 腳本文件。

這需要 Vim 編譯時加入 |+mzscheme| 特性。


打印多字節文本						*new-print-multi-byte*
--------------

|:hardcopy| 命令現在支持多字節字符的 PostScript 打印。

為此可使用 'printmbcharset' 和 'printmbfont' 選項。
另見 |postscript-cjk-printing|。(Mike Williams)


標籤頁							*new-tab-pages*
-----

標籤頁 (tab page) 是包含一或多個窗口並在頂部貼有標籤 (tab) 的頁面 (page)。點擊
標籤可以快速在標籤頁間切換。鍵盤則可用 |gt| (轉到標籤頁，Goto Tab) 命令。這是
一個需要使用很多窗口工作的便捷方式。

要在啟動 Vim 時為每個文件參數打開一個單獨的標籤頁，使用 |-p| 參數。
用 'tabpagemax' 設置可打開的最大標籤頁數。

標籤頁標籤所在的行可以使用高亮的普通文本，也可以使用 GUI 的機制。GUI 標籤看起
來更舒服，但只有少數系統支持。用 'tabline'、'guitablabel' 和 'guitabtooltip' 
可以定制標籤頁行，而它顯示與否則由 'showtabline' 控制。至於是否使用 GUI 標籤由
'guioptions' 的 "e" 標誌位決定。

用 |:tab| 命令修飾符，多數打開新窗口的命令會用新標籤頁代替。

|--remote-tab| 參數使已運行的 Vim 服務器用新標籤頁編輯文件。

"t:" 開始的變量局部於標籤頁。

詳情見: |tabpage|
多數 GUI 部分由 Yegappan Lakshmanan 實現。


撤銷分支						*new-undo-branches*
--------

以前只有單線的撤銷-重做。如果撤銷一系列改變後進行了一項新改變，所有撤銷的改變
就全丟失了。這可能會不小心導致大量工作的丟失。

為此情形，Vim 現在實現了撤銷分支機制，使你可以回到任何改變之後的文本，即使曾經
撤銷過也沒問題。唯一的例外是你到達了 'undolevels' 的限制，這時需要釋放撤銷信息
以減少內存用量。

要能在撤銷分支間遊歷，按順序給每個改變編號。命令 |g-| 和 |:earlier| 在時間上往
後退到舊的改變上。而命令 |g+| 和 |:later| 在時間上往前進到新的改變上。

每個改變同時記錄時間。":earlier 10m" 回到大約十分鐘前的文本。

用 |:undolist| 命令瞭解存在的撤銷分支的大概情況。|:undo| 命令現在接受參數以直
接跳轉到該列表的任意位置。用 |changenr()| 函數得到改變號。

現在還沒有圖形化的改變樹顯示，導航機制可能不甚簡明。


擴展的 Unicode 支持					*new-more-unicode*
-------------------

以前只能顯示兩個組合用字符。現在限制最高提高到 6 個。用 'maxcombine' 選項可以
設置這個限制。缺省值仍然是 2 個。

|ga| 現在顯示所有的組合用字符，而不只是前面兩個。

以前只支持 16 位 Unicode 字符的顯示，現在可用完整的 32 位字符集。除非編譯時手
動關閉這項功能以減少一些內存使用。

模式匹配現在可以搜索單個合成用字符。|patterns-composing|

|8g8| 命令搜索非法的 UTF-8 字節序列。


更多高亮					*new-more-highlighting*
--------

高亮匹配的括號:

在文本上移動時光標如果在括號上，同時高亮匹配的另一個括號。這使用了新的
|CursorMoved| 自動命令事件。

這意味著每次移動光標都會執行一些命令。如果對你來說速度減慢太多，可以關閉: >
	:NoMatchParen

|matchparen| 提供更多信息。

該插件使用 |:match| 命令。現在該命令同時支持三個匹配模式。插件使用的是第三個。
第一個給用戶使用，第二個可以用於其它插件。

高亮光標行和列:

加入 'cursorline' 和 'cursorcolumn' 選項。它們高亮光標所在的屏幕行和屏幕列。這
陽方便定位光標位置。'cursorcolumn' 也可用於對齊文本。它們可能會使屏幕刷新慢很
多。它們使用 CursorColumn 和 CursorLine 高亮，你可以修改使用的顏色。
|hl-CursorColumn| |hl-CursorLine|

可用高亮屬性的數目從大約 220 個增加到超過 30000 個。這使拼寫的屬性和語法高亮的
屬性可以進行合併。也可用於語法高亮，標注可視區域，CursorColumn 等等。


翻譯的手冊頁						*new-manpage-trans*
------------

現在 Vim 有了若干其它語言的手冊頁和相關程序。

法語     - David Blanchet 翻譯
意大利語 - Antonio Colombo 翻譯
俄語     - Vassily Ragosin 翻譯
波蘭語   - Mikolaj Machowski 翻譯

Unix 的 Makefile 在 .../man/it/man1/，.../man/it.ISO8859-1/man1/ 和
.../man/it.UTF-8/man1/ 安裝意大利語的手冊頁。看來沒有關於 "it" 目錄使用什麼編
碼的公認標準。作為我們的最佳猜測，目前使用的是 8 位編碼文件。
其它語言也被安裝在類似的位置。
Vim configure 時如果使用 "--disable-nls"，不自動安裝翻譯頁。但仍然可用
"make install-languages install-tool-languages" 完成這項工作。


內部 grep						*new-vimgrep*
---------

用 ":vimgrep" 命令可以在一組文件裡搜索模式。和 ":grep" 命令類似，但它不需要外
部程序。除了移植性更好之外，它還能處理不同的文件編碼並使用多行模式。它也能用來
在壓縮和遠程文件上進行搜索。|:vimgrep|。

如果想在腳本裡使用搜索的結果，用 |getqflist()| 函數。

要 grep 多個目錄下的文件，可用 "**" 模式。它會擴展為任意深度的目錄。任何需要擴
展文件名的地方都可以用 "**"，包括 |:next| 和 |:args|。


消息往回滾動						*new-scroll-back*
------------

顯示消息並停在 |more-prompt| 和 |hit-enter-prompt| 時，用 'k'、'g'、'u' 和 'b'
鍵可以往回滾動到以前的消息。這對 ":syntax"、":autocommand" 和 ":highlight" 的
輸出閱讀特別有用。使用通用的實現所以支持所有的命令，同時也保持高亮。只有
'more' 選項置位時才能使用。以前，只有 ":clist" 實現了部分這項功能。

如果你在 |hit-enter-prompt| 時按了 <Enter>，用 |g<| 命令可以查看最後一個消息
頁。這時你可以繼續往回滾動。


光標超越行尾						*new-onemore*
------------

如果 'virtualedit' 選項包含 "onemore"，光標可以移動到剛剛跨越行尾的位置。就像
它在換行符上一樣。

這時有些命令的行為更加一致。以前，在空行上的光標總是跨越行尾。但這和 Vi 兼容差
得很遠，而且也可能會影響一些插件或 Vim 腳本。小心使用！

Mattias Flodin 提供此補丁。


POSIX 兼容性						*new-posix*
------------

使用 POSIX 測試包來驗證 POSIX 的兼容性。修正了不少問題，使 Vim 和 POSIX 更兼
容。一些改變和傳統的 Vi 或期待的行為有衝突。設置 $VIM_POSIX 環境變量得到 POSIX
兼容行為。見 |posix|。

為了 Vi 和 POSIX 的兼容性而修正的項目:
- 用計數重複 "R" 只覆蓋文本一次；'cpoptions' 加入 'X' 標誌位 |cpo-X|
- 移動到不存在行的垂直移動命令失敗；; 'cpoptions' 加入 '-' 標誌位 |cpo--|
- 用 preserve 保護文件時並執行 ":q!"，文件可以恢復；'cpoptions' 加入 '&' 標誌
  位 |cpo-&|
- 部分實現了 'window' 選項。指定只有一個窗口時  CTRL-F 和 CTRL-B 滾動的幅度。
  現在接受 "-w {number}" 參數。"-w {scriptout}" 裡的 {scriptout} 必須不以數位
  開始。
- 接受 "-c{command}" 參數，"-c" 和 {command} 之間沒有空格。
- 用 ":w!" 寫入文件時不復位 'readonly'，如果 'cpoptions' 裡包含 'Z' 的話。
- 接受 ":list"、":print" 和 ":number" 的 'l' 和 '#' 標誌位。
- 'cpoptions' 加入 '.' 標誌位: 如果緩衝區被修改，":cd" 失敗。
- Ex 模式裡，空緩衝區使用 ":read file" 不在新行上下保留空行。
- ":global" 命令刪除換行符前面的反斜槓。
- ":append"、":insert" 或 ":change" 和 ":global" 一起使用時，從命令中獲取插入
  的行。可以用反斜槓-換行符來分隔行。
- 可用 ":global /pat/ visual" 在每個匹配行上執行普通模式命令。"Q" 可以繼續並轉
  到下一行。
- 部分實現 |:open| 命令。它退出 Ex 模式，但重畫整個屏幕，而不是像 open 模式應
  該做的那樣，重畫一行。
- 支持使用管道讀入外部程序的輸出和把輸入寫到外部程序。加入 'shelltemp' 選項和
  has("filterpipe")。
- Ex 安靜模式裡顯示 ":set" 的命令輸出。
- 如果以前沒用過寄存器，":@@" 和 ":**" 報錯。
- 搜索模式 "[]-`]" 匹配 ']'、'^'、'_' 和 '`'。
- ":insert" 的自動縮進使用插入位置下方的行。
- ":change" 的自動縮進使用第一個改變的行。
- Ex 命令行的編輯不用加工 (cooked) 模式，因為這樣不能處理 CTRL-D 和 CTRL-T。
- Ex 模式裡 "1,3" 顯示三行，"%" 顯示所有行。
- Ex 模式裡 "undo" 會撤銷所有從啟動 Ex 模式時開始的改變。
- 實現 'prompt' 選項。


調試器支持						*new-debug-support*
----------

加入 'balloonexpr' 選項。這是實現氣泡功能的通用機制。用它顯示鼠標指針所在單詞
的相關信息。


遠程文件探索器						*new-netrw-explore*
--------------

netrw 插件現在支持使用 "scp://" 的目錄瀏覽。也可以刪除和換名文件。

為了避免大量重複代碼，以前的文件探索器插件現在已經和 netrw 插件集成。這意味著
本地和遠程的文件瀏覽現在使用相同的方式。

":browse edit" 和 ":browse split" 在 GUI 對話框不可用而 netrw 插件可用時，使用
該插件。

Charles Campbell 維護 netrw 插件。


定義操作符						*new-define-operator*
----------

以前你不能定義自己的操作符: 即 {motion} 動作後面可以跟隨的命令。Vim 7 引入了
'operatorfunc' 選項和 |g@| 操作符。這樣就可以定義和操作符行為相同的映射。實際
工作由函數完成，而 |g@| 操作符調用該函數。

|:map-operator| 給出解釋和一個示例。


映射到表達式						*new-map-expression*
------------

映射的 {rhs} 參數可以是表達式。這意味著產生的字符可以取決於上下文。例如: >
	:inoremap <expr> . InsertDot()
這裡句號並映射到任何 InsertDot() 返回的內容。

這也可用於縮寫。詳情見 |:map-<expr>|。


可視和選擇模式映射					*new-map-select*
------------------

以前的可視模式映射同時適用於可視和選擇模式。使用一點技巧可以使選擇模式的映射和
可視模式下的行為相同。

現在加入了分別定義可視和選擇模式映射的命令: |:xmap| 和 |:smap|，以及配套的
"noremap" 和 "unmap" 命令。

這個改動同樣適用於菜單: |:xmenu|、|:smenu| 等等。


位置列表						*new-location-list*
--------

加入了每個窗口分別擁有的 quickfix 列表 (稱為位置列表) 的支持。位置列表顯示在位
置窗口裡 (和 quickfix 窗口類似)。你可以打開多於一個位置列表窗口。也加入了一組
和 quickfix 命令類似的命令，用來瀏覽位置列表。(Yegappan Lakshmanan)


若干新項目						*new-items-7*
----------

普通模式命令: ~

a"、a' 和 a`		選擇引號括起的字符串的新文本對象。|a'|
i"、i' 和 i`		(Taro Muraoka)

CTRL-W <Enter>		quickfix 窗口裡: 打開新窗口，顯示光標所在錯誤的位置。

|at| 和 |it| 文本對像選擇 HTML 或 XML 標籤之間的文本塊。

<A-LeftMouse> ('mousemodel' "popup" 或 "popup-setpos")
<A-RightMouse> ('mousemodel' "extend")
			進行面向列塊的選擇。|<A-LeftMouse>|

gF			開始編輯光標所在的文件名並跳轉到文件名後跟隨的行號。
			(Yegappan Lakshmanan)

CTRL-W F		在新窗口裡開始編輯光標所在的文件名並跳轉到文件名後跟隨
			的行號。(Yegappan Lakshmanan)

插入模式命令: ~

CTRL-\ CTRL-O		執行普通模式命令。類似於 CTRL-O，但不移動光標。
			|i_CTRL-\_CTRL-O|

選項: ~

'balloonexpr'		用於計算氣泡顯示文本的表達式
'completefunc'		用戶指定的插入模式補全使用的函數名。插入模式下用
			CTRL-X CTRL-U 可以進行任何形式的補全。(Taro Muraoka)
'completeopt'		插入模式補全可以使用彈出菜單。
'cursorcolumn'		高亮光標列
'cursorline'		高亮光標行
'formatexpr'		|gq| 或插入模式下文本超過 'textwidth' 以後的文本排版使
			用的表達式。
'formatlistpat'		排版時識別編號列表的模式。(Hugo Haas 的建議)
'fsync'			寫入文件時是否調用 fsync()。(Ciaran McCreesh)
'guitablabel'		GUI 標籤頁標籤用於顯示文本的表達式
'guitabtooltip'		GUI 標籤頁標籤用於顯示工具提示文本的表達式
'macatsui'		Mac: 用 ATSUI 文本顯示函數
'maxcombine'		顯示的組合用字符的最大數目
'maxmempattern'		模式匹配使用的最大內存量
'mkspellmem'		|:mkspell| 使用內存的相關參數
'mzquantum'		毫秒計的調度 MzScheme 線程的時間間隔。
'numberwidth'		'number' 和 'relativenumber' 選項使用空間的最小寬度。
			(Emmanuel Renieris)
'omnifunc'		全能補全使用的函數名。
'operatorfunc'		|g@| 操作符使用的函數
'printmbcharset'	:hardcopy 使用的 CJK 字符集
'printmbfont'		:hardcopy 產生的 CJK 輸出使用的字體名
'pumheight'		彈出菜單顯示的最大項目數
'quoteescape'		字符串內轉義引號的字符。用於 a"、a' 和 a` 文本對象。
			|a'|
'shelltemp'		外殼命令使用臨時文件還是管道
'showtabline'		是否顯示標籤頁行
'spell'			打開/關閉拼寫檢查
'spellcapcheck'		定位句子尾部的模式
'spellfile'		加入好詞和壞詞所用的文件
'spelllang'		拼寫檢查所用的語言
'spellsuggest'		拼寫建議的方法
'synmaxcol'		檢查語法項目的最大列數；避免長行的重畫過慢
'tabline'		標籤頁行用於顯示文本的表達式
'tabpagemax'		|-p| 打開的最大標籤頁數
'verbosefile'		記錄消息到文件。
'wildoptions'		"tagfile" 值使 CTRL-D 命令行補全可以列出匹配標籤所在的
			文件名。(基於 Yegappan Lakshmanan 的意見)
'winfixwidth'		固定寬度的窗口，類似於 'winfixheight'


Ex 命令: ~

Win32: ":winpos" 命令現在支持控制台版本。(Vipin Aravind)

|:startreplace|		開始替換模式。(Charles Campbell)
|:startgreplace| 	開始虛擬替換模式。

|:0file|		刪除緩衝區的名字。(Charles Campbell)

|:diffoff|		關閉當前窗口或所有窗口的 diff 模式。

|:delmarks|		刪除位置標記。

|:exusage|		Ex 命令的幫助 (Nvi 命令)。

|:viusage|		Vi 命令的幫助 (Nvi 命令)。

|:sort|			給緩衝區的行排序，不依賴外部命令。(部分由 Bryce Wagner
			提供)

|:vimgrep|		內部 grep 命令，在多個文件中搜索模式。
|:vimgrepadd|		類似於 |:vimgrep|，但不建立新列表。

|:caddfile|		加入錯誤信息到已存在的 quickfix 列表
			(Yegappan Lakshmanan)。
|:cbuffer|		讀入緩衝區的錯誤行。(部分由 Yegappan Lakshmanan 提供)
|:cgetbuffer|		基於緩衝區創建 quickfix 列表，但不跳到第一個錯誤。
|:caddbuffer|		從當前緩衝區加入錯誤到 quickfix 列表。
|:cexpr|		從 Vim 表達式讀入錯誤信息 (Yegappan Lakshmanan)。
|:caddexpr|		從 Vim 表達式加入錯誤信息到已存在的 quickfix 列表
			(Yegappan Lakshmanan)。
|:cgetexpr|		基於 Vim 表達式創建 quickfix 列表，但不跳到第一個錯誤
			(Yegappan Lakshmanan)。

|:lfile|		類似於 |:cfile| 但使用位置列表。
|:lgetfile|		類似於 |:cgetfile| 但使用位置列表。
|:laddfile|		類似於 |:caddfile| 但使用位置列表。
|:lbuffer|		類似於 |:cbuffer| 但使用位置列表。
|:lgetbuffer|		類似於 |:cgetbuffer| 但使用位置列表。
|:laddbuffer|		類似於 |:caddbuffer| 但使用位置列表。
|:lexpr|		類似於 |:cexpr| 但使用位置列表。
|:lgetexpr|		類似於 |:cgetexpr| 但使用位置列表。
|:laddexpr|		類似於 |:caddexpr| 但使用位置列表。
|:ll|			類似於 |:cc| 但使用位置列表。
|:llist|		類似於 |:clist| 但使用位置列表。
|:lnext|		類似於 |:cnext| 但使用位置列表。
|:lprevious|		類似於 |:cprevious| 但使用位置列表。
|:lNext|		類似於 |:cNext| 但使用位置列表。
|:lfirst|		類似於 |:cfirst| 但使用位置列表。
|:lrewind|		類似於 |:crewind| 但使用位置列表。
|:llast|		類似於 |:clast| 但使用位置列表。
|:lnfile|		類似於 |:cnfile| 但使用位置列表。
|:lpfile|		類似於 |:cpfile| 但使用位置列表。
|:lNfile|		類似於 |:cNfile| 但使用位置列表。
|:lolder|		類似於 |:colder| 但使用位置列表。
|:lnewer|		類似於 |:cnewer| 但使用位置列表。
|:lwindow|		類似於 |:cwindow| 但使用位置列表。
|:lopen|		類似於 |:copen| 但使用位置列表。
|:lclose|		類似於 |:cclose| 但使用位置列表。
|:lmake|		類似於 |:make| 但使用位置列表。
|:lgrep|		類似於 |:grep| 但使用位置列表。
|:lgrepadd|		類似於 |:grepadd| 但使用位置列表。
|:lvimgrep|		類似於 |:vimgrep| 但使用位置列表。
|:lvimgrepadd|		類似於 |:vimgrepadd| 但使用位置列表。
|:lhelpgrep|		類似於 |:helpgrep| 但使用位置列表。
|:lcscope|		類似於 |:cscope| 但使用位置列表。
|:ltag|			跳轉到標籤，並把匹配的標籤加入位置列表。
|:undojoin|		將下一個改變和上一個撤銷塊合併。
|:undolist|		列出撤銷樹的葉結點。

|:earlier|		在時間上退到以前的文本改變。
|:later|		在時間上進到以後的文本改變。

|:for|			在 |List| 上循環。
|:endfor|

|:lockvar|		給變量加鎖，防止被改變。
|:unlockvar|		給加鎖的變量解鎖。

|:mkspell|		建立 Vim 拼寫文件。
|:spellgood|		增加單詞到好詞列表。
|:spellwrong|		增加單詞到壞詞列表。
|:spelldump|		轉儲好詞列表。
|:spellinfo|		顯示關於使用的拼寫文件的信息。
|:spellrepall|		為整個緩衝區重複某個拼寫校正。
|:spellundo|		從好詞和壞詞列表裡刪除單詞。

|:mzscheme|		執行 MzScheme 命令。
|:mzfile|		執行 MzScheme 腳本文件。

|:nbkey|		把鍵傳遞給 NetBeans 進行處理。

|:profile|		用於 Vim 腳本刨視的命令。
|:profdel|		為指定項目停止刨視。

|:smap|			選擇模式映射。
|:smapclear|
|:snoremap|
|:sunmap|

|:xmap|			可視模式映射，不用於選擇模式。
|:xmapclear|
|:xnoremap|
|:xunmap|

|:smenu|		選擇模式菜單。
|:snoremenu|
|:sunmenu|

|:xmenu|		可視模式菜單，不用於選擇模式。
|:xnoremenu|
|:xunmenu|

|:tabclose|		關閉當前標籤頁。
|:tabdo|		為每個標籤頁執行命令。
|:tabedit|		在新標籤頁裡編輯文件。
|:tabnew|		打開新標籤頁。
|:tabfind|		搜索文件並在新標籤頁裡打開。
|:tabnext|		轉到下一個標籤頁。
|:tabprevious|		轉到前一個標籤頁。
|:tabNext|		轉到前一個標籤頁。
|:tabfirst|		轉到第一個標籤頁。
|:tabrewind|		轉到第一個標籤頁。
|:tablast|		轉到最後一個標籤頁。
|:tabmove|		把當前標籤頁移到別處。
|:tabonly|		關閉所有其它標籤頁。
|:tabs|			列出標籤頁和它們包含的窗口。


Ex 命令修飾符: ~

|:keepalt|		不改變輪換文件。

|:noautocmd|		不激活自動命令。

|:sandbox|		在沙盤裡執行命令。

|:tab|			打開新窗口時，同時建立新標籤頁。


Ex 命令參數: ~

|++bad|			指定出現不能轉換的字符或者非法字節時的行為。(代碼示例
			由 Yasuhiro Matsumoto 提供)
			另外，如果出現轉換錯誤或者發現非法字節，錯誤信息裡包含
			行號。


新出現和經過擴充的函數: ~

|add()|			在列表後附加項目
|append()|		附加行列表到緩衝區
|argv()|		沒有參數返回整個參數列表
|browsedir()|		選擇目錄的對話框
|bufnr()|		接受額外參數: 建立緩衝區
|byteidx()|		字符的位置 (Ilya Sher)
|call()|		調用函數，參數以列表出現
|changenr()|		當前改變號
|complete()|		設定插入模式補全的匹配
|complete_add()|	加入用於 'completefunc' 的匹配
|complete_check()|	檢察鍵擊，用於 'completefunc'
|copy()|		建立列表或字典的淺備份
|count()|		計算列表或字典裡某值的出現次數
|cursor()|		也接受 'virtualedit' 的偏移，而第一個參數可以是列表:
			[lnum, col, off]
|deepcopy()|		建立列表或字典的完整備份
|diff_filler()|		得到行 {lnum} 上方填充行的數目。
|diff_hlID()|		得到 diff 模式高亮標識號
|empty()|		檢查列表或字典是否為空
|eval()|		計算 {string} 並返回其結果
|extend()|		為列表/字典附加另一個列表/字典
|feedkeys()|		把若干字符放入預輸入緩衝區
|filter()|		刪除列表/字典的選定項目
|finddir()|		尋找 'path' 裡的目錄
|findfile()|		尋找 'path' 裡的文件 (Johannes Zellner)
|foldtextresult()|	行 "lnum" 所在關閉折疊的顯示用文本
|function()|		得到函數名對應的函數引用
|garbagecollect()|	清理只含循環引用的 |Lists| 和 |Dictionaries|
|get()|			得到列表/字典的項目
|getbufline()|		得到指定緩衝區的行列表 (Yegappan Lakshmanan)
|getcmdtype()|		得到當前命令行的類型 (Yegappan Lakshmanan)
|getfontname()|		得到當前使用的字體名
|getfperm()|		得到文件權限字符串 (Nikolai Weibull)
|getftype()|		得到文件類型 (Nikolai Weibull)
|getline()|		帶第二個參數: 得到緩衝區行列表
|getloclist()|		位置列表項目的列表 (Yegappan Lakshmanan)
|getpos()|		得到光標、位置標記等的位置的列表
|getqflist()|		quickfix 錯誤的列表 (Yegappan Lakshmanan)
|getreg()|		取得寄存器內容
|gettabwinvar()|	取得指定標籤頁的窗口變量。
|has_key()|		檢查某鍵是否出現在字典裡
|haslocaldir()|		檢查當前窗口是否使用過 |:lcd|
|hasmapto()|		檢查到字符串的映射是否存在
|index()|		列表中某值的索引
|inputlist()|		提示用戶從列表選擇一項
|insert()|		在列表某處插入一個項目
|islocked()|		檢查變量是否加鎖
|items()|		得到字典的鍵-值組對的列表
|join()|		合併列表項目成為字符串
|keys()|		得到字典的鍵列表
|len()|			列表或字典項目的總數
|map()|			改變每個列表或字典項目
|maparg()|		額外參數: 使用縮寫
|mapcheck()|		額外參數: 使用縮寫
|match()|		額外參數: 計數
|matcharg()|		返回 |:match| 命令的參數
|matchend()|		額外參數: 計數
|matchlist()|		字符串對模式的匹配和子匹配列表
|matchstr()|		額外參數: 計數
|max()|			列表或字典項目的最大值
|min()|			列表或字典項目的最小值
|mkdir()|		建立目錄
|pathshorten()|		把目錄名簡化到一個字符
|printf()|		格式化文本
|pumvisible()|		檢查彈出菜單是否顯示
|range()|		產生數字序列的列表
|readfile()|		讀入文件到一個行列表
|reltime()|		得到時間值，可能是相對的
|reltimestr()|		把時間值轉換為字符串
|remove()|		刪除列表或字典裡一或多個項目
|repeat()|		重複 "expr" "count" 次 (Christophe Poucet)
|reverse()|		反轉列表項目的順序
|search()|		額外參數:
|searchdecl()|		查找變量的聲明
|searchpair()|		額外參數: 停止搜索的行
|searchpairpos()|	返回匹配位置的列表
|searchpos()|		返回匹配位置的列表
|setloclist()|		修改位置列表 (Yegappan Lakshmanan)
|setpos()|		設置光標或位置標記到某位置
|setqflist()|		修改 quickfix 列表 (Yegappan Lakshmanan)
|settabwinvar()|	設置指定標籤頁的窗口變量
|sort()|		給列表排序
|soundfold()|		返回 "發音相似" 的單詞等價形式
|spellbadword()|	返回錯誤拼寫的單詞
|spellsuggest()|	返回建議的拼寫校正列表
|split()|		分割字符串成為列表
|str2nr()|		把字符串轉換為 8、10、16 進制的數值
|stridx()|		額外參數: 開始位置
|strridx()|		額外參數: 開始位置
|string()|		列表或字典的字符串表示形式
|system()|		額外參數: 用外殼命令過濾 {input}
|tabpagebuflist()|	得到標籤頁裡的緩衝區列表
|tabpagenr()|		得到當前或最後一個標籤頁號
|tabpagewinnr()|	得到標籤頁裡的窗口號
|tagfiles()|		標籤文件名的列表
|taglist()|		得到匹配標籤的列表 (Yegappan Lakshmanan)
|tr()|			翻譯字符 (Ron Aaron)
|values()|		得到列表或字典的值列表
|winnr()|		接受參數: 使用哪個窗口
|winrestview()|		恢復當前窗口的視圖
|winsaveview()|		保存當前窗口的視圖
|writefile()|		把一個行列表寫到文件裡

用戶定義的函數現在可以從 'runtimepath' 裡的 "autoload" 目錄自動載入。見
|autoload-functions|。


新 Vim 變量: ~

|v:insertmode|		用於 |InsertEnter| 和 |InsertChange| 自動命令
|v:val|			|map()| 或 |filter()| 函數的項目值
|v:key|			|map()| 或 |filter()| 函數的項目鍵
|v:profiling|		":profile start" 命令之後非零
|v:fcs_reason|		激活 |FileChangedShell| 的原因
|v:fcs_choice|		|FileChangedShell| 之後應該做什麼
|v:beval_bufnr|		'balloonexpr' 的緩衝區號
|v:beval_winnr|		'balloonexpr' 的窗口號
|v:beval_lnum|		'balloonexpr' 的行號
|v:beval_col|		'balloonexpr' 的列號
|v:beval_text|		'balloonexpr' 鼠標指針所在的文本
|v:scrollstart|		屏幕上滾的原因
|v:swapname|		|SwapExists| 事件所用的交換文件名
|v:swapchoice|		交換文件存在時應該做什麼
|v:swapcommand|		處理 |SwapExists| 後應該執行的命令
|v:char|		執行 'formatexpr' 時的參數


新自動命令事件: ~

|ColorScheme|		載入色彩方案後

|CursorHoldI|		在插入模式下，用戶有一段時間沒有按鍵
|CursorMoved|		普通模式下移動了光標
|CursorMovedI|		插入模式下移動了光標

|FileChangedShellPost|	對在 Vim 外部改變的文件的處理完成後

|InsertEnter|		開始插入或替換模式時
|InsertChange|		出入插入或替換模式時
|InsertLeave|		離開插入或替換模式時

|MenuPopup|		剛要顯示彈出菜單前

|QuickFixCmdPre|	執行 :make、:grep 等命令前 (Ciaran McCreesh)
|QuickFixCmdPost|	執行 :make、:grep 等命令後 (Ciaran McCreesh)

|SessionLoadPost|	載入會話文件後。(Yegappan Lakshmanan)

|ShellCmdPost|		執行外殼命令後
|ShellFilterPost|	用外殼命令執行完過濾後

|SourcePre|		執行 Vim 腳本之前

|SpellFileMissing|	使用不存在的拼寫文件

|SwapExists|		編輯文件時檢測到交換文件已經存在

|TabEnter|		剛進入標籤頁後
|TabLeave|		剛離開標籤頁前

|VimResized|		Vim 窗口大小改變後 (Yakov Lerner)


新高亮組: ~

Pmenu			彈出菜單: 普通項目 |hl-Pmenu|
PmenuSel		彈出菜單: 選中項目 |hl-PmenuSel|
PmenuThumb		彈出菜單: 滾動條 |hl-PmenuThumb|
PmenuSbar		彈出菜單: 滾動條的拇指 |hl-PmenuSbar|

TabLine			標籤頁行，非活動標籤頁標籤 |hl-TabLine|
TabLineSel		標籤頁行，活動標籤頁標籤 |hl-TabLineSel|
TabLineFill		標籤頁行，沒有標籤的地方 |hl-TabLineFill|

SpellBad		拼寫錯誤的單詞 |hl-SpellBad|
SpellCap		大小寫錯誤的單詞 |hl-SpellCap|
SpellRare		偏僻詞 |hl-SpellRare|
SpellLocal		只存在於別的區域的單詞 |hl-SpellLocal|

CursorColumn		'cursorcolumn' |hl-CursorColumn|
CursorLine		'cursorline' |hl-CursorLine|

MatchParen		匹配的括號 |pi_paren.txt| |hl-MatchParen|


搜索模式裡的新項目: ~
|/\%d| \%d123		匹配十進制指定的字符
|/\]|  [\d123]		同上，用於字符類
|/\%o| \%o103		匹配八進制指定的字符
|/\]|  [\o1o3]		同上，用於字符類
|/\%x| \%x1a		匹配兩位十六進制指定的字符
|/\]|  [\x1a]		同上，用於字符類
|/\%u| \%u12ab		匹配四位十六進制指定的字符
|/\]|  [\u12ab]		同上，用於字符類
|/\%U| \%U1234abcd	匹配八位十六進制指定的字符
|/\]|  [\U1234abcd]	同上，用於字符類
			    (以上部分由 Ciaran McCreesh 提供)

|/[[=| [[=a=]]		等價類 (只用於 latin1 字符)
|/[[.| [[.a.]]		排序規則元素 (只能使用單個字符)

|/\%'m|  \%'m		在位置標記 m 處匹配
|/\%<'m| \%<'m		在位置標記 m 之前匹配
|/\%>'m| \%>'m		在位置標記 m 之後匹配
|/\%V|   \%V		在可視區域內匹配

如有空匹配，嵌套的 |/multi| 項目不再是錯誤。

現在可用 \{0}，匹配前導的匹配原零次。沒有用處，只為兼容性而設置。


新語法/縮進/文件類型插件文件: ~

所有縮進設置都從文件類型插件移到了縮進文件。
實現 b:undo_indent 在 'filetype' 設為其它值時撤銷縮進設置。

a2ps 語法和文件類型插件文件。(Nikolai Weibull)
ABAB/4 語法文件。(Marius van Wyk)
alsaconf 文件類型插件文件。(Nikolai Weibull)
AppendMatchGroup 文件類型插件文件。(Dave Silvia)
arch 文件類型插件文件。(Nikolai Weibull)
asterisk 和 asteriskvm 語法文件。(Tilghman Lesher)
BDF 文件類型插件文件。(Nikolai Weibull)
BibTeX 縮進文件。(Dorai Sitaram)
BibTeX Bibliography Style 語法文件。(Tim Pope)
BTM 文件類型插件文件。(Bram Moolenaar)
calendar 文件類型插件文件。(Nikolai Weibull)
Changelog 縮進文件。(Nikolai Weibull)
ChordPro 語法文件。(Niels Bo Andersen)
Cmake 縮進和語法文件。(Andy Cedilnik)
conf 文件類型插件文件。(Nikolai Weibull)
context 語法和文件類型插件文件。(Nikolai Weibull)
CRM114 文件類型插件文件。(Nikolai Weibull)
cvs RC 文件類型插件文件。(Nikolai Weibull)
D 縮進文件。(Jason Mills)
Debian Sources.list 語法文件。(Matthijs Mohlmann)
dictconf 和 dictdconf 語法、縮進和文件類型插件文件。(Nikolai Weibull)
diff 文件類型插件文件。(Bram Moolenaar)
dircolors 文件類型插件文件。(Nikolai Weibull)
django 和 htmldjango 語法文件。(Dave Hodder)
doxygen 語法文件。(Michael Geddes)
elinks 文件類型插件文件。(Nikolai Weibull)
eterm 文件類型插件文件。(Nikolai Weibull)
eviews 語法文件。(Vaidotas Zemlys)
fetchmail RC 文件類型插件文件。(Nikolai Weibull)
FlexWiki 語法和文件類型插件文件。(George Reilly)
Generic 縮進文件。(Dave Silvia)
gpg 文件類型插件文件。(Nikolai Weibull)
gretl 語法文件。(Vaidotas Zemlys)
groovy 語法文件。(Alessio Pace)
group 語法和文件類型插件文件。(Nikolai Weibull)
grub 文件類型插件文件。(Nikolai Weibull)
Haskell 文件類型插件文件。(Nikolai Weibull)
help 文件類型插件文件。(Nikolai Weibull)
indent 文件類型插件文件。(Nikolai Weibull)
Javascript 文件類型插件文件。(Bram Moolenaar)
Kconfig 文件類型插件和語法文件。(Nikolai Weibull)
ld 語法、縮進和文件類型插件文件。(Nikolai Weibull)
lftp 文件類型插件文件。(Nikolai Weibull)
libao config 文件類型插件文件。(Nikolai Weibull)
limits 語法和文件類型插件文件。(Nikolai Weibull)
Lisp 縮進文件。(Sergey Khorev)
loginaccess 和 logindefs 語法和文件類型插件文件。(Nikolai Weibull)
m4 文件類型插件文件。(Nikolai Weibull)
mailaliases 語法文件。(Nikolai Weibull)
mailcap 文件類型插件文件。(Nikolai Weibull)
manconf 語法和文件類型插件文件。(Nikolai Weibull)
matlab 文件類型插件文件。(Jake Wasserman)
Maxima 語法文件。(Robert Dodier)
MGL 語法文件。(Gero Kuhlmann)
modconf 文件類型插件文件。(Nikolai Weibull)
mplayer config 文件類型插件文件。(Nikolai Weibull)
Mrxvtrc 語法和文件類型插件文件。(Gautam Iyer)
MuPAD source 語法、縮進和文件類型插件。(Dave Silvia)
mutt RC 文件類型插件文件。(Nikolai Weibull)
nanorc 語法和文件類型插件文件。(Nikolai Weibull)
netrc 文件類型插件文件。(Nikolai Weibull)
pamconf 語法和文件類型插件文件。(Nikolai Weibull)
Pascal 縮進文件。(Neil Carter)
passwd 語法和文件類型插件文件。(Nikolai Weibull)
PHP 編譯器插件。(Doug Kearns)
pinfo 文件類型插件文件。(Nikolai Weibull)
plaintex 語法和文件類型插件文件。(Nikolai Weibull，Benji Fisher)
procmail 文件類型插件文件。(Nikolai Weibull)
prolog 文件類型插件文件。(Nikolai Weibull)
protocols 語法和文件類型插件文件。(Nikolai Weibull)
quake 文件類型插件文件。(Nikolai Weibull)
racc 語法和文件類型插件文件。(Nikolai Weibull)
readline 文件類型插件文件。(Nikolai Weibull)
rhelp 語法文件。(Johannes Ranke)
rnoweb 語法文件。(Johannes Ranke)
Relax NG compact 文件類型插件文件。(Nikolai Weibull)
Scheme 縮進文件。(Sergey Khorev)
screen 文件類型插件文件。(Nikolai Weibull)
sensors 語法和文件類型插件文件。(Nikolai Weibull)
services 語法和文件類型插件文件。(Nikolai Weibull)
setserial 語法和文件類型插件文件。(Nikolai Weibull)
sieve 語法和文件類型插件文件。(Nikolai Weibull)
SiSU 語法文件。(Ralph Amissah)
Sive 語法文件。(Nikolai Weibull)
slp config、reg 和 spi 語法和文件類型插件文件。(Nikolai Weibull)
SML 縮進文件。(Saikat Guha)
SQL anywhere 語法和縮進文件。(David Fishburn)
SQL 縮進文件。
SQL-Informix 語法文件。(Dean L Hill)
SQL: 處理各種不同的變種。(David Fishburn)
sshconfig 文件類型插件文件。(Nikolai Weibull)
Stata 和 SMCL 語法文件。(Jeff Pitblado)
sudoers 文件類型插件文件。(Nikolai Weibull)
sysctl 語法和文件類型插件文件。(Nikolai Weibull)
terminfo 文件類型插件文件。(Nikolai Weibull)
trustees 語法文件。(Nima Talebi)
Vera 語法文件。(David Eggum)
udev config、permissions 和 rules 語法和文件類型插件文件。(Nikolai Weibull)
updatedb 語法和文件類型插件文件。(Nikolai Weibull)
VHDL 縮進文件。(Gerald Lai)
WSML 語法文件。(Thomas Haselwanter)
Xdefaults 文件類型插件文件。(Nikolai Weibull)
XFree86 config 文件類型插件文件。(Nikolai Weibull)
xinetd 語法、縮進和文件類型插件文件。(Nikolai Weibull)
xmodmap 文件類型插件文件。(Nikolai Weibull)
Xquery 語法文件。(Jean-Marc Vanel)
xsd (XML schema) 縮進文件。
YAML 文件類型插件文件。(Nikolai Weibull)
Zsh 文件類型插件文件。(Nikolai Weibull)


新鍵盤映射表: ~

僧伽羅語 (斯里蘭卡) (Harshula Jayasuriya)
TSCII 編碼的泰米爾語 (Yegappan Lakshmanan)
cp737 的希臘語 (Panagiotis Louridas)
波蘭語-slash (HS6_06)
烏克蘭語-jcuken 鍵盤 (Anatoli Sakhnik)
日語假名 (Edward L. Fox)


新消息翻譯: ~

現在也有了 cp1251 的烏克蘭語消息。
越南語消息翻譯和菜單。(Phan Vinh Thinh)


其它: ~

|:read| 參數現在有了 |++edit| 參數。從而使用檢測到的緩衝區的 'fileformat'、
'fileencoding' 和其它選項。同時也修正了壓縮文件編輯時不設置這些選項的問題。

為 Sun Studio 10 更新 Netbeans 接口。協議號從 2.2 上到 2.3。(Gordon Prieur)

Mac: 啟動時 Vim 會載入 $VIMRUNTIME/macmap.vim 腳本來定義缺省的 command 鍵的映
射。(多由 by Benji Fisher 提供)

Mac: 加入剪貼板選擇區的類型，這樣兩個 Vim 之間可以共享面向列塊、行和字符的選擇
區。(Eckehard Berns)
也修正設置 'clipboard' 為 "unnamed" 時 "yyp" 出現的問題。

Mac: GUI 字體選擇器。(Peter Cucka)

Mac: 支持多字節字符。(Da Woon Jung)
並不總能工作。如果有文本繪製的問題，可以嘗試關閉 'macatsui' 選項。

Mac: 支持非 GUI 版本的 xterm 鼠標。

Mac: 和 Xcode 更好的集成。在 odoc 事件和拖動接收處理程序之後發送 (post) 偽鼠標
釋放事件，以解決 Vim 載入文件後不響應的問題。修正一個 "一行之差" 的行號錯誤。
(Da Woon Jung)

Mac: 從 Finder 啟動時改變目錄為編輯文件所在的目錄或用戶主目錄。

加入 t_SI 和 t_EI 轉義序列以啟動和結束插入模式。
用於設置光標形狀為條狀或塊狀。沒有缺省值，因為 termcap/terminfo 不支持它們。

Motif 上有了 GUI 字體選擇器。(Marcin Dalecki)

Motif 有更好的工具欄按鈕。(Marcin Dalecki)

Motif 有搜索/替代對話框助記。(Marcin Dalecki)

加入 Marcin Dalecki 提供的若干 Motif 改進。現在我們自己繪製標籤內容，使得字體
的處理方式可以通過 Vim 定制，也相對減少了對 X11 字體管理的依賴。

可以定義局部於緩衝區的自動命令。這意味著即使緩衝區沒有名字或者沒有特定的名字，
也能使用自動命令。見 |autocmd-buflocal|。(Yakov Lerner)

xterm 現在能夠識別多數功能鍵和修飾符的組合。|xterm-modifier-keys|

如果設置 'verbose'，":highlight" 的輸出顯示高亮項目最近在哪裡設置。
如果設置 'verbose'，":map"、":abbreviate"、":command"、":function" 和
":autocmd" 的輸出顯示它最近在哪裡定義。(Yegappan Lakshmanan)

":function /pattern" 列出匹配模式的函數。

"1gd" 和 "gd" 類似，但忽略光標位置之前的 {} 塊裡的匹配。"1gD" 和 "gD" 也是。

'scrolljump' 可以設為負數，滾動到窗口高度的一個百分比。

加入 |v:scrollstart| 變量，幫助尋找產生 hit-enter 提示的腳本位置。

要能處理待編輯的文件已經被別的 Vim 實例編輯的情形，加入 |SwapExists| 事件。可
以使用 |v:swapname|、|v:swapchoice| 和 |v:swapcommand| 變量。用此事件可以調用
|client-server| 功能，把另一個 Vim 帶到前台。
啟動 Vim 時如有 "-t tag" 參數，已經有交換文件而用戶選擇了 "quit" 或 "abort"，
退出 Vim。

撤銷現在同時恢復 '< 和 '> 位置標記。"gv" 可以選擇改變和撤銷之前的相同區域。

編輯 "/" 或 "?" 命令的搜索模式並且置位 'incsearch' 時，可用 CTRL-L 從當前匹配
上加一個字符。CTRL-R CTRL-W 會加入一個單詞，但排除已經輸入的單詞部分。

Ruby 接口: 加入行號方法。(Ryan Paul)

$MYVIMRC 環境變量設為第一個找到的 vimrc 文件。
$MYGVIMRC 環境變量設為第一個找到的 gvimrc 文件。

==============================================================================
改 進							*improvements-7*

":helpgrep" 在模式之後接受語言描述符: "pat@it"。

打印的幫助信息被移到獨立的幫助文件。現在這部分篇幅已經不短。

執行 ":!cmd"、":r !cmd" 或 ":w !cmd" 的補全時，尋找 $PATH 裡的可執行文件而不是
當前目錄的普通文件。

如果使用 ":silent" 並且 Ex 命令使用反向的行範圍，自動交換範圍的兩端而不詢問用
戶是否需要這麼做。

模式匹配的代碼從遞歸函數修改為迭代機制。這樣避免了堆棧溢出錯誤。分配的內存保存
了狀態，所以總是可以檢測到內存溢出。允許匹配更加複雜的模式，但過程可能很長，所
以期間 Vim 看起來可能像掛起一樣。

以前總在沙盤 |sandbox| 裡計算一些選項，現在只有從模式行裡設置選項或在安全模式
裡才會這麼做。應用於 'balloonexpr'、'foldexpr'、'foldtext' 和 'includeexpr'。
(Sumner Hayes)

一些命令和表達式可能包含可怕的副作用，比如編輯搜索模式時使用 CTRL-R =，而該表
達式又調用了跳到其它窗口的函數的情況。加入 |textlock| 防止這種情況的發生。

用 ":breakadd here" 和 ":breakdel here" 可以在光標位置設置或刪除斷點。

現在可以這樣定義函數: >
	:exe "func Test()\n ...\n endfunc"

教程進行了更新，使它更容易使用，也增加了一些解釋更多重要命令的文本。建議由
Gabriel Zachmann 提供。

Unix: libcall() 失敗時，用 dlerror() 得到錯誤信息並顯示。(Johannes Zellner)

Mac 和 Cygwin: 編輯已有的文件時，使文件名使用和編輯文件相同的大小寫。因而輸入
":e os_UNIX.c" 後文件名會成為 "os_unix.c"。

'listchars' 裡加入 "nbsp"。(David Blanchet)

'buftype' 選項加入 "acwrite" 值。適用於無名但引用某個文件的緩衝區，寫回時會用
到 BufWriteCmd 自動命令。

Lisp 縮進和括號匹配: (Sergey Khorev)
- 正確識別方括號
- 識別 #\(、#\)、#\[ 和 #\] 為字符常數
- 識別 Lisp 行註釋 (分號定界)

match()、matchend() 和 matchstr() 加入 "count" 參數。(Ilya Sher)

winnr() 接受可選的 "$" 或 "#" 參數。(Nikolai Weibull，Yegappan Lakshmanan)

search() 加入 's' 標誌位: 如果光標移動，設置 ' 位置標記。(Yegappan Lakshmanan)
search() 加入 'n' 標誌位: 不移動光標。(Nikolai Weibull)
search() 加入 'c' 標誌位: 接受光標所在的匹配。
search() 加入 'e' 標誌位: 移到匹配的尾部。(Benji Fisher)
search() 加入 'p' 標誌位: 返回子模式號。(Benji Fisher)
同樣適用於 searchpos()、searchpair() 和 searchpairpos()。

search() 和 searchpair() 函數包含附加參數來指定在哪裡停止搜索。如果搜索無須走
得太遠，這加快了搜索的速度。

gzip 插件解壓失敗時，給出錯誤消息但不刪除原始文本。這有助於文件有 .gz 擴展名但
實際沒有壓縮的情形。(Andrew Pimlott)

使用 C、C++ 或 IDL 語法時，可以附加載入 doxygen 語法。(Michael Geddes)

支持設置 'filetype' 和 'syntax' 為 "aaa.bbb"，代表 "aaa" 加上 "bbb" 的文件類型
和語法。

":registers" 命令現在正確顯示多字節字符。

VMS: 使用說明提到了可以用斜槓使標誌位大寫。加入內建的 vt320 終端代碼色彩支持。
(Zoltan Arpadffy)

'viminfo' 的 '%' 項目允許設置緩衝區數目的上限。

文件類型的識別: 如果文件看起來像外殼腳本，檢查啟動 tcl 解釋器的 "exec" 命令。
(Alexios Zavras 建議)

支持 utf-8 和 latin9 (iso-8859-15) 的內部轉換，這樣就算沒有 iconv 也可以使用二
合字母。

編輯無名且空白的緩衝區時如果載入會話文件，徹底刪除該緩衝區。避免在緩衝區列表裡
留下一個不用的緩衝區。

Win32: 如果 libintl.dll 支持 bind_textdomain_codeset()，使用此函數。
(NAKADAIRA Yukihiro)

Win32: Vim 以前不識別 NTFS 文件系統的硬鏈接。現在當 'backupcopy' 為 "auto" 時
會檢測到。同時也修正關於鏈接的 "file has been changed since reading it" 虛假信
息。

如果 foldtext() 發現刪除註釋引導符後沒有文本，使用折疊的第二行。可用於 C 風格
的 /* */ 註釋，其中第一行只包含 "/*"。

兩個系統上編輯相同文件時 (例如 Unix 和 MS-Windows)，以前大多不會給出交換文件已
經存在的警告，因為使用的編輯文件名不同 (如 y:\dir\file 和 /home/me/dir/file)。
現在給交換文件加入標誌位，指示和編輯文件放在相同的目錄。因為不受使用路徑的影
響，現在關於是否編輯相同文件的檢查可靠得多。

Unix: 通過符號鏈接編輯文件時，交換文件過去使用符號鏈接的名字。現在使用實際文件
的名字，這樣可以檢測到對文件的重複編輯。(Stefano Zacchiroli 和 James Vega 的建
議)

客戶-服務器通信現在支持 'encoding'。如果在 Vim 服務器上設置 'encoding' 為
"utf-8" 而從控制台上調用 "vim --remote fname"，"fname" 被從控制台編碼轉換為
utf-8。這樣也允許使用不同 'encoding' 設置的 Vim 之間交換消息。

內部改動: 修改 ga_room 為 ga_maxlen，這樣它不需要每次都遞增/遞減。

如果寄存器為空，不把它保存到 viminfo 文件。

刪除 tcltags 腳本，它已經廢棄了。

":redir @*>>" 和 ":redir @+>>" 附加到剪貼板。寄存器名後非法字符的檢查更嚴格。
|:redir|

":redir => variable" 和 ":redir =>> variable" 寫入或附加到變量。
(Yegappan Lakshmanan) |:redir|

":redir @{a-z}>>" 附加到寄存器 a 到 z。(Yegappan Lakshmanan)

'verbosefile' 選項可以把消息記錄到文件。此時不再顯示 verbose 消息。也可用
"-V{filename}" 參數記錄啟動消息。

":let g:" 列出全局變量。
":let b:" 列出緩衝區局部變量。
":let w:" 列出窗口局部變量。
":let v:" 列出 Vim 變量。

stridx() 和 strridx() 函數接受第三個參數，指定從哪裡開始搜索。(Yegappan
Lakshmanan)

getreg() 函數接受額外的一個參數，從而得到 '=' 寄存器表達式本身而不是它計算之後
的值。

setline() 函數接受列表參數以設置多行。如果行號剛剛在末行之後，附加行。

如果字符數和字節數不同的話，g CTRL-G 同時顯示字符數。

":debug" 和 '=' 寄存器表達式的補全。跳過行範圍和命令名之間的 ":"。
(Peter winters)

插入模式的 CTRL-Q 現在缺省同 CTRL-V。過去它被忽略。

如果 'debug' 包含 "beep"，發出鈴聲的函數或腳本會給出消息並包括錯誤源。

補全緩衝區名時，用 "\(^\|[\/]\)" 而不是 "^" 進行匹配，這樣 ":buf stor<Tab>"
能同時找到 "include/storage.h" 和 "storage/main.c"。

要計算 (模式匹配) 的項目數而不修改緩衝區，可用 |:substitute| 的 'n' 標誌位。見
|count-items|。

|:substitute| 命令的 \u、\U、\l 和 \L 項目現在支持多字節字符。

識別名為 "screen.linux" 的 $TERM 以設置 'background' 的缺省值為 "dark"。
(Ciaran McCreesh)  "cygwin" 和 "putty" 也是如此。

|FileChangedShell| 自動命令事件現在使用 |v:fcs_reason| 變量來指定激活事件的原
因。|v:fcs_choice| 可以選擇重新載入緩衝區或詢問用戶應該如何進行。

xterm 功能鍵過去不能識別所有的修飾符。現在終端代碼可用 ";*X" 或 "O*X" 結尾，其
中 X 是任何字符而 * 代表修飾符代碼。
加入 <xUp>、<xDown>、<xLeft> 和 <xRight> 鍵以識別 xterm 發送這些代碼的兩種可能
形式，同時仍然可以處理所有的修飾符。

getwinvar() 現在也可以從指定窗口取得局部於緩衝區的選項。

'errorformat' 加入 "%s" 項目。(Yegappan Lakshmanan)
'errorformat' 加入 "%>" 項目。

'errorformat' 過去不能使用包含出現在 "%f" 之後的字符的文件名。例如，"%f:%l:%m"
裡文件名不能包含 ":"。現在必須餘下的模式匹配以後才會包含第一個 ":"。在這個例子
裡，文件名可以包含後面沒有行號的 ":"。(Emanuele Giaquinta 建議)

GTK GUI: 如果可能，使用 GTK 文件對話框。Grahame Bowland 和 Evan Webb 補丁的混
合。

bugreport.vim 加入 ":scriptnames"，這樣可以看到使用了哪些插件。

Win32: 如果用戶改變了滾輪點擊滾動行數的設置，立即使用。過去 Vim 需要重啟。

在表達式裡使用 @= 時，值是 @= 包含的內容。用 ":let @= = value" 可以設置寄存器
內容。

":popup" 可以加上 !，使彈出菜單出現在鼠標指針的位置而不是文本光標的位置。

擴充了編碼表，支持許多 MS-Windows 代碼頁，如 cp1250 和 cp737。這樣 Unix 就可以
直接使用它們而無需在前面加上 "8bit-"。
如果編碼名以 "microsoft-cp" 開始，忽略 "microsoft-" 部分。

用戶定義的命令加入 "customlist" 補全參數。用戶定義的補全參數應該返回 Vim 列表
形式的補全的候選值，Vim 不過濾返回值。(Yegappan Lakshmanan)

Win32: 如果 common controls 支持，氣泡可以多行。(Sergey Khorev)

命令行補全現在對各種類型參數的匹配結果進行排序: 用戶命令、變量、語法名等。

如果不設置 locale，使用 "C" locale。Vim 會處理 latin1 字符並使用自己的
isupper()/toupper()/等函數。

rxvt 終端模擬器用 COLORFGBG 環境變量來猜測 'background' 的值。
(Ciaran McCreesh)

同時支持 Unix 上 t_SI 和 t_EI 的正常功能。(Ciaran McCreesh)

如果 'foldcolumn' 為 1，放入盡量多的信息。鼠標點擊 '-' 可以關閉折疊。

input() 接受可選的補全參數，指定輸入能接受的補全類型。(Yegappan Lakshmanan)

diff 模式下，"dp" 可接受多於兩個緩衝區，如果只有一個置位 'modifiable' 的話。

'diffopt' 選項有三個新值: "horizontal"、"vertical" 和 "foldcolumn"。

如果 'include' 選項包含 \zs，找到的文件名是 \zs 到模式結束處或 \ze。這樣可以給
'includeexpr' 傳遞更多的信息。

現在，在啟動過程的插件載入時支持 plugin 目錄下的子目錄。|load-plugins|

foldcolumn 總是為關閉折疊顯示 '+'，方便打開。這可能覆蓋其它字符，'foldcolumn'
為 1 尤其如此。

現在置位 'readonly' 可以再次得到 W10 消息。如果 FileChangedRO 自動命令獲得文件
失敗，可以利用這一點。

Unix: open() 返回 EFBIG 時會給出合適的信息。

":mksession" 設置 SessionLoad 變量以通知插件。會話文件也加入了模式行來設置
'filetype' 為 "vim"。

ATTENTION 提示把 "Delete it" 選擇放在 "Quit" 之前，這樣更合邏輯。(Robert Webb)

附加到文件而緩衝區沒有名字時，過去使用附加文件的名字作為緩衝區名。但是緩衝區的
內容實際和文件內容不同。現在不設置文件名，除非 'cpoptions' 包含 'P' 標誌位。

開始編輯新文件而文件所在的目錄不存在時，Vim 會報告 "[New DIRECTORY]" 而不是
"[New File]"，從而提示用戶可能出現了錯誤。

Win32: 保持 viminfo 文件的隱藏屬性。

過去用了 CTRL-O 和光標鍵後，插入模式下的 CTRL-A 會記不住最近插入的文本。現在
CTRL-O 之後的那個命令如果不插入文本，最近插入的文本會被記住。這樣，CTRL-O 命令
可以移動光標而不用擔心會丟失最近插入的文本。

exists() 函數現在提供對自動命令組是否定義和自動命令事件是否支持的檢查。
(Yegappan Lakshmanan)

允許在沙盤裡使用 ":global"，因為它本身不會造成任何傷害。

如果 'filetype' 為空，":saveas asdf.c" 會設置它為 c。":w asdf.c" 如果會設置緩
沖區的文件名，也是如此。

插入模式的整行補全現在同時搜索未載入的緩衝區。

colortest.vim 腳本現在可以用 ":source" 或 ":runtime syntax/colortest.vim" 直接
調用。

'statusline' 選項可以局部於窗口，這樣每個窗口就可以有不同的值。(部分由
Yegappan Lakshmanan 提供)

現在，'statusline' 和其它支持相同格式的選項可以使用新特性:
- 如果以 "%!" 開始，先作為表達式計算該值，然後再對計算結果進行分析。
- 用 "%#HLname#" 開始名為 HLname 的高亮。

如果 'statusline' 設定的值產生了錯誤信息，它被清空以免出現無限重畫循環。其它一
些選項，如 'tabline' 和 'titlestring'，也是如此。":verbose set statusline" 會
提到該選項的設置位置在錯誤處理程序裡。

如果有若干匹配的標籤，":tag <name>" 和 CTRL-] 命令跳轉到第 [count] 個匹配的標
簽。(Yegappan Lakshmanan)

Win32: 如果設置的話，安裝程序生成的批處理文件使用 $VIMRUNTIME 或 $VIM。Mathias
Michaelis 提供了示例。
同時新建 vimtutor.bat 批處理文件。

'balloonexpr' 選項現在變成了 |global-local|類型。

system() 函數現在運行於加工 (cooked) 模式，從而可以用 CTRL-C 中斷。

==============================================================================
編 譯 時 的 改 變					*compile-changes-7*

放棄對 BeOS 和 Amiga GUI 的支持。沒有人維護，可能也已經無法工作。如果你想做:
獲取 Vim 6.x 版本並重新把你的工作合併進來。

運行測試時，如果其中一個失敗而不能生成 "test.out"，其餘的測試繼續運行。如果有
內存溢出的情況，這麼做會有幫助。

編譯時定義 EXITFREE 並且帶上 ccmalloc 庫可來檢測內存洩漏。有些內存總是報告為洩
漏，例如 X11 庫函數分配的和 alloc_cmdbuff() 分配用於保存 ":quit" 命令的內存。

打印代碼移到 src/hardcopy.c。

main() 的一些代碼移到獨立的若干函數，這使得操作更清晰。這些函數也使用結構來避
免過多的參數。

unix_expandpath() 移到 misc1.c，這使得 os_mac.c 也可以使用它而無須複製代碼。

--- Mac ---

"make" 現在建立 Vim.app 目錄，而 "make install" 把它複製到最終的目標位置。
(Raf)

運行時目錄不直接放在 Vim.app，而放在 Vim.app/Contents/Resources/vim，這樣做遵
從了 Mac 的規範。

編譯時可以不用任何修改就加入 Motif、Athena 或 GTK 支持，而且仍然可用 MacRoman
轉換。加入 os_mac_conv.c 文件。

運行 "make install" 時，像 Unix 那樣安裝運行時文件，以免複製過多文件。
運行 "make" 時建立到運行時文件的鏈接，以免遞歸複製需要太多時間。

configure 嘗試同時編譯 Intel 和 PowerPC 的 Vim。configure 參數 --with-mac-arch
可以改變這一點。

--- Win32 ---

調整 Make_mvc.mak 文件，使它可用於最新的 MS 編譯器，包括 Visual Studio 2005
的免費版本。(George Reilly)

INSTALLpc.txt 進行更新，以包含最近的改變。(George Reilly)

現在用免費的 Visual C++ Toolkit 2003 和其它免費 SDK 工具生成發佈的可執行文件。
加入 msvcsetup.bat，提供這方面的支持。

也生成 .pdb 文件，可用於生成 MS-Windows 上有用的崩潰報告。(George Reilly)

==============================================================================
漏 洞 修 正						*bug-fixes-7*

When using PostScript printing on MS-DOS the default 'printexpr' used "lpr"
instead of "copy".  When 'printdevice' was empty the copy command did not
work.  Use "LPT1" then.

The GTK font dialog uses a font size zero when the font name doesn't include a
size.  Use a default size of 10.

This example in the documentation didn't work:
    :e `=foo . ".c" `
Skip over the expression in `=expr` when looking for comments, |, % and #.

When ":helpgrep" doesn't find anything there is no error message.

"L" and "H" did not take closed folds into account.

Win32: The "-P title" argument stopped at the first title that matched, even
when it doesn't support MDI.

Mac GUI: CTRL-^ and CTRL-@ did not work.

"2daw" on "word." at the end of a line didn't include the preceding white
space.

Win32: Using FindExecutable() doesn't work to find a program.  Use
SearchPath() instead.  For executable() use $PATHEXT when the program searched
for doesn't have an extension.

When 'virtualedit' is set, moving the cursor up after appending a character
may move it to a different column.  Was caused by auto-formatting moving the
cursor and not putting it back where it was.

When indent was added automatically and then moving the cursor, the indent was
not deleted (like when pressing ESC).  The "I" flag in 'cpoptions' can be used
to make it work the old way.

When opening a command-line window, 'textwidth' gets set to 78 by the Vim
filetype plugin.  Reset 'textwidth' to 0 to avoid lines are broken.

After using cursor(line, col) moving up/down doesn't keep the same column.

Win32: Borland C before 5.5 requires using ".u." for LowPart and HighPart
fields. (Walter Briscoe)

On Sinix SYS_NMLN isn't always defined.  Define it ourselves. (Cristiano De
Michele)

Printing with PostScript may keep the printer waiting for more.  Append a
CTRL-D to the printer output. (Mike Williams)

When converting a string with a hex or octal number the leading '-' was
ignored.  ":echo '-05' + 0" resulted in 5 instead of -5.

Using "@:" to repeat a command line didn't work when it contains control
characters.  Also remove "'<,'>" when in Visual mode to avoid that it appears
twice.

When using file completion for a user command, it would not expand environment
variables like for a regular command with a file argument.

'cindent': When the argument of a #define looks like a C++ class the next line
is indented too much.

When 'comments' includes multi-byte characters inserting the middle part and
alignment may go wrong.  'cindent' also suffers from this for right-aligned
items.

Win32: when 'encoding' is set to "utf-8" getenv() still returns strings in the
active codepage.  Convert to utf-8.  Also for $HOME.

The default for 'helplang' was "zh" for both "zh_cn" and "zh_tw".  Now use
"cn" or "tw" as intended.

When 'bin' is set and 'eol' is not set then line2byte() added the line break
after the last line while it's not there.

Using foldlevel() in a WinEnter autocommand may not work.  Noticed when
resizing the GUI shell upon startup.

Python: Using buffer.append(f.readlines()) didn't work.  Allow appending a
string with a trailing newline.  The newline is ignored.

When using the ":saveas f2" command for buffer "f1", the Buffers menu would
contain "f2" twice, one of them leading to "f1".  Also trigger the BufFilePre
and BufFilePost events for the alternate buffer that gets the old name.

strridx() did not work well when the needle is empty. (Ciaran McCreesh)

GTK: Avoid a potential hang in gui_mch_wait_for_chars() when input arrives
just before it is invoked

VMS: Occasionally CR characters were inserted in the file.  Expansion of
environment variables was not correct. (Zoltan Arpadffy)

UTF-8: When 'delcombine' is set "dw" only deleted the last combining character
from the first character of the word.

When using ":sball" in an autocommand only the filetype in one buffer was
detected.  Reset did_filetype in enter_buffer().

When using ":argdo" and the window already was at the first argument index,
but not actually editing it, the current buffer would be used instead.

When ":next dir/*" includes many matches, adding the names to the argument
list may take an awful lot of time and can't be interrupted.  Allow
interrupting this.

When editing a file that was already loaded in a buffer, modelines were not
used.  Now window-local options in the modeline are set.  Buffer-local options
and global options remain unmodified.

Win32: When 'encoding' is set to "utf-8" in the vimrc file, files from the
command line with non-ASCII characters are not used correctly.  Recode the
file names when 'encoding' is set, using the Unicode command line.

Win32 console: When the default for 'encoding' ends up to be "latin1", the
default value of 'isprint' was wrong.

When an error message is given while waiting for a character (e.g., when an
xterm reports the number of colors), the hit-enter prompt overwrote the last
line.  Don't reset msg_didout in normal_cmd() for K_IGNORE.

Mac GUI: Shift-Tab didn't work.

When defining tooltip text, don't translate terminal codes, since it's not
going to be used like a command.

GTK 2: Check the tooltip text for valid utf-8 characters to avoid getting a
GTK error.  Invalid characters may appear when 'encoding' is changed.

GTK 2: Add a safety check for invalid utf-8 sequences, they can crash pango.

Win32: When 'encoding' is changed while starting up, use the Unicode command
line to convert the file arguments to 'encoding'.  Both for the GUI and the
console version.

Win32 GUI: latin9 text (iso-8859-15) was not displayed correctly, because
there is no codepage for latin9.  Do our own conversion from latin9 to UCS2.

When two versions of GTK+ 2 are installed it was possible to use the header
files from one and the library from the other.  Use GTK_LIBDIR to put the
directory for the library early in the link flags.

With the GUI find/replace dialog a replace only worked if the pattern was
literal text.  Now it works for any pattern.

When 'equalalways' is set and 'eadirection' is "hor", ":quit" would still
cause equalizing window heights in the vertical direction.

When ":emenu" is used in a startup script the command was put in the typeahead
buffer, causing a prompt for the crypt key to be messed up.

Mac OS/X: The default for 'isprint' included characters 128-160, causes
problems for Terminal.app.

When a syntax item with "containedin" is used, it may match in the start or
end of a region with a matchgroup, while this doesn't happen for a "contains"
argument.

When a transparent syntax items matches in another item where the highlighting
has already stopped (because of a he= argument), the highlighting would come
back.

When cscope is used to set the quickfix error list, it didn't get set if there
was only one match. (Sergey Khorev)

When 'confirm' is set and using ":bdel" in a modified buffer, then selecting
"cancel", would still give an error message.

The PopUp menu items that started Visual mode didn't work when not in Normal
mode.  Switching between selecting a word and a line was not possible.

Win32: The keypad decimal point always resulted in a '.', while on some
keyboards it's a ','.  Use MapVirtualKey(VK_DECIMAL, 2).

Removed unused function DisplayCompStringOpaque() from gui_w32.c

In Visual mode there is not always an indication whether the line break is
selected or not.  Highlight the character after the line when the line break
is included, e.g., after "v$o".

GTK: The <F10> key can't be mapped, it selects the menu.  Disable that with a
GTK setting and do select the menu when <F10> isn't mapped. (David Necas)

After "Y" '[ and '] were not at start/end of the yanked text.

When a telnet connection is dropped Vim preserves files and exits.  While
doing that a SIGHUP may arrive and disturbe us, thus ignore it. (Scott
Anderson)  Also postpone SIGHUP, SIGQUIT and SIGTERM until it's safe to
handle.  Added handle_signal().

When completing a file name on the command line backslashes are required for
white space.  Was only done for a space, not for a Tab.

When configure could not find a terminal library, compiling continued for a
long time before reporting the problem.  Added a configure check for tgetent()
being found in a library.

When the cursor is on the first char of the last line a ":g/pat/s///" command
may cause the cursor to be displayed below the text.

Win32: Editing a file with non-ASCII characters doesn't work when 'encoding'
is "utf-8".  use _wfullpath() instead of _fullpath(). (Yu-sung Moon)

When recovering the 'fileformat' and 'fileencoding' were taken from the
original file instead of from the swapfile.  When the file didn't exist, was
empty or the option was changed (e.g., with ":e ++fenc=cp123 file") it could
be wrong.  Now store 'fileformat' and 'fileencoding' in the swapfile and use
the values when recovering.

":bufdo g/something/p" overwrites each last printed text line with the file
message for the next buffer.  Temporarily clear 'shortmess' to avoid that.

Win32: Cannot edit a file starting with # with --remote.  Do escape % and #
when building the ":drop" command.

A comment or | just after an expression-backtick argument was not recognized.
E.g. in :e `="foo"`"comment.

"(" does not stop at an empty sentence (single dot and white space) while ")"
does.  Also breaks "das" on that dot.

When doing "yy" with the cursor on a TAB the ruler could be wrong and "k"
moved the cursor to another column.

When 'commentstring' is '"%s' and there is a double quote in the line a double
quote before the fold marker isn't removed in the text displayed for a  closed
fold.

In Visual mode, when 'bin' and 'eol' set, g CTRL-G counted the last line
break, resulting in "selected 202 of 201 bytes".

Motif: fonts were not used for dialog components. (Marcin Dalecki)

Motif: After using a toolbar button the keyboard focus would be on the toolbar
(Lesstif problem). (Marcin Dalecki)

When using "y<C-V>`x" where mark x is in the first column, the last line was
not included.

Not all test scripts work properly on MS-Windows when checked out from CVS.
Use a Vim command to fix all fileformats to dos before executing the tests.

When using ":new" and the file fits in the window, lines could still be above
the window.  Now remove empty lines instead of keeping the relative position.

Cmdline completion didn't work after ":let var1 var<Tab>".

When using ":startinsert" or ":startreplace" when already in Insert mode
(possible when using CTRL-R =), pressing Esc would directly restart Insert
mode. (Peter Winters)

"2daw" didn't work at end of file if the last word is a single character.

Completion for ":next a'<Tab>" put a backslash before single quote, but it was
not removed when editing a file.  Now halve backslashes in save_patterns().
Also fix expanding a file name with the shell that contains "\'".

When doing "1,6d|put" only "fewer lines" was reported.  Now a following "more
lines" overwrites the message.

Configure could not handle "-Dfoo=long\ long" in the TCL config output.

When searching backwards, using a pattern that matches a newline and uses \zs
after that, didn't find a match.  Could also get a hang or end up in the right
column in the wrong line.

When $LANG is "sl" for slovenian, the slovak menu was used, since "slovak"
starts with "sl".

When 'paste' is set in the GUI the Paste toolbar button doesn't work.  Clear
'paste' when starting the GUI.

A message about a wrong viminfo line included the trailing NL.

When 'paste' is set in the GUI the toolbar button doesn't work in Insert mode.
Use ":exe" in menu.vim to avoid duplicating the commands, instead of using a
mapping.

Treat "mlterm" as an xterm-like terminal. (Seiichi Sato)

":z.4" and ":z=4" didn't work Vi compatible.

When sourcing a file, editing it and sourcing it again, it could appear twice
in ":scriptnames" and get a new <SID>, because the inode has changed.

When $SHELL is set but empty the 'shell' option would be empty.  Don't use an
empty $SHELL value.

A command "w! file" in .vimrc or $EXINIT didn't work.  Now it writes an empty
file.

When a CTRL-F command at the end of the file failed, the cursor was still
moved to the start of the line.  Now it remains where it is.

When using ":s" or "&" to repeat the last substitute and "$" was used to put
the cursor in the last column, put the cursor in the last column again.  This
is Vi compatible.

Vim is not fully POSIX compliant but sticks with traditional Vi behavior.
Added a few flags in 'cpoptions' to behave the POSIX way when wanted.  The
$VIM_POSIX environment variable is checked to set the default.

Appending to a register didn't insert a line break like Vi.  Added the '>'
flag to 'cpoptions' for this.

Using "I" in a line with only blanks appended to the line.  This is not Vi
compatible.  Added the 'H' flag in 'coptions' for this.

When joining multiple lines the cursor would be at the last joint, but Vi
leaves it at the position where "J" would put it.  Added the 'q' flag in
'cpoptions' for this.

Autoindent didn't work for ":insert" and ":append".

Using ":append" in an empty buffer kept the dummy line.  Now it's deleted to
be Vi compatible.

When reading commands from a file and stdout goes to a terminal, would still
request the xterm version.  Vim can't read it, thus the output went to the
shell and caused trouble there.

When redirecting to a register with an invalid name the redirection would
still be done (after an error message).  Now reset "redir_reg". (Yegappan
Lakshmanan)

It was not possible to use a NL after a backslash in Ex mode.  This is
sometimes used to feed multiple lines to a shell command.

When 'cmdheight' is set to 2 in .vimrc and the GUI uses the number of lines
from the terminal we actually get 3 lines for the cmdline in gvim.

When setting $HOME allocated memory would leak.

Win32: bold characters may sometimes write in another character cell.  Use
unicodepdy[] as for UTF-8. (Taro Muraoka)

":w fname" didn't work for files with 'buftype' set to "nofile".

The method used to locate user commands for completion differed from when they
are executed.  Ambiguous command names were not completed properly.

Incremental search may cause a crash when there is a custom statusline that
indirectly invokes ":normal".

Diff mode failed when $DIFF_OPTIONS was set in the environment.  Unset it
before invoking "diff".

Completion didn't work after ":argdo", ":windo" and ":bufdo".  Also for ":set
&l:opt" and ":set &g:opt". (Peter Winters)

When setting 'ttymouse' to "dec" in an xterm that supports the DEC mouse
locator it doesn't work.  Now switch off the mouse before selecting another
mouse model.

When the CursorHold event is triggered and the commands peek for typed
characters the typeahead buffer may be messed up, e.g., when a mouse-up event
is received.  Avoid invoking the autocommands from the function waiting for a
character, let it put K_CURSORHOLD in the input buffer.

Removed the "COUNT" flag from ":argadd", to avoid ":argadd 1*" to be used like
":1argadd *".  Same for ":argdelete" and ":argedit".

Avoid that $LANG is used for the menus when LC_MESSAGES is "en_US".

Added backslashes before dashes in the vim.1 manual page to make the appear as
real dashes. (Pierr Habouzit)

Where "gq" left the cursor depended on the value of 'formatprg'.  Now "gq"
always leaves the cursor at the last line of the formatted text.

When editing a compressed file, such as "changelog.Debian.gz" file, filetype
detection may try to check the contents of the file while it's still
compressed.  Skip setting 'filetype' for compressed files until they have been
decompressed.  Required for patterns that end in a "*".

Starting with an argument "+cmd" or "-S script" causes the cursor the be moved
to the first line.  That breaks a BufReadPost autocommand that uses g`".
Don't move the cursor if it's somewhere past the first line.

"gg=G" while 'modifiable' is off was uninterruptible.

When 'encoding' is "sjis" inserting CTRL-V u d800 a few times causes a crash.
Don't insert a DBCS character with a NUL second byte.

In Insert mode CTRL-O <Home> didn't move the cursor.  Made "ins_at_eol" global
and reset it in nv_home().

Wildcard expansion failed: ":w /tmp/$$.`echo test`".  Don't put quotes around
spaces inside backticks.

After this sequence of commands: Y V p gv: the wrong line is selected.  Now
let "gv" select the text that was put, since the original text is deleted.
This should be the most useful thing to do.

":sleep 100u" sleeps for 100 seconds, not 100 usec as one might expect.  Give
an error message when the argument isn't recognized.

In gui_mch_draw_string() in gui_w32.c "unibuflen" wasn't static, resulting in
reallocating the buffer every time. (Alexei Alexandrov)

When using a Python "atexit" function it was not invoked when Vim exits.  Now
call Py_Finalize() for that. (Ugo Di Girolamo)
This breaks the thread stuff though, fixed by Ugo.

GTK GUI: using a .vimrc with "set cmdheight=2 lines=43" and ":split" right
after startup, the window layout is messed up. (Michael Schaap)  Added
win_new_shellsize() call in gui_init() to fix the topframe size.

Trick to get ...MOUSE_NM not used when there are vertical splits.  Now pass
column -1 for the left most window and add MOUSE_COLOFF for others.  Limits
mouse column to 10000.

searchpair() may hang when the end pattern has "\zs" at the end.  Check that
we find the same position again and advance one character.

When in diff mode and making a change that causes the "changed" highlighting
to disappear or reappear, it was still highlighted in another window.

When a ":next" command fails because the user selects "Abort" at the ATTENTION
prompt the argument index was advanced anyway.

When "~" is in 'iskeyword' the "gd" doesn't work, it's used for the previous
substitute pattern.  Put "\V" in the pattern to avoid that.

Use of sprintf() sometimes didn't check properly for buffer overflow.  Also
when using smsg().  Included code for snprintf() to avoid having to do size
checks where invoking them

":help \=<Tab>" didn't find "sub-replace-\=".  Wild menu for help tags didn't
show backslashes.  ":he :s\=" didn't work.

When reading an errorfile "~/" in a file name was not expanded.

GTK GUI: When adding a scrollbar (e.g. when using ":vsplit") in a script or
removing it the window size may change.  GTK sends us resize events when we
change the window size ourselves, but they may come at an unexpected moment.
Peek for a character to get any window resize events and fix 'columns' and
'lines' to undo this.

When using the GTK plug mechanism, resizing and focus was not working
properly. (Neil Bird)

After deleting files from the argument list a session file generated with
":mksession" may contain invalid ":next" commands.

When 'shortmess' is empty and 'keymap' set to accents, in Insert mode CTRL-N
may cause the hit-enter prompt.  Typing 'a then didn't result in the accented
character.  Put the character typed at the prompt back in the typeahead buffer
so that mapping is done in the right mode.

setbufvar() and setwinvar() did not give error messages.

It was possible to set a variable with an illegal name, e.g. with setbufvar().
It was possible to define a function with illegal name, e.t. ":func F{-1}()"

CTRL-W F and "gf" didn't use the same method to get the file name.

When reporting a conversion error the line number of the last error could be
given.  Now report the first encountered error.

When using ":e ++enc=name file" and iconv() was used for conversion an error
caused a fall-back to no conversion.  Now replace a character with '?' and
continue.

When opening a new buffer the local value of 'bomb' was not initialized from
the global value.

Win32: When using the "Edit with Vim" entry the file name was limited to about
200 characters.

When using command line completion for ":e *foo" and the file "+foo" exists
the resulting command ":e +foo" doesn't work.  Now insert a backslash: ":e
\+foo".

When the translation of "-- More --" was not 10 characters long the following
message would be in the wrong position.

At the more-prompt the last character in the last line wasn't drawn.

When deleting non-existing text while 'virtualedit' is set the '[ and '] marks
were not set.

Win32: Could not use "**/" in 'path', it had to be "**\".

The search pattern "\n" did not match at the end of the last line.

Searching for a pattern backwards, starting on the NUL at the end of the line
and 'encoding' is "utf-8" would match the pattern just before it incorrectly.
Affected searchpair('/\*', '', '\*/').

For the Find/Replace dialog it was possible that not finding the text resulted
in an error message while redrawing, which cleared the syntax highlighting
while it was being used, resulting in a crash.  Now don't clear syntax
highlighting, disable it with b_syn_error.

Win32: Combining UTF-8 characters were drawn on the previous character.
Could be noticed with a Thai font.

Output of ":function" could leave some of the typed text behind. (Yegappan
Lakshmanan)

When the command line history has only a few lines the command line window
would be opened with these lines above the first window line.

When using a command line window for search strings ":qa" would result in
searching for "qa" instead of quitting all windows.

GUI: When scrolling with the scrollbar and there is a line that doesn't fit
redrawing may fail.  Make sure w_skipcol is valid before redrawing.

Limit the values of 'columns' and 'lines' to avoid an overflow in Rows *
Columns.  Fixed bad effects when running out of memory (command line would be
reversed, ":qa!" resulted in ":!aq").

Motif: "gvim -iconic" opened the window anyway.  (David Harrison)

There is a tiny chance that a symlink gets created between checking for an
existing file and creating a file.  Use the O_NOFOLLOW for open() if it's
available.

In an empty line "ix<CTRL-O>0" moved the cursor to after the line instead of
sticking to the first column.

When using ":wq" and a BufWriteCmd autocmd uses inputsecret() the text was
echoed anyway.  Set terminal to raw mode in getcmdline().

Unix: ":w a;b~c" caused an error in expanding wildcards.

When appending to a file with ":w >>fname" in a buffer without a name, causing
the buffer to use "fname", the modified flag was reset.

When appending to the current file the "not edited" flag would be reset.
":w" would overwrite the file accidentally.

Unix: When filtering text with an external command Vim would still read input,
causing text typed for the command (e.g., a password) to be eaten and echoed.
Don't read input when the terminal is in cooked mode.

The Cygwin version of xxd used CR/LF line separators. (Corinna Vinschen)

Unix: When filtering text through a shell command some resulting text may be
dropped.  Now after detecting that the child has exited try reading some more
of its output.

When inside input(), using "CTRL-R =" and the expression throws an exception
the command line was not abandoned but it wasn't used either.  Now abandon
typing the command line.

'delcombine' was also used in Visual and Select mode and for commands like
"cl".  That was illogical and has been disabled.

When recording while a CursorHold autocommand was defined special keys would
appear in the register.  Now the CursorHold event is not triggered while
recording.

Unix: the src/configure script used ${srcdir-.}, not all shells understand
that.  Use ${srcdir:-.} instead.

When editing file "a" which is a symlink to file "b" that doesn't exist,
writing file "a" to create "b" and then ":split b" resulted in two buffers on
the same file with two different swapfile names.  Now set the inode in the
buffer when creating a new file.

When 'esckeys' is not set don't send the xterm code to request the version
string, because it may cause trouble in Insert mode.

When evaluating an expression for CTRL-R = on the command line it was possible
to call a function that opens a new window, resulting in errors for
incremental search, and many other nasty things were possible.  Now use the
|textlock| to disallow changing the buffer or jumping to another window
to protect from unexpected behavior.  Same for CTRL-\ e.

"d(" deleted the character under the cursor, while the documentation specified
an exclusive motion.  Vi also doesn't delete the character under the cursor.

Shift-Insert in Insert mode could put the cursor before the last character
when it just fits in the window.  In coladvance() don't stop at the window
edge when filling with spaces and when in Insert mode.  In mswin.vim avoid
getting a beep from the "l" command.

Win32 GUI: When Alt-F4 is used to close the window and Cancel is selected in
the dialog then Vim would insert <M-F4> in the text.  Now it's ignored.

When ":silent! {cmd}" caused the swap file dialog, which isn't displayed,
there would still be a hit-enter prompt.

Requesting the termresponse (|t_RV|) early may cause problems with "-c"
arguments that invoke an external command or even "-c quit".  Postpone it
until after executing "-c" arguments.

When typing in Insert mode so that a new line is started, using CTRL-G u to
break undo and start a new change, then joining the lines with <BS> caused
undo info to be missing.  Now reset the insertion start point.

Syntax HL: When a region start match has a matchgroup and an offset that
happens to be after the end of the line then it continued in the next line and
stopped at the region end match, making the region continue after that.
Now check for the column being past the end of the line in syn_add_end_off().

When changing a file, setting 'swapfile' off and then on again, making another
change and killing Vim, then some blocks may be missing from the swapfile.
When 'swapfile' is switched back on mark all blocks in the swapfile as dirty.
Added mf_set_dirty().

Expanding wildcards in a command like ":e aap;<>!" didn't work.  Put
backslashes before characters that are special to the shell. (Adri Verhoef)

A CursorHold autocommand would cause a message to be cleared.  Don't show the
special key for the event for 'showcmd'.

When expanding a file name for a shell command, as in "!cmd foo<Tab>" or ":r
!cmd foo<Tab>" also escape characters that are special for the shell:
"!;&()<>".

When the name of the buffer was set by a ":r fname" command |cpo-f| no
autocommands were triggered to notify about the change in the buffer list.

In the quickfix buffer 'bufhidden' was set to "delete", which caused closing
the quickfix window to leave an unlisted "No Name" buffer behind every time.

Win32: when using two screens of different size, setting 'lines' to a large
value didn't fill the whole screen. (SungHyun Nam)

Win32 installer: The generated _vimrc contained an absolute path to diff.exe.
After upgrading it becomes invalid.  Now use $VIMRUNTIME instead.

The command line was cleared to often when 'showmode' was set and ":silent
normal vy" was used.  Don't clear the command line unless the mode was
actually displayed.  Added the "mode_displayed" variable.

The "load session" toolbar item could not handle a space or other special
characters in v:this_session.

":set sta ts=8 sw=4 sts=2" deleted 4 spaces halfway a line instead of 2.

In a multi-byte file the foldmarker could be recognized in the trail byte.
(Taro Muraoka)

Pasting with CTRL-V and menu didn't work properly when some commands are
mapped.  Use ":normal!" instead of ":normal". (Tony Apuzzo)

Crashed when expanding a file name argument in backticks.

In some situations the menu and scrollbar didn't work, when the value contains
a CSI byte. (Yukihiro Nakadaira)

GTK GUI: When drawing the balloon focus changes and we might get a key release
event that removed the balloon again.  Ignore the key release event.

'titleold' was included in ":mkexrc" and ":mksession" files.

":set background&" didn't use the same logic as was used when starting up.

When "umask" is set such that nothing is writable then the viminfo file would
be written without write permission. (Julian Bridle)

Motif: In diff mode dragging one scrollbar didn't update the scrollbar of the
other diff'ed window.

When editing in an xterm with a different number of colors than expected the
screen would be cleared and redrawn, causing the message about the edited file
to be cleared.  Now set "keep_msg" to redraw the last message.

For a color terminal: When the Normal HL uses bold, possibly to make the color
lighter, and another HL group specifies a color it might become light as well.
Now reset bold if a HL group doesn't specify bold itself.

When using 256 color xterm the color 255 would show up as color 0.  Use a
short instead of a char to store the color number.

ml_get errors when searching for "\n\zs" in an empty file.

When selecting a block and using "$" to select until the end of every line and
not highlighting the character under the cursor the first character of the
block could be unhighlighted.

When counting words for the Visual block area and using "$" to select until
the end of every line only up to the length of the last line was counted.

"dip" in trailing empty lines left one empty line behind.

The script ID was only remembered globally for each option. When a buffer- or
window-local option was set the same "last set" location was changed for all
buffers and windows.  Now remember the script ID for each local option
separately.

GUI: The "Replace All" button didn't handle backslashes in the replacement in
the same way as "Replace".  Escape backslashes so that they are taken
literally.

When using Select mode from Insert mode and typing a key, causing lines to be
deleted and a message displayed, delayed the effect of inserting the key.
Now overwrite the message without delay.

When 'whichwrap' includes "l" then "dl" and "yl" on a single letter line
worked differently.  Now recognize all operators when using "l" at the end of
a line.

GTK GUI: when the font selector returned a font name with a comma in it then
it would be handled like two font names.  Now put a backslash before the
comma.

MS-DOS, Win32: When 'encoding' defaults to "latin1" then the value for
'iskeyword' was still for CPxxx.  And when 'nocompatible' was set 'isprint'
would also be the wrong value.

When a command was defined not to take arguments and no '|' no warning message
would be given for using a '|'.  Also with ":loadkeymap".

Motif: When using a fontset and 'encoding' is "utf-8" and sizeof(wchar_t) !=
sizeof(XChar2b) then display was wrong. (Yukihiro Nakadaira)

":all" always set the current window to the first window, even when it
contains a buffer that is not in the argument list (can't be closed because it
is modified).  Now go to the window that has the first item of the argument
list.

GUI: To avoid left-over pixels from bold text all characters after a character
with special attributes were redrawn.  Now only do this for characters that
actually are bold.  Speeds up displaying considerably.

When only highlighting changes and the text is scrolled at the same time
everything is redraw instead of using a scroll and updating the changed text.
E.g., when using ":match" to highlight a paren that the cursor landed on.
Added SOME_VALID: Redraw the whole window but also try to scroll to minimize
redrawing.

Win32: When using Korean IME making it active didn't work properly. (Moon,
Yu-sung, 2005 March 21)

Ruby interface: when inserting/deleting lines display wasn't updated. (Ryan
Paul)

--- fixes since Vim 7.0b ---

Getting the GCC version in configure didn't work with Solaris sed.  First
strip any "darwin." and then get the version number.

The "autoload" directory was missing from the self-installing executable for
MS-Windows.

The MS-Windows install program would find "vimtutor.bat" in the install
directory.  After changing to "c:" also change to "\" to avoid looking in the
install directory.

To make the 16 bit DOS version compile exclude not used highlight
initializations and build a tiny instead of small version.

finddir() and findfile() accept a negative count and return a List then.

The Python indent file contained a few debugging statements, removed.

Expanding {} for a function name, resulting in a name starting with "s:" was
not handled correctly.

Spelling: renamed COMPOUNDMAX to COMPOUNDWORDMAX.  Added several items to be
able to handle the new Hungarian dictionary.

Mac: Default to building for the current platform only, that is much faster
than building a universal binary.  Also, using Perl/Python/etc. only works for
the current platform.

The time on undo messages disappeared for someone.  Using %T for strftime()
apparently doesn't work everywhere.  Use %H:%M:%S instead.

Typing BS at the "z=" prompt removed the prompt.

--- fixes and changes since Vim 7.0c ---

When jumping to another tab page the Vim window size was always set, even when
nothing in the layout changed.

Win32 GUI tab pages line wasn't always enabled.  Do a proper check for the
compiler version.

Win32: When switching between tab pages the Vim window was moved when part of
it was outside of the screen.  Now only do that in the direction of a size
change.

Win32: added menu to GUI tab pages line. (Yegappan Lakshmanan)

Mac: Added document icons. (Benji Fisher)

Insert mode completion: Using Enter to accept the current match causes
confusion.  Use CTRL-Y instead.  Also, use CTRL-E to go back to the typed
text.

GUI: When there are left and right scrollbars, ":tabedit" kept them instead of
using the one that isn't needed.

Using "gP" to replace al the text could leave the cursor below the last line,
causing ml_get errors.

When 'cursorline' is set don't use the highlighting when Visual mode is
active, otherwise it's difficult to see the selected area.

The matchparen plugin restricts the search to 100 lines, to avoid a long delay
when there are closed folds.

Sometimes using CTRL-X s to list spelling suggestions used text from another
line.

Win32: Set the default for 'isprint' back to the wrong default "@,~-255",
because many people use Windows-1252 while 'encoding' is "latin1".

GTK: Added a workaround for gvim crashing when used over an untrusted ssh
link, caused by GTK doing something nasty. (Ed Catmur)

Win32: The font used for the tab page labels is too big.  Use the system menu
font. (George Reilly)

Win32: Adjusting the window position and size to keep it on the screen didn't
work properly when the taskbar is on the left or top of the screen.

The installman.sh and installml.sh scripts use ${10}, that didn't work with
old shells.  And use "test -f" instead of "test -e".

Win32: When 'encoding' was set in the vimrc then a directory argument for diff
mode didn't work.

GUI: at the inputlist() prompt the cursorshape was adjusted as if the windows
were still at their old position.

The parenmatch plugin didn't remember the highlighting per window.

Using ":bd" for a buffer that's the current window in another tab page caused
a crash.

For a new tab page the 'scroll' option wasn't set to a good default.

Using an end offset for a search "/pat/e" didn't work properly for multi-byte
text. (Yukihiro Nakadaira)

":s/\n/,/" doubled the text when used on the last line.

When "search" is in 'foldopen' "[s" and "]s" now open folds.

When using a numbered function "dict" can be omitted, but "self" didn't work
then.  Always add FC_DICT to the function flags when it's part of a
dictionary.

When "--remote-tab" executes locally it left an empty tab page.

"gvim -u NONE", ":set cursorcolumn", "C" in the second line didn't update
text.  Do update further lines even though the "$" is displayed.

VMS: Support GTK better, also enable +clientserver. (Zoltan Arpadffy)

When highlighting of statusline or tabline is changed there was no redraw to
show the effect.

Mac: Added "CFBundleIdentifier" to infplist.xml.

Added tabpage-local variables t:var.

Win32: Added double-click in tab pages line creates new tab. (Yegappan
Lakshmanan)

Motif: Added GUI tab pages line. (Yegappan Lakshmanan)

Fixed crash when 'lines' was set to 1000 in a modeline.

When init_spellfile() finds a writable directory in 'runtimepath' but it
doesn't contain a "spell" directory, create one.

Win32: executable() also finds "xxd" in the directory where Vim was started,
but "!xxd" doesn't work.  Append the Vim starting directory to $PATH.

The tab page labels are shortened, directory names are reduced to a single
letter by default.  Added the pathshorten() function to allow a user to do the
same.

":saveas" now resets 'readonly' if the file was successfully written.

Set $MYVIMRC file to the first found .vimrc file.
Set $MYGVIMRC file to the first found .gvimrc file.
Added menu item "Startup Settings" that edits the $MYVIMRC file

Added matcharg().

Error message E745 appeared twice.  Renamed one to E786.

Fixed crash when using "au BufRead * Sexplore" and doing ":help".  Was wiping
out a buffer that's still in a window.

":hardcopy" resulted in an error message when 'encoding' is "utf-8" and
'printencoding' is empty.  Now it assumes latin1. (Mike Williams)

The check for the toolbar feature for Motif, depending on certain included
files, wasn't detailed enough, causing building to fail in gui_xmebw.c.

Using CTRL-E in Insert mode completion after CTRL-P inserted the first match
instead of the original text.

When displaying a UTF-8 character with a zero lower byte Vim might think the
previous character is double-wide.

The "nbsp" item of 'listchars' didn't work when 'encoding' was utf-8.

Motif: when Xm/xpm.h is missing gui_xmebw.c would not compile.
HAVE_XM_UNHIGHLIGHTT_H was missing a T.

Mac: Moved the .icns files into src/os_mac_rsrc, so that they can all be
copied at once.  Adjusted the Info.plist file for three icons.

When Visual mode is active while switching to another tabpage could get ml_get
errors.

When 'list' is set, 'nowrap' the $ in the first column caused 'cursorcolumn'
to move to the right.

When a line wraps, 'cursorcolumn' was never displayed past the end of the
line.

'autochdir' was only available when compiled with NetBeans and GUI.  Now it's
a separate feature, also available in the "big" version.

Added CTRL-W gf: open file under cursor in new tab page.

When using the menu in the tab pages line, "New Tab" opens the new tab before
where the click was.  Beyond the labels the new tab appears at the end instead
of after the current tab page.

Inside a mapping with an expression getchar() could not be used.

When vgetc is used recursively vgetc_busy protects it from being used
recursively.  But after a ":normal" command the protection was reset.

":s/a/b/n" didn't work when 'modifiable' was off.

When $VIMRUNTIME includes a multi-byte character then rgb.txt could not be
found. (Yukihiro Nakadaira)

":mkspell" didn't work correctly for non-ASCII affix flags when conversion is
needed on the spell file.

glob('/dir/\$ABC/*') didn't work.

When using several tab pages and changing 'cmdheight' the display could become
messed up.  Now store the value of 'cmdheight' separately for each tab page.

The user of the Enter key while the popup menu is visible was still confusing.
Now use Enter to select the match after using a cursor key.

Added "usetab" to 'switchbuf'.


--- fixes and changes since Vim 7.0d ---

Added CTRL-W T: move a window to a new tab page.

Using CTRL-X s in Insert mode to complete spelling suggestions and using BS
deleted characters before the bad word.

A few small fixes for the VMS makefile. (Zoltan Arpadffy)

With a window of 91 lines 45 cols, ":vsp" scrolled the window.  Copy w_wrow
when splitting a window and skip setting the height when it's already at the
right value.

Using <silent> in a mapping with a shell command and the GUI caused redraw
to use wrong attributes.

Win32: Using MSVC 4.1 for install.exe resulted in the start menu items to be
created in the administrator directory instead of "All Users".  Define the
CSIDL_ items if they are missing.

Motif: The GUI tabline did not use the space above the right scrollbar.  Work
around a bug in the Motif library. (Yegappan Lakshmanan)

The extra files for XML Omni completion are now also installed.
|xml-omni-datafile|

GTK GUI: when 'm' is missing from 'guioptions' during startup and pressing
<F10> GTK produced error messages.  Now do create the menu but disable it just
after the first gui_mch_update().

":mkspell" doesn't work well with the Hungarian dictionary from the Hunspell
project.  Back to the Myspell dictionary.

In help files hide the | used around tags.

Renamed pycomplete to pythoncomplete.

Added "tabpages" to 'sessionoptions'.

When 'guitablabel' is set the effect wasn't visible right away.

Fixed a few 'cindent' errors.

When completing menu names, e.g., after ":emenu", don't sort the entries but
keep them in the original order.

Fixed a crash when editing a directory in diff mode.  Don't trigger
autocommands when executing the diff command.

Getting a keystroke could get stuck if 'encoding' is a multi-byte encoding and
typing a special key.

When 'foldignore' is set the folds were not updated right away.

When a list is indexed with [a : b] and b was greater than the length an error
message was given.  Now silently truncate the result.

When using BS during Insert mode completion go back to the original text, so
that CTRL-N selects the first matching entry.

Added the 'M' flag to 'cinoptions'.

Win32: Make the "gvim --help" window appear in the middle of the screen
instead of at an arbitrary position. (Randall W. Morris)

Added gettabwinvar() and settabwinvar().

Command line completion: pressing <Tab> after ":e /usr/*" expands the whole
tree, because it becomes ":e /usr/**".  Don't add a star if there already is
one.

Added grey10 to grey90 to all GUIs, so that they can all be used for
initializing highlighting.  Use grey40 for CursorColumn and CursorLine when
'background' is "dark".

When reading a file and using iconv for conversion, an incomplete byte
sequence at the end caused problems. (Yukihiro Nakadaira)


--- fixes and changes since Vim 7.0e ---

Default color for MatchParen when 'background' is "dark" is now DarkCyan.

":syn off" had to be used twice in a file that sets 'syntax' in a modeline.
(Michael Geddes)

When using ":vsp" or ":sp" the available space wasn't used equally between
windows. (Servatius Brandt)

Expanding <cWORD> on a trailing blank resulted in the first word in the line
if 'encoding' is a multi-byte encoding.

Spell checking: spellbadword() didn't see a missing capital in the first word
of a line.  Popup menu now only suggest the capitalized word when appropriate.

When using whole line completion CTRL-L moves through the matches but it
didn't work when at the original text.

When completion finds the longest match, don't go to the first match but stick
at the original text, so that CTRL-N selects the first one.

Recognize "zsh-beta" like "zsh" for setting the 'shellpipe' default. (James
Vega)

When using ":map <expr>" and the expression results in something with a
special byte (NUL or CSI) then it didn't work properly.  Now escape special
bytes.

The default Visual highlighting for a color xterm with 8 colors was a magenta
background, which made magenta text disappear.  Now use reverse in this
specific situation.

After completing the longest match "." didn't insert the same text.  Repeating
also didn't work correctly for multi-byte text.

When using Insert mode completion and BS the whole word that was completed
would result in all possible matches.  Now stop completion.  Also fixes that
for spell completion the previous word was deleted.

GTK: When 'encoding' is "latin1" and using non-ASCII characters in a file name
the tab page label was wrong and an error message would be given.

The taglist() function could hang on a tags line with a non-ASCII character.

Win32: When 'encoding' differs from the system encoding tab page labels with
non-ASCII characters looked wrong. (Yegappan Lakshmanan)

Motif: building failed when Xm/Notebook.h doesn't exist.  Added a configure
check, disable GUI tabline when it's missing.

Mac: When compiled without multi-byte feature the clipboard didn't work.

It was possible to switch to another tab page when the cmdline window is open.

Completion could hang when 'lines' is 6 and a preview window was opened.

Added CTRL-W gF: open file under cursor in new tab page and jump to the line
number following the file name.
Added 'guitabtooltip'.  Implemented for Win32 (Yegappan Lakshmanan).

Added "throw" to 'debug' option: throw an exception for error messages even
whey they would otherwise be ignored.

When 'keymap' is set and a line contains an invalid entry could get a "No
mapping found" warning instead of a proper error message.

Motif: default to using XpmAttributes instead of XpmAttributes_21.

A few more changes for 64 bit MS-Windows. (George Reilly)

Got ml_get errors when doing "o" and selecting in other window where there are
less lines shorter than the cursor position in the other window.  ins_mouse()
was using position in wrong window.

Win32 GUI: Crash when giving a lot of messages during startup.  Allocate twice
as much memory for the dialog template.

Fixed a few leaks and wrong pointer use reported by coverity.

When showing menus the mode character was sometimes wrong.

Added feedkeys(). (Yakov Lerner)

Made matchlist() always return all submatches.

Moved triggering QuickFixCmdPost to before jumping to the first location.

Mac: Added the 'macatsui' option as a temporary work around for text drawing
problems.

Line completion on "/**" gave error messages when scanning an unloaded buffer.

--- fixes and changes since Vim 7.0f ---

Win32: The height of the tab page labels is now adjusted to the font height.
(Yegappan Lakshmanan)

Win32: selecting the tab label was off by one. (Yegappan Lakshmanan)

Added tooltips for Motif and GTK tab page labels. (Yegappan Lakshmanan)

When 'encoding' is "utf-8" then ":help spell" would report an illegal byte and
the file was not converted from latin1 to utf-8.  Now retry with latin1 if
reading the file as utf-8 results in illegal bytes.

Escape the argument of feedkeys() before putting it in the typeahead buffer.
(Yukihiro Nakadaira)

Added the v:char variable for evaluating 'formatexpr'. (Yukihiro Nakadaira)

With 8 colors Search highlighting combined with Statement highlighted text
made the text disappear.

VMS: avoid warnings for redefining MAX and MIN. (Zoltan Arpadffy)

When 'virtualedit' includes "onemore", stopping Visual selection would still
move the cursor left.

Prevent that using CTRL-R = in Insert mode can start Visual mode.

Fixed a crash that occurred when in Insert mode with completion active and a
mapping caused edit() to be called recursively.

When using CTRL-O in Insert mode just after the last character while
'virtualedit' is "all", then typing CR moved the last character to the next
line.  Call coladvance() before starting the new line.

When using |:shell| ignore clicks on the tab page labels.  Also when using the
command line window.

When 'eventignore' is "all" then adding more to ignoring some events, e.g.,
for ":vimgrep", would actually trigger more events.

Win32: When a running Vim uses server name GVIM1 then "gvim --remote fname"
didn't find it.  When looking for a server name that doesn't end in a digit
and it is not found then use another server with that name and a number (just
like on Unix).

When using "double" in 'spellsuggest' when the language doesn't support sound
folding resulted in too many suggestions.

Win32: Dropping a shortcut on the Vim icon didn't edit the referred file like
editing it in another way would.  Use fname_expand() in buf_set_name() instead
of simply make the file name a full path.

Using feedkeys() could cause Vim to hang.

When closing another tab page from the tabline menu in Insert mode the tabline
was not updated right away.

The syntax menu didn't work in compatible mode.

After using ":tag id" twice with the same "id", ":ts" and then ":pop" a ":ts"
reported no matching tag.  Clear the cached tag name.

In Insert mode the matchparen plugin highlighted the wrong paren when there is
a string just next to a paren.

GTK: After opening a new tab page the text was sometimes not drawn correctly.
Flush output and catch up with events when updating the tab page labels.

In the GUI, using CTRL-W q to close the last window of a tab page could cause
a crash.

GTK: The tab pages line menu was not converted from 'encoding' to utf-8.

Typing a multi-byte character or a special key at the hit-enter prompt did not
work.

When 'virtualedit' contains "onemore" CTRL-O in Insert mode still moved the
cursor left when it was after the end of the line, even though it's allowed to
be there.

Added test for using tab pages.

towupper() and towlower() were not used, because of checking for
__STDC__ISO_10646__ instead of __STDC_ISO_10646__. (sertacyildiz)

For ":map <expr>" forbid changing the text, jumping to another buffer and
using ":normal" to avoid nasty side effects.

--- fixes and changes since Vim 7.0g ---

Compilation error on HP-UX, use of "dlerr" must be inside a #ifdef.
(Gary Johnson)

Report +reltime feature in ":version" output.

The tar and zip plugins detect failure to get the contents of the archive and
edit the file as-is.

When the result of 'guitablabel' is empty fall back to the default label.

Fixed crash when using ":insert" in a while loop and missing "endwhile".

"gt" and other commands could move to another window when |textlock| active
and when the command line window was open.

Spell checking a file with syntax highlighting and a bad word at the end of
the line is ignored could make "]s" hang.

Mac: inputdialog() didn't work when compiled with big features.

Interrupting ":vimgrep" while it is busy loading a file left a modified and
hidden buffer behind.  Use enter_cleanup() and leave_cleanup() around
wipe_buffer().

When making 'keymap' empty the b:keymap_name variable wasn't deleted.

Using CTRL-N that searches a long time, pressing space to interrupt the
searching and accept the first match, the popup menu was still displayed
briefly.

When setting the Vim window height with -geometry the 'window' option could be
at a value that makes CTRL-F behave differently.

When opening a quickfix window in two tabs they used different buffers,
causing redrawing problems later.  Now use the same buffer for all quickfix
windows. (Yegappan Lakshmanan)

When 'mousefocus' is set moving the mouse to the text tab pages line would
move focus to the first window.  Also, the mouse pointer would jump to the
active window.

In a session file, when an empty buffer is wiped out, do this silently.

When one window has the cursor on the last line and another window is resized
to make that window smaller, the cursor line could go below the displayed
lines.  In win_new_height() subtract one from the available space.
Also avoid that using "~" lines makes the window scroll down.

Mac: When sourcing the "macmap.vim" script and then finding a .vimrc file the
'cpo' option isn't set properly, because it was already set and restored.
Added the <special> argument to ":map", so that 'cpo' doesn't need to be
changed to be able to use <> notation.  Also do this for ":menu" for
consistency.

When using "/encoding=abc" in a spell word list, only "bc" was used.

When 'encoding' and 'printencoding' were both "utf-8" then ":hardcopy" didn't
work. (Mike Williams)

Mac: When building with "--disable-gui" the install directory would still be
"/Applications" and Vim.app would be installed.  Now install in /usr/local as
usual for a console application.

GUI: when doing completion and there is one match and still searching for
another, the cursor was displayed at the end of the line instead of after the
match.  Now show the cursor after the match while still searching for matches.

GUI: The mouse shape changed on the statusline even when 'mouse' was empty and
they can't be dragged.

GTK2: Selecting a button in the confirm() dialog with Tab or cursor keys and
hitting Enter didn't select that button.  Removed GTK 1 specific code. (Neil
Bird)

When evaluating 'balloonexpr' takes a long time it could be called
recursively, which could cause a crash.

exists() could not be used to detect whether ":2match" is supported.  Added a
check for it specifically.

GTK1: Tab page labels didn't work. (Yegappan Lakshmanan)

Insert mode completion: When finding matches use 'ignorecase', but when adding
matches to the list don't use it, so that all words with different case are
added, "word", "Word" and "WORD".

When 'cursorline' and 'hlsearch' are set and the search pattern is "x\n"
the rest of the line was highlighted as a match.

Cursor moved while evaluating 'balloonexpr' that invokes ":isearch" and
redirects the output.  Don't move the cursor to the command line if msg_silent
is set.

exists() ignored text after a function name and option name, which could
result in false positives.

exists() ignored characters after the recognized word, which can be wrong when
using a name with non-keyword characters.  Specifically, these calls no longer
allow characters after the name: exists('*funcname') exists('*funcname(...')
exists('&option') exists(':cmd') exists('g:name') exists('g:name[n]')
exists('g:name.n')

Trigger the TabEnter autocommand only after entering the current window of the
tab page, otherwise the commands are executed with an invalid current window.

Win32: When using two monitors and Vim is on the second monitor, changing the
width of the Vim window could make it jump to the first monitor.

When scrolling back at the more prompt and the quitting a line of text would
be left behind when 'cmdheight' is 2 or more.

Fixed a few things for Insert mode completion, especially when typing BS,
CTRL-N or a printable character while still searching for matches.


==============================================================================
7.1 版 本					*version-7.1* *version7.1*

本小節討論 7.0 和 7.1 版本之間的改進。

這是一個漏洞修正版。沒有什麼突出的新特性。


改動							*changed-7.1*
-------

vimrc_example.vim 裡，增加了 'mouse' 的設置。

帶 MZscheme 編譯時同時尋找 "plt" 子目錄下的頭文件。FreeBSD 用到那裡的文件。

Ruby 界面的模塊名現在叫做 "Vim" 而非 "VIM"。但為了反向兼容起見，保留 "VIM" 為
其別名。 (Tim Pope)


新增							*added-7.1*
-----

新語法文件:
	/var/log/messages (Yakov Lerner)
	Autohotkey (Nikolai Weibull)
	AutoIt v3 (Jared Breland)
	Bazaar commit file "bzr" (Dmitry Vasiliev)
	Cdrdao TOC (Nikolai Weibull)
	Cmusrc (Nikolai Weibull)
	Conary recipe (rPath Inc)
	Framescript (Nikolai Weibull)
	FreeBasic (Mark Manning)
	Hamster (David Fishburn)
	IBasic (Mark Manning)
	Initng (Elan Ruusamae)
	Ldapconf (Nikolai Weibull)
	Litestep (Nikolai Weibull)
	Privoxy actions file (Doug Kearns)
	Streaming Descriptors "sd" (Puria Nafisi Azizi)

新教程文件:
	捷克語 (Lubos Turek)
	匈牙利語 (Arpad Horvath)
	土耳其語 (Serkan kkk)
	希臘語教程的 utf-8 版本。
	俄語教程的 utf-8 版本。
	斯洛伐克語教程的 utf-8 版本。

新文件類型插件:
	Bst (Tim Pope)
	Cobol (Tim Pope)
	Fvwm (Gautam Iyer)
	Hamster (David Fishburn)
	Django HTML 模板 (Dave Hodder)

新縮進文件:
	Bst (Tim Pope)
	Cobol (Tim Pope)
	Hamster (David Fishburn)
	Django HTML template (Dave Hodder)
	Javascript
	JSP (David Fishburn)

新鍵盤映射表:
	保加利亞語 (Boyko Bantchev)
	蒙古語 (Natsagdorj Shagdar)
	馬爾代夫語 (Ibrahim Fayaz)
	越南語 (Samuel Thibault)

其它新運行時文件:
	Ada 支持文件。(Neil Bird, Martin Krischik)
	斯洛文尼亞語菜單翻譯 (Mojca Miklavec)
	Mono C# 編譯器插件 (Jarek Sobiecki)



修正							*fixed-7.1*
-----

Could not build the Win32s version.  Added a few structure definitions in
src/gui_w32.c


Patch 7.0.001
問題:       ":set spellsuggest+=10" does not work. (Suresh Govindachar)
解決方案:   Add P_COMMA to the 'spellsuggest' flags.
相關文件:   src/option.c

Patch 7.0.002
問題:       C omni completion has a problem with tags files with a path
	    containing "#" or "%".
解決方案:   Escape these characters. (Sebastian Baberowski)
相關文件:   runtime/autoload/ccomplete.vim

Patch 7.0.003
問題:       GUI: clicking in the lower part of a label in the tab pages line
	    while 'mousefocus' is set may warp the mouse pointer. (Robert
	    Webb)
解決方案:   Check for a negative mouse position.
相關文件:   src/gui.c

Patch 7.0.004
問題:       Compiler warning for debug_saved used before set. (Todd Blumer)
解決方案:   Remove the "else" for calling save_dbg_stuff().
相關文件:   src/ex_docmd.c

Patch 7.0.005 (extra)
問題:       Win32: The installer doesn't remove the "autoload" and "spell"
	    directories. (David Fishburn)
解決方案:   Add the directories to the list to be removed.
相關文件:   nsis/gvim.nsi

Patch 7.0.006
問題:       Mac: "make shadow" doesn't make a link for infplist.xml. (Axel
	    Kielhorn)
解決方案:   Make the link.
相關文件:   src/Makefile

Patch 7.0.007
問題:       AIX: compiling fails for message.c. (Ruediger Hornig)
解決方案:   Move the #if outside of memchr().
相關文件:   src/message.c

Patch 7.0.008
問題:       Can't call a function that uses both <SID> and {expr}. (Thomas)
解決方案:   Check both the expanded and unexpanded name for <SID>.
相關文件:   src/eval.c

Patch 7.0.009
問題:       ml_get errors with both 'sidescroll' and 'spell' set.
解決方案:   Use ml_get_buf() instead of ml_get(), get the line from the right
	    buffer, not the current one.
相關文件:   src/spell.c

Patch 7.0.010
問題:       The spellfile plugin required typing login name and password.
解決方案:   Use "anonymous" and "vim7user" by default.  No need to setup a
	    .netrc file.
相關文件:   runtime/autoload/spellfile.vim

Patch 7.0.011
問題:       Can't compile without the folding and with the eval feature.
解決方案:   Add an #ifdef. (Vallimar)
相關文件:   src/option.c

Patch 7.0.012
問題:       Using the matchparen plugin, moving the cursor in Insert mode to a
	    shorter line that ends in a brace, changes the preferred column
解決方案:   Use winsaveview()/winrestview() instead of getpos()/setpos().
相關文件:   runtime/plugin/matchparen.vim

Patch 7.0.013
問題:       Insert mode completion: using CTRL-L to add an extra character
	    also deselects the current match, making it impossible to use
	    CTRL-L a second time.
解決方案:   Keep the current match.  Also make CTRL-L work at the original
	    text, using the first displayed match.
相關文件:   src/edit.c

Patch 7.0.014
問題:       Compiling gui_xmebw.c fails on Dec Alpha Tru64. (Rolfe)
解決方案:   Disable some code for Motif 1.2 and older.
相關文件:   src/gui_xmebw.c

Patch 7.0.015
問題:       Athena: compilation problems with modern compiler.
解決方案:   Avoid type casts for lvalue. (Alexey Froloff)
相關文件:   src/gui_at_fs.c

Patch 7.0.016
問題:       Printing doesn't work for "dec-mcs" encoding.
解決方案:   Add "dec-mcs", "mac-roman" and "hp-roman8" to the list of
	    recognized 8-bit encodings. (Mike Williams)
相關文件:   src/mbyte.c

Patch 7.0.017 (after 7.0.014)
問題:       Linking gui_xmebw.c fails on Dec Alpha Tru64. (Rolfe)
解決方案:   Adjust defines for Motif 1.2 and older.
相關文件:   src/gui_xmebw.c

Patch 7.0.018
問題:       VMS: plugins are not loaded on startup.
解決方案:   Remove "**" from the path. (Zoltan Arpadffy)
相關文件:   src/main.c

Patch 7.0.019
問題:       Repeating "VjA789" may cause a crash. (James Vega)
解決方案:   Check the cursor column after moving it to another line.
相關文件:   src/ops.c

Patch 7.0.020
問題:       Crash when using 'mousefocus'. (William Fulton)
解決方案:   Make buffer for mouse coordinates 2 bytes longer. (Juergen Weigert)
相關文件:   src/gui.c

Patch 7.0.021
問題:       Crash when using "\\[" and "\\]" in 'errorformat'. (Marc Weber)
解決方案:   Check for valid submatches after matching the pattern.
相關文件:   src/quickfix.c

Patch 7.0.022
問題:       Using buffer.append() in Ruby may append the line to the wrong
	    buffer. (Alex Norman)
解決方案:   Properly switch to the buffer to do the appending.  Also for
	    buffer.delete() and setting a buffer line.
相關文件:   src/if_ruby.c

Patch 7.0.023
問題:       Crash when doing spell completion in an empty line and pressing
	    CTRL-E.
解決方案:   Check for a zero pointer. (James Vega)
	    Also handle a situation without a matching pattern better, report
	    "No matches" instead of remaining in undefined CTRL-X mode.  And
	    get out of CTRL-X mode when typing a letter.
相關文件:   src/edit.c

Patch 7.0.024
問題:       It is possible to set arbitrary "v:" variables.
解決方案:   Disallow setting "v:" variables that are not predefined.
相關文件:   src/eval.c

Patch 7.0.025
問題:       Crash when removing an element of a:000.  (Nikolai Weibull)
解決方案:   Mark the a:000 list with VAR_FIXED.
相關文件:   src/eval.c

Patch 7.0.026
問題:       Using libcall() may show an old error.
解決方案:   Invoke dlerror() to clear a previous error. (Yukihiro Nakadaira)
相關文件:   src/os_unix.c

Patch 7.0.027 (extra)
問題:       Win32: When compiled with SNIFF gvim may hang on exit.
解決方案:   Translate and dispatch the WM_USER message. (Mathias Michaelis)
相關文件:   src/gui_w48.c

Patch 7.0.028 (extra)
問題:       OS/2: Vim doesn't compile with gcc 3.2.1.
解決方案:   Add argument to after_pathsep(), don't define vim_handle_signal(),
	    define HAVE_STDARG_H. (David Sanders)
相關文件:   src/os_unix.c, src/vim.h, src/os_os2_cfg.h

Patch 7.0.029
問題:       getchar() may not position the cursor after a space.
解決方案:   Position the cursor explicitly.
相關文件:   src/eval.c

Patch 7.0.030
問題:       The ":compiler" command can't be used in a FileChangedRO event.
	    (Hari Krishna Dara)
解決方案:   Add the CMDWIN flag to the ":compiler" command.
相關文件:   src/ex_cmds.h

Patch 7.0.031
問題:       When deleting a buffer the buffer-local mappings for Select mode
	    remain.
解決方案:   Add the Select mode bit to MAP_ALL_MODES. (Edwin Steiner)
相關文件:   src/vim.h

Patch 7.0.032 (extra, after 7.0.027)
問題:       Missing semicolon.
解決方案:   Add the semicolon.
相關文件:   src/gui_w48.c

Patch 7.0.033
問題:       When pasting text, with the menu or CTRL-V, autoindent is removed.
解決方案:   Use "x<BS>" to avoid indent to be removed. (Benji Fisher)
相關文件:   runtime/autoload/paste.vim

Patch 7.0.034
問題:       After doing completion and typing more characters or using BS
	    repeating with "." didn't work properly. (Martin Stubenschrott)
解決方案:   Don't put BS and other characters in the redo buffer right away,
	    do this when finishing completion.
相關文件:   src/edit.c

Patch 7.0.035
問題:       Insert mode completion works when typed but not when replayed from
	    a register. (Hari Krishna Dara)
	    Also: Mappings for Insert mode completion don't always work.
解決方案:   When finding a non-completion key in the input don't interrupt
	    completion when it wasn't typed.
	    Do use mappings when checking for typeahead while still finding
	    completions.  Avoids that completion is interrupted too soon.
	    Use "compl_pending" in a different way.
相關文件:   src/edit.c

Patch 7.0.036
問題:       Can't compile with small features and syntax highlighting or the
	    diff feature.
解決方案:   Define LINE_ATTR whenever syntax highlighting or the diff feature
	    is enabled.
相關文件:   src/screen.c

Patch 7.0.037
問題:       Crash when resizing the GUI window vertically when there is a line
	    that doesn't fit.
解決方案:   Don't redraw while the screen data is invalid.
相關文件:   src/screen.c

Patch 7.0.038
問題:       When calling complete() from an Insert mode expression mapping
	    text could be inserted in an improper way.
解決方案:   Make undo_allowed() global and use it in complete().
相關文件:   src/undo.c, src/proto/undo.pro, src/eval.c

Patch 7.0.039
問題:       Calling inputdialog() with a third argument in the console doesn't
	    work.
解決方案:   Make a separate function for input() and inputdialog(). (Yegappan
	    Lakshmanan)
相關文件:   src/eval.c

Patch 7.0.040
問題:       When 'cmdheight' is larger than 1 using inputlist() or selecting
	    a spell suggestion with the mouse gets the wrong entry.
解決方案:   Start listing the first alternative on the last line of the screen.
相關文件:   src/eval.c, src/spell.c

Patch 7.0.041
問題:       cursor([1, 1]) doesn't work. (Peter Hodge)
解決方案:   Allow leaving out the third item of the list and use zero for the
	    virtual column offset.
相關文件:   src/eval.c

Patch 7.0.042
問題:       When pasting a block of text in Insert mode Vim hangs or crashes.
	    (Noam Halevy)
解決方案:   Avoid that the cursor is positioned past the NUL of a line.
相關文件:   src/ops.c

Patch 7.0.043
問題:       Using "%!" at the start of 'statusline' doesn't work.
解決方案:   Recognize the special item when the option is being set.
相關文件:   src/option.c

Patch 7.0.044
問題:       Perl: setting a buffer line in another buffer may result in
	    changing the current buffer.
解決方案:   Properly change to the buffer to be changed.
相關文件:   src/if_perl.xs

Patch 7.0.045 (extra)
問題:       Win32: Warnings when compiling OLE version with MSVC 2005.
解決方案:   Move including vim.h to before windows.h. (Ilya Bobir)
相關文件:   src/if_ole.cpp

Patch 7.0.046
問題:       The matchparen plugin ignores parens in strings, but not in single
	    quotes, often marked with "character".
解決方案:   Also ignore parens in syntax items matching "character".
相關文件:   runtime/plugin/matchparen.vim

Patch 7.0.047
問題:       When running configure the exit status is wrong.
解決方案:   Handle the exit status properly. (Matthew Woehlke)
相關文件:   configure, src/configure

Patch 7.0.048
問題:       Writing a compressed file fails when there are parens in the name.
	    (Wang Jian)
解決方案:   Put quotes around the temp file name.
相關文件:   runtime/autoload/gzip.vim

Patch 7.0.049
問題:       Some TCL scripts are not recognized. (Steven Atkinson)
解決方案:   Check for "exec wish" in the file.
相關文件:   runtime/scripts.vim

Patch 7.0.050
問題:       After using the netbeans interface close command a stale pointer
	    may be used.
解決方案:   Clear the pointer to the closed buffer. (Xaview de Gaye)
相關文件:   src/netbeans.c

Patch 7.0.051 (after 7.0.44)
問題:       The Perl interface doesn't compile or doesn't work properly.
解決方案:   Remove the spaces before #ifdef and avoid an empty line above it.
相關文件:   src/if_perl.xs

Patch 7.0.052
問題:       The user may not be aware that the Vim server allows others more
	    functionality than desired.
解決方案:   When running Vim as root don't become a Vim server without an
	    explicit --servername argument.
相關文件:   src/main.c

Patch 7.0.053
問題:       Shortening a directory name may fail when there are multi-byte
	    characters.
解決方案:   Copy the correct bytes. (Titov Anatoly)
相關文件:   src/misc1.c

Patch 7.0.054
問題:       Mac: Using a menu name that only has a mnemonic or accelerator
	    causes a crash.  (Elliot Shank)
解決方案:   Check for an empty menu name.  Also delete empty submenus that
	    were created before detecting the error.
相關文件:   src/menu.c

Patch 7.0.055
問題:       ":startinsert" in a CmdwinEnter autocommand doesn't take immediate
	    effect. (Bradley White)
解決方案:   Put a NOP key in the typeahead buffer.  Also avoid that using
	    CTRL-C to go back to the command line moves the cursor left.
相關文件:   src/edit.c, src/ex_getln.c

Patch 7.0.056
問題:       "#!something" gives an error message.
解決方案:   Ignore this line, so that it can be used in an executable Vim
	    script.
相關文件:   src/ex_docmd.c

Patch 7.0.057 (extra, after 7.0.45)
問題:       Win32: Compilation problem with Borland C 5.5.
解決方案:   Include vim.h as before. (Mark S. Williams)
相關文件:   src/if_ole.cpp

Patch 7.0.058
問題:       The gbk and gb18030 encodings are not recognized.
解決方案:   Add aliases to cp936. (Edward L. Fox)
相關文件:   src/mbyte.c

Patch 7.0.059
問題:       The Perl interface doesn't compile with ActiveState Perl 5.8.8.
解決方案:   Remove the __attribute__() items. (Liu Yubao)
相關文件:   src/if_perl.xs

Patch 7.0.060 (after 7.0.51)
問題:       Code for temporarily switching to another buffer is duplicated in
	    quite a few places.
解決方案:   Use aucmd_prepbuf() and aucmd_restbuf() also when FEAT_AUTOCMD is
	    not defined.
相關文件:   src/buffer.c, src/eval.c, src/fileio.c, src/if_ruby.c,
	    src/if_perl.xs, src/quickfix.c, src/structs.h

Patch 7.0.061
問題:       Insert mode completion for Vim commands may crash if there is
	    nothing to complete.
解決方案:   Instead of freeing the pattern make it empty, so that a "not
	    found" error is given. (Yukihiro Nakadaira)
相關文件:   src/edit.c

Patch 7.0.062
問題:       Mac: Crash when using the popup menu for spell correction.  The
	    popup menu appears twice when letting go of the right mouse button
	    early.
解決方案:   Don't show the popup menu on the release of the right mouse
	    button.  Also check that a menu pointer is actually valid.
相關文件:   src/proto/menu.pro, src/menu.c, src/normal.c, src/term.c

Patch 7.0.063
問題:       Tiny chance for a memory leak. (coverity)
解決方案:   Free pointer when next memory allocation fails.
相關文件:   src/eval.c

Patch 7.0.064
問題:       Using uninitialized variable. (Tony Mechelynck)
解決方案:   When not used set "temp" to zero.  Also avoid a warning for
	    "files" in ins_compl_dictionaries().
相關文件:   src/edit.c

Patch 7.0.065 (extra)
問題:       Mac: left-right movement of the scrollwheel causes up-down
	    scrolling.
解決方案:   Ignore mouse wheel events that are not up-down. (Nicolas Weber)
相關文件:   src/gui_mac.c

Patch 7.0.066
問題:       After the popup menu for Insert mode completion overlaps the tab
	    pages line it is not completely removed.
解決方案:   Redraw the tab pages line after removing the popup menu. (Ori
	    Avtalion)
相關文件:   src/popupmnu.c

Patch 7.0.067
問題:       Undo doesn't always work properly when using "scim" input method.
	    Undo is split up when using preediting.
解決方案:   Reset xim_has_preediting also when preedit_start_col is not
	    MAXCOL.  Don't split undo when <Left> is used while preediting.
	    (Yukihiro Nakadaira)
相關文件:   src/edit.c, src/mbyte.c

Patch 7.0.068
問題:       When 'ignorecase' is set and using Insert mode completion,
	    typing characters to change the list of matches, case is not
	    ignored. (Hugo Ahlenius)
解決方案:   Store the 'ignorecase' flag with the matches where needed.
相關文件:   src/edit.c, src/search.c, src/spell.c

Patch 7.0.069
問題:       Setting 'guitablabel' to %!expand(\%)  causes Vim to free an
	    invalid pointer. (Kim Schulz)
解決方案:   Don't try freeing a constant string pointer.
相關文件:   src/buffer.c

Patch 7.0.070
問題:       Compiler warnings for shadowed variables and uninitialized
	    variables.
解決方案:   Rename variables such as "index", "msg" and "dup".  Initialize
	    variables.
相關文件:   src/edit.c, src/eval.c, src/ex_cmds.c, src/ex_cmds2.c,
	    src/ex_docmd.c, src/gui_beval.c, src/gui_gtk.c, src/gui_gtk_x11.c,
	    src/hardcopy.c, src/if_cscope.c, src/main.c, src/mbyte.c,
	    src/memline.c, src/netbeans.c, src/normal.c, src/option.c,
	    src/os_unix.c, src/quickfix.c, src/regexp.c, src/screen.c,
	    src/search.c, src/spell.c, src/ui.c, src/undo.c, src/window.c,
	    src/version.c

Patch 7.0.071
問題:       Using an empty search pattern may cause a crash.
解決方案:   Avoid using a NULL pointer.
相關文件:   src/search.c

Patch 7.0.072
問題:       When starting the GUI fails there is no way to adjust settings or
	    do something else.
解決方案:   Add the GUIFailed autocommand event.
相關文件:   src/fileio.c, src/gui.c, src/vim.h

Patch 7.0.073
問題:       Insert mode completion: Typing <CR> sometimes selects the original
	    text instead of keeping what was typed.  (Justin Constantino)
解決方案:   Don't let <CR> select the original text if there is no popup menu.
相關文件:   src/edit.c

Patch 7.0.074 (extra)
問題:       Win32: tooltips were not converted from 'encoding' to Unicode.
解決方案:   Set the tooltip to use Unicode and do the conversion.  Also
	    cleanup the code for the tab pages tooltips. (Yukihiro Nakadaira)
相關文件:   src/gui_w32.c, src/gui_w48.c

Patch 7.0.075
問題:       winsaveview() did not store the actual value of the desired cursor
	    column.  This could move the cursor in the matchparen plugin.
解決方案:   Call update_curswant() before using the value w_curswant.
相關文件:   src/eval.c

Patch 7.0.076 (after 7.0.010)
問題:       Automatic downloading of spell files only works for ftp.
解決方案:   Don't add login and password for non-ftp URLs. (Alexander Patrakov)
相關文件:   runtime/autoload/spellfile.vim

Patch 7.0.077
問題:       ":unlet v:this_session" causes a crash. (Marius Roets)
解決方案:   When trying to unlet a fixed variable give an error message.
相關文件:   src/eval.c

Patch 7.0.078
問題:       There are two error messages E46.
解決方案:   Change the number for the sandbox message to E794.
相關文件:   src/globals.h

Patch 7.0.079
問題:       Russian tutor doesn't work when 'encoding' is "utf-8".
解決方案:   Use tutor.ru.utf-8 as the master, and generate the other encodings
	    from it.  Select the right tutor depending on 'encoding'. (Alexey
	    Froloff)
相關文件:   runtime/tutor/Makefile, runtime/tutor/tutor.vim,
	    runtime/tutor/tutor.ru.utf-8

Patch 7.0.080
問題:       Generating auto/pathdef.c fails for CFLAGS with a backslash.
解決方案:   Double backslashes in the string. (Alexey Froloff)
相關文件:   src/Makefile

Patch 7.0.081
問題:       Command line completion doesn't work for a shell command with an
	    absolute path.
解決方案:   Don't use $PATH when there is an absolute path.
相關文件:   src/ex_getln.c

Patch 7.0.082
問題:       Calling a function that waits for input may cause List and
	    Dictionary arguments to be freed by the garbage collector.
解決方案:   Keep a list of all arguments to internal functions.
相關文件:   src/eval.c

Patch 7.0.083
問題:       Clicking with the mouse on an item for inputlist() doesn't work
	    when 'compatible' is set and/or when 'cmdheight' is more than one.
	    (Christian J.  Robinson)
解決方案:   Also decrement "lines_left" when 'more' isn't set.  Set
	    "cmdline_row" to zero to get all mouse events.
相關文件:   src/message.c, src/misc1.c

Patch 7.0.084
問題:       The garbage collector may do its work while some Lists or
	    Dictionaries are used internally, e.g., by ":echo" that runs into
	    the more-prompt or ":echo [garbagecollect()]".
解決方案:   Only do garbage collection when waiting for a character at the
	    toplevel.  Let garbagecollect() set a flag that is handled at the
	    toplevel before waiting for a character.
相關文件:   src/eval.c, src/getchar.c, src/globals.h, src/main.c

Patch 7.0.085
問題:       When doing "make test" the viminfo file is modified.
解決方案:   Use another viminfo file after setting 'compatible.
相關文件:   src/testdir/test56.in

Patch 7.0.086
問題:       getqflist() returns entries for pattern and text with the number
	    zero.  Passing these to setqflist() results in the string "0".
解決方案:   Use an empty string instead of the number zero.
相關文件:   src/quickfix.c

Patch 7.0.087
問題:       After ":file fname" and ":saveas fname" the 'autochdir' option
	    does not take effect. (Yakov Lerner)
	    Commands for handling 'autochdir' are repeated many times.
解決方案:   Add the DO_AUTOCHDIR macro and do_autochdir().  Use it for
	    ":file fname" and ":saveas fname".
相關文件:   src/proto/buffer.pro, src/buffer.c, src/ex_cmds.c, src/macros.h,
	    src/netbeans.c, src/option.c, src/window.c

Patch 7.0.088
問題:       When compiled with Perl the generated prototypes have "extern"
	    unnecessarily added.
解決方案:   Remove the "-pipe" argument from PERL_CFLAGS.
相關文件:   src/auto/configure, src/configure.in

Patch 7.0.089
問題:       "ga" does not work properly for a non-Unicode multi-byte encoding.
解決方案:   Only check for composing chars for utf-8. (Taro Muraoka)
相關文件:   src/ex_cmds.c

Patch 7.0.090
問題:       Cancelling the conform() dialog on the console with Esc requires
	    typing it twice. (Benji Fisher)
解決方案:   When the start of an escape sequence is found use 'timeoutlen' or
	    'ttimeoutlen'.
相關文件:   src/misc1.c

Patch 7.0.091
問題:       Using winrestview() while 'showcmd' is set causes the cursor to be
	    displayed in the wrong position. (Yakov Lerner)
解決方案:   Set the window topline properly.
相關文件:   src/eval.c

Patch 7.0.092 (after 7.0.082 and 7.0.084)
問題:       The list of internal function arguments is obsolete now that
	    garbage collection is only done at the toplevel.
解決方案:   Remove the list of all arguments to internal functions.
相關文件:   src/eval.c

Patch 7.0.093
問題:       The matchparen plugin can't handle a 'matchpairs' value where a
	    colon is matched.
解決方案:   Change the split() that is used to change 'matchpairs' into a
	    List.
相關文件:   runtime/plugin/matchparen.vim

Patch 7.0.094
問題:       When a hidden buffer is made the current buffer and another file
	    edited later, the file message will still be given.  Using
	    ":silent" also doesn't prevent the file message. (Marvin Renich)
解決方案:   Reset the need_fileinfo flag when reading a file.  Don't set
	    need_fileinfo when msg_silent is set.
相關文件:   src/buffer.c, src/fileio.c

Patch 7.0.095
問題:       The Greek tutor is not available in utf-8.  "el" is used for the
	    language, only "gr" for the country is recognized.
解決方案:   Add the utf-8 Greek tutor.  Use it for conversion to iso-8859-7
	    and cp737.  (Lefteris Dimitroulakis)
相關文件:   runtime/tutor/Makefile, runtime/tutor/tutor.gr.utf-8,
	    runtime/tutor/tutor.vim

Patch 7.0.096
問題:       taglist() returns the filename relative to the tags file, while
	    the directory of the tags file is unknown. (Hari Krishna Dara)
解決方案:   Expand the file name. (Yegappan Lakshmanan)
相關文件:   src/tag.c

Patch 7.0.097
問題:       ":tabclose N" that closes another tab page does not remove the tab
	    pages line.  Same problem when using the mouse.
解決方案:   Adjust the tab pages line when needed in tabpage_close_other().
相關文件:   src/ex_docmd.c

Patch 7.0.098
問題:       Redirecting command output in a cmdline completion function
	    doesn't work. (Hari Krishna Dara)
解決方案:   Enable redirection when redirection is started.
相關文件:   src/ex_docmd.c, src/ex_getln.c

Patch 7.0.099
問題:       GUI: When the popup menu is visible using the scrollbar messes up
	    the display.
解決方案:   Disallow scrolling the current window.  Redraw the popup menu
	    after scrolling another window.
相關文件:   src/gui.c

Patch 7.0.100
問題:       "zug" may report the wrong filename. (Lawrence Kesteloot)
解決方案:   Call home_replace() to fill NameBuff[].
相關文件:   src/spell.c

Patch 7.0.101
問題:       When the "~/.vim/spell" directory does not exist "zg" may create
	    a wrong directory.  "zw" doesn't work.
解決方案:   Use the directory of the file name instead of NameBuff.  For "zw"
	    not only remove a good word but also add the word with "!".
相關文件:   src/spell.c

Patch 7.0.102
問題:       Redrawing cmdline is not correct when using SCIM.
解決方案:   Don't call im_get_status(). (Yukihiro Nakadaira)
相關文件:   src/ex_getln.c

Patch 7.0.103 (after 7.0.101)
問題:       Compiler warning for uninitialized variable. (Tony Mechelynck)
解決方案:   Init variable.
相關文件:   src/spell.c

Patch 7.0.104
問題:       The CursorHoldI event only triggers once in Insert mode.  It also
	    triggers after CTRL-V and other two-key commands.
解決方案:   Set "did_cursorhold" before getting a second key.  Reset
	    "did_cursorhold" after handling a command.
相關文件:   src/edit.c, src/fileio.c

Patch 7.0.105
問題:       When using incremental search the statusline ruler isn't updated.
	    (Christoph Koegl)
解決方案:   Update the statusline when it contains the ruler.
相關文件:   src/ex_getln.c

Patch 7.0.106
問題:       The spell popup menu uses ":amenu", triggering mappings.  Other
	    PopupMenu autocommands are removed. (John Little)
解決方案:   Use ":anoremenu" and use an autocmd group.
相關文件:   runtime/menu.vim

Patch 7.0.107
問題:       Incremental search doesn't redraw the text tabline. (Ilya Bobir)
	    Also happens in other situations with one window in a tab page.
解決方案:   Redraw the tabline after clearing the screen.
相關文件:   src/screen.c

Patch 7.0.108 (extra)
問題:       Amiga: Compilation problem.
解決方案:   Have mch_mkdir() return a failure flag. (Willy Catteau)
相關文件:   src/os_amiga.c, src/proto/os_amiga.pro

Patch 7.0.109
問題:       Lisp indenting is confused by escaped quotes in strings. (Dorai
	    Sitaram)
解決方案:   Check for backslash inside strings. (Sergey Khorev)
相關文件:   src/misc1.c

Patch 7.0.110
問題:       Amiga: Compilation problems when not using libnix.
解決方案:   Change a few #ifdefs. (Willy Catteau)
相關文件:   src/memfile.c

Patch 7.0.111
問題:       The gzip plugin can't handle filenames with single quotes.
解決方案:   Add and use the shellescape() function. (partly by Alexey Froloff)
相關文件:   runtime/autoload/gzip.vim, runtime/doc/eval.txt, src/eval.c,
	    src/mbyte.c, src/misc2.c, src/proto/misc2.pro

Patch 7.0.112
問題:       Python interface does not work with Python 2.5.
解決方案:   Change PyMem_DEL() to Py_DECREF(). (Sumner Hayes)
相關文件:   src/if_python.c

Patch 7.0.113
問題:       Using CTRL-L in Insert completion when there is no current match
	    may cause a crash. (Yukihiro Nakadaira)
解決方案:   Check for compl_leader to be NULL
相關文件:   src/edit.c

Patch 7.0.114
問題:       When aborting an insert with CTRL-C an extra undo point is
	    created in the GUI. (Yukihiro Nakadaira)
解決方案:   Call gotchars() only when advancing.
相關文件:   src/getchar.c

Patch 7.0.115
問題:       When 'ignorecase' is set, Insert mode completion only adds "foo"
	    and not "Foo" when both are found.
	    A found match isn't displayed right away when 'completeopt' does
	    not have "menu" or "menuone".
解決方案:   Do not ignore case when checking if a completion match already
	    exists.  call ins_compl_check_keys() also when not using a popup
	    menu. (Yukihiro Nakadaira)
相關文件:   src/edit.c

Patch 7.0.116
問題:       64 bit Windows version reports "32 bit" in the ":version" output.
	    (M. Veerman)
解決方案:   Change the text for Win64.
相關文件:   src/version.c

Patch 7.0.117
問題:       Using "extend" on a syntax item inside a region with "keepend", an
	    intermediate item may be truncated.
	    When applying the "keepend" and there is an offset to the end
	    pattern the highlighting of a contained item isn't adjusted.
解決方案:   Use the seen_keepend flag to remember when to apply the "keepend"
	    flag.  Adjust the keepend highlighting properly. (Ilya Bobir)
相關文件:   src/syntax.c

Patch 7.0.118
問題:       printf() does not do zero padding for strings.
解決方案:   Do allow zero padding for strings.
相關文件:   src/message.c

Patch 7.0.119
問題:       When going back from Insert to Normal mode the CursorHold event
	    doesn't trigger. (Yakov Lerner)
解決方案:   Reset "did_cursorhold" when leaving Insert mode.
相關文件:   src/edit.c

Patch 7.0.120
問題:       Crash when using CTRL-R = at the command line and entering
	    "getreg('=')". (James Vega)
解決方案:   Avoid recursiveness of evaluating the = register.
相關文件:   src/ops.c

Patch 7.0.121
問題:       GUI: Dragging the last status line doesn't work when there is a
	    text tabline.  (Markus Wolf)
解決方案:   Take the text tabline into account when deciding to start modeless
	    selection.
相關文件:   src/gui.c

Patch 7.0.122
問題:       GUI: When clearing after a bold, double-wide character half a
	    character may be drawn.
解決方案:   Check for double-wide character and redraw it. (Yukihiro Nakadaira)
相關文件:   src/screen.c

Patch 7.0.123
問題:       On SCO Openserver configure selects the wrong terminal library.
解決方案:   Put terminfo before the other libraries. (Roger Cornelius)
	    Also fix a small problem compiling on Mac without Darwin.
相關文件:   src/configure.in, src/auto/configure

Patch 7.0.124
問題:       getwinvar() obtains a dictionary with window-local variables, but
	    it's always for the current window.
解決方案:   Get the variables of the specified window. (Geoff Reedy)
相關文件:   src/eval.c

Patch 7.0.125
問題:       When "autoselect" is in the 'clipboard' option then the '< and '>
	    marks are set while Visual mode is still active.
解決方案:   Don't set the '< and '> marks when yanking the selected area for
	    the clipboard.
相關文件:   src/normal.c

Patch 7.0.126
問題:       When 'formatexpr' uses setline() and later internal formatting is
	    used undo information is not correct. (Jiri Cerny, Benji Fisher)
解決方案:   Set ins_need_undo after using 'formatexpr'.
相關文件:   src/edit.c

Patch 7.0.127
問題:       Crash when swap files has invalid timestamp.
解決方案:   Check return value of ctime() for being NULL.
相關文件:   src/memline.c

Patch 7.0.128
問題:       GUI: when closing gvim is cancelled because there is a changed
	    buffer the screen isn't updated to show the changed buffer in the
	    current window.  (Krzysztof Kacprzak)
解決方案:   Redraw when closing gvim is cancelled.
相關文件:   src/gui.c

Patch 7.0.129
問題:       GTK GUI: the GTK file dialog can't handle a relative path.
解決方案:   Make the initial directory a full path before passing it to GTK.
	    (James Vega)  Also postpone adding the default file name until
	    after setting the directory.
相關文件:   src/gui_gtk.c

Patch 7.0.130 (extra)
問題:       Win32: Trying to edit or write devices may cause Vim to get stuck.
解決方案:   Add the 'opendevice' option, default off.  Disallow
	    reading/writing from/to devices when it's off.
	    Also detect more devices by the full name starting with "\\.\".
相關文件:   runtime/doc/options.txt, src/fileio.c, src/option.c, src/option.h,
	    src/os_win32.c

Patch 7.0.131
問題:       Win32: "vim -r" does not list all the swap files.
解決方案:   Also check for swap files starting with a dot.
相關文件:   src/memline.c

Patch 7.0.132 (after 7.0.130)
問題:       Win32: Crash when Vim reads from stdin.
解決方案:   Only use mch_nodetype() when there is a file name.
相關文件:   src/fileio.c

Patch 7.0.133
問題:       When searching included files messages are added to the history.
解決方案:   Set msg_hist_off for messages about scanning included files.
            Set msg_silent to avoid message about wrapping around.
相關文件:   src/edit.c, src/globals.h, src/message.c, src/search.c

Patch 7.0.134
問題:       Crash when comparing a recursively looped List or Dictionary.
解決方案:   Limit recursiveness for comparing to 1000.
相關文件:   src/eval.c

Patch 7.0.135
問題:       Crash when garbage collecting list or dict with loop.
解決方案:   Don't use DEL_REFCOUNT but don't recurse into Lists and
	    Dictionaries when freeing them in the garbage collector.
	    Also add allocated Dictionaries to the list of Dictionaries to
	    avoid leaking memory.
相關文件:   src/eval.c, src/proto/eval.pro, src/tag.c

Patch 7.0.136
問題:       Using "O" while matching parens are highlighted may not remove the
	    highlighting. (Ilya Bobir)
解決方案:   Also trigger CursorMoved when a line is inserted under the cursor.
相關文件:   src/misc1.c

Patch 7.0.137
問題:       Configure check for big features is wrong.
解決方案:   Change "==" to "=". (Martti Kuparinen)
相關文件:   src/auto/configure, src/configure.in

Patch 7.0.138 (extra)
問題:       Mac: modifiers don't work with function keys.
解決方案:   Use GetEventParameter() to obtain modifiers. (Nicolas Weber)
相關文件:   src/gui_mac.c

Patch 7.0.139
問題:       Using CTRL-PageUp or CTRL-PageDown in Insert mode to go to another
	    tab page does not prepare for undo properly. (Stefano Zacchiroli)
解決方案:   Call start_arrow() before switching tab page.
相關文件:   src/edit.c

Patch 7.0.140 (after 7.0.134)
問題:       Comparing recursively looped List or Dictionary doesn't work well.
解決方案:   Detect comparing a List or Dictionary with itself.
相關文件:   src/eval.c

Patch 7.0.141
問題:       When pasting a while line on the command line an extra CR is added
	    literally.
解決方案:   Don't add the trailing CR when pasting with the mouse.
相關文件:   src/ex_getln.c, src/proto/ops.pro, src/ops.c

Patch 7.0.142
問題:       Using the middle mouse button in Select mode to paste text results
	    in an extra "y". (Kriton Kyrimis)
解決方案:   Let the middle mouse button replace the selected text with the
	    contents of the clipboard.
相關文件:   src/normal.c

Patch 7.0.143
問題:       Setting 'scroll' to its default value was not handled correctly.
解決方案:   Compare the right field to PV_SCROLL.
相關文件:   src/option.c

Patch 7.0.144
問題:       May compare two unrelated pointers when matching a pattern against
	    a string.  (Dominique Pelle)
解決方案:   Avoid calling reg_getline() when REG_MULTI is false.
相關文件:   src/regexp.c

Patch 7.0.145 (after 7.0.142)
問題:       Compiler warning.
解決方案:   Add type cast.
相關文件:   src/normal.c

Patch 7.0.146
問題:       When 'switchbuf' is set to "usetab" and the current tab has only a
	    quickfix window, jumping to an error always opens a new window.
	    Also, when the buffer is open in another tab page it's not found.
解決方案:   Check for the "split" value of 'switchbuf' properly.  Search in
	    other tab pages for the desired buffer. (Yegappan Lakshmanan)
相關文件:   src/buffer.c, src/quickfix.c

Patch 7.0.147
問題:       When creating a session file and there are several tab pages and
	    some windows have a local directory a short file name may be used
	    when it's not valid. (Marius Roets)
	    A session with multiple tab pages may result in "No Name" buffers.
	    (Bill McCarthy)
解決方案:   Don't enter tab pages when going through the list, only use a
	    pointer to the first window in each tab page.
            Use "tabedit" instead of "tabnew | edit" when possible.
相關文件:   src/ex_docmd.c

Patch 7.0.148
問題:       When doing "call a.xyz()" and "xyz" does not exist in dictionary
	    "a" there is no error message. (Yegappan Lakshmanan)
解決方案:   Add the error message.
相關文件:   src/eval.c

Patch 7.0.149
問題:       When resizing a window that shows "~" lines the text sometimes
	    jumps down.
解決方案:   Remove code that uses "~" lines in some situations.  Fix the
            computation of the screen line of the cursor.  Also set w_skipcol
	    to handle very long lines.
相關文件:   src/misc1.c, src/window.c

Patch 7.0.150
問題:       When resizing the Vim window scrollbinding doesn't work. (Yakov
	    Lerner)
解決方案:   Do scrollbinding in set_shellsize().
相關文件:   src/term.c

Patch 7.0.151
問題:       Buttons in file dialog are not according to Gnome guidelines.
解決方案:   Swap Cancel and Open buttons. (Stefano Zacchiroli)
相關文件:   src/gui_gtk.c

Patch 7.0.152
問題:       Crash when using lesstif 2.
解決方案:   Fill in the extension field. (Ben Hutchings)
相關文件:   src/gui_xmebw.c

Patch 7.0.153
問題:       When using cscope and opening the temp file fails Vim crashes.
	    (Kaya Bekiroglu)
解決方案:   Check for NULL pointer returned from mch_open().
相關文件:   src/if_cscope.c

Patch 7.0.154
問題:       When 'foldnextmax' is negative Vim can hang. (James Vega)
解決方案:   Avoid the fold level becoming negative.
相關文件:   src/fold.c, src/syntax.c

Patch 7.0.155
問題:       When getchar() returns a mouse button click there is no way to get
	    the mouse coordinates.
解決方案:   Add v:mouse_win, v:mouse_lnum and v:mouse_col.
相關文件:   runtime/doc/eval.txt, src/eval.c, src/vim.h

Patch 7.0.156 (extra)
問題:       Vim doesn't compile for Amiga OS 4.
解決方案:   Various changes for Amiga OS4. (Peter Bengtsson)
相關文件:   src/feature.h, src/mbyte.c, src/memfile.c, src/memline.c,
	    src/os_amiga.c, src/os_amiga.h, src/pty.c

Patch 7.0.157
問題:       When a function is used recursively the profiling information is
	    invalid. (Mikolaj Machowski)
解決方案:   Put the start time on the stack instead of in the function.
相關文件:   src/eval.c

Patch 7.0.158
問題:       In a C file with ":set foldmethod=syntax", typing {<CR> on the
	    last line results in the cursor being in a closed fold. (Gautam
	    Iyer)
解決方案:   Open fold after inserting a new line.
相關文件:   src/edit.c

Patch 7.0.159
問題:       When there is an I/O error in the swap file the cause of the error
	    cannot be seen.
解決方案:   Use PERROR() instead of EMSG() where possible.
相關文件:   src/memfile.c

Patch 7.0.160
問題:       ":@a" echoes the command, Vi doesn't do that.
解決方案:   Set the silent flag in the typeahead buffer to avoid echoing the
	    command.
相關文件:   src/ex_docmd.c, src/normal.c, src/ops.c, src/proto/ops.pro

Patch 7.0.161
問題:       Win32: Tab pages line popup menu isn't using the right encoding.
            (Yongwei Wu)
解決方案:   Convert the text when necessary.  Also fixes the Find/Replace
	    dialog title. (Yegappan Lakshmanan)
相關文件:   src/gui_w48.c

Patch 7.0.162
問題:       "vim -o a b" when file "a" triggers the ATTENTION dialog,
	    selecting "Quit" exits Vim instead of editing "b" only.
	    When file "b" triggers the ATTENTION dialog selecting "Quit" or
	    "Abort" results in editing file "a" in that window.
解決方案:   When selecting "Abort" exit Vim.  When selecting "Quit" close the
	    window.  Also avoid hit-enter prompt when selecting Abort.
相關文件:   src/buffer.c, src/main.c

Patch 7.0.163
問題:       Can't retrieve the position of a sign after it was set.
解決方案:   Add the netbeans interface getAnno command. (Xavier de Gaye)
相關文件:   runtime/doc/netbeans.txt, src/netbeans.c

Patch 7.0.164
問題:       ":redir @+" doesn't work.
解決方案:   Accept "@+" just like "@*". (Yegappan Lakshmanan)
相關文件:   src/ex_docmd.c

Patch 7.0.165
問題:       Using CTRL-L at the search prompt adds a "/" and other characters
	    without escaping, causing the pattern not to match.
解決方案:   Escape special characters with a backslash.
相關文件:   src/ex_getln.c

Patch 7.0.166
問題:       Crash in cscope code when connection could not be opened.
	    (Kaya Bekiroglu)
解決方案:   Check for the file descriptor to be NULL.
相關文件:   src/if_cscope.c

Patch 7.0.167
問題:       ":function" redefining a dict function doesn't work properly.
	    (Richard Emberson)
解決方案:   Allow a function name to be a number when it's a function
	    reference.
相關文件:   src/eval.c

Patch 7.0.168
問題:       Using uninitialized memory and memory leak. (Dominique Pelle)
解決方案:   Use alloc_clear() instead of alloc() for w_lines.  Free
	    b_ml.ml_stack after recovery.
相關文件:   src/memline.c, src/window.c

Patch 7.0.169
問題:       With a Visual block selection, with the cursor in the left upper
	    corner, pressing "I" doesn't remove the highlighting. (Guopeng
	    Wen)
解決方案:   When checking if redrawing is needed also check if Visual
	    selection is still active.
相關文件:   src/screen.c

Patch 7.0.170 (extra)
問題:       Win32: Using "gvim --remote-tab foo" when gvim is minimized while
	    it previously was maximized, un-maximizing doesn't work properly.
	    And the labels are not displayed properly when 'encoding' is
	    utf-8.
解決方案:   When minimized check for SW_SHOWMINIMIZED.  When updating the tab
	    pages line use TCM_SETITEMW instead of TCM_INSERTITEMW. (Liu
	    Yubao)
相關文件:   src/gui_w48.c

Patch 7.0.171 (extra)
問題:       VMS: A file name with multiple paths is written in the wrong file.
解決方案:   Get the actually used file name. (Zoltan Arpadffy)
	    Also add info to the :version command about compilation.
相關文件:   src/Make_vms.mms, src/buffer.c, src/os_unix.c, src/version.c

Patch 7.0.172
問題:       Crash when recovering and quitting at the "press-enter" prompt.
解決方案:   Check for "msg_list" to be NULL. (Liu Yubao)
相關文件:   src/ex_eval.c

Patch 7.0.173
問題:       ":call f().TT()" doesn't work.  (Richard Emberson)
解決方案:   When a function returns a Dictionary or another composite continue
	    evaluating what follows.
相關文件:   src/eval.c    

Patch 7.0.174
問題:       ":mksession" doesn't restore window layout correctly in tab pages
	    other than the current one. (Zhibin He)
解決方案:   Use the correct topframe for producing the window layout commands.
相關文件:   src/ex_docmd.c

Patch 7.0.175
問題:       The result of tr() is missing the terminating NUL. (Ingo Karkat)
解決方案:   Add the NUL.
相關文件:   src/eval.c

Patch 7.0.176
問題:       ":emenu" isn't executed directly, causing the encryption key
	    prompt to fail. (Life Jazzer)
解決方案:   Fix wrong #ifdef.
相關文件:   src/menu.c

Patch 7.0.177
問題:       When the press-enter prompt gets a character from a non-remappable
	    mapping, it's put back in the typeahead buffer as remappable,
	    which may cause an endless loop.
解決方案:   Restore the non-remappable flag and the silent flag when putting a
	    char back in the typeahead buffer.
相關文件:   src/getchar.c, src/message.c, src/normal.c

Patch 7.0.178
問題:       When 'enc' is "utf-8" and 'ignorecase' is set the result of ":echo
	    ("\xe4" == "\xe4")" varies.
解決方案:   In mb_strnicmp() avoid looking past NUL bytes.
相關文件:   src/mbyte.c

Patch 7.0.179
問題:       Using ":recover" or "vim -r" without a swapfile crashes Vim.
解決方案:   Check for "buf" to be unequal NULL. (Yukihiro Nakadaira)
相關文件:   src/memline.c

Patch 7.0.180 (extra, after 7.0.171)
問題:       VMS: build failed.  Problem with swapfiles.
解決方案:   Add "compiled_arch".  Always expand path and pass it to
	    buf_modname().  (Zoltan Arpadffy)
相關文件:   src/globals.h, src/memline.c, src/os_unix.c, runtime/menu.vim

Patch 7.0.181
問題:       When reloading a file that starts with an empty line, the reloaded
	    buffer has an extra empty line at the end. (Motty Lentzitzky)
解決方案:   Delete all lines, don't use bufempty().
相關文件:   src/fileio.c

Patch 7.0.182
問題:       When using a mix of undo and "g-" it may no longer be possible to
	    go to every point in the undo tree.  (Andy Wokula)
解決方案:   Correctly update pointers in the undo tree.
相關文件:   src/undo.c

Patch 7.0.183
問題:       Crash in ":let" when redirecting to a variable that's being
	    displayed. (Thomas Link)
解決方案:   When redirecting to a variable only do the assignment when
	    stopping redirection to avoid that setting the variable causes a
	    freed string to be accessed.
相關文件:   src/eval.c

Patch 7.0.184
問題:       When the cscope program is called "mlcscope" the Cscope interface
	    doesn't work.
解決方案:   Accept "\S*cscope:" instead of "cscope:". (Frodak D. Baksik)
相關文件:   src/if_cscope.c

Patch 7.0.185
問題:       Multi-byte characters in a message are displayed with attributes
	    from what comes before it.
解決方案:   Don't use the attributes for a multi-byte character.  Do use
	    attributes for special characters. (Yukihiro Nakadaira)
相關文件:   src/message.c

Patch 7.0.186
問題:       Get an ml_get error when 'encoding' is "utf-8" and searching for
	    "/\_s*/e" in an empty buffer.  (Andrew Maykov)
解決方案:   Don't try getting the line just below the last line.
相關文件:   src/search.c

Patch 7.0.187
問題:       Can't source a remote script properly.
解決方案:   Add the SourceCmd event. (Charles Campbell)
相關文件:   runtime/doc/autocmd.txt, src/ex_cmds2.c, src/fileio.c, src/vim.h

Patch 7.0.188 (after 7.0.186)
問題:       Warning for wrong pointer type.
解決方案:   Add a type cast.
相關文件:   src/search.c

Patch 7.0.189
問題:       Translated message about finding matches is truncated. (Yukihiro
	    Nakadaira)
解決方案:   Enlarge the buffer.  Also use vim_snprintf().
相關文件:   src/edit.c

Patch 7.0.190
問題:       "syntax spell default" results in an error message.
解決方案:   Change 4 to 7 for STRNICMP(). (Raul Nunez de Arenas Coronado)
相關文件:   src/syntax.c

Patch 7.0.191
問題:       The items used by getqflist() and setqflist() don't match.
解決方案:   Support the "bufnum" item for setqflist(). (Yegappan Lakshmanan)
相關文件:   runtime/doc/eval.txt, src/quickfix.c

Patch 7.0.192
問題:       When 'swapfile' is switched off in an empty file it is possible
	    that not all blocks are loaded into memory, causing ml_get errors
	    later.
解決方案:   Rename "dont_release" to "mf_dont_release" and also use it to
	    avoid using the cached line and locked block. 
相關文件:   src/globals.h, src/memfile.c, src/memline.c

Patch 7.0.193
問題:       Using --remote or --remote-tab with an argument that matches
	    'wildignore' causes a crash.
解決方案:   Check the argument count before using ARGLIST[0].
相關文件:   src/ex_cmds.c

Patch 7.0.194
問題:       Once an ml_get error is given redrawing part of the screen may
	    cause it again, resulting in an endless loop.
解決方案:   Don't give the error message for a recursive call.
相關文件:   src/memline.c

Patch 7.0.195
問題:       When a buffer is modified and 'autowriteall' is set, ":quit"
	    results in an endless loop when there is a conversion error while
	    writing. (Nikolai Weibull)
解決方案:   Make autowrite() return FAIL if the buffer is still changed after
	    writing it.
	    /* put the cursor on the last char, for 'tw' formatting */
相關文件:   src/ex_cmds2.c

Patch 7.0.196
問題:       When using ":vert ball" the computation of the mouse pointer
	    position may be off by one column. (Stefan Karlsson)
解決方案:   Recompute the frame width when moving the vertical separator from
	    one window to another.
相關文件:   src/window.c

Patch 7.0.197 (extra)
問題:       Win32: Compiling with EXITFREE doesn't work.
解決方案:   Adjust a few #ifdefs. (Alexei Alexandrof)
相關文件:   src/misc2.c, src/os_mswin.c

Patch 7.0.198 (extra)
問題:       Win32: Compiler warnings.  No need to generate gvim.exe.mnf.
解決方案:   Add type casts.  Use "*" for processorArchitecture. (George Reilly)
相關文件:   src/Make_mvc.mak, src/eval.c, src/gvim.exe.mnf, src/misc2.c

Patch 7.0.199
問題:       When using multi-byte characters the combination of completion and
	    formatting may result in a wrong cursor position.
解決方案:   Don't decrement the cursor column, use dec_cursor(). (Yukihiro
	    Nakadaira)  Also check for the column to be zero.
相關文件:   src/edit.c

Patch 7.0.200
問題:       Memory leaks when out of memory.
解決方案:   Free the memory.
相關文件:   src/edit.c, src/diff.c

Patch 7.0.201
問題:       Message for ":diffput" about buffer not being in diff mode may be
	    wrong.
解決方案:   Check for buffer in diff mode but not modifiable.
相關文件:   src/diff.c

Patch 7.0.202
問題:       Problems on Tandem systems while compiling and at runtime.
解決方案:   Recognize root uid is 65535.  Check select() return value for it
	    not being supported.  Avoid wrong function prototypes.  Mention
	    use of -lfloss.  (Matthew Woehlke)
相關文件:   src/Makefile, src/ex_cmds.c, src/fileio.c, src/main.c,
	    src/osdef1.h.in, src/osdef2.h.in, src/os_unix.c, src/pty.c,
	    src/vim.h

Patch 7.0.203
問題:       0x80 characters in a register are not handled correctly for the
	    "@" command.
解決方案:   Escape CSI and 0x80 characters. (Yukihiro Nakadaira)
相關文件:   src/ops.c

Patch 7.0.204
問題:       Cscope: Parsing matches for listing isn't done properly.
解決方案:   Check for line number being found. (Yu Zhao)
相關文件:   src/if_cscope.c

Patch 7.0.205 (after 7.0.203)
問題:       Can't compile.
解決方案:   Always include the vim_strsave_escape_csi function.
相關文件:   src/getchar.c

Patch 7.0.206 (after 7.0.058)
問題:       Some characters of the "gb18030" encoding are not handled
	    properly.
解決方案:   Do not use "cp936" as an alias for "gb18030" encoding.  Instead
	    initialize 'encoding' to "cp936".
相關文件:   src/mbyte.c, src/option.c

Patch 7.0.207
問題:       After patch 2.0.203 CSI and K_SPECIAL characters are escaped when
	    recorded and then again when the register is executed.
解決方案:   Remove escaping before putting the recorded characters in a
	    register.  (Yukihiro Nakadaira)
相關文件:   src/getchar.c, src/ops.c, src/proto/getchar.pro

Patch 7.0.208 (after 7.0.171 and 7.0.180)
問題:       VMS: changes to path handling cause more trouble than they solve.
解決方案:   Revert changes.
相關文件:   src/buffer.c, src/memline.c, src/os_unix.c

Patch 7.0.209
問題:       When replacing a line through Python the cursor may end up beyond
	    the end of the line.
解決方案:   Check the cursor column after replacing the line.
相關文件:   src/if_python.c

Patch 7.0.210
問題:       ":cbuffer" and ":lbuffer" always fail when the buffer is modified.
	    (Gary Johnson)
解決方案:   Support adding a !. (Yegappan Lakshmanan)
相關文件:   runtime/doc/quickfix.txt, src/ex_cmds.h

Patch 7.0.211
問題:       With ":set cindent noai bs=0" using CTRL-U in Insert mode will
	    delete auto-indent.  After ":set ai" it doesn't.
解決方案:   Also check 'cindent' being set. (Ryan Lortie)
相關文件:   src/edit.c

Patch 7.0.212
問題:       The GUI can't be terminated with SIGTERM. (Mark Logan)
解決方案:   Use the signal protection in the GUI as in the console, allow
	    signals when waiting for 100 msec or longer.
相關文件:   src/ui.c

Patch 7.0.213
問題:       When 'spellfile' has two regions that use the same sound folding
	    using "z=" will cause memory to be freed twice. (Mark Woodward)
解決方案:   Clear the hashtable properly so that the items are only freed once.
相關文件:   src/spell.c

Patch 7.0.214
問題:       When using <f-args> in a user command it's not possible to have an
	    argument end in '\ '.
解決方案:   Change the handling of backslashes. (Yakov Lerner)
相關文件:   runtime/doc/map.txt, src/ex_docmd.c

Patch 7.0.215 (extra)
問題:       Mac: Scrollbar size isn't set.  Context menu has disabled useless
	    Help entry.  Call to MoreMasterPointers() is ignored.
解決方案:   Call SetControlViewSize() in gui_mch_set_scrollbar_thumb().  Use
	    kCMHelpItemRemoveHelp for ContextualMenuSelect().  Remove call to
	    MoreMasterPointers(). (Nicolas Weber)
相關文件:   src/gui_mac.c

Patch 7.0.216
問題:       ":tab wincmd ]" does not open a tab page. (Tony Mechelynck)
解決方案:   Copy the cmdmod.tab value to postponed_split_tab and use it.
相關文件:   src/globals.h, src/ex_docmd.c, src/if_cscope.c, src/window.c

Patch 7.0.217
問題:       This hangs when pressing "n": ":%s/\n/,\r/gc". (Ori Avtalion)
解決方案:   Set "skip_match" to advance to the next line.
相關文件:   src/ex_cmds.c

Patch 7.0.218
問題:       "%B" in 'statusline' always shows zero in Insert mode. (DervishD)
解決方案:   Remove the exception for Insert mode, check the column for being
	    valid instead.
相關文件:   src/buffer.c

Patch 7.0.219
問題:       When using the 'editexisting.vim' script and a file is being
	    edited in another tab page the window is split.  The "+123"
	    argument is not used.
解決方案:   Make the tab page with the file the current tab page.  Set
	    v:swapcommand when starting up to the first "+123" or "-c" command
	    line argument.
相關文件:   runtime/macros/editexisting.vim, src/main.c

Patch 7.0.220
問題:       Crash when using winnr('#') in a new tab page. (Andy Wokula)
解決方案:   Check for not finding the window.
相關文件:   src/eval.c

Patch 7.0.221
問題:       finddir() uses 'path' by default, where "." means relative to the
	    current file.  But it works relative to the current directory.
	    (Tye Zdrojewski)
解決方案:   Add the current buffer name to find_file_in_path_option() for the
	    relative file name.
相關文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.0.222
問題:       Perl indenting using 'cindent' works almost right.
解決方案:   Recognize '#' to start a comment. (Alex Manoussakis)  Added '#'
	    flag in 'cinoptions'.
相關文件:   runtime/doc/indent.txt, src/misc1.c

Patch 7.0.223
問題:       Unprintable characters in completion text mess up the popup menu.
	    (Gombault Damien)
解決方案:   Use strtrans() to make the text printable.
相關文件:   src/charset.c, src/popupmnu.c

Patch 7.0.224
問題:       When expanding "##" spaces are escaped twice.  (Pavol Juhas)
解決方案:   Don't escape the spaces that separate arguments.
相關文件:   src/eval.c, src/ex_docmd.c, src/proto/ex_docmd.pro

Patch 7.0.225
問題:       When using setline() in an InsertEnter autocommand and doing "A"
	    the cursor ends up on the last byte in the line. (Yukihiro
	    Nakadaira)
解決方案:   Only adjust the column when using setline() for the cursor line.
	    Move it back to the head byte if necessary.
相關文件:   src/eval.c, src/misc2.c

Patch 7.0.226
問題:       Display flickering when updating signs through the netbeans
	    interface. (Xavier de Gaye)
解決方案:   Remove the redraw_later(CLEAR) call.
相關文件:   src/netbeans.c

Patch 7.0.227
問題:       Crash when closing a window in the GUI. (Charles Campbell)
解決方案:   Don't call out_flush() from win_free().
相關文件:   src/window.c

Patch 7.0.228
問題:       Cygwin: problem with symlink to DOS style path.
解決方案:   Invoke cygwin_conv_to_posix_path(). (Luca Masini)
相關文件:   src/os_unix.c

Patch 7.0.229
問題:       When 'pastetoggle' starts with Esc then pressing Esc in Insert
	    mode will not time out. (Jeffery Small)
解決方案:   Use KL_PART_KEY instead of KL_PART_MAP, so that 'ttimeout' applies
	    to the 'pastetoggle' key.
相關文件:   src/getchar.c

Patch 7.0.230
問題:       After using ":lcd" a script doesn't know how to restore the
	    current directory.
解決方案:   Add the haslocaldir() function. (Bob Hiestand)
相關文件:   runtime/doc/usr_41.txt, runtime/doc/eval.txt, src/eval.c

Patch 7.0.231
問題:       When recovering from a swap file the page size is likely to be
	    different from the minimum.  The block used for the first page
	    then has a buffer of the wrong size, causing a crash when it's
	    reused later.  (Zephaniah Hull)
解決方案:   Reallocate the buffer when the page size changes.  Also check that
	    the page size is at least the minimum value.
相關文件:   src/memline.c

Patch 7.0.232 (extra)
問題:       Mac: doesn't support GUI tab page labels.
解決方案:   Add GUI tab page labels. (Nicolas Weber)
相關文件:   src/feature.h, src/gui.c, src/gui.h, src/gui_mac.c,
	    src/proto/gui_mac.pro

Patch 7.0.233 (extra)
問題:       Mac: code formatted badly.
解決方案:   Fix code formatting
相關文件:   src/gui_mac.c

Patch 7.0.234
問題:       It's possible to use feedkeys() from a modeline.  That is a
	    security issue, can be used for a trojan horse.
解決方案:   Disallow using feedkeys() in the sandbox.
相關文件:   src/eval.c

Patch 7.0.235
問題:       It is possible to use writefile() in the sandbox.
解決方案:   Add a few more checks for the sandbox.
相關文件:   src/eval.c

Patch 7.0.236
問題:       Linux 2.4 uses sysinfo() with a mem_unit field, which is not
	    backwards compatible.
解決方案:   Add an autoconf check for sysinfo.mem_unit.  Let mch_total_mem()
	    return Kbyte to avoid overflow.
相關文件:   src/auto/configure, src/configure.in, src/config.h.in,
	    src/option.c, src/os_unix.c

Patch 7.0.237
問題:       For root it is recommended to not use 'modeline', but in
	    not-compatible mode the default is on.
解決方案:   Let 'modeline' default to off for root.
相關文件:   runtime/doc/options.txt, src/option.c

Patch 7.0.238
問題:       Crash when ":match" pattern runs into 'maxmempattern'. (Yakov
	    Lerner)
解決方案:   Don't free the regexp program of match_hl.
相關文件:   src/screen.c

Patch 7.0.239
問題:       When using local directories and tab pages ":mksession" uses a
	    short file name when it shouldn't.  Window-local options from a
	    modeline may be applied to the wrong window. (Teemu Likonen)
解決方案:   Add the did_lcd flag, use the full path when it's set.  Don't use
	    window-local options from the modeline when using the current
	    window for another buffer in ":doautoall".
相關文件:   src/fileio.c,  src/ex_docmd.c

Patch 7.0.240
問題:       Crash when splitting a window in the GUI. (opposite of 7.0.227)
解決方案:   Don't call out_flush() from win_alloc().  Also avoid this for
	    win_delete().  Also block autocommands while the window structure
	    is invalid.
相關文件:   src/window.c

Patch 7.0.241
問題:       ":windo throw 'foo'" loops forever. (Andy Wokula)
解決方案:   Detect that win_goto() doesn't work.
相關文件:   src/ex_cmds2.c

Patch 7.0.242 (extra)
問題:       Win32: Using "-register" in a Vim that does not support OLE causes
	    a crash.
解決方案:   Don't use EMSG() but mch_errmsg().  Check p_go for being NULL.
	    (partly by Michael Wookey)
相關文件:   src/gui_w32.c

Patch 7.0.243 (extra)
問題:       Win32: When GvimExt is built with MSVC 2005 or later, the "Edit
	    with vim" context menu doesn't appear in the Windows Explorer.
解決方案:   Embed the linker manifest file into the resources of GvimExt.dll.
	    (Mathias Michaelis)
相關文件:   src/GvimExt/Makefile


Fixes after Vim 7.1a BETA:

The extra archive had CVS directories included below "farsi" and
"runtime/icons".  CVS was missing the farsi icon files.

Fix compiling with Gnome 2.18, undefine bind_textdomain_codeset. (Daniel
Drake)

Mac: "make install" didn't copy rgb.txt.

When editing a compressed file while there are folds caused "ml_get" errors
and some lines could be missing.  When decompressing failed option values were
not restored.


Patch 7.1a.001
問題:       Crash when downloading a spell file.  (Szabolcs Horvat)
解決方案:   Avoid that did_set_spelllang() is used recursively when a new
	    window is opened for the download.
	    Also avoid wiping out the wrong buffer.
相關文件:   runtime/autoload/spellfile.vim, src/buffer.c, src/ex_cmds.c,
            src/spell.c

Patch 7.1a.002 (extra)
問題:       Compilation error with MingW.
解決方案:   Check for LPTOOLTIPTEXT to be defined.
相關文件:   src/gui_w32.c


Fixes after Vim 7.1b BETA:

Made the Mzscheme interface build both with old and new versions of Mzscheme,
using an #ifdef. (Sergey Khorev)
Mzscheme interface didn't link, missing function.  Changed order of libraries
in the configure script.

Ruby interface didn't compile on Mac.  Changed #ifdef. (Kevin Ballard)

Patch 7.1b.001 (extra)
問題:       Random text in a source file.  No idea how it got there.
解決方案:   Delete the text.
相關文件:   src/gui_w32.c

Patch 7.1b.002
問題:       When 'maxmem' is large there can be an overflow in computations.
	    (Thomas Wiegner)
解決方案:   Use the same mechanism as in mch_total_mem(): first reduce the
	    multiplier as much as possible.
相關文件:   src/memfile.c

==============================================================================
7.2 版 本					*version-7.2* *version7.2*

本小節討論 7.1 和 7.2 版本之間的改進。

這主要是一個漏洞修正版。主要的新特性是浮點數支持。|Float|


改動							*changed-7.2*
-------

把命令行緩衝區的名字從 "command-line" 改為 "[Command Line]"。

刪除了 ":caddexpr"、":cgetexpr"、":cgetfile"、":laddexpr"、":lgetexpr" 和
":lgetfile" 命令可選的 !。沒有必要。(Yegappan Lakshmanan)

語法匹配的位移過去是字節數而不是字符數。這很不一致而且很容易弄錯。現在使用字符
位移。
(Yukihiro Nakadaira)

FileChangedShellPost 事件本來在文件沒有改變的時候也會給出。
(John Little)

如果當前行過長 (放不下)，會看不見彈出菜單。現在它在屏幕行而不是文本行下方顯
示。
(Francois Ingelrest)

切換到 autoconf 2.62 版本。

把 fcntl.h 的包含移到了 vim.h，從所有的 .c 文件中刪除其引用。

引入 STRMOVE(d, s) 宏，類似於 STRCPY()，用於有重疊的字符串。用此宏就不需要
mch_memmove(p, p + x, STRLEN(p + x) + 1)。

刪除 bulgarian.vim 鍵盤映射文件，它被兩個更標準的文件代替 (Boyko Bantchev)

命令行補全的標籤最大匹配數目從 200 增加到 300 個。

幫助文件 sql.txt 被換名為 ft_sql.txt，而 ada.txt 也被更名為 ft_ada.txt。


新增							*added-7.2*
-----

新語法文件:
	CUDA (Timothy B. Terriberry)
	Cdrdao config (Nikolai Weibull)
	Coco/R (Ashish Shukla)
	Denyhosts config (Nikolai Weibull)
	Dtrace script (Nicolas Weber)
	Git output、commit、config、rebase、send-email (Tim Pope)
	HASTE 和 HastePreProc (M. Tranchero)
	Haml (Tim Pope)
	Host conf (Nikolai Weibull)
	Linden script (Timo Frenay)
	MS messages (Kevin Locke)
	PDF (Tim Pope)
	ProMeLa (Maurizio Tranchero)
	Reva Foth (Ron Aaron)
	Sass (Tim Pope)
	Symbian meta-makefile、MMP (Ron Aaron)
	VOS CM macro (Andrew McGill)
	XBL (Doug Kearns)

新教程文件:
	創建了所有教程文件的 UTF-8 版本。
	希臘文把 ".gr" 換名為 ".el" (Greek vs Greece)。
	世界語 (Dominique Pelle)
	克羅地亞語 (Paul B. Mahol)

新文件類型插件:
	Cdrdao config (Nikolai Weibull)
	Debian control files (Debian Vim 維護者)
	Denyhosts (Nikolai Weibull)
	Dos .ini file (Nikolai Weibull)
	Dtrace script (Nicolas Weber)
	FnameScript (Nikolai Weibull)
	Git、Git config、Git commit、Git rebase、Git send-email (Tim Pope)
	Haml (Tim Pope)
	Host conf (Nikolai Weibull)
	Host access (Nikolai Weibull)
	Logtalk (Paulo Moura)
	MS messages (Kevin Locke)
	NSIS script (Nikolai Weibull)
	PDF (Tim Pope)
	Reva Forth (Ron Aaron)
	Sass (Tim Pope)

新縮進文件:
	DTD (Nikolai Weibull)
	Dtrace script (Nicolas Weber)
	Erlang (Csaba Hoch)
	FrameScript (Nikolai Weibull)
	Git config (Tim Pope)
	Haml (Tim Pope)
	Logtalk (Paulo Moura)
	Sass (Tim Pope)
	Tiny Fugue (Christian J. Robinson)

新編譯器插件:
	RSpec (Tim Pope)

新鍵盤映射表:
	克羅地亞語 (Paul B. Mahol)
	俄羅斯語 Dvorak (Serhiy Boiko)
	烏克蘭語 Dvorak (Serhiy Boiko)
	刪除簡單保加利亞語，"bds" 和 phonetic 足夠了。

其它新運行時文件:
	世界語菜單和消息翻譯。(Dominique Pelle)
	芬蘭語菜單和消息翻譯。(Flammie Pirinen)
	巴西葡萄牙語菜單和消息翻譯。(Eduardo Dobay)

加入浮點數支持。|Float|

mode() 接受參數以返回關於當前模式更詳細的信息。(Ben Schmidt)

加入 BSD 控制台鼠標的支持: |sysmouse|。(Paul B. Mahol)

'switchbuf' 選項新增 "newtab" 值。(部分由 Yegappan Lakshmanan 提供)

改進了 netbeans 接口的錯誤信息。(Philippe Fremy)

加入 screen 使用 xterm 鼠標代碼的支持。(Micah Cowan)

加入跨平台編譯的支持:
調整了 configure.in 並新增了 INSTALLcross.txt。(Marc Haisenko) 之後修正了
configure.in 的錯誤。
configure 中不使用 /usr/local/include 和 /usr/local/lib。(Philip Prindeville)
為了在 Unix 上跨平台編譯 Cygwin 版本，在 src/vim.rc 中把 VIM.TLB 換名為
vim.tlb。(Tsuneo Nakagawa)

加入 v:searchforward 變量: 當前搜索的方向。(Yakov Lerner)


修正							*fixed-7.2*
-----

Patch 7.1.001
問題:	    Still can't build with Gnome libraries.
解決方案:   Fix typo in bind_textdomain_codeset. (Mike Kelly)
相關文件:   src/gui_gtk.c, src/gui_gtk_x11.c

Patch 7.1.002
問題:	    Oracle Pro*C/C++ files are not detected.
解決方案:   Add the missing star. (Micah J. Cowan)
相關文件:   runtime/filetype.vim

Patch 7.1.003 (extra)
問題:	    The "Tear off this menu" message appears in the message history
	    when using a menu. (Yongwei Wu)
解決方案:   Disable message history when displaying the menu tip.
相關文件:   src/gui_w32.c

Patch 7.1.004
問題:	    Crash when doing ":next directory". (Raphael Finkel)
解決方案:   Do not use "buf", it may be invalid after autocommands.
相關文件:   src/ex_cmds.c

Patch 7.1.005
問題:	    "cit" used on <foo></foo> deletes <foo>.  Should not delete
	    anything and start insertion, like "ci'" does on "". (Michal
	    Bozon)
解決方案:   Handle an empty object specifically.  Made it work consistent for
	    various text objects.
相關文件:   src/search.c

Patch 7.1.006
問題:	    Resetting 'modified' in a StdinReadPost autocommand doesn't work.
解決方案:   Set 'modified' before the autocommands instead of after it.
相關文件:   src/buffer.c

Patch 7.1.007 (extra)
問題:	    Mac: Context menu doesn't work on Intel Macs.
	    Scrollbars are not dimmed when Vim is not the active application.
解決方案:   Remove the test whether context menus are supported.  They are
	    always there in OS/X.  Handle the dimming. (Nicolas Weber)
相關文件:   src/gui_mac.c, src/gui.h

Patch 7.1.008
問題:	    getfsize() returns a negative number for very big files.
解決方案:   Check for overflow and return -2.
相關文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.1.009
問題:	    In diff mode, displaying the difference between a tab and spaces
	    is not highlighted correctly.
解決方案:   Only change highlighting at the end of displaying a tab.
相關文件:   src/screen.c

Patch 7.1.010
問題:	    The Gnome session file doesn't restore tab pages.
解決方案:   Add SSOP_TABPAGES to the session flags. (Matias D'Ambrosio)
相關文件:   src/gui_gtk_x11.c

Patch 7.1.011
問題:	    Possible buffer overflow when $VIMRUNTIME is very long. (Victor
	    Stinner)
解決方案:   Use vim_snprintf().
相關文件:   src/main.c

Patch 7.1.012
問題:	    ":let &shiftwidth = 'asdf'" doesn't produce an error message.
解決方案:   Check for a string argument. (Chris Lubinski)
相關文件:   src/option.c

Patch 7.1.013
問題:	    ":syn include" only loads the first file, while it is documented
	    as doing the equivalent of ":runtime!".
解決方案:   Change the argument to source_runtime(). (James Vega)
相關文件:   src/syntax.c

Patch 7.1.014
問題:	    Crash when doing C indenting. (Chris Monson)
解決方案:   Obtain the current line again after invoking cin_islabel().
相關文件:   src/edit.c

Patch 7.1.015
問題:	    MzScheme interface: current-library-collection-paths produces no
	    list.  Interface doesn't build on a Mac.
解決方案:   Use a list instead of a pair. (Bernhard Fisseni)  Use "-framework"
	    argument for MZSCHEME_LIBS in configure.
相關文件:   src/configure.in, src/if_mzsch.c, src/auto/configure

Patch 7.1.016 (after patch 7.1.012)
問題:	    Error message about setting 'diff' to a string.
解決方案:   Don't pass an empty string to set_option_value() when setting
	    'diff'.
相關文件:   src/quickfix.c, src/popupmnu.c

Patch 7.1.017
問題:	    ":confirm w" does give a prompt when 'readonly' is set, but not
	    when the file permissions are read-only.  (Michael Schaap)
解決方案:   Provide a dialog in both situations.  (Chris Lubinski)
相關文件:   src/ex_cmds.c, src/fileio.c, src/proto/fileio.pro

Patch 7.1.018
問題:	    When 'virtualedit' is set a "p" of a block just past the end of
	    the line inserts before the cursor. (Engelke)
解決方案:   Check for the cursor being just after the line (Chris Lubinski)
相關文件:   src/ops.c

Patch 7.1.019
問題:	    ":py" asks for an argument, ":py asd" then gives the error that
	    ":py" isn't implemented.  Should already happen for ":py".
解決方案:   Compare with ex_script_ni. (Chris Lubinski)
相關文件:   src/ex_docmd.c

Patch 7.1.020
問題:	    Reading from uninitialized memory when using a dialog. (Dominique
	    Pelle)
解決方案:   In msg_show_console_dialog() append a NUL after every appended
	    character.
相關文件:   src/message.c

Patch 7.1.021 (after 7.1.015)
問題:	    Mzscheme interface doesn't compile on Win32.
解決方案:   Fix the problem that 7.1.015 fixed in a better way. (Sergey Khorev)
相關文件:   src/if_mzsch.c

Patch 7.1.022
問題:	    When setting 'keymap' twice the b:keymap_name variable isn't set.
	    (Milan Berta)
解決方案:   Don't unlet b:keymap_name for ":loadkeymap". (Martin Toft)
相關文件:   src/digraph.c

Patch 7.1.023
問題:	    "dw" in a line with one character deletes the line.  Vi and nvi
	    don't do this.  (Kjell Arne Rekaa)
解決方案:   Check for one-character words especially.
相關文件:   src/search.c

Patch 7.1.024
問題:	    Using a pointer that has become invalid. (Chris Monson)
解決方案:   Obtain the line pointer again after we looked at another line.
相關文件:   src/search.c

Patch 7.1.025
問題:	    search() and searchpos() don't use match under cursor at start of
	    line when using 'bc' flags. (Viktor Kojouharov)
解決方案:   Don't go to the previous line when the 'c' flag is present.
	    Also fix that "j" doesn't move the cursor to the right column.
相關文件:   src/eval.c, src/search.c

Patch 7.1.026
問題:	    "[p" doesn't work in Visual mode. (David Brown)
解決方案:   Use checkclearop() instead of checkclearopq().
相關文件:   src/normal.c

Patch 7.1.027
問題:	    On Sun systems opening /dev/fd/N doesn't work, and they are used
	    by process substitutions.
解決方案:   Allow opening specific character special files for Sun systems.
	    (Gary Johnson)
相關文件:   src/fileio.c, src/os_unix.h

Patch 7.1.028
問題:	    Can't use last search pattern for ":sort". (Brian McKee)
解決方案:   When the pattern is empty use the last search pattern. (Martin
	    Toft)
相關文件:   runtime/doc/change.txt, src/ex_cmds.c

Patch 7.1.029 (after 7.1.019)
問題:	    Can't compile when all interfaces are used. (Taylor Venable)
解決方案:   Only check for ex_script_ni when it's defined.
相關文件:   src/ex_docmd.c

Patch 7.1.030
問題:	    The "vimtutor" shell script checks for "vim6" but not for "vim7".
	    (Christian Robinson)
解決方案:   Check for more versions, but prefer using "vim".
相關文件:   src/vimtutor

Patch 7.1.031
問題:	    virtcol([123, '$']) doesn't work. (Michael Schaap)
解決方案:   When '$' is used for the column number get the last column.
相關文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.1.032
問題:	    Potential crash when editing a command line. (Chris Monson)
解決方案:   Check the position to avoid access before the start of an array.
相關文件:   src/ex_getln.c

Patch 7.1.033
問題:	    A buffer is marked modified when it was first deleted and then
	    added again using a ":next" command. (John Mullin)
解決方案:   When checking if a buffer is modified use the BF_NEVERLOADED flag.
相關文件:   src/option.c

Patch 7.1.034
問題:	    Win64: A few compiler warnings.  Problems with optimizer.
解決方案:   Use int instead of size_t.  Disable the optimizer in one function.
	    (George V.  Reilly)
相關文件:   src/eval.c, src/spell.c

Patch 7.1.035
問題:	    After ":s/./&/#" all listed lines have a line number. (Yakov
	    Lerner)
解決方案:   Reset the line number flag when not using the "&" flag.
相關文件:   src/ex_cmds.c

Patch 7.1.036
問題:	    Completing ":echohl" argument should include "None". (Ori
	    Avtalion)  ":match" should have "none" too.
解決方案:   Add flags to use expand_highlight().  Also fix that when disabling
	    FEAT_CMDL_COMPL compilation fails.  (Chris Lubinski)
相關文件:   src/eval.c, src/ex_docmd.c, src/ex_getln.c, src/proto/syntax.pro
	    src/syntax.c

Patch 7.1.037
問題:	    strcpy() used for overlapping strings. (Chris Monson)
解決方案:   Use mch_memmove() instead.
相關文件:   src/option.c

Patch 7.1.038
問題:	    When 'expandtab' is set then a Tab copied for 'copyindent' is
	    expanded to spaces, even when 'preserveindent' is set. (Alexei
	    Alexandrov)
解決方案:   Remove the check for 'expandtab'.  Also fix that ">>" doesn't obey
	    'preserveindent'. (Chris Lubinski)
相關文件:   src/misc1.c

Patch 7.1.039
問題:	    A tag in a help file that starts with "help-tags" and contains a
	    percent sign may make Vim crash. (Ulf Harnhammar)
解決方案:   Use puts() instead of fprintf().
相關文件:   src/ex_cmds.c

Patch 7.1.040
問題:	    ":match" only supports three matches.
解決方案:   Add functions clearmatches(), getmatches(), matchadd(),
	    matchdelete() and setmatches().  Changed the data structures for
	    this.  A small bug in syntax.c is fixed, so newly created
	    highlight groups can have their name resolved correctly from their
	    ID.  (Martin Toft)
相關文件:   runtime/doc/eval.txt, runtime/doc/pattern.txt,
	    runtime/doc/usr_41.txt, src/eval.c, src/ex_docmd.c,
	    src/proto/window.pro, src/screen.c, src/structs.h, src/syntax.c,
	    src/testdir/Makefile, src/testdir/test63.in,
	    src/testdir/test63.ok, src/window.c

Patch 7.1.041 (extra, after 7.1.040)
問題:	    Some changes for patch 7.1.040 are in extra files.
解決方案:   Update the extra files.
相關文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms

Patch 7.1.042 (after 7.1.040)
問題:	    Internal error when using matchadd(). (David Larson)
解決方案:   Check the third argument to be present before using the fourth
	    argument. (Martin Toft)
相關文件:   src/eval.c

Patch 7.1.043
問題:	    In Ex mode using CTRL-D twice may cause a crash.  Cursor isn't
	    positioned properly after CTRL-D.
解決方案:   Set prev_char properly.  Position the cursor correctly. (Antony
	    Scriven)
相關文件:   src/ex_getln.c

Patch 7.1.044
問題:	    In Insert mode 0 CTRL-T deletes all indent, it should add indent.
	    (Gautam Iyer)
解決方案:   Check for CTRL-D typed.
相關文件:   src/edit.c

Patch 7.1.045
問題:	    Unnecessary screen redrawing. (Jjgod Jiang)
解決方案:   Reset "must_redraw" after clearing the screen.
相關文件:   src/screen.c

Patch 7.1.046
問題:	    ":s" command removes combining characters. (Ron Aaron)
解決方案:   Copy composing characters individually. (Chris Lubinski)
相關文件:   src/regexp.c

Patch 7.1.047
問題:	    vim_regcomp() called with invalid argument. (Xiaozhou Liu)
解決方案:   Change TRUE to RE_MAGIC + RE_STRING.
相關文件:   src/ex_eval.c

Patch 7.1.048
問題:	    The matchparen plugin doesn't update the match when scrolling with
	    the mouse wheel. (Ilya Bobir)
解決方案:   Set the match highlighting for text that can be scrolled into the
	    viewable area without moving the cursor. (Chris Lubinski)
相關文件:   runtime/plugin/matchparen.vim

Patch 7.1.049
問題:	    Cannot compile GTK2 version with Hangul input feature.
解決方案:   Don't define FEAT_XFONTSET when using GTK2.
相關文件:   src/feature.h

Patch 7.1.050
問題:	    Possible crash when using C++ indenting. (Chris Monson)
解決方案:   Keep the line pointer to the line to compare with.  Avoid going
	    past the end of line.
相關文件:   src/misc1.c

Patch 7.1.051
問題:	    Accessing uninitialized memory when finding spell suggestions.
解決方案:   Don't try swapping characters at the end of a word.
相關文件:   src/spell.c

Patch 7.1.052
問題:	    When creating a new match not all fields are initialized, which
	    may lead to unpredictable results.
解決方案:   Initialise rmm_ic and rmm_maxcol.
相關文件:   src/window.c

Patch 7.1.053
問題:	    Accessing uninitialized memory when giving a message.
解決方案:   Check going the length before checking for a NUL byte.
相關文件:   src/message.c

Patch 7.1.054
問題:	    Accessing uninitialized memory when displaying the fold column.
解決方案:   Add a NUL to the extra array. (Dominique Pelle).  Also do this in
	    a couple of other situations.
相關文件:   src/screen.c

Patch 7.1.055
問題:	    Using strcpy() with arguments that overlap.
解決方案:   Use mch_memmove() instead.
相關文件:   src/buffer.c, src/charset.c, src/eval.c, src/ex_getln.c,
	    src/misc1.c, src/regexp.c, src/termlib.c

Patch 7.1.056
問題:	    More prompt does not behave correctly after scrolling back.
	    (Randall W. Morris)
解決方案:   Avoid lines_left becomes negative. (Chris Lubinski)  Don't check
	    mp_last when deciding to show the more prompt. (Martin Toft)
相關文件:   src/message.c

Patch 7.1.057
問題:	    Problem with CursorHoldI when using "r" in Visual mode (Max
	    Dyckhoff)
解決方案:   Ignore CursorHold(I) when getting a second character for a Normal
	    mode command.  Also abort the "r" command in Visual when a special
	    key is typed.
相關文件:   src/normal.c

Patch 7.1.058
問題:	    When 'rightleft' is set the completion menu is positioned wrong.
	    (Baha-Eddine MOKADEM)
解決方案:   Fix the completion menu. (Martin Toft)
相關文件:   src/popupmnu.c, src/proto/search.pro, src/search.c

Patch 7.1.059
問題:	    When in Ex mode and doing "g/^/vi" and then pressing CTRL-C Vim
	    hangs and beeps. (Antony Scriven)
解決方案:   Clear "got_int" in the main loop to avoid the hang.  When typing
	    CTRL-C twice in a row abort the ":g" command.  This is Vi
	    compatible.
相關文件:   src/main.c

Patch 7.1.060
問題:	    Splitting quickfix window messes up window layout. (Marius
	    Gedminas)
解決方案:   Compute the window size in a smarter way. (Martin Toft)
相關文件:   src/window.c

Patch 7.1.061
問題:	    Win32: When 'encoding' is "latin1" 'ignorecase' doesn't work for
	    characters with umlaut. (Joachim Hofmann)
解決方案:   Do not use islower()/isupper()/tolower()/toupper() but our own
	    functions. (Chris Lubinski)
相關文件:   src/mbyte.c, src/regexp.c, src/vim.h

Patch 7.1.062 (after 7.1.038)
問題:	    Indents of C comments can be wrong. (John Mullin)
解決方案:   Adjust ind_len. (Chris Lubinski)
相關文件:   src/misc1.c

Patch 7.1.063 (after 7.1.040)
問題:	    Warning for uninitialized variable.
解決方案:   Initialise it to NULL.
相關文件:   src/ex_docmd.c

Patch 7.1.064
問題:	    On Interix some files appear not to exist.
解決方案:   Remove the top bit from st_mode. (Ligesh)
相關文件:   src/os_unix.c

Patch 7.1.065 (extra)
問題:	    Win32: Compilation problem for newer version of w32api.
解決方案:   Only define __IID_DEFINED__ when needed. (Chris Sutcliffe)
相關文件:   src/Make_ming.mak, src/iid_ole.c

Patch 7.1.066
問題:	    When 'bomb' is set or reset the file should be considered
	    modified.  (Tony Mechelynck)
解決方案:   Handle like 'endofline'. (Martin Toft)
相關文件:   src/buffer.c, src/fileio.c, src/option.c, src/structs.h

Patch 7.1.067
問題:	    'thesaurus' doesn't work when 'infercase' is set. (Mohsin)
解決方案:   Don't copy the characters being completed but check the case and
	    apply it to the suggested word.  Also fix that the first word in
	    the thesaurus line is not used.  (Martin Toft)
相關文件:   src/edit.c

Patch 7.1.068
問題:	    When 'equalalways' is set and splitting a window, it's possible
	    that another small window gets bigger.
解決方案:   Only equalize window sizes when after a split the windows are
	    smaller than another window. (Martin Toft)
相關文件:   runtime/doc/options.txt, runtime/doc/windows.txt, src/window.c

Patch 7.1.069
問題:	    GTK GUI: When using confirm() without a default button there still
	    is a default choice.
解決方案:   Ignore Enter and Space when there is no default button. (Chris
	    Lubinski)
相關文件:   src/gui_gtk.c

Patch 7.1.070 (extra)
問題:	    Win32 GUI: When using confirm() without a default button there
	    still is a default choice.
解決方案:   Set focus on something else than a button. (Chris Lubinski)
相關文件:   src/gui_w32.c

Patch 7.1.071 (after 7.1.040)
問題:	    Regexp patterns are not tested.
解決方案:   Add a basic test, to be expanded later.
	    Also add (commented-out) support for valgrind.
相關文件:   src/testdir/Makefile, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.1.072 (extra, after 7.1.041 and 7.1.071)
問題:	    Some changes for patch 7.1.071 are in extra files.
解決方案:   Update the extra files.  Also fix a few warnings from the DOS test
	    makefile.
相關文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms

Patch 7.1.073 (after 7.1.062)
問題:	    Wrong cursor position and crash when 'preserveindent' is set.
	    (Charles Campbell)
解決方案:   Handle the situation that we start without indent. (Chris
	    Lubinski)
相關文件:   src/misc1.c

Patch 7.1.074
問題:	    Crash when calling string() on a recursively nested List.
解決方案:   Check result value for being NULL. (Yukihiro Nakadaira)
相關文件:   src/eval.c

Patch 7.1.075
問題:	    ":let v:statusmsg" reads memory already freed.
解決方案:   Don't set v:statusmsg when listing it.
相關文件:   src/eval.c

Patch 7.1.076
問題:	    Another strcpy() with overlapping arguments.
解決方案:   Use mch_memmove(). (Dominique Pelle)  And another one.
相關文件:   src/ex_docmd.c, src/normal.c

Patch 7.1.077
問題:	    Using "can_spell" without initializing it. (Dominique Pelle)
解決方案:   Set a default for get_syntax_attr().
相關文件:   src/syntax.c

Patch 7.1.078
問題:	    Dropping a file name on gvim that contains a CSI byte doesn't work
	    when editing the command line.
解決方案:   Escape the CSI byte when inserting in the input buffer. (Yukihiro
	    Nakadaira)
相關文件:   src/gui.c, src/ui.c

Patch 7.1.079
問題:	    When the locale is "C" and 'encoding' is "latin1" then the "@"
	    character in 'isfname', 'isprint', etc. doesn't pick up accented
	    characters.
解決方案:   Instead of isalpha() use MB_ISLOWER() and MB_ISUPPER().
相關文件:   src/charset.c, src/macros.h

Patch 7.1.080 (extra)
問題:	    Compiler warnings for using "const char *" for "char *".
解決方案:   Add type casts. (Chris Sutcliffe)
相關文件:   src/GvimExt/gvimext.cpp

Patch 7.1.081
問題:	    Command line completion for a shell command: "cat </tmp/file<Tab>"
	    doesn't work.
解決方案:   Start the file name at any character that can't be in a file name.
	    (Martin Toft)
相關文件:   src/ex_docmd.c

Patch 7.1.082
問題:	    After a ":split" the matchparen highlighting isn't there.
解決方案:   Install a WinEnter autocommand.  Also fixes that after
	    ":NoMatchParen" only the current window is updated. (Martin Toft)
相關文件:   runtime/doc/pi_paren.txt, runtime/plugin/matchparen.vim

Patch 7.1.083 (after 7.1.081)
問題:	    Command line completion doesn't work with wildcards.
解決方案:   Add vim_isfilec_or_wc() and use it. (Martin Toft)
相關文件:   src/charset.c, src/proto/charset.pro, src/ex_docmd.c

Patch 7.1.084
問題:	    Using the "-nb" argument twice causes netbeans not to get
	    fileOpened events.
解決方案:   Change "&" to "&&". (Xavier de Gaye)
相關文件:   src/ex_cmds.c

Patch 7.1.085
問題:	    ":e fold.c" then ":sp fold.c" results in folds of original window
	    to disappear. (Akita Noek)
解決方案:   Invoke foldUpdateAll() for all windows of the changed buffer.
	    (Martin Toft)
相關文件:   src/ex_cmds.c

Patch 7.1.086
問題:	    Crash when using specific Python syntax highlighting.  (Quirk)
解決方案:   Check for a negative index, coming from a keyword match at the
	    start of a line from a saved state.
相關文件:   src/syntax.c

Patch 7.1.087
問題:	    Reading past ":cscope find" command.  Writing past end of a buffer.
解決方案:   Check length of the argument before using the pattern.  Use
	    vim_strncpy().  (Dominique Pelle)
相關文件:   if_cscope.c

Patch 7.1.088 (extra)
問題:	    The coordinates used by ":winpos" differ from what getwinposx()
	    and getwinposy() return.
解決方案:   Use MoveWindowStructure() instead of MoveWindow(). (Michael Henry)
相關文件:   src/gui_mac.c

Patch 7.1.089
問題:	    ":let loaded_getscriptPlugin" doesn't clear to eol, result is
	    "#1in".
解決方案:   Clear to the end of the screen after displaying the first variable
	    value.
相關文件:   src/eval.c

Patch 7.1.090
問題:	    Compiler warning on Mac OS X 10.5.
解決方案:   Don't redeclare sigaltstack(). (Hisashi T Fujinaka)
相關文件:   src/os_unix.c

Patch 7.1.091 (extra)
問題:	    Win32: Can't embed Vim inside another application.
解決方案:   Add the --windowid argument. (Nageshwar)
相關文件:   runtime/doc/gui_w32.txt, runtime/doc/starting.txt,
	    runtime/doc/vi_diff.txt, src/globals.h, src/gui_w32.c, src/main.c

Patch 7.1.092 (extra, after 7.1.088)
問題:	    Wrong arguments for MoveWindowStructure().
解決方案:   Remove "TRUE". (Michael Henry)
相關文件:   src/gui_mac.c

Patch 7.1.093
問題:	    Reading past end of a screen line when determining cell width.
	    (Dominique Pelle)
解決方案:   Add an argument to mb_off2cells() for the maximum offset.
相關文件:   src/globals.h, src/gui.c, src/mbyte.c, src/proto/mbyte.pro,
	    src/screen.c

Patch 7.1.094
問題:	    When checking if syntax highlighting is present, looking in the
	    current buffer instead of the specified one.
解決方案:   Use "buf" instead of "curbuf".
相關文件:   src/syntax.c

Patch 7.1.095
問題:	    The FocusLost and FocusGained autocommands are triggered
	    asynchronously in the GUI.  This may cause arbitrary problems.
解決方案:   Put the focus event in the input buffer and handle it when ready
	    for it.
相關文件:   src/eval.c, src/getchar.c, src/gui.c, src/gui_gtk_x11.c,
	    src/keymap.h

Patch 7.1.096
問題:	    Reading past end of a string when resizing Vim. (Dominique Pelle)
解決方案:   Check the string pointer before getting the char it points to.
相關文件:   src/message.c

Patch 7.1.097
問題:	    ":setlocal stl=%!1+1" does not work.
解決方案:   Adjust check for pointer. (Politz)
相關文件:   src/option.c

Patch 7.1.098
問題:	    ":call s:var()" doesn't work if "s:var" is a Funcref. (Andy Wokula)
解決方案:   Before converting "s:" into a script ID, check if it is a Funcref.
相關文件:   src/eval.c

Patch 7.1.099
問題:	    When the 'keymap' and 'paste' options have a non-default value,
	    ":mkexrc" and ":mksession" do not correctly set the options.
解決方案:   Set the options with side effects before other options.
相關文件:   src/option.c

Patch 7.1.100
問題:	    Win32: Executing cscope doesn't always work properly.
解決方案:   Use another way to invoke cscope. (Mike Williams)
相關文件:   src/if_cscope.c, src/if_cscope.h, src/main.c,
	    src/proto/if_cscope.pro

Patch 7.1.101
問題:	    Ruby: The Buffer.line= method does not work.
解決方案:   Add the "self" argument to set_current_line(). (Jonathan Hankins)
相關文件:   src/if_ruby.c

Patch 7.1.102
問題:	    Perl interface doesn't compile with new version of Perl.
解決方案:   Add two variables to the dynamic library loading. (Suresh
	    Govindachar)
相關文件:   src/if_perl.xs

Patch 7.1.103
問題:	    Using "dw" with the cursor past the end of the last line (using
	    CTRL-\ CTRL-O from Insert mode) deletes a character. (Tim Chase)
解決方案:   Don't move the cursor back when the movement failed.
相關文件:   src/normal.c

Patch 7.1.104 (after 7.1.095)
問題:	    When 'lazyredraw' is set a focus event causes redraw to be
	    postponed until a key is pressed.
解決方案:   Instead of not returning from vgetc() when a focus event is
	    encountered return K_IGNORE.  Add plain_vgetc() for when the
	    caller doesn't want to get K_IGNORE.
相關文件:   src/digraph.c, src/edit.c, src/ex_cmds.c, src/ex_getln.c,
	    src/getchar.c, src/normal.c, src/proto/getchar.pro, src/window.c

Patch 7.1.105
問題:	    Internal error when using "0 ? {'a': 1} : {}". (A.Politz)
解決方案:   When parsing a dictionary value without using the value, don't try
	    obtaining the key name.
相關文件:   src/eval.c

Patch 7.1.106
問題:	    ":messages" doesn't quit listing on ":".
解決方案:   Break the loop when "got_int" is set.
相關文件:   src/message.c

Patch 7.1.107
問題:	    When doing a block selection and using "s" to change the text,
	    while triggering auto-indenting, causes the wrong text to be
	    repeated in other lines. (Adri Verhoef)
解決方案:   Compute the change of indent and compensate for that.
相關文件:   src/ops.c

Patch 7.1.108 (after 7.1.100)
問題:	    Win32: Compilation problems in Cscope code. (Jeff Lanzarotta)
解決方案:   Use (long) instead of (intptr_t) when it's not defined.
相關文件:   src/if_cscope.c

Patch 7.1.109
問題:	    GTK: when there are many tab pages, clicking on the arrow left of
	    the labels moves to the next tab page on the right. (Simeon Bird)
解決方案:   Check the X coordinate of the click and pass -1 as value for the
	    left arrow.
相關文件:   src/gui_gtk_x11.c, src/term.c

Patch 7.1.110 (after 7.1.102)
問題:	    Win32: Still compilation problems with Perl.
解決方案:   Change the #ifdefs. (Suresh Govindachar)
相關文件:   src/if_perl.xs

Patch 7.1.111
問題:	    When using ":vimgrep" with the "j" flag folds from another buffer
	    may be displayed. (A.Politz)
解決方案:   When not jumping to another buffer update the folds.
相關文件:   src/quickfix.c

Patch 7.1.112
問題:	    Using input() with a wrong argument may crash Vim. (A.Politz)
解決方案:   Init the input() return value to NULL.
相關文件:   src/eval.c

Patch 7.1.113
問題:	    Using map() to go over an empty list causes memory to be freed
	    twice. (A.Politz)
解決方案:   Don't clear the typeval in restore_vimvar().
相關文件:   src/eval.c

Patch 7.1.114
問題:	    Memory leak in getmatches().
解決方案:   Don't increment the refcount twice.
相關文件:   src/eval.c

Patch 7.1.115 (after 7.1.105)
問題:	    Compiler warning for uninitialized variable. (Tony Mechelynck)
解決方案:   Init variable to NULL.
相關文件:   src/eval.c

Patch 7.1.116
問題:	    Cannot display Unicode characters above 0x10000.
解決方案:   Remove the replacement with a question mark when UNICODE16 is not
	    defined. (partly by Nicolas Weber)
相關文件:   src/screen.c

Patch 7.1.117
問題:	    Can't check whether Vim was compiled with Gnome. (Tony Mechelynck)
解決方案:   Add gui_gnome to the has() list.
相關文件:   src/eval.c

Patch 7.1.118 (after 7.1.107)
問題:	    Compiler warning for Visual C compiler.
解決方案:   Add typecast. (Mike Williams)
相關文件:   src/ops.c

Patch 7.1.119
問題:	    Crash when 'cmdheight' set to very large value. (A.Politz)
解決方案:   Limit 'cmdheight' to 'lines' minus one.  Store right value of
	    'cmdheight' when running out of room.
相關文件:   src/option.c, src/window.c

Patch 7.1.120
問題:	    Can't properly check memory leaks while running tests.
解決方案:   Add an argument to garbagecollect().  Delete functions and
	    variables in the test scripts.
相關文件:   runtime/doc/eval.txt src/eval.c, src/globals.h, src/main.c,
	    src/testdir/Makefile, src/testdir/test14.in,
	    src/testdir/test26.in, src/testdir/test34.in,
	    src/testdir/test45.in, src/testdir/test47.in,
	    src/testdir/test49.in, src/testdir/test55.in,
	    src/testdir/test56.in, src/testdir/test58.in,
	    src/testdir/test59.in, src/testdir/test60.in,
	    src/testdir/test60.vim, src/testdir/test62.in,
	    src/testdir/test63.in, src/testdir/test64.in,

Patch 7.1.121
問題:	    Using ":cd %:h" when editing a file in the current directory
	    results in an error message for using an empty string.
解決方案:   When "%:h" results in an empty string use ".".
相關文件:   src/eval.c

Patch 7.1.122
問題:	    Mac: building Vim.app fails.  Using wrong architecture.
解決方案:   Use line continuation for the gui_bundle dependency.  Detect the
	    system architecture with "uname -a".
相關文件:   src/main.aap

Patch 7.1.123
問題:	    Win32: ":edit foo ~ foo" expands "~".
解決方案:   Change the call to expand_env().
相關文件:   src/ex_docmd.c, src/misc1.c, src/proto/misc1.pro, src/option.c

Patch 7.1.124 (extra)
問題:	    Mac: When dropping a file on Vim.app that is already in the buffer
	    list (from .viminfo) results in editing an empty, unnamed buffer.
	    (Axel Kielhorn)  Also: warning for unused variable.
解決方案:   Move to the buffer of the first argument.  Delete unused variable.
相關文件:   src/gui_mac.c

Patch 7.1.125
問題:	    The TermResponse autocommand event is not always triggered. (Aron
	    Griffis)
解決方案:   When unblocking autocommands check if v:termresponse changed and
	    trigger the event then.
相關文件:   src/buffer.c, src/diff.c, src/ex_getln.c, src/fileio.c,
	    src/globals.h, src/misc2.c, src/proto/fileio.pro, src/window.c

Patch 7.1.126 (extra)
問題:	    ":vimgrep */*" fails when a BufRead autocommand changes directory.
	    (Bernhard Kuhn)
解決方案:   Change back to the original directory after loading a file.
	    Also: use shorten_fname1() to avoid duplicating code.
相關文件:   src/buffer.c, src/ex_docmd.c, src/fileio.c, src/gui_gtk.c,
	    src/gui_w48.c, src/proto/ex_docmd.pro, src/proto/fileio.pro,
	    src/quickfix.c

Patch 7.1.127
問題:	    Memory leak when doing cmdline completion. (Dominique Pelle)
解決方案:   Free "orig" argument of ExpandOne() when it's not used.
相關文件:   src/ex_getln.c

Patch 7.1.128 (extra)
問題:	    Build problems with new version of Cygwin.
解決方案:   Remove -D__IID_DEFINED__, like with MingW. (Guopeng Wen)
相關文件:   src/Make_cyg.mak

Patch 7.1.129 (extra)
問題:	    Win32: Can't get the user name when it is longer than 15
	    characters.
解決方案:   Use UNLEN instead of MAX_COMPUTERNAME_LENGTH. (Alexei Alexandrov)
相關文件:   src/os_win32.c

Patch 7.1.130
問題:	    Crash with specific order of undo and redo. (A.Politz)
解決方案:   Clear and adjust pointers properly.  Add u_check() for debugging.
相關文件:   src/undo.c, src/structs.h

Patch 7.1.131
問題:	    ":mksession" always adds ":setlocal autoread". (Christian J.
	    Robinson)
解決方案:   Skip boolean global/local option using global value.
相關文件:   src/option.c

Patch 7.1.132
問題:	    getpos("'>") may return a negative column number for a Linewise
	    selection. (A.Politz)
解決方案:   Don't add one to MAXCOL.
相關文件:   src/eval.c

Patch 7.1.133 (after 7.1.126)
問題:	    shorten_fname1() linked when it's not needed.
解決方案:   Add #ifdef.
相關文件:   src/fileio.c

Patch 7.1.134 (extra)
問題:	    Win32: Can't build with VC8
解決方案:   Detect the MSVC version instead of using NMAKE_VER.
	    (Mike Williams)
相關文件:   src/Make_mvc.mak

Patch 7.1.135
問題:	    Win32: When editing a file c:\tmp\foo and c:\tmp\\foo we have two
	    buffers for the same file. (Suresh Govindachar)
解決方案:   Invoke FullName_save() when a path contains "//" or "\\".
相關文件:   src/buffer.c

Patch 7.1.136
問題:	    Memory leak when using Ruby syntax highlighting. (Dominique Pelle)
解決方案:   Free the contained-in list.
相關文件:   src/syntax.c

Patch 7.1.137
問題:	    Build failure when using EXITFREE. (Dominique Pelle)
解決方案:   Add an #ifdef around using clip_exclude_prog.
相關文件:   src/misc2.c

Patch 7.1.138
問題:	    The Perl Msg() function doesn't stop when "q" is typed at the more
	    prompt. (Hari Krishna Dara)
解決方案:   Check got_int.
相關文件:   src/if_perl.xs

Patch 7.1.139
問題:	    When using marker folding and ending Insert mode with CTRL-C the
	    current fold is truncated. (Fred Kater)
解決方案:   Ignore got_int while updating folds.
相關文件:   src/fold.c

Patch 7.1.140
問題:	    v:count is set only after typing a non-digit, that makes it
	    difficult to make a nice mapping.
解決方案:   Set v:count while still typing the count.
相關文件:   src/normal.c

Patch 7.1.141
問題:	    GTK: -geom argument doesn't support a negative offset.
解決方案:   Compute position from the right/lower corner.
相關文件:   src/gui_gtk_x11.c

Patch 7.1.142
問題:	    ":redir @A>" doesn't work.
解決方案:   Ignore the extra ">" also when appending. (James Vega)
相關文件:   src/ex_docmd.c

Patch 7.1.143
問題:	    Uninitialized memory read when diffing three files. (Dominique
	    Pelle)
解決方案:   Remove "+ !notset" so that we don't use fields that were not
	    computed.
相關文件:   src/diff.c

Patch 7.1.144
問題:	    After ":diffup" cursor can be in the wrong position.
解決方案:   Force recomputing the cursor position.
相關文件:   src/diff.c

Patch 7.1.145
問題:	    Insert mode completion: When using the popup menu, after
	    completing a word and typing a non-word character Vim is still
	    completing the same word, following CTRL-N doesn't work.
	    Insert mode Completion: When using CTRL-X O and there is only
	    "struct." before the cursor, typing one char to reduce the
	    matches, then BS completion stops.
解決方案:   When typing a character that is not part of the item being
	    completed, stop complete mode.  For whole line completion also
	    accept a space.  For file name completion stop at a path
	    separator.
	    For omni completion stay in completion mode even if completing
	    with empty string.
相關文件:   src/edit.c

Patch 7.1.146 (extra)
問題:	    VMS: Files with a very rare record organization (VFC) cannot be
	    properly written by Vim.
	    On older VAX systems mms runs into a syntax error.
解決方案:   Check for this special situation.  Do not wrap a comment, make it
	    one long line.  (Zoltan Arpadffy)
相關文件:   src/fileio.c, src/Make_vms.mms

Patch 7.1.147 (after 7.1.127)
問題:	    Freeing memory already freed when completing user name. (Meino
	    Cramer)
解決方案:   Use a flag to remember if "orig" needs to be freed.
相關文件:   src/ex_getln.c

Patch 7.1.148
問題:	    Some types are not found by configure.
解決方案:   Test for the sys/types.h header file. (Sean Boudreau)
相關文件:   src/configure.in, src/auto/configure

Patch 7.1.149
問題:	    GTK GUI: When the completion popup menu is used scrolling another
	    window by the scrollbar is OK, but using the scroll wheel it
	    behaves line <Enter>.
解決方案:   Ignore K_MOUSEDOWN and K_MOUSEUP.  Fix redrawing the popup menu.
相關文件:   src/edit.c, src/gui.c

Patch 7.1.150
問題:	    When 'clipboard' has "unnamed" using "p" in Visual mode doesn't
	    work correctly. (Jianrong Yu)
解決方案:   When 'clipboard' has "unnamed" also obtain the selection when
	    getting the default register.
相關文件:   src/ops.c

Patch 7.1.151
問題:	    Using whole line completion with 'ignorecase' and 'infercase' set
	    and the line is empty get an lalloc(0) error.
解決方案:   Don't try changing case for an empty match. (Matthew Wozniski)
相關文件:   src/edit.c

Patch 7.1.152
問題:	    Display problem when 'hls' and 'cursorcolumn' are set and
	    searching for "$".  (John Mullin)  Also when scrolling
	    horizontally when 'wrap' is off.
解決方案:   Keep track of the column where highlighting was set.  Check the
	    column offset when skipping characters.
相關文件:   src/screen.c

Patch 7.1.153
問題:	    Compiler warnings on SGI.  Undefined XpmAllocColor (Charles
	    Campbell)
解決方案:   Add type casts.  Init st_dev and st_ino separately.  Don't use
	    type casts for vim_snprintf() when HAVE_STDARG_H is defined.
	    Define XpmAllocColor when needed.
相關文件:   src/eval.c, src/ex_cmds.c, src/fileio.c, src/misc2.c,
	    src/gui_xmebw.c

Patch 7.1.154
問題:	    Compiler warning for signed/unsigned compare.
解決方案:   Add type cast.
相關文件:   src/screen.c

Patch 7.1.155
問題:	    Crash when 'undolevels' is 0 and repeating "udd". (James Vega)
解決方案:   When there is only one branch use u_freeheader() to delete it.
相關文件:   src/undo.c

Patch 7.1.156
問題:	    Overlapping arguments for strcpy() when expanding command line
	    variables.
解決方案:   Use mch_memmove() instead of STRCPY().  Also fix a few typos.
	    (Dominique Pelle)
相關文件:   src/ex_docmd.c

Patch 7.1.157
問題:	    In Ex mode, :" gives an error at end-of-file. (Michael Hordijk)
解決方案:   Only give an error for an empty line, not for a comment.
相關文件:   src/ex_docmd.c

Patch 7.1.158 (extra)
問題:	    Win32 console: When 'encoding' is "utf-8" and typing Alt-y the
	    result is wrong.  Win32 GUI: Alt-y results in "u" when 'encoding'
	    is "cp1250" (Lukas Cerman)
解決方案:   For utf-8 don't set the 7th bit in a byte, convert to the correct
	    byte sequence.  For cp1250, when conversion to 'encoding' results
	    in the 7th bit not set, set the 7th bit after conversion.
相關文件:   src/os_win32.c, src/gui_w48.c

Patch 7.1.159
問題:	    strcpy() has overlapping arguments.
解決方案:   Use mch_memmove() instead. (Dominique Pelle)
相關文件:   src/ex_cmds.c

Patch 7.1.160
問題:	    When a focus autocommand is defined, getting or losing focus
	    causes the hit-enter prompt to be redrawn. (Bjorn Winckler)
解決方案:   Overwrite the last line.
相關文件:   src/message.c

Patch 7.1.161
問題:	    Compilation errors with tiny features and EXITFREE.
解決方案:   Add #ifdefs. (Dominique Pelle)
相關文件:   src/edit.c, src/misc2.c

Patch 7.1.162
問題:	    Crash when using a modifier before "while" or "for". (A.Politz)
解決方案:   Skip modifiers when checking for a loop command.
相關文件:   src/proto/ex_docmd.pro, src/ex_docmd.c, src/ex_eval.c

Patch 7.1.163
問題:	    Warning for the unknown option 'bufsecret'.
解決方案:   Remove the lines .vim that use this option. (Andy Wokula)
相關文件:   runtime/menu.vim

Patch 7.1.164
問題:	    Reading past end of regexp pattern. (Dominique Pelle)
解決方案:   Use utf_ptr2len().
相關文件:   src/regexp.c

Patch 7.1.165
問題:	    Crash related to getting X window ID. (Dominique Pelle)
解決方案:   Don't trust the window ID that we got in the past, check it every
	    time.
相關文件:   src/os_unix.c

Patch 7.1.166
問題:	    Memory leak for using "gp" in Visual mode.
解決方案:   Free memory in put_register(). (Dominique Pelle)
相關文件:   src/ops.c

Patch 7.1.167
問題:	    Xxd crashes when using "xxd -b -c 110". (Debian bug 452789)
解決方案:   Allocate more memory.  Fix check for maximum number of columns.
相關文件:   src/xxd/xxd.c

Patch 7.1.168 (extra)
問題:	    Win32 GUI: Since patch 7.1.095, when the Vim window does not have
	    focus, clicking in it doesn't position the cursor. (Juergen
	    Kraemer)
解決方案:   Don't reset s_button_pending just after receiving focus.
相關文件:   src/gui_w48.c

Patch 7.1.169
問題:	    Using uninitialized variable when system() fails. (Dominique
	    Pelle)
解決方案:   Let system() return an empty string when it fails.
相關文件:   src/eval.c

Patch 7.1.170
問題:	    Valgrind warning for overlapping arguments for strcpy().
解決方案:   Use mch_memmove() instead. (Dominique Pelle)
相關文件:   src/getchar.c

Patch 7.1.171
問題:	    Reading one byte before allocated memory.
解決方案:   Check index not to become negative. (Dominique Pelle)
相關文件:   src/ex_getln.c

Patch 7.1.172
問題:	    When 'buftype' is "acwrite" Vim still checks if the file or
	    directory exists before overwriting.
解決方案:   Don't check for overwriting when the buffer name is not a file
	    name.
相關文件:   src/ex_cmds.c

Patch 7.1.173
問題:	    Accessing freed memory. (Dominique Pelle)
解決方案:   Don't call reg_getline() to check if a line is the first in the
	    file.
相關文件:   src/regexp.c

Patch 7.1.174
問題:	    Writing NUL past end of a buffer.
解決方案:   Copy one byte less when using strncat(). (Dominique Pelle)
相關文件:   src/ex_cmds.c, src/ex_docmd.c,

Patch 7.1.175
問題:	    <BS> doesn't work with some combination of 'sts', 'linebreak' and
	    'backspace'. (Francois Ingelrest)
解決方案:   When adding white space results in not moving back delete one
	    character.
相關文件:   src/edit.c

Patch 7.1.176
問題:	    Building with Aap fails when the "compiledby" argument contains
	    '<' or '>' characters. (Alex Yeh)
解決方案:   Change how quoting is done in the Aap recipe.
相關文件:   src/main.aap

Patch 7.1.177
問題:	    Freeing memory twice when in debug mode while reading a script.
解決方案:   Ignore script input while in debug mode.
相關文件:   src/ex_cmds2.c, src/getchar.c, src/globals.h

Patch 7.1.178
問題:	    "%" doesn't work on "/* comment *//* comment */".
解決方案:   Don't handle the "//" in "*//*" as a C++ comment. (Markus
	    Heidelberg)
相關文件:   src/search.c

Patch 7.1.179
問題:	    Need to check for TCL 8.5.
解決方案:   Adjust configure script. (Alexey Froloff)
相關文件:   src/configure.in, src/auto/configure

Patch 7.1.180
問題:	    Regexp patterns not tested sufficiently.
解決方案:   Add more checks to the regexp test.
相關文件:   src/testdir/test64.in, src/testdir/test64.ok

Patch 7.1.181
問題:	    Accessing uninitialized memory in Farsi mode. (Dominique Pelle)
解決方案:   Only invoke lrF_sub() when there is something to do.
相關文件:   src/ex_cmds.c

Patch 7.1.182
問題:	    When using tab pages and an argument list the session file may
	    contain wrong "next" commands. (Alexander Bluem)
解決方案:   Use "argu" commands and only when needed.
相關文件:   src/ex_docmd.c

Patch 7.1.183
問題:	    "Internal error" for ":echo matchstr('a', 'a\%[\&]')" (Mitanu
	    Paul)
解決方案:   Inside "\%[]" detect \&, \| and \) as an error.
相關文件:   src/regexp.c

Patch 7.1.184
問題:	    Crash when deleting backwards over a line break in Insert mode.
解決方案:   Don't advance the cursor when it's already on the NUL after a
	    line. (Matthew Wozniski)
相關文件:   src/normal.c

Patch 7.1.185
問題:	    Using "gR" with a multi-byte encoding and typing a CR pushes
	    characters onto the replace stack incorrectly, resulting in BS
	    putting back the wrong characters. (Paul B. Mahol)
解決方案:   Push multi-byte characters onto the replace stack in reverse byte
	    order.  Add replace_push_mb().
相關文件:   src/edit.c, src/misc1.c, src/proto/edit.pro

Patch 7.1.186
問題:	    "expand('<afile>')" returns a bogus value after changing
	    directory. (Dave Fishburn)
解決方案:   Copy "autocmd_fname" to allocated memory and expand to full
	    filename.  Shorten the path when expanding <afile>.
相關文件:   src/ex_docmd.c, src/fileio.c

Patch 7.1.187
問題:	    Win32 GUI: Custom completion using system() no longer works
	    after patch 7.1.104. (Erik Falor)
解決方案:   Loop when safe_vgetc() returns K_IGNORE.
相關文件:   src/ex_getln.c

Patch 7.1.188
問題:	    When 'showmode' is off the message for changing a readonly file is
	    given in the second column instead of the first.  (Payl B. Mahol)
解決方案:   Put the W10 message in the first column.
相關文件:   src/edit.c

Patch 7.1.189 (after 7.1.104)
問題:	    Patch 7.1.104 was incomplete.
解決方案:   Also call plain_vgetc() in ask_yesno().
相關文件:   src/misc1.c

Patch 7.1.190
問題:	    Cursor after end-of-line: "iA sentence.<Esc>)"
解決方案:   Move cursor back and make motion inclusive.
相關文件:   src/normal.c

Patch 7.1.191
問題:	    Win32 GUI: after patch 7.1.168 there is still a problem when
	    clicking in a scrollbar. (Juergen Jottkaerr)
解決方案:   Don't check the input buffer when dragging the scrollbar.
相關文件:   src/gui.c

Patch 7.1.192
問題:	    With Visual block selection, "s" and typing something, CTRL-C
	    doesn't stop Vim from repeating the replacement in other lines,
	    like happens for "I".
解決方案:   Check for "got_int" to be set.
相關文件:   src/ops.c

Patch 7.1.193
問題:	    Some Vim 5.x digraphs are missing in Vim 7, even though the
	    character pairs are not used. (Philippe de Muyter)
解決方案:   Add those Vim 5.x digraphs that don't conflict with others.
相關文件:   src/digraph.c

Patch 7.1.194
問題:	    ":echo glob('~/{}')" results in /home/user//.
解決方案:   Don't add a slash if there already is one.
相關文件:   src/os_unix.c

Patch 7.1.195
問題:	    '0 mark doesn't work for "~/foo ~ foo".
解決方案:   Don't expand the whole file name, only "~/".
相關文件:   src/mark.c

Patch 7.1.196 (extra)
問題:	    Win32 GUI: "\n" in a tooltip doesn't cause a line break. (Erik
	    Falor)
解決方案:   Use the TTM_SETMAXTIPWIDTH message.
相關文件:   src/gui_w32.c

Patch 7.1.197
問題:	    Mac: "make install" doesn't work when prefix defined.
解決方案:   Pass different arguments to "make installruntime".  (Jjgod Jiang)
相關文件:   src/Makefile

Patch 7.1.198
問題:	    Hang when using ":s/\n//gn". (Burak Gorkemli)
解決方案:   Set "skip_match".
相關文件:   src/ex_cmds.c

Patch 7.1.199
問題:	    Can't do command line completion for a specific file name
	    extension.
解決方案:   When the pattern ends in "$" don't add a star for completion and
	    remove the "$" before matching with file names.
相關文件:   runtime/doc/cmdline.txt, src/ex_getln.c

Patch 7.1.200 (after 7.1.177 and 7.1.182)
問題:	    Compiler warnings for uninitialized variables.
解決方案:   Init variables.
相關文件:   src/ex_cmds2.c, src/ex_docmd.c

Patch 7.1.201
問題:	    When reading stdin 'fenc' and 'ff are not set.
解決方案:   Set the options after reading stdin. (Ben Schmidt)
相關文件:   src/fileio.c

Patch 7.1.202
問題:	    Incomplete utf-8 byte sequence is not checked for validity.
解決方案:   Check the bytes that are present for being valid. (Ben Schmidt)
相關文件:   src/mbyte.c

Patch 7.1.203
問題:	    When 'virtualedit' is "onemore" then "99|" works but ":normal 99|"
	    doesn't.  (Andy Wokula)
解決方案:   Check for "onemore" flag in check_cursor_col().
相關文件:   src/misc2.c

Patch 7.1.204 (extra)
問題:	    Win32: Using the example at 'balloonexpr' the balloon disappears
	    after four seconds and then comes back again.  Also moves the
	    mouse pointer a little bit.  (Yongwei Wu)
解決方案:   Set the autopop time to 30 seconds (the max value).  (Sergey
	    Khorev)  Move the mouse two pixels forward and one back to end up
	    in the same position (really!).
相關文件:   src/gui_w32.c

Patch 7.1.205
問題:	    Can't get the operator in an ":omap".
解決方案:   Add the "v:operator" variable. (Ben Schmidt)
相關文件:   runtime/doc/eval.txt, src/eval.c, src/normal.c, src/vim.h

Patch 7.1.206
問題:	    Compiler warnings when using MODIFIED_BY.
解決方案:   Add type casts. (Ben Schmidt)
相關文件:   src/version.c

Patch 7.1.207
問題:	    Netbeans: "remove" cannot delete one line. 
解決方案:   Remove partial lines and whole lines properly.  Avoid a memory
	    leak.  (Xavier de Gaye)
相關文件:   src/netbeans.c

Patch 7.1.208
問題:	    On Alpha get an unaligned access error.
解決方案:   Store the dictitem pointer before using it. (Matthew Luckie)
相關文件:   src/eval.c

Patch 7.1.209
問題:	    GTK: When using the netrw plugin and doing ":gui" Vim hangs.
解決方案:   Stop getting a selection after three seconds.  This is a hack.
相關文件:   src/gui_gtk_x11.c

Patch 7.1.210
問題:	    Listing mapping for 0xdb fails when 'encoding' is utf-8. (Tony
	    Mechelynck)
解決方案:   Recognize K_SPECIAL KS_EXTRA KE_CSI as a CSI byte.
相關文件:   src/mbyte.c

Patch 7.1.211
問題:	    The matchparen plugin may take an unexpected amount of time, so
	    that it looks like Vim hangs.
解決方案:   Add a timeout to searchpair(), searchpairpos(), search() and
	    searchpos().  Use half a second timeout in the plugin.
相關文件:   runtime/doc/eval.txt, runtime/plugin/matchparen.vim, src/edit.c,
	    src/eval.c, src/ex_cmds2.c, src/ex_docmd.c, src/normal.c,
	    src/proto/eval.pro, src/proto/ex_cmds2.pro, src/proto/search.pro,
	    src/search.c

Patch 7.1.212
問題:	    Accessing a byte before a line.
解決方案:   Check that the column is 1 or more. (Dominique Pelle)
相關文件:   src/edit.c

Patch 7.1.213
問題:	    A ":tabedit" command that results in the "swap file exists" dialog
	    and selecting "abort" doesn't close the new tab. (Al Budden)
解決方案:   Pass "old_curwin" to do_exedit().
相關文件:   src/ex_docmd.c

Patch 7.1.214
問題:	    ":1s/g\n\zs1//" deletes characters from the first line. (A Politz)
解決方案:   Start replacing in the line where the match starts.
相關文件:   src/ex_cmds.c

Patch 7.1.215
問題:	    It is difficult to figure out what syntax items are nested at a
	    certain position.
解決方案:   Add the synstack() function.
相關文件:   runtime/doc/eval.txt, src/eval.c, src/proto/syntax.pro,
	    src/syntax.c

Patch 7.1.216
問題:	    Variants of --remote-tab are not mentioned for "vim --help".
解決方案:   Display optional -wait and -silent.
相關文件:   src/main.c

Patch 7.1.217
問題:	    The "help-tags" tag may be missing from runtime/doc/tags when it
	    was generated during "make install".
解決方案:   Add the "++t" argument to ":helptags" to force adding the tag.
相關文件:   runtime/doc/Makefile, runtime/doc/various.txt, src/ex_cmds.c,
	    src/ex_cmds.h

Patch 7.1.218
問題:	    A syntax region without a "keepend", containing a region with
	    "extend" could be truncated at the end of the containing region.
解決方案:   Do not call syn_update_ends() when there are no keepend items.
相關文件:   src/syntax.c

Patch 7.1.219 (after 7.1.215)
問題:	    synstack() returns situation after the current character, can't
	    see the state for a one-character region.
解決方案:   Don't update ending states in the requested column.
相關文件:   runtime/doc/eval.txt, src/eval.c, src/hardcopy.c,
	    src/proto/syntax.pro, src/screen.c, src/spell.c, src/syntax.c

Patch 7.1.220
問題:	    When a ")" or word movement command moves the cursor back from the
	    end of the line it may end up on the trail byte of a multi-byte
	    character.  It's also moved back when it isn't needed.
解決方案:   Add the adjust_cursor() function.
相關文件:   src/normal.c

Patch 7.1.221
問題:	    When inserting a "(", triggering the matchparen plugin, the
	    following highlighting may be messed up.
解決方案:   Before triggering the CursorMovedI autocommands update the display
	    to update the stored syntax stacks for the change.
相關文件:   src/edit.c

Patch 7.1.222 (after 7.1.217)
問題:	    Wildcards in argument of ":helptags" are not expanded.  (Marcel
	    Svitalsky)
解決方案:   Expand wildcards in the directory name.
相關文件:   src/ex_cmds.c

Patch 7.1.223
問題:	    glob() doesn't work properly when 'shell' is "sh" or "bash" and
	    the expanded name contains spaces, '~', single quotes and other
	    special characters.  (Adri Verhoef, Charles Campbell)
解決方案:   For Posix shells define a vimglob() function to list the matches
	    instead of using "echo" directly.
相關文件:   src/os_unix.c

Patch 7.1.224
問題:	    When using "vim -F -o file1 file2" only one window is
	    right-to-left.  Same for "-H".  (Ben Schmidt)
解決方案:   use set_option_value() to set 'rightleft'.
相關文件:   src/main.c

Patch 7.1.225
問題:	    Using uninitialized value when XGetWMNormalHints() fails.
解決方案:   Check the return value. (Dominique Pelle)
相關文件:   src/os_unix.c

Patch 7.1.226
問題:	    Command line completion doesn't work when a file name contains a
	    '&' character.
解決方案:   Accept all characters in a file name, except ones that end a
	    command or white space.
相關文件:   src/ex_docmd.c

Patch 7.1.227
問題:	    Hang in syntax HL when moving over a ")". (Dominique Pelle)
解決方案:   Avoid storing a syntax state in the wrong position in the list of
	    remembered states.
相關文件:   src/syntax.c

Patch 7.1.228
問題:	    When 'foldmethod' is "indent" and a fold is created with ">>" it
	    can't be closed with "zc".  (Daniel Shahaf)
解決方案:   Reset the "small" flag of a fold when adding a line to it.
相關文件:   src/fold.c

Patch 7.1.229
問題:	    A fold is closed when it shouldn't when 'foldmethod' is "indent"
	    and backspacing a non-white character so that the indent increases.
解決方案:   Keep the fold open after backspacing a character.
相關文件:   src/edit.c

Patch 7.1.230
問題:	    Memory leak when executing SourceCmd autocommands.
解決方案:   Free the memory. (Dominique Pelle)
相關文件:   src/ex_cmds2.c

Patch 7.1.231
問題:	    When shifting lines the change is acted upon multiple times.
解決方案:   Don't have shift_line() call changed_bytes.
相關文件:   src/edit.c, src/ops.c, src/proto/edit.pro, src/proto/ops.pro

Patch 7.1.232 (after 7.1.207 and 7.1.211)
問題:	    Compiler warnings with MSVC.
解決方案:   Add type casts. (Mike Williams)
相關文件:   src/ex_cmds2.c, src/netbeans.c

Patch 7.1.233
問題:	    Crash when doing Insert mode completion for a user defined
	    command.  (Yegappan Lakshmanan)
解決方案:   Don't use the non-existing command line.
相關文件:   src/ex_getln.c

Patch 7.1.234
問題:	    When diff'ing three files the third one isn't displayed correctly.
	    (Gary Johnson)
解決方案:   Compute the size of diff blocks correctly when merging blocks.
	    Compute filler lines correctly when scrolling.
相關文件:   src/diff.c

Patch 7.1.235
問題:	    Pattern matching is slow when using a lot of simple patterns.
解決方案:   Avoid allocating memory by not freeing it when it's not so much.
	    (Alexei Alexandrov)
相關文件:   src/regexp.c

Patch 7.1.236
問題:	    When using 'incsearch' and 'hlsearch' a complicated pattern may
	    make Vim hang until CTRL-C is pressed.
解決方案:   Add the 'redrawtime' option.
相關文件:   runtime/doc/options.txt, src/ex_cmds.c, src/ex_docmd.c,
	    src/ex_getln.c, src/gui.c, src/misc1.c, src/normal.c,
	    src/option.c, src/quickfix.c, src/regexp.c, src/proto/regexp.pro,
	    src/proto/search.pro, src/search.c, src/screen.c,
	    src/option.h, src/spell.c, src/structs.h, src/syntax.c, src/tag.c,
	    src/vim.h

Patch 7.1.237
問題:	    Compiler warning on an Alpha processor in Motif code.
解決方案:   Change a typecast. (Adri Verhoef)
相關文件:   src/gui_motif.c

Patch 7.1.238
問題:	    Using the 'c' flag with searchpair() may cause it to fail.  Using
	    the 'r' flag doesn't work when 'wrapscan' is set.  (A.Politz)
解決方案:   Only use the 'c' flag for the first search, not for repeating.
	    When using 'r' imply 'W'. (Antony Scriven)
相關文件:   src/eval.c

Patch 7.1.239 (after 7.1.233)
問題:	    Compiler warning for sprintf() argument.
解決方案:   Add a typecast. (Nico Weber)
相關文件:   src/ex_getln.c

Patch 7.1.240
問題:	    When "gUe" turns a German sharp s into SS the operation stops
	    before the end of the word.  Latin2 has the same sharp s but it's
	    not changed to SS there.
解決方案:   Make sure all the characters are operated upon.  Detect the sharp
	    s in latin2.  Also fixes that changing case of a multi-byte
	    character that changes the byte count doesn't always work.
相關文件:   src/ops.c

Patch 7.1.241
問題:	    Focus change events not always ignored.  (Erik Falor)
解決方案:   Ignore K_IGNORE in Insert mode in a few more places.
相關文件:   src/edit.c

Patch 7.1.242 (after 7.1.005)
問題:	    "cib" doesn't work properly on "(x)". (Tim Pope)
解決方案:   Use ltoreq() instead of lt().  Also fix "ciT" on "<a>x</a>".
相關文件:   src/search.c

Patch 7.1.243 (after 7.1.240)
問題:	    "U" doesn't work on all text in Visual mode. (Adri Verhoef)
解決方案:   Loop over all the lines to be changed.  Add tests for this.
相關文件:   src/ops.c, src/testdir/test39.in, src/testdir/test39.ok

Patch 7.1.244
問題:	    GUI may have part of the command line cut off.
解決方案:   Don't round the number of lines up, always round down.
	    (Tony Houghton, Scott Dillard)
相關文件:   src/gui.c

Patch 7.1.245
問題:	    Pressing CTRL-\ three times causes Vim to quit.  (Ranganath Rao).
	    Also for f CTRL-\ CTRL-\.
解決方案:   When going to cooked mode in mch_delay() set a flag to ignore
	    SIGQUIT.
相關文件:   src/os_unix.c

Patch 7.1.246
問題:	    Configure hangs when the man pager is something strange. (lorien)
解決方案:   Set MANPAGER and PAGER to "cat". (Micah Cowan)
相關文件:   src/auto/configure, src/configure.in

Patch 7.1.247
問題:	    When using Netbeans backspacing in Insert mode skips a character
	    now and then. (Ankit Jain)
解決方案:   Avoid calling netbeans_removed(), it frees the line pointer.
	    (partly by Dominique Pelle).
相關文件:   src/misc1.c

Patch 7.1.248
問題:	    Can't set the '" mark.  Can't know if setpos() was successful.
解決方案:   Allow setting the '" mark with setpos().  Have setpos() return a
	    value indicating success/failure.
相關文件:   runtime/doc/eval.txt, src/eval.c, src/mark.c

Patch 7.1.249
問題:	    After "U" the cursor can be past end of line.  (Adri Verhoef)
解決方案:   Adjust the cursor position in u_undoline().
相關文件:   src/undo.c

Patch 7.1.250
問題:	    ":setglobal fenc=anything" gives an error message in a buffer
	    where 'modifiable' is off.  (Ben Schmidt)
解決方案:   Don't give an error if 'modifiable' doesn't matter.
相關文件:   src/option.c

Patch 7.1.251
問題:	    Using freed memory when spell checking enabled.
解決方案:   Obtain the current line again after calling spell_move_to().
	    (Dominique Pelle)
相關文件:   src/screen.c

Patch 7.1.252 (after 7.1.243)
問題:	    Test 39 fails when the environment has a utf-8 locale. (Dominique
	    Pelle)
解決方案:   Force 'encoding' to be latin1.
相關文件:   src/testdir/test39.in

Patch 7.1.253
問題:	    ":sort" doesn't work in a one line file. (Patrick Texier)
解決方案:   Don't sort if there is only one line. (Dominique Pelle)
相關文件:   src/ex_cmds.c

Patch 7.1.254
問題:	    Tests 49 and 55 fail when the locale is French.
解決方案:   Using C messages for test 49.  Filter the error message in test 55
	    such that it works when the number is halfway the message.
相關文件:   src/testdir/test49.in, src/testdir/test55.in

Patch 7.1.255
問題:	    Vim doesn't support utf-32. (Yongwei Wu)
解決方案:   Add aliases for utf-32, it's the same as ucs-4.
相關文件:   src/mbyte.c

Patch 7.1.256
問題:	    findfile() also returns directories.
解決方案:   Cleanup the code for finding files and directories in a list of
	    directories.  Remove the ugly global ff_search_ctx.
相關文件:   src/eval.c, src/misc2.c, src/vim.h, src/tag.c

Patch 7.1.257
問題:	    Configure can't always find the Tcl header files.
解決方案:   Also look in /usr/local/include/tcl$tclver and
	    /usr/include/tcl$tclver (James Vega)
相關文件:   src/auto/configure, src/configure.in

Patch 7.1.258
問題:	    Crash when doing "d/\n/e" and 'virtualedit' is "all". (Andy Wokula)
解決方案:   Avoid that the column becomes negative.  Also fixes other problems
	    with the end of a pattern match is in column zero. (A.Politz)
相關文件:   src/search.c

Patch 7.1.259
問題:	    Cursor is in the wrong position when 'rightleft' is set,
	    'encoding' is "utf-8" and on an illegal byte.  (Dominique Pelle)
解決方案:   Only put the cursor in the first column when actually on a
	    double-wide character.  (Yukihiro Nakadaira)
相關文件:   src/screen.c

Patch 7.1.260
問題:	    Cursor positioning problem after ^@ wrapping halfway when
	    'encoding' is utf-8.
解決方案:   Only count a position for printable characters.  (partly by
	    Yukihiro Nakadaira)
相關文件:   src/charset.c

Patch 7.1.261
問題:	    When a 2 byte BOM is detected Vim uses UCS-2, which doesn't work
	    for UTF-16 text. (Tony Mechelynck)
解決方案:   Default to UTF-16.
相關文件:   src/fileio.c, src/testdir/test42.ok

Patch 7.1.262
問題:	    Can't get the process ID of Vim.
解決方案:   Implement getpid().
相關文件:   src/eval.c, runtime/doc/eval.txt

Patch 7.1.263
問題:	    The filetype can consist of two dot separated names.  This works
	    for syntax and ftplugin, but not for indent. (Brett Stahlman)
解決方案:   Use split() and loop over each dot separated name.
相關文件:   runtime/indent.vim

Patch 7.1.264
問題:	    Crash when indenting lines. (Dominique Pelle)
解決方案:   Set the cursor column when changing the cursor line.
相關文件:   src/ops.c, src/misc1.c

Patch 7.1.265
問題:	    When 'isfname' contains a space, cmdline completion can hang.
	    (James Vega)
解決方案:   Reset the "len" variable.
相關文件:   src/ex_docmd.c

Patch 7.1.266
問題:	    When the version string returned by the terminal contains
	    unexpected characters, it is used as typed input. (James Vega)
解決方案:   Assume the escape sequence ends in a letter.
相關文件:   src/term.c

Patch 7.1.267
問題:	    When changing folds cursor may be positioned in the wrong place.
解決方案:   Call changed_window_setting_win() instead of
	    changed_window_setting().
相關文件:   src/fold.c

Patch 7.1.268
問題:	    Always shows "+" at end of screen line with: ":set
	    listchars=eol:$,extends:+ nowrap list cursorline" (Gary Johnson)
解決方案:   Check for lcs_eol_one instead of lcs_eol.
相關文件:   src/screen.c

Patch 7.1.269
問題:	    The matchparen plugin has an arbitrary limit for the number of
	    lines to look for a match.
解決方案:   Rely on the searchpair() timeout.
相關文件:   runtime/plugin/matchparen.vim

Patch 7.1.270
問題:	    ":?foo?" matches in current line since patch 7.1.025. (A.Politz)
解決方案:   Remove the SEARCH_START flag.
相關文件:   src/ex_docmd.c, src/search.c

Patch 7.1.271
問題:	    In a Vim build without autocommands, checking a file that was
	    changed externally causes the current buffer to be changed
	    unexpectedly.  (Karsten Hopp)
解決方案:   Store "curbuf" instead of "buf".
相關文件:   src/fileio.c

Patch 7.1.272
問題:	    The special buffer name [Location List] is not used for a buffer
	    displayed in another tab page.
解決方案:   Use FOR_ALL_TAB_WINDOWS instead of FOR_ALL_WINDOWS. (Hiroaki
	    Nishihara)
相關文件:   src/buffer.c

Patch 7.1.273
問題:	    When profiling on Linux Vim exits early. (Liu Yubao)
解決方案:   When profiling don't exit on SIGPROF.
相關文件:   src/Makefile, src/os_unix.c

Patch 7.1.274 (after 7.1.272)
問題:	    Compiler warning for optimized build.
解決方案:   Init win to NULL.
相關文件:   src/buffer.c

Patch 7.1.275 (extra)
問題:	    Mac: ATSUI and 'antialias' don't work properly together.
解決方案:   Fix this and the input method. (Jjgod Jiang)
相關文件:   src/vim.h, src/gui_mac.c

Patch 7.1.276
問題:	    "gw" uses 'formatexpr', even though the docs say it doesn't.
解決方案:   Don't use 'formatexpr' for "gw".
相關文件:   src/vim.h, src/edit.c, src/ops.c, src/proto/ops.pro

Patch 7.1.277
問題:	    Default for 'paragraphs' misses some items (Colin Watson)
解決方案:   Add TP, HP, Pp, Lp and It to 'paragraphs'. (James Vega)
相關文件:   runtime/doc/options.txt, src/option.c

Patch 7.1.278 (extra, after 7.1.275)
問題:	    Build failure when USE_CARBONKEYHANDLER is not defined.
解決方案:   Remove #ifdef.
相關文件:   src/gui_mac.c

Patch 7.1.279
問題:	    When using cscope temporary files are left behind.
解決方案:   Send the quit command to cscope and give it two seconds to exit
	    nicely before killing it. (partly by Dominique Pelle)
相關文件:   src/if_cscope.c

Patch 7.1.280  (after 7.1.275)
問題:	    Mac: build problems when not using multibyte feature. (Nicholas
	    Stallard)
解決方案:   Don't define USE_IM_CONTROL when not using multibyte.
相關文件:   src/vim.h

Patch 7.1.281 (after 7.1.279)
問題:	    sa.sa_mask is not initialized.  Cscope may not exit.
解決方案:   Use sigemptyset().  Use SIGKILL instead of SIGTERM. (Dominique
	    Pelle)
相關文件:   src/if_cscope.c

Patch 7.1.282 (extra)
問題:	    Win64: Edit with Vim context menu isn't installed correctly.
	    Compiler warnings and a few other things.
解決方案:   Add [ and ] to entry of class name.  Use UINT_PTR instead of UINT.
	    And a fixes for the other things. (George V.  Reilly)
相關文件:   src/GvimExt/Makefile, src/dosinst.c, src/if_ole.cpp, src/if_ole.h,
	    src/if_ole.idl, src/INSTALLpc.txt,  src/Make_mvc.mak,
	    src/os_win32.c,

Patch 7.1.283
問題:	    Non-extra part for 7.1.282.
解決方案:   Various changes.
相關文件:   src/ex_docmd.c, src/globals.h, src/if_cscope.c, src/main.c,
	    src/mark.c, src/netbeans.c, src/popupmnu.c, src/vim.h,
	    src/window.c

Patch 7.1.284
問題:	    Compiler warnings for functions without prototype.
解決方案:   Add the function prototypes. (Patrick Texier)
相關文件:   src/eval.c, src/quickfix.c

Patch 7.1.285 (extra)
問題:	    Mac: dialog hotkeys don't work.
解決方案:   Add hotkey support. (Dan Sandler)
相關文件:   src/gui_mac.c

Patch 7.1.286 (after 7.1.103)
問題:	    "w" at the end of the buffer moves the cursor past the end of the
	    line. (Markus Heidelberg)
解決方案:   Move the cursor back from the NUL when it was moved forward.
相關文件:   src/normal.c

Patch 7.1.287
問題:	    Crash when reversing a list after using it. (Andy Wokula)
解決方案:   Update the pointer to the last used element. (Dominique Pelle)
相關文件:   src/eval.c

Patch 7.1.288 (after 7.1.281)
問題:	    Cscope still leaves behind temp files when using gvim.
解決方案:   When getting the ECHILD error loop for a while until cscope exits.
	    (Dominique Pelle)
相關文件:   if_cscope.c

Patch 7.1.289
問題:	    When EXITFREE is defined and 'acd' is set freed memory is used.
	    (Dominique Pelle)
解決方案:   Reset p_acd before freeing all buffers.
相關文件:   src/misc2.c

Patch 7.1.290
問題:	    Reading bytes that were not written when spell checking and a line
	    has a very large indent.
解決方案:   Don't copy the start of the next line when it only contains
	    spaces. (Dominique Pelle)
相關文件:   src/spell.c

Patch 7.1.291 (after 7.1.288)
問題:	    Compiler warning.
解決方案:   Change 50 to 50L.
相關文件:   src/if_cscope.c

Patch 7.1.292
問題:	    When using a pattern with "\@<=" the submatches can be wrong.
	    (Brett Stahlman)
解決方案:   Save the submatches when attempting a look-behind match.
相關文件:   src/regexp.c

Patch 7.1.293
問題:	    Spell checking considers super- and subscript characters as word
	    characters.
解決方案:   Recognize the Unicode super and subscript characters.
相關文件:   src/spell.c

Patch 7.1.294
問題:	    Leaking memory when executing a shell command.
解決方案:   Free memory when not able to save for undo. (Dominique Pelle)
相關文件:   src/ex_cmds.c

Patch 7.1.295
問題:	    Vimtutor only works with vim, not gvim.
解決方案:   Add the -g flag to vimtutor. (Dominique Pelle)  Add gvimtutor.
相關文件:   src/Makefile, src/gvimtutor, src/vimtutor, runtime/doc/vimtutor.1

Patch 7.1.296
問題:	    SELinux is not supported.
解決方案:   Detect the selinux library and use mch_copy_sec(). (James Vega)
相關文件:   src/auto/configure, src/config.h.in, src/configure.in,
	    src/fileio.c, src/memfile.c, src/os_unix.c, src/proto/os_unix.pro

Patch 7.1.297
問題:	    When using the search/replace dialog the parenmatch highlighting
	    can be wrong. (Tim Duncan)
解決方案:   In the GUI redraw function invoke the CursorMoved autocmd.
相關文件:   src/gui.c

Patch 7.1.298 (after 7.1.295)
問題:	    src/gvimtutor is not distributed.
解決方案:   Add it to the list of distributed files.
相關文件:   Filelist

Patch 7.1.299
問題:	    Filetype detection doesn't work properly for file names ending in
	    a part that is ignored and contain a space or other special
	    characters.
解決方案:   Escape the special characters using the new fnameescape function.
相關文件:   runtime/doc/eval.txt, runtime/filetype.vim, src/eval.c,
	    src/ex_getln.c, src/proto/ex_getln.pro, src/vim.h

Patch 7.1.300
問題:	    Value of asmsyntax argument isn't checked for valid characters.
解決方案:   Only accepts letters and digits.
相關文件:   runtime/filetype.vim

Patch 7.1.301
問題:	    When the "File/Save" menu is used in Insert mode, a tab page label
	    is not updated to remove the "+".
解決方案:   Call draw_tabline() from showruler(). (Bjorn Winckler)
相關文件:   src/screen.c

Patch 7.1.302 (after 7.1.299)
問題:	    Compilation error on MS-Windows.
解決方案:   Don't use xp_shell when it's not defined.
相關文件:   src/ex_getln.c

Patch 7.1.303 (after 7.1.302)
問題:	    Compilation error on MS-Windows, again.
解決方案:   Declare p.
相關文件:   src/ex_getln.c

Patch 7.1.304
問題:	    Shortpath_for_invalid_fname() does not work correctly and is
	    unnecessary complex.
解決方案:   Clean up shortpath_for_invalid_fname(). (mostly by Yegappan
	    Lakshmanan)
相關文件:   src/eval.c

Patch 7.1.305
問題:	    Editing a compressed file with special characters in the name
	    doesn't work properly.
解決方案:   Escape special characters.
相關文件:   runtime/autoload/gzip.vim

Patch 7.1.306
問題:	    Some Unicode characters are handled like word characters while
	    they are symbols.
解決方案:   Adjust the table for Unicode classification.
相關文件:   src/mbyte.c

Patch 7.1.307
問題:	    Many warnings when compiling with Python 2.5.
解決方案:   Use ssize_t instead of int for some types. (James Vega)
相關文件:   src/if_python.c

Patch 7.1.308
問題:	    When in readonly mode ":options" produces an error.
解決方案:   Reset 'readonly'. (Gary Johnson)
相關文件:   runtime/optwin.vim

Patch 7.1.309
問題:	    Installing and testing with a shadow directory doesn't work.
	    (James Vega)
解決方案:   Add "po" to the list of directories to link.  Also link the Vim
	    scripts in testdir.  And a few more small fixes.
相關文件:   src/Makefile

Patch 7.1.310
問題:	    Incomplete utf-8 byte sequence at end of the file is not detected.
	    Accessing memory that wasn't written.
解決方案:   Check the last bytes in the buffer for being a valid utf-8
	    character. (mostly by Ben Schmidt)
	    Also fix that the reported line number of the error was wrong.
相關文件:   src/fileio.c

Patch 7.1.311
問題:	    Compiler warning for missing sentinel in X code.
解決方案:   Change 0 to NULL. (Markus Heidelberg)
相關文件:   src/mbyte.c

Patch 7.1.312
問題:	    The .po files have mistakes in error numbers.
解決方案:   Search for these mistakes in the check script. (Dominique Pelle)
相關文件:   src/po/check.vim

Patch 7.1.313
問題:	    When the netbeans interface setModified call is used the status
	    lines and window title are not updated.
解決方案:   Redraw the status lines and title. (Philippe Fremy)
相關文件:   src/netbeans.c

Patch 7.1.314
問題:	    The value of 'pastetoggle' is written to the session file without
	    any escaping. (Randall Hansen)
解決方案:   Use put_escstr(). (Ben Schmidt)
相關文件:   src/option.c

Patch 7.1.315
問題:	    Crash with specific search pattern using look-behind match.
	    (Andreas Politz)
解決方案:   Also save the value of "need_clear_subexpr".
相關文件:   src/regexp.c

Patch 7.1.316
問題:	    When 'cscopetag' is set ":tag" gives an error message instead of
	    going to the next tag in the tag stack.
解決方案:   Don't call do_cstag() when there is no argument. (Mark Goldman)
相關文件:   src/ex_docmd.c

Patch 7.1.317
問題:	    Compiler warnings in Motif calls.
解決方案:   Change zero to NULL. (Dominique Pelle)
相關文件:   src/gui_motif.c

Patch 7.1.318
問題:	    Memory leak when closing xsmp connection.  Crash on exit when
	    using Lesstif.
解決方案:   Don't close the X display to work around a Lesstif bug.  Free
	    clientid.  Also fix a leak for Motif and Athena. (Dominique Pelle)
相關文件:   src/gui_x11.c, src/os_unix.c

Patch 7.1.319
問題:	    When a register has an illegal utf-8 sequence, pasting it on the
	    command line causes an illegal memory access.
解決方案:   Use mb_cptr2char_adv(). (Dominique Pelle)
相關文件:   src/ex_getln.c

Patch 7.1.320 (extra)
問題:	    Win64: Warnings while compiling Python interface.
解決方案:   Use PyInt in more places.  Also update version message for the
	    console. (George Reilly)
相關文件:   src/if_python.c, src/version.c

Patch 7.1.321 (extra)
問題:	    Win32 / Win64: Install file is outdated.
解決方案:   Update the text for recent compiler. (George Reilly)
相關文件:   src/INSTALLpc.txt

Patch 7.1.322
問題:	    Can't get start of Visual area in an <expr> mapping.
解決方案:   Add the 'v' argument to getpos().
相關文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.1.323
問題:	    Test 19 fails with some termcaps. (Dominique Pelle)
解決方案:   Set the t_kb and t_kD termcap values.
相關文件:   src/testdir/test19.in, src/testdir/test38.in

Patch 7.1.324
問題:	    File name path length on Unix is limited to 1024.
解決方案:   Use PATH_MAX when it's more than 1000.
相關文件:   src/os_unix.h

Patch 7.1.325
問題:	    When editing a command line that's longer than available space in
	    the window, the characters at the end are in reverse order.
解決方案:   Increment the insert position even when the command line doesn't
	    fit.  (Ingo Karkat)
相關文件:   src/ex_getln.c

Patch 7.1.326
問題:	    ":s!from!to!" works, but ":smagic!from!to!" doesn't.  It sees the
	    "!" as a flag to the command.  Same for ":snomagic". (Johan Spetz)
解決方案:   When checking for a forced command also ignore ":smagic" and
	    ":snomagic". (Ian Kelling)
相關文件:   src/ex_docmd.c

Patch 7.1.327
問題:	    The GUI tutor is installed when there is no GUI version.
解決方案:   Only install gvimtutor when building a GUI version.
相關文件:   src/Makefile

Patch 7.1.328
問題:	    Crash when using Cygwin and non-posix path name in tags file.
解決方案:   Use separate buffer for posix path. (Ben Schmidt)
相關文件:   src/os_unix.c

Patch 7.1.329
問題:	    When the popup menu is removed a column of cells, the right halve
	    of double-wide characters, may not be redrawn.
解決方案:   Check if the right halve of a character needs to be redrawn.
	    (Yukihiro Nakadaira)
相關文件:   src/screen.c

Patch 7.1.330
問題:	    Reading uninitialized memory when using Del in replace mode.
解決方案:   Use utfc_ptr2len_len() instead of mb_ptr2len(). (Dominique Pelle)
相關文件:   src/misc1.c


Warning for missing sentinel in gui_xmldlg.c. (Dominique Pelle)

A search offset from the end of a match didn't work properly for multi-byte
characters.  (Yukihiro Nakadaira)

When displaying the value of 'key' don't show "*****" when the value is empty.
(Ben Schmidt)

Internal error when compiled with EXITFREE and using the nerd_tree plugin.
Set last_msg_hist to NULL when history becomes empty.  Call
free_all_functions() after garbage collection.  (Dominique Pelle)

GTK with XIM: <S-Space> does not work.  (Yukihiro Nakadaira)

Some shells do not support "echo -n", which breaks glob().  Use "echo" instead
of "echo -n $1; echo".  (Gary Johnson)

"echo 22,44" printed "22" on top of the command, the error messages caused
the rest not to be cleared.  Added the need_clr_eos flag.

Netbeans events are handled while updating the screen, causing a crash.
Change the moment when events are handled.  Rename nb_parse_messages() to
netbeans_parse_messages().  (Xavier de Gaye)

Test 11 was broken after patch 7.1.186 on Win32 console. (Daniel Shahaf)
Use shellescape() on the file name.

IM was turned off in im_preedit_end_cb() for no good reason.  (Takuhiro
Nishioka)

A corrupted spell file could cause Vim to use lots of memory.  Better
detection for running into the end of the file.  (idea from James Vega)

Mac: Included a patch to make it build with GTK.  Moved language init to
mac_lang_init() function.  (Ben Schmidt)

Problem with 'wildmenu' after ":lcd", up/down arrows don't work. (Erik Falor)

Fix configure.in to avoid "implicitly declared" warnings when running
configure.

Fixed a memory leak when redefining a keymap. (Dominique Pelle)

Setting 'pastetoggle' to "jj" didn't work.

'ic' and 'smartcase' don't work properly when using \%V in a search pattern.
(Kana Natsuno)

Patch 7.2a.001
問題:       On some systems X11/Xlib.h exists (from X11-dev package) but
	    X11/Intrinsic.h does not (in Xt-dev package).  This breaks the
	    build.  Also, on Solaris 9 sys/ptem.h isn't found.
解決方案:   Have configure only accept X11 when X11/Intrinsic.h exists.
	    Check for sys/ptem.h while including sys/stream.h. (Vladimir
	    Marek)
相關文件:   src/auto/configure, src/configure.in

Patch 7.2a.002
問題:       getbufvar(N, "") gets the dictionary of the current buffer instead
	    of buffer N.
解決方案:   Set curbuf before calling find_var_in_ht(). (Kana Natsuno)
相關文件:   src/eval.c

Patch 7.2a.003
問題:       Leaking memory when using ":file name" and using access control
	    lists.
解決方案:   Invoke mch_free_acl() in vim_rename(). (Dominique Pelle)
相關文件:   src/fileio.c

Patch 7.2a.004
問題:       Some systems can't get spell files by ftp.
解決方案:   Use http when it looks like it's possible. (James Vega)
相關文件:   runtime/autoload/spellfile.vim

Patch 7.2a.005
問題:       A few error messages use confusing names.  Misspelling.
解決方案:   Change "dissallows" to "disallows". (Dominique Pelle)  Change
	    "number" to "Number".
相關文件:   src/eval.c, src/fileio.c

Patch 7.2a.006
問題:       Reading past NUL in a string.
解決方案:   Check for invalid utf-8 byte sequence. (Dominique Pelle)
相關文件:   src/charset.c

Patch 7.2a.007
問題:       ":let v = 1.2.3" was OK in Vim 7.1, now it gives an error.
解決方案:   Don't look for a floating point number after the "." operator.
相關文件:   src/eval.c

Patch 7.2a.008
問題:       printf("%g", 1) doesn't work.
解決方案:   Convert Number to Float when needed.
相關文件:   src/message.c

Patch 7.2a.009
問題:       cygwin_conv_to_posix_path() does not specify buffer size.
解決方案:   Use new Cygwin function: cygwin_conv_path(). (Corinna Vinschen)
相關文件:   src/main.c, src/os_unix.c

Patch 7.2a.010
問題:       When a file name has an illegal byte sequence Vim may read
	    uninitialised memory.
解決方案:   Don't use UTF_COMPOSINGLIKE() on an illegal byte.  In
	    msg_outtrans_len_attr() use char2cells() instead of ptr2cells().
	    In utf_ptr2char() don't check second byte when first byte is
	    illegal.  (Dominique Pelle)
相關文件:   src/mbyte.c, src/message.c

Patch 7.2a.011
問題:       The Edit/Startup Settings menu doesn't work.
解決方案:   Expand environment variables. (Ben Schmidt)
相關文件:   runtime/menu.vim

Patch 7.2a.012
問題:       Compiler warnings for casting int to pointer.
解決方案:   Add cast to long in between. (Martin Toft)
相關文件:   src/gui_gtk_x11.c

Patch 7.2a.013
問題:       shellescape() does not escape "%" and "#" characters.
解決方案:   Add find_cmdline_var() and use it when the second argument to
	    shellescape() is non-zero.
相關文件:   runtime/doc/eval.txt, src/eval.c, src/ex_docmd.c,
	    src/proto/ex_docmd.pro, src/proto/misc2.pro, src/misc2.c

Patch 7.2a.014
問題:       Problem with % in message.
解決方案:   Put % in single quotes.
相關文件:   src/eval.c

Patch 7.2a.015 (after 7.2a.010)
問題:       Misaligned messages.
解決方案:   Compute length of unprintable chars correctly.
相關文件:   src/message.c

Patch 7.2a.016
問題:       Using CTRL-W v in the quickfix window results in two quickfix
	    windows, which is not allowed.  ":tab split" should be allowed to
	    open a new quickfix window in another tab.
解決方案:   For CTRL-W v instead of splitting the window open a new one.
	    When using ":tab" do allow splitting the quickfix window (was
	    already included in patch 7.2a.013).
相關文件:   src/window.c

Patch 7.2a.017
問題:       ":doautoall" executes autocommands for all buffers instead of just
	    for loaded buffers.
解決方案:   Change "curbuf" to "buf".
相關文件:   src/fileio.c

Patch 7.2a.018
問題:       Compiler warnings when compiling with Gnome. (Tony Mechelynck)
解決方案:   Add type casts.
相關文件:   src/gui_gtk_x11.c

Patch 7.2a.019
問題:       ":let &g:tw = 44" sets the local option value. (Cyril Slobin)
解決方案:   Use get_varp_scope() instead of get_varp(). (Ian Kelling)
相關文件:   src/option.c

There is no way to avoid adding /usr/local/{include|lib} to the build
commands.  Add the --with-local-dir argument to configure. (Michael
Haubenwallner)

When using CTRL-D after ":help", the number of matches could be thousands.
Restrict to TAG_MANY to avoid this taking too long. (Ian Kelling)

The popup menu could be placed at a weird location.  Caused by w_wcol computed
by curs_columns().  (Dominique Pelle)

Overlapping STRCPY() arguments when using %r item in 'errorformat'.  Use
STRMOVE() instead. (Ralf Wildenhues)

Mac: On Leopard gvim, when using the mouse wheel nothing would happen until
another event occurs, such as moving the mouse.  Then the recorded scrolling
would take place all at once. (Eckehard Berns)

Solution for cursor color not reflecting IM status for GTK 2.  Add
preedit_is_active flag. (SungHyun Nam)

filereadable() can hang on a FIFO on Linux.  Use open() instead of fopen(),
with O_NONBLOCK. (suggested by Lars Kotthoff)

Included patch to support Perl 5.10. (Yasuhiro Matsumoto)

When files are dropped on gvim while the screen is being updated, ignore the
drop command to avoid freeing memory that is being used.

In a terminal, when drawing the popup menu over double-wide characters, half
characters may not be cleared properly. (Yukihiro Nakadaira)

The #ifdef for including "vimio.h" was inconsistent.  In a few files it
depended on MSWIN, which isn't defined until later.

Patch 7.2b.001
問題:       Compilation problem: mb_fix_col() missing with multi-byte feature
	    but without GUI or clipboard.
解決方案:   Remove #ifdef.
相關文件:   src/mbyte.c

Patch 7.2b.002
問題:       Compiler warnings for signed/unsigned mismatch.
解決方案:   Add type casts.
相關文件:   src/screen.c

Patch 7.2b.003
問題:       Still a compilation problem, check_col() and check_row() missing.
解決方案:   Add FEAT_MBYTE to the #if.
相關文件:   src/ui.c

Patch 7.2b.004
問題:       Trying to free memory for a static string when using ":helpgrep".
	    (George Reilly)
解決方案:   Set 'cpo' to empty_option instead of an empty string.  Also for
	    searchpair() and substitute().
相關文件:   src/quickfix.c, src/eval.c

Patch 7.2b.005
問題:       The special character "!" isn't handled properly in shellescape().
	    (Jan Minar)
解決方案:   Escape "!" when using a "csh" like shell and with
	    shellescape(s, 1).  Twice for both.  Also escape <NL>.
相關文件:   src/misc2.c

Patch 7.2b.006
問題:       Reading past end of string when reading info from tags line.
解決方案:   Break the loop when encountering a NUL. (Dominique Pelle)
相關文件:   src/tag.c

Patch 7.2b.007
問題:       Part of a message cannot be translated.
解決方案:   Put _() around the message.
相關文件:   src/search.c

Patch 7.2b.008
問題:       A few filetypes are not detected or not detected properly.
解決方案:   Add filetype detection patterns. (Nikolai Weibull)
相關文件:   runtime/filetype.vim

Patch 7.2b.009
問題:       Reading past end of screen line. (Epicurus)
解決方案:   Avoid going past the value of Columns.
相關文件:   src/screen.c

Patch 7.2b.010
問題:       ":mksession" doesn't work for ":map , foo", ":sunmap ,". (Ethan
	    Mallove)
解決方案:   Check for "nxo", "nso" and other strange mapping combinations.
相關文件:   src/getchar.c

Patch 7.2b.011
問題:       Configure for TCL ends up with include file in compiler command.
	    (Richard Hogg)
解決方案:   Delete items from $TCL_DEFS that do not start with a dash.
相關文件:   src/auto/configure, src/configure.in

Patch 7.2b.012
問題:       Build failure with +multi_byte but without +diff.
解決方案:   Add #ifdef. (Patrick Texier)
相關文件:   src/main.c

Patch 7.2b.013
問題:       Build fails with tiny features and Perl. (Dominique Pelle)
解決方案:   Define missing functions.  Also when compiling Python.
相關文件:   src/if_perl.xs, src/if_python.c

Patch 7.2b.014
問題:       Configure uses an unsafe temp file to store commands.
解決方案:   Create the temp file in local directory.
相關文件:   src/auto/configure, src/configure.in

Patch 7.2b.015
問題:       Build fails on Mac when using Aap.
解決方案:   Fix typo in configure script.
相關文件:   src/auto/configure, src/configure.in

Patch 7.2b.016
問題:       Build fails with normal features but without +autocmd.
解決方案:   Fix #ifdefs. (Ian Kelling)
相關文件:   src/eval.c, src/ex_cmds.c, src/quickfix.c, src/option.c,
	    src/ex_docmd.c

Patch 7.2b.017
問題:       "vim -O foo foo" results in only one window.  (Zdenek Sekera)
解決方案:   Handle result of ATTENTION prompt properly. (Ian Kelling)
相關文件:   src/main.c

Patch 7.2b.018
問題:       When doing command line completion on a file name for a csh-like
	    shell argument a '!' character isn't escaped properly.
解決方案:   Add another backslash.
相關文件:   src/ex_getln.c, src/misc2.c, src/proto/misc2.pro, src/screen.c

Patch 7.2b.019 (extra)
問題:       Win32: Various compiler warnings.
解決方案:   Use __w64 attribute.  Comment-out unused parameters.  Adjust a few
	    #ifdefs. (George Reilly)
相關文件:   src/gui_w48.c, src/GvimExt/gvimext.cpp, src/Make_mvc.mak,
	    src/os_mswin.c, src/os_win32.c, src/vim.h

Patch 7.2b.020
問題:       ":sort n" doesn't handle negative numbers. (James Vega)
解決方案:   Include '-' in the number.
相關文件:   src/charset.c, src/ex_cmds.c

Patch 7.2b.021
問題:       Reloading doesn't read the BOM correctly. (Steve Gardner)
解決方案:   Accept utf-8 BOM when specified file encoding is utf-8.
相關文件:   src/fileio.c

Patch 7.2b.022
問題:       When using ":normal" while updating the status line the count of
	    an operator is lost. (Dominique Pelle)
解決方案:   Save and restore "opcount".
相關文件:   src/ex_docmd.c, src/globals.h, src/normal.c

Patch 7.2b.023
問題:       Crash when using the result of synstack(0,0). (Matt Wozniski)
解決方案:   Check for v_list to be NULL in a few more places.
相關文件:   src/eval.c

Patch 7.2b.024
問題:       Using ":gui" while the netrw plugin is active causes a delay in
	    updating the display.
解決方案:   Don't check for terminal codes when starting the GUI.
相關文件:   src/term.c

Patch 7.2b.025
問題:       When the CursorHold event triggers a pending count is lost.
	    (Juergen Kraemer)
解決方案:   Save the counts and restore them.
相關文件:   src/normal.c, src/structs.h

Patch 7.2b.026
問題:       The GTK 2 file chooser causes the ~/.recently-used.xbel file to be
	    written over and over again.  This may cause a significant
	    slowdown. (Guido Berhoerster)
解決方案:   Don't use the GTK 2 file chooser.
相關文件:   src/gui_gtk.c

Patch 7.2b.027
問題:       Memory leak for Python, Perl, etc. script command with end marker.
解決方案:   Free the memory of the end marker. (Andy Kittner)
相關文件:   src/ex_getln.c

Patch 7.2b.028
問題:       Reading uninitialized memory when doing ":gui -f". (Dominique
	    Pelle)
解決方案:   Don't position the cursor when the screen size is invalid.
相關文件:   src/gui.c

Patch 7.2b.029
問題:       ":help a" doesn't jump to "a" tag in docs. (Tony Mechelynck)
解決方案:   Get all tags and throw away more than TAG_MANY after sorting.
	    When there is no argument find matches for "help" to avoid a long
	    delay.
相關文件:   src/ex_cmds.c, src/ex_getln.c

Patch 7.2b.030
問題:       When changing the value of t_Co from 8 to 16 the Visual
	    highlighting keeps both reverse and a background color.
解決方案:   Remove the attribute when setting the default highlight color.
	    (Markus Heidelberg)
相關文件:   src/syntax.c

Error when cancelling completion menu and auto-formatting. (fixed by Ian
Kelling)

Patch 7.2c.001
問題:       ":let x=[''] | let x += x" causes hang. (Matt Wozniski)
解決方案:   Only insert elements up to the original length of the List.
相關文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.2c.002
問題:       fnameescape() doesn't handle a leading '+' or '>'. (Jan Minar)
解決方案:   Escape a leading '+' and '>'.  And a single '-'.
相關文件:   runtime/doc/eval.txt, src/ex_getln.c

Patch 7.2c.003
問題:       Searching for "foo\%[bar]\+" gives a "Corrupted regexp program"
	    error. (Joachim Hofmann)
解決方案:   Mark the \%[] item as not being simple.
相關文件:   src/regexp.c

On Vista access to system directories is virtualized. (Michael Mutschler)
Adjusted the manifest file to avoid this. (George Reilly)

Memory leak when using CTRL-C to cancel listing the jump list. (Dominique
Pelle)

Mac: Could not build with Perl interface.

==============================================================================
7.3 版 本					*version-7.3* *version7.3*

本小節討論 7.2 和 7.3 版本之間的改進。

這個版本有幾百個漏洞修正，和若干新特性。最主要的新特性有:


永久化撤銷					*new-persistent-undo*
---------------

保存撤銷信息到文件。可以撤銷到文件讀入之前的狀態，即使是已卸載的緩衝區也可。見
|undo-persistence| (部分由 Jordan Lewis 提供)

新增 ":earlier 1f" 和 ":later 1f" 命令。
撤銷信息中新增文件保存計數。
新增 |undotree()| 和 |undofile()| 函數。

新增 'undoreload' 選項。可以在緩衝區重載時保存當前文本，以便使重載可以撤銷。


更多加密					*new-more-encryption*
---------------

支持 Blowfish 加密。新增 'cryptmethod' 選項。
主要由 Moshin Ahmed 提供。

另外，也對交換文件和撤銷文件的文本進行加密。


隱藏文本					*new-conceal*
------------

新增 |+conceal| 功能。(Vince Negri)
這樣可以基於語法高亮隱藏成串的文本。
也可以用單個字符替換成串的文本 |:syn-cchar|。
'conceallevel' 選項指定文本匹配包含 conceal 屬性的語法項目時如何操作。
'concealcursor' 選項指定光標行的行為。

幫助文件隱藏用於標記標籤和示例的字符。

新增 |synconcealed()| 函數，用於 :TOhtml。(Benjamin Fritz)

新增 'cursorbind' 函數，使相同文本的兩個窗口光標保持同步。


Lua 接口					*new-lua*
-------------

新增 |Lua| 接口。(Luis Carvalho)


Python3 接口					*new-python3*
-----------------

新增 Python3 接口。 它和 Python 2.x 同時支持，也可以同時使用。見 |python3|
(Roland Puntaier)


改動							*changed-7.3*
-------

MS-Windows 安裝程序不再需要用戶在控制台輸入任何字符。安裝程序現在也可用於 64
位系統，包括 "Edit with Vim" 上下文菜單。
gvim 可執行程序是 32 位的，安裝的 gvimext.dll 可以是 32 或 64 位 (主要由
George Reilly 提供)
DOS 安裝程序可用於更多編譯器。
MS-Windows big gvim 現在使用 Python 2.7 和 3.1.2、Perl 5.12 和 Ruby 1.9.1。需
要配套的 .dll 文件才能使用。

附加和語言文件不再分別發佈。
所有系統需要的源代碼都包含在同一個發佈裡。

用 ":recover" 或其它方式來恢復文件後，":x" 和 "ZZ" 過去不保存你看到的內容。這
會使得工作丟失。現在恢復後的文本會和原來文本比較。如果不同，標注緩衝區為已修改
。

如果 Vim 因為收到致命信號而退出且 v:dying 為 2 或以上，不執行 VimLeavePre、
VimLeave、BufWinLeave 和 BufUnload 自動命令。

刪除 GTK 1 的支持。沒有人維護它，而且源代碼需要很多的 #ifdef。GTK 2 應該在所有
的系統上都可用了。(James Vega)

不再允許在模式行上設置 'encoding' 選項。可能會破壞文本。(Patrick Texier)

把 runtime/spell/fixdup 換名為 runtime/spell/fixdup.vim。

刪除廢棄的 Mac 代碼。

更新拼寫文件使用的 Ubuntu locale 名。

切換 autoconf 2.63 到 2.65。

刪除 Mupad 縮進和文件類型插件文件，沒有用。

在歷史中記憶的消息最大數目現在是 200 (原來是 100)。


新增							*added-7.3*
-----

加入 'relativenumber' 選項。(Markus Heidelberg)

加入 'colorcolumn' 選項: 高亮窗口的一到多個列。例如高亮 'textwidth' 之後的列。
(主要由 Gregor Uhlenheuer 提供)

加入 NetBeans 的終端支持。加入 |:nbstart| 和 |:nbclose|。(Xavier de Gaye)

更多浮點函數: |acos()|、|asin()|、|atan2()|、|cosh()|、|exp()|、|fmod()|、
|log()|、|sinh()|、|tan()|、|tanh()|。(Bill McCarthy)

加入 |gettabvar()| 和 |settabvar()| 函數。(Yegappan Lakshmanan)

加入 |strchars()|、|strwidth()| 和 |strdisplaywidth()| 函數。

支持 Mac 上 GTK 的 GDK_SUPER_MASK。(Stephan Schulz)

使 CTRL 和 ALT 修飾符可用於鼠標滾輪。(Benjamin Haskell)

加入橫向滾輪的支持。(Bjorn Winckler)

緩衝區處於比較模式時，:TOhtml 創建顯示並排比較的 HTML。(Christian Brabandt)

":TOhtml" 和 2html.vim 腳本的若干改進。(Benjamin Fritz)

'cinoptions' 新增 'L' 項目。(Manuel Konig)

改進 Javascript 縮進。'cinoptions' 新增 "J" 標誌位。(Hari Kumar G)

Mac: 支持關閉反鋸齒。(LC Mi)

Mac: 新增 Mac 控制台的剪貼板支持。(Bjorn Winckler)

支持把標籤頁標籤拖拽到其它位置。(Paul B. Mahol)

建立色彩方案菜單的更好的實現。(Juergen Kraemer)

可視模式下使用 'showcmd' 顯示字節和字符數。

編譯不帶 GUI 時使 synIDattr() 可以得到 GUI 屬性。(Matt Wozniski)

支持 ":find" 進行補全。加入測試 73。(Nazri Ramliy)

:ownsyntax 和 :setfiletype 的命令行補全。(Dominique Pelle)

:lmap 和 :lunmap 的命令行補全。

支持用戶命令的語法和文件類型補全。(Christian Brabandt)

加入 ":ownsyntax" 的補全和改進了 ":filetype" 的補全。

避免使用 GTK mail_loop()，以便使用 GtkFileChooser。(James Vega)

'formatexpr' 計算非零時回到內部排版機制，"gq" 亦同。(James Vega)

:browse 支持接受錯誤文件的參數的命令。(Lech Lorens)

gvimext 支持寬文件名。(Szabolcs Horvat)

改進合併行的測試。(Milan Vancura)
使行範圍的合併加快很多。(Milan Vancura)

新增改進 z/OS (OS/390) 支持的補丁。(Ralf Schandl)

新增 helphelp.txt 文件。文本來自原來的 various.txt。

新增 'statusline' 的 "q" 項目。新增 |w:quickfix_title|。(Lech Lorens)

VMS 的各種改進。(Zoltan Arpadffy)


新語法文件: ~
Haskell Cabal 構造文件 (Vincent Berthoux)
ChaiScript (Jason Turner)
Cucumber (Tim Pope)
Datascript (Dominique Pelle)
Fantom (Kamil Toman)
Liquid (Tim Pope)
Logcheck (Debian)
Markdown (Tim Pope)
Perl 6 (Andy Lester)
Quickfix window (Lech Lorens)
wavefront 的 obj 文件 (Vincent Berthoux)
Perl 6 (Andy Lester)
SDC - Synopsys Design Constraints (Maurizio Tranchero)
SVG - Scalable Vector Graphics (Vincent Berthoux)
task data (John Florian)
task 42 edit (John Florian)

新文件類型插件: ~
Cucumber (Tim Pope)
Liquid (Tim Pope)
Markdown (Tim Pope)
Tcl (Robert L Hicks)

新縮進插件: ~
CUDA (Bram Moolenaar)
ChaiScript (Jason Turner)
Cucumber (Tim Pope)
LifeLines (Patrick Texier)
Liquid (Tim Pope)
Mail (Bram Moolenaar)
Perl 6 (Andy Lester)

其它新運行時文件: ~
布列塔尼語拼寫文件 (Dominique Pelle)
Dvorak 鍵盤映射表 (Ashish Shukla)
韓語翻譯。(SungHyun Nam)
Python 3 補全 (Aaron Griffin)
塞爾維亞菜單翻譯 (Aleksandar Jelenak)
德頓語拼寫文件
巴伐利亞語教程 (Sepp Hell)
世界語教程。(Dominique Pellé)
葡萄牙語教程。
挪威教程現在可從 tutor.nb 獲得

刪除 Mupad 運行時文件，沒有人維護。


修正							*fixed-7.3*
-----

Patch 7.2.001
問題:	    Mac: pseudo-ttys don't work properly on Leopard, resulting in the
	    shell not to have a prompt, CTRL-C not working, etc.
解決方案:   Don't use SVR4 compatible ptys, even though they are detected.
	    (Ben Schmidt)
相關文件:   src/pty.c

Patch 7.2.002
問題:	    Leaking memory when displaying menus.
解決方案:   Free allocated memory. (Dominique Pelle)
相關文件:   src/menu.c

Patch 7.2.003
問題:	    Typo in translated message.  Message not translated.
解決方案:   Correct spelling. Add _(). (Dominique Pelle)
相關文件:   src/spell.c, src/version.c

Patch 7.2.004
問題:	    Cscope help message is not translated.
解決方案:   Put it in _(). (Dominique Pelle)
相關文件:   src/if_cscope.c, src/if_cscope.h

Patch 7.2.005
問題:	    A few problems when profiling.  Using flag pointer instead of flag
	    value.  Allocating zero bytes.  Not freeing used memory.
解決方案:   Remove wrong '&' characters.  Skip dumping when there is nothing
	    to dump.  Free used memory. (Dominique Pelle)
相關文件:   src/eval.c

Patch 7.2.006
問題:	    HTML files are not recognized by contents.
解決方案:   Add a rule to the scripts file. (Nico Weber)
相關文件:   runtime/scripts.vim

Patch 7.2.007 (extra)
問題:	    Minor issues for VMS.
解決方案:   Minor fixes for VMS.  Add float support. (Zoltan Arpadffy)
相關文件:   runtime/doc/os_vms.txt, src/os_vms_conf.h, src/Make_vms.mms,
	    src/testdir/Make_vms.mms, src/testdir/test30.in,
	    src/testdir/test54.in

Patch 7.2.008
問題:	    With a BufHidden autocommand that invokes ":bunload" the window
	    count for a buffer can be wrong. (Bob Hiestand)
解決方案:   Don't call enter_buffer() when already in that buffer.
相關文件:   src/buffer.c

Patch 7.2.009
問題:	    Can't compile with Perl 5.10 on MS-Windows. (Cesar Romani)
解決方案:   Add the Perl_sv_free2 function for dynamic loading. (Dan Sharp)
相關文件:   src/if_perl.xs

Patch 7.2.010
問題:	    When using "K" in Visual mode not all characters are properly
	    escaped. (Ben Schmidt)
解決方案:   Use a function with the functionality of shellescape(). (Jan
	    Minar)
相關文件:   src/mbyte.c, src/misc2.c, src/normal.c

Patch 7.2.011
問題:	    Get an error when inserting a float value from the expression
	    register.
解決方案:   Convert the Float to a String automatically in the same place
	    where a List would be converted to a String.
相關文件:   src/eval.c

Patch 7.2.012
問題:	    Compiler warnings when building with startup timing.
解決方案:   Add type casts.
相關文件:   src/ex_cmds2.c

Patch 7.2.013
問題:	    While waiting for the X selection Vim consumes a lot of CPU time
	    and hangs until a response is received.
解決方案:   Sleep a bit when the selection event hasn't been received yet.
	    Time out after a couple of seconds to avoid a hang when the
	    selection owner isn't responding.
相關文件:   src/ui.c

Patch 7.2.014
問題:	    synstack() doesn't work in an empty line.
解決方案:   Accept column zero as a valid position.
相關文件:   src/eval.c

Patch 7.2.015
問題:	    "make all test install" doesn't stop when the test fails. (Daniel
	    Shahaf)
解決方案:   When test.log contains failures exit with non-zero status.
相關文件:   src/testdir/Makefile

Patch 7.2.016
問題:	    The pattern being completed may be in freed memory when the
	    command line is being reallocated. (Dominique Pelle)
解決方案:   Keep a pointer to the expand_T in the command line structure.
	    Don't use <S-Tab> as CTRL-P when there are no results.  Clear the
	    completion when using a command line from the history.
相關文件:   src/ex_getln.c

Patch 7.2.017
問題:	    strlen() used on text that may not end in a NUL. (Dominique Pelle)
	    Pasting a very big selection doesn't work.
解決方案:   Use the length passed to the XtSelectionCallbackProc() function.
	    After getting the SelectionNotify event continue dispatching
	    events until the callback is actually called.  Also dispatch the
	    PropertyNotify event.
相關文件:   src/ui.c

Patch 7.2.018
問題:	    Memory leak when substitute is aborted.
解決方案:   Free the buffer allocated for the new text. (Dominique Pelle)
相關文件:   src/ex_cmds.c

Patch 7.2.019
問題:	    Completion of ":noautocmd" doesn't work and exists(":noautocmd")
	    returns zero. (Ben Fritz)
解決方案:   Add "noautocmd" to the list of modifiers and commands.
相關文件:   src/ex_cmds.h, src/ex_docmd.c

Patch 7.2.020
問題:	    Starting the GUI when the executable starts with 'k', but the KDE
	    version no longer exists.
解決方案:   Don't have "kvim" start the GUI.
相關文件:   src/main.c

Patch 7.2.021
問題:	    When executing autocommands getting the full file name may be
	    slow. (David Kotchan)
解決方案:   Postpone calling FullName_save() until autocmd_fname is used.
相關文件:   src/ex_docmd.c, src/fileio.c, src/globals.h

Patch 7.2.022 (extra)
問題:	    Testing is not possible when compiling with MingW.
解決方案:   Add a MingW specific test Makefile. (Bill McCarthy)
相關文件:   Filelist, src/testdir/Make_ming.mak

Patch 7.2.023
問題:	    'cursorcolumn' is in the wrong place in a closed fold when the
	    display is shifted left. (Gary Johnson)
解決方案:   Subtract w_skipcol or w_leftcol when needed.
相關文件:   src/screen.c

Patch 7.2.024
問題:	    It's possible to set 'history' to a negative value and that causes
	    an out-of-memory error.
解決方案:   Check that 'history' has a positive value. (Doug Kearns)
相關文件:   src/option.c

Patch 7.2.025
問題:	    When a CursorHold event invokes system() it is retriggered over
	    and over again.
解決方案:   Don't reset did_cursorhold when getting K_IGNORE.
相關文件:   src/normal.c

Patch 7.2.026 (after 7.2.010)
問題:	    "K" doesn't use the length of the identifier but uses the rest of
	    the line.
解決方案:   Copy the desired number of characters first.
相關文件:   src/normal.c

Patch 7.2.027
問題:	    Can use cscope commands in the sandbox.
解決方案:   Disallow them, they might not be safe.
相關文件:   src/ex_cmds.h

Patch 7.2.028
問題:	    Confusing error message for missing ().
解決方案:   Change "braces" to "parentheses". (Gary Johnson)
相關文件:   src/eval.c

Patch 7.2.029
問題:	    No completion for ":doautoall".
解決方案:   Complete ":doautoall" like ":doautocmd".  (Doug Kearns)
相關文件:   src/ex_docmd.c

Patch 7.2.030 (after 7.2.027)
問題:	    Can't compile.
解決方案:   Remove prematurely added ex_oldfiles.
相關文件:   src/ex_cmds.h

Patch 7.2.031
問題:	    Information in the viminfo file about previously edited files is
	    not available to the user.  There is no way to get a complete list
	    of files edited in previous Vim sessions.
解決方案:   Add v:oldfiles and fill it with the list of old file names when
	    first reading the viminfo file.  Add the ":oldfiles" command,
	    ":browse oldfiles" and the "#<123" special file name.  Increase
	    the default value for 'viminfo' from '20 to '100.
相關文件:   runtime/doc/cmdline.txt, runtime/doc/eval.txt,
	    runtime/doc/starting.txt, runtime/doc/usr_21.txt, src/eval.c,
	    src/ex_cmds.c, src/ex_cmds.h, src/ex_docmd.c, src/feature.h,
	    src/fileio.c, src/main.c, src/mark.c, src/misc1.c,
	    src/proto/eval.pro, src/proto/ex_cmds.pro, src/proto/mark.pro,
	    src/option.c, src/structs.h, src/vim.h

Patch 7.2.032 (after 7.2.031)
問題:	    Can't build with EXITFREE defined. (Dominique Pelle)
解決方案:   Change vv_string to vv_str.
相關文件:   src/eval.c

Patch 7.2.033
問題:	    When detecting a little endian BOM "ucs-2le" is used, but the text
	    might be "utf-16le".
解決方案:   Default to "utf-16le", it also works for "ucs-2le". (Jia Yanwei)
相關文件:   src/fileio.c, src/testdir/test42.ok

Patch 7.2.034
問題:	    Memory leak in spell info when deleting buffer.
解決方案:   Free the memory. (Dominique Pelle)
相關文件:   src/buffer.c

Patch 7.2.035
問題:	    Mismatches between alloc/malloc, free/vim_free,
	    realloc/vim_realloc.
解決方案:   Use the right function. (Dominique Pelle)
相關文件:   src/gui_x11.c, src/mbyte.c, src/misc2.c, src/os_unix.c

Patch 7.2.036 (extra)
問題:	    Mismatches between alloc/malloc, free/vim_free,
	    realloc/vim_realloc.
解決方案:   Use the right function. (Dominique Pelle)
相關文件:   src/gui_riscos.c, src/gui_w48.c, src/mbyte.c, src/os_vms.c,
	    src/os_w32exe.c, src/os_win16.c

Patch 7.2.037
問題:	    Double free with GTK 1 and compiled with EXITFREE.
解決方案:   Don't close display. (Dominique Pelle)
相關文件:   src/os_unix.c

Patch 7.2.038
問題:	    Overlapping arguments to memcpy().
解決方案:   Use mch_memmove(). (Dominique Pelle)
相關文件:   src/if_xcmdsrv.c

Patch 7.2.039
問題:	    Accessing freed memory on exit when EXITFREE is defined.
解決方案:   Call hash_init() on the v: hash table.
相關文件:   src/eval.c

Patch 7.2.040
問題:	    When using ":e ++ff=dos fname" and the file contains a NL without
	    a CR before it and 'ffs' contains "unix" then the fileformat
	    becomes unix.
解決方案:   Ignore 'ffs' when using the ++ff argument. (Ben Schmidt)
	    Also remove unreachable code.
相關文件:   src/fileio.c

Patch 7.2.041
問題:	    In diff mode, when using two tabs, each with two diffed buffers,
	    editing a buffer of the other tab messes up the diff.  (Matt
	    Mzyzik)
解決方案:   Only copy options from a window where the buffer was edited that
	    doesn't have 'diff' set or is for the current tab page.
	    Also fix that window options for a buffer are stored with the
	    wrong window.
相關文件:   src/buffer.c, src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c,
	    src/ex_getln.c, src/if_sniff.c, src/main.c, src/netbeans.c,
	    src/normal.c, src/popupmnu.c, src/proto/buffer.pro,
	    src/proto/ex_cmds.pro src/quickfix.c, src/window.c

Patch 7.2.042
問題:	    When using winrestview() in a BufWinEnter autocommand the window
	    is scrolled anyway. (Matt Zyzik)
解決方案:   Don't recompute topline when above 'scrolloff' from the bottom.
	    Don't always put the cursor halfway when entering a buffer.  Add
	    "w_topline_was_set".
相關文件:   src/buffer.c, src/move.c, src/structs.h

Patch 7.2.043
問題:	    VMS: Too many characters are escaped in filename and shell
	    commands.
解決方案:   Escape fewer characters. (Zoltan Arpadffy)
相關文件:   src/vim.h

Patch 7.2.044
問題:	    Crash because of STRCPY() being over protective of the destination
	    size. (Dominique Pelle)
解決方案:   Add -D_FORTIFY_SOURCE=1 to CFLAGS.  Use an intermediate variable
	    for the pointer to avoid a warning.
相關文件:   src/auto/configure, src/configure.in, src/eval.c

Patch 7.2.045
問題:	    The Python interface has an empty entry in sys.path.
解決方案:   Filter out the empty entry. (idea from James Vega)
相關文件:   src/if_python.c

Patch 7.2.046
問題:	    Wrong check for filling buffer with encoding. (Danek Duvall)
解決方案:   Remove pointers. (Dominique Pelle)
相關文件:   src/mbyte.c

Patch 7.2.047
問題:	    Starting Vim with the -nb argument while it's not supported causes
	    the other side to hang.
解決方案:   When -nb is used while it's not supported exit Vim. (Xavier de
	    Gaye)
相關文件:   src/main.c, src/vim.h

Patch 7.2.048
問題:	    v:prevcount is changed too often.  Counts are not multiplied when
	    setting v:count.
解決方案:   Set v:prevcount properly.  Multiply counts. (idea by Ben Schmidt)
相關文件:   src/eval.c, src/normal.c, src/proto/eval.pro

Patch 7.2.049 (extra)
問題:	    Win32: the clipboard doesn't support UTF-16.
解決方案:   Change UCS-2 support to UTF-16 support. (Jia Yanwei)
相關文件:   src/gui_w32.c, src/gui_w48.c, src/mbyte.c, src/misc1.c,
	    src/os_mswin.c, src/os_win32.c, src/proto/os_mswin.pro

Patch 7.2.050
問題:	    Warnings for not checking return value of fwrite(). (Chip Campbell)
解決方案:   Use the return value.
相關文件:   src/spell.c

Patch 7.2.051
問題:	    Can't avoid 'wildignore' and 'suffixes' for glob() and globpath().
解決方案:   Add an extra argument to these functions. (Ingo Karkat)
相關文件:   src/eval.c, src/ex_getln.c, src/proto/ex_getln.pro,
	    runtime/doc/eval.txt, runtime/doc/options.txt

Patch 7.2.052
問題:	    synIDattr() doesn't support "sp" for special color.
解決方案:   Recognize "sp" and "sp#".  (Matt Wozniski)
相關文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.2.053
問題:	    Crash when using WorkShop command ":ws foo". (Dominique Pelle)
解決方案:   Avoid using a NULL pointer.
相關文件:   src/workshop.c

Patch 7.2.054
問題:	    Compilation warnings for format in getchar.c.
解決方案:   Use fputs() instead of fprintf().  (Dominique Pelle)
相關文件:   src/getchar.c

Patch 7.2.055
問題:	    Various compiler warnings with strict checking.
解決方案:   Avoid the warnings by using return values and renaming.
相關文件:   src/diff.c, src/eval.c, src/ex_cmds.c, src/ex_docmd.c,
	    src/fileio.c, src/fold.c, src/globals.h, src/gui.c,
	    src/gui_at_sb.c, src/gui_gtk_x11.c, src/gui_xmdlg.c,
	    src/gui_xmebw.c, src/main.c, src/mbyte.c, src/message.c,
	    src/netbeans.c, src/option.c, src/os_unix.c, src/spell.c,
	    src/ui.c, src/window.c

Patch 7.2.056 (after 7.2.050)
問題:	    Tests 58 and 59 fail.
解決方案:   Don't invoke fwrite() with a zero length. (Dominique Pelle)
相關文件:   src/spell.c

Patch 7.2.057 (after 7.2.056)
問題:	    Combination of int and size_t may not work.
解決方案:   Use size_t for variable.
相關文件:   src/spell.c

Patch 7.2.058
問題:	    Can't add a patch name to the ":version" output.
解決方案:   Add the extra_patches array.
相關文件:   src/version.c

Patch 7.2.059
問題:	    Diff display is not always updated.
解決方案:   Update the display more often.
相關文件:   src/diff.c

Patch 7.2.060
問題:	    When a spell files has many compound rules it may take a very long
	    time making the list of suggestions.  Displaying also can be slow
	    when there are misspelled words.
	    Can't parse some Hunspell .aff files.
解決方案:   Check if a compounding can possibly work before trying a
	    combination, if the compound rules don't contain wildcards.
	    Implement using CHECKCOMPOUNDPATTERN.
	    Ignore COMPOUNDRULES.  Ignore a comment after most items.
	    Accept ONLYINCOMPOUND as an alias for NEEDCOMPOUND.
	    Accept FORBIDDENWORD as an alias for BAD.
相關文件:   runtime/doc/spell.txt, src/spell.c

Patch 7.2.061
問題:	    Can't create a funcref for an autoload function without loading
	    the script first. (Marc Weber)
解決方案:   Accept autoload functions that don't exist yet in function().
相關文件:   src/eval.c

Patch 7.2.062
問題:	    "[Scratch]" is not translated.
解決方案:   Mark the string for translation. (Dominique Pelle)
相關文件:   src/buffer.c

Patch 7.2.063
問題:	    Warning for NULL argument of Perl_sys_init3().
解決方案:   Use Perl_sys_init() instead. (partly by Dominique Pelle)
相關文件:   src/if_perl.xs

Patch 7.2.064
問題:	    Screen update bug when repeating "~" on a Visual block and the
	    last line doesn't change.
解決方案:   Keep track of changes for all lines.  (Moritz Orbach)
相關文件:   src/ops.c

Patch 7.2.065
問題:	    GTK GUI: the cursor disappears when doing ":vsp" and the Vim
	    window is maximized.  (Dominique Pelle, Denis Smolyar)
解決方案:   Don't change "Columns" back to an old value at a wrong moment.
	    Do change "Rows" when it should not be a problem.
相關文件:   src/gui.c

Patch 7.2.066
問題:	    It's not easy to see whether 'encoding' is a multi-byte encoding.
解決方案:   Add has('multi_byte_encoding').
相關文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.2.067
問題:	    Session file can't load extra file when the path contains special
	    characters.
解決方案:   Escape the file name. (Lech Lorens)
相關文件:   src/ex_docmd.c

Patch 7.2.068
問題:	    Emacs tags file lines can be too long, resulting in an error
	    message. (James Vega)
解決方案:   Ignore lines with errors if they are too long.
相關文件:   src/tag.c

Patch 7.2.069 (after 7.2.060)
問題:	    Compiler warning for storing size_t in int.
解決方案:   Add type cast.
相關文件:   src/spell.c

Patch 7.2.070
問題:	    Crash when a function returns a:000. (Matt Wozniski)
解決方案:   Don't put the function struct on the stack, allocate it.  Free it
	    only when nothing in it is used.
相關文件:   src/eval.c

Patch 7.2.071 (extra)
問題:	    Win32: Handling netbeans events while Vim is busy updating the
	    screen may cause a crash.
解決方案:   Like with GTK, only handle netbeans messages in the main loop.
	    (Xavier de Gaye)
相關文件:   src/gui_w48.c, src/netbeans.c

Patch 7.2.072 (extra)
問題:	    Compiler warning in Sniff code.
解決方案:   Use return value of pipe(). (Dominique Pelle)
相關文件:   src/if_sniff.c

Patch 7.2.073
問題:	    ":set <xHome>" has the same output as ":set <Home>". (Matt
	    Wozniski)
解決方案:   Don't translate "x" keys to its alternative for ":set".
相關文件:   src/gui_mac.c, src/misc2.c, src/option.c, src/proto/misc2.pro

Patch 7.2.074 (extra, after 7.2.073)
問題:	    ":set <xHome>" has the same output as ":set <Home>". (Matt
	    Wozniski)
解決方案:   Don't translate "x" keys to its alternative for ":set".
相關文件:   src/gui_mac.c

Patch 7.2.075 (after 7.2.058)
問題:	    Explanation about making a diff for extra_patches is unclear.
解決方案:   Adjust comment.
相關文件:   src/version.c

Patch 7.2.076
問題:	    rename(from, to) deletes the file if "from" and "to" are not equal
	    but still refer to the same file.  E.g., on a FAT32 filesystem
	    under Unix.
解決方案:   Go through another file name.
相關文件:   src/fileio.c

Patch 7.2.077 (after 7.2.076)
問題:	    rename(from, to) doesn't work if "from" and "to" differ only in
	    case on a system that ignores case in file names.
解決方案:   Go through another file name.
相關文件:   src/fileio.c

Patch 7.2.078
問題:	    When deleting a fold that is specified with markers the cursor
	    position may be wrong.  Folds may not be displayed properly after
	    a delete.  Wrong fold may be deleted.
解決方案:   Fix the problems. (mostly by Lech Lorens)
相關文件:   src/fold.c

Patch 7.2.079
問題:	    "killed" netbeans events are not handled correctly.
解決方案:   A "killed" netbeans event is sent when the buffer is deleted or
	    wiped out (in this case, the netbeans annotations in this buffer
	    have been removed).  A user can still remove a sign with the
	    command ":sign unplace" and this does not trigger a "killed"
	    event.  (Xavier de Gaye)
相關文件:   runtime/doc/netbeans.txt, src/buffer.c, src/globals.h,
	    src/netbeans.c, src/proto/netbeans.pro

Patch 7.2.080
問題:	    When typing a composing character just after starting completion
	    may access memory before its allocation point. (Dominique Pelle)
解決方案:   Don't delete before the completion start column.  Add extra checks
	    for the offset not being negative.
相關文件:   src/edit.c

Patch 7.2.081
問題:	    Compiler warning for floating point overflow on VAX.
解決方案:   For VAX use a smaller number. (Zoltan Arpadffy)
相關文件:   src/message.c

Patch 7.2.082
問題:	    When 'ff' is "mac" then "ga" on a ^J shows 0x0d instead of 0x0a.
	    (Andy Wokula)
解決方案:   Use NL for this situation. (Lech Lorens)
相關文件:   src/ex_cmds.c

Patch 7.2.083
問題:	    ":tag" does not return to the right tag entry from the tag stack.
解決方案:   Don't change the current match when there is no argument.
	    (Erik Falor)
相關文件:   src/tag.c

Patch 7.2.084
問題:	    Recursive structures are not handled properly in Python
	    vim.eval().
解決方案:   Keep track of references in a better way. (Yukihiro Nakadaira)
相關文件:   src/if_python.c

Patch 7.2.085
問題:	    ":set <M-b>=<Esc>b" does not work when 'encoding' is utf-8.
解決方案:   Put the <M-b> character in the input buffer as valid utf-8.
	    (partly by Matt Wozniski)
相關文件:   src/term.c

Patch 7.2.086
問題:	    Using ":diffget 1" in buffer 1 corrupts the text.
解決方案:   Don't do anything when source and destination of ":diffget" or
	    ":diffput" is the same buffer. (Dominique Pelle)
相關文件:   src/diff.c

Patch 7.2.087
問題:	    Adding URL to 'path' doesn't work to edit a file.
解決方案:   Skip simplify_filename() for URLs. (Matt Wozniski)
相關文件:   src/misc2.c

Patch 7.2.088 (extra)
問題:	    OpenClipboard() may fail when another application is using the
	    clipboard.
解決方案:   Retry OpenClipboard() a few times. (Jianrong Yu)
相關文件:   src/os_mswin.c

Patch 7.2.089 (extra)
問題:	    Win32: crash when using Ultramon buttons.
解決方案:   Don't use a WM_OLE message of zero size. (Ray Megal)
相關文件:   src/if_ole.cpp, src/gui_w48.c

Patch 7.2.090
問題:	    User command containing 0x80 in multi-byte character does not work
	    properly. (Yasuhiro Matsumoto)
解決方案:   Undo replacement of K_SPECIAL and CSI characters when executing
	    the command.
相關文件:   src/ex_docmd.c

Patch 7.2.091
問題:	    ":cs help" output is not aligned for some languages.
解決方案:   Compute character size instead of byte size. (Dominique Pelle)
相關文件:   src/if_cscope.c

Patch 7.2.092
問題:	    Some error messages are not translated.
解決方案:   Add _() around the messages. (Dominique Pelle)
相關文件:   src/eval.c

Patch 7.2.093 (extra)
問題:	    Win32: inputdialog() and find/replace dialogs can't handle
	    multi-byte text.
解決方案:   Use the wide version of dialog functions when available. (Yanwei
	    Jia)
相關文件:   src/gui_w32.c, src/gui_w48.c

Patch 7.2.094
問題:	    Compiler warning for signed/unsigned compare.
解決方案:   Add type cast.  Also fix a few typos.
相關文件:   src/edit.c

Patch 7.2.095
問題:	    With Visual selection, "r" and then CTRL-C Visual mode is stopped
	    but the highlighting is not removed.
解決方案:   Call reset_VIsual().
相關文件:   src/normal.c

Patch 7.2.096
問題:	    After ":number" the "Press Enter" message may be on the wrong
	    screen, if switching screens for shell commands.
解決方案:   Reset info_message. (James Vega)
相關文件:   src/ex_cmds.c

Patch 7.2.097
問題:	    "!xterm&" doesn't work when 'shell' is "bash".
解決方案:   Ignore SIGHUP after calling setsid(). (Simon Schubert) 
相關文件:   src/os_unix.c

Patch 7.2.098
問題:	    Warning for signed/unsigned pointer.
解決方案:   Add type cast.
相關文件:   src/eval.c

Patch 7.2.099
問題:	    Changing GUI options causes an unnecessary redraw when the GUI
	    isn't active.
解決方案:   Avoid the redraw. (Lech Lorens)
相關文件:   src/option.c

Patch 7.2.100
問題:	    When using ":source" on a FIFO or something else that can't rewind
	    the first three bytes are skipped.
解決方案:   Instead of rewinding read the first line and detect a BOM in that.
	    (mostly by James Vega)
相關文件:   src/ex_cmds2.c

Patch 7.2.101 (extra)
問題:	    MSVC version not recognized.
解決方案:   Add the version number to the list.  (Zhong Zhang)
相關文件:   src/Make_mvc.mak

Patch 7.2.102 (after 7.2.100)
問題:	    When 'encoding' is "utf-8" a BOM at the start of a Vim script is
	    not removed. (Tony Mechelynck)
解決方案:   When no conversion is taking place make a copy of the line without
	    the BOM.
相關文件:   src/ex_cmds2.c

Patch 7.2.103
問題:	    When 'bomb' is changed the window title is updated to show/hide a
	    "+", but the tab page label isn't. (Patrick Texier)
解決方案:   Set "redraw_tabline" in most places where "need_maketitle" is set.
	    (partly by Lech Lorens)
相關文件:   src/option.c

Patch 7.2.104
問題:	    When using ":saveas bar.c" the tab label isn't updated right away.
解決方案:   Set redraw_tabline. (Francois Ingelrest)
相關文件:   src/ex_cmds.c

Patch 7.2.105
問題:	    Modeline setting for 'foldmethod' overrules diff options. (Ingo
	    Karkat)
解決方案:   Don't set 'foldmethod' and 'wrap' from a modeline when 'diff' is
	    on.
相關文件:   src/option.c

Patch 7.2.106
問題:	    Endless loop when using "]s" in HTML when there are no
	    misspellings. (Ingo Karkat)
解決方案:   Break the search loop.  Also fix pointer alignment for systems
	    with pointers larger than int.
相關文件:   src/spell.c

Patch 7.2.107
問題:	    When using a GUI dialog and ":echo" commands the messages are
	    deleted after the dialog. (Vincent Birebent)
解決方案:   Don't call msg_end_prompt() since there was no prompt.
相關文件:   src/message.c

Patch 7.2.108 (after 7.2.105)
問題:	    Can't build without the diff feature.
解決方案:   Add #ifdef.
相關文件:   src/option.c

Patch 7.2.109
問題:	    'langmap' does not work for multi-byte characters.
解決方案:   Add a list of mapped multi-byte characters. (based on work by
	    Konstantin Korikov, Agathoklis Hatzimanikas)
相關文件:   runtime/doc/options.txt, src/edit.c, src/getchar.c, src/macros.h,
	    src/normal.c, src/option.c, src/proto/option.pro, src/window.c

Patch 7.2.110
問題:	    Compiler warning for unused variable.
解決方案:   Init the variable.
相關文件:   src/ex_docmd.c

Patch 7.2.111
問題:	    When using Visual block mode with 'cursorcolumn' it's unclear what
	    is selected.
解決方案:   Don't use 'cursorcolumn' highlighting inside the Visual selection.
	    (idea by Dominique Pelle)
相關文件:   src/screen.c

Patch 7.2.112
問題:	    Cursor invisible in Visual mode when 'number' is set and cursor in
	    first column. (Matti Niemenmaa, Renato Alves)
解決方案:   Check that vcol_prev is smaller than vcol.
相關文件:   src/screen.c

Patch 7.2.113
問題:	    Crash for substitute() call using submatch(1) while there is no
	    such submatch. (Yukihiro Nakadaira)
解決方案:   Also check the start of the submatch is set, it can be NULL when
	    an attempted match didn't work out.
相關文件:   src/regexp.c

Patch 7.2.114
問題:	    Using wrong printf format.
解決方案:   Use "%ld" instead of "%d". (Dominique Pelle)
相關文件:   src/netbeans.c

Patch 7.2.115
問題:	    Some debugging code is never used.
解決方案:   Remove nbtrace() and nbprt(). (Dominique Pelle)
相關文件:   src/nbdebug.c, src/nbdebug.h

Patch 7.2.116
問題:	    Not all memory is freed when EXITFREE is defined.
解決方案:   Free allocated memory on exit. (Dominique Pelle)
相關文件:   src/ex_docmd.c, src/gui_gtk_x11.c, src/misc2.c, src/search.c,
	    src/tag.c

Patch 7.2.117
問題:	    Location list incorrectly labelled "Quickfix List".
解決方案:   Break out of both loops for finding window for location list
	    buffer. (Lech Lorens)
相關文件:   src/buffer.c, src/quickfix.c, src/screen.c

Patch 7.2.118
問題:	    <PageUp> at the more prompt only does half a page.
解決方案:   Make <PageUp> go up a whole page.  Also make 'f' go a page
	    forward, but not quit the more prompt. (Markus Heidelberg)
相關文件:   src/message.c

Patch 7.2.119
問題:	    Status line is redrawn too often.
解決方案:   Check ScreeenLinesUC[] properly. (Yukihiro Nakadaira)
相關文件:   src/screen.c

Patch 7.2.120
問題:	    When opening the quickfix window or splitting the window and
	    setting the location list, the location list is copied and then
	    deleted, which is inefficient.
解決方案:   Don't copy the location list when not needed. (Lech Lorens)
相關文件:   src/quickfix.c, src/vim.h, src/window.c

Patch 7.2.121
問題:	    In gvim "!grep a *.c" spews out a lot of text that can't be
	    stopped with CTRL-C.
解決方案:   When looping to read and show text, do check for typed characters
	    every two seconds.
相關文件:   src/os_unix.c

Patch 7.2.122
問題:	    Invalid memory access when the VimResized autocommand changes
	    'columns' and/or 'lines'.
解決方案:   After VimResized check for changed values. (Dominique Pelle)
相關文件:   src/screen.c

Patch 7.2.123
問題:	    Typing 'q' at more prompt for ":map" output still displays another
	    line, causing another more prompt. (Markus Heidelberg)
解決方案:   Quit listing maps when 'q' typed.
相關文件:   src/getchar.c

Patch 7.2.124
問題:	    Typing 'q' at more prompt for ":tselect" output still displays
	    more lines, causing another more prompt. (Markus Heidelberg)
解決方案:   Quit listing tags when 'q' typed.
相關文件:   src/tag.c

Patch 7.2.125
問題:	    Leaking memory when reading XPM bitmap for a sign.
解決方案:   Don't allocate the memory twice. (Dominique Pelle)
相關文件:   src/gui_x11.c

Patch 7.2.126
問題:	    When EXITFREE is defined signs are not freed.
解決方案:   Free all signs on exit.  Also free keymaps. (Dominique Pelle)
相關文件:   src/misc2.c, src/ex_cmds.c, src/proto/ex_cmds.pro

Patch 7.2.127
問題:	    When listing mappings and a wrapping line causes the more prompt,
	    after typing 'q' there can be another more prompt. (Markus
	    Heidelberg)
解決方案:   Set "lines_left" to allow more lines to be displayed.
相關文件:   src/message.c

Patch 7.2.128 (after 7.2.055)
問題:	    Using ":lcd" makes session files not work.
解決方案:   Compare return value of mch_chdir() properly. (Andreas Bernauer)
相關文件:   src/ex_docmd.c

Patch 7.2.129
問題:	    When opening a command window from input() it uses the search
	    history.
解決方案:   Use get_cmdline_type(). (James Vega)
相關文件:   src/ex_getln.c

Patch 7.2.130
問題:	    Vim may haing until CTRL-C is typed when using CTRL-Z.
解決方案:   Avoid using pause().  Also use "volatile" for variables used in
	    signal functions. (Dominique Pelle)
相關文件:   src/auto/configure, src/configure.in, src/config.h.in,
	    src/globals.h, src/os_unix.c

Patch 7.2.131
問題:	    When 'keymap' is cleared may still use the cursor highlighting for
	    when it's enabled.
解決方案:   Reset 'iminsert' and 'imsearch'. (partly by Dominique Pelle)
	    Also avoid ":setlocal" for these options have a global effect.
相關文件:   src/option.c

Patch 7.2.132
問題:	    When changing directory during a SwapExists autocmd freed memory
	    may be accessed. (Dominique Pelle)
解決方案:   Add the allbuf_lock flag.
相關文件:   src/ex_getln.c, src/globals.h, src/fileio.c,
	    src/proto/ex_getln.pro

Patch 7.2.133
問題:	    ":diffoff!" changes settings in windows not in diff mode.
解決方案:   Only change settings in other windows when 'diff' is set, always
	    do it for the current window. (Lech Lorens)
相關文件:   src/diff.c

Patch 7.2.134
問題:	    Warning for discarding "const" from pointer.
解決方案:   Don't pass const pointer to mch_memmove().
相關文件:   src/fileio.c

Patch 7.2.135
問題:	    Memory leak when redefining user command with complete argument.
解決方案:   Free the old complete argument. (Dominique Pelle)
相關文件:   src/ex_docmd.c

Patch 7.2.136 (after 7.2.132)
問題:	    ":cd" is still possible in a SwapExists autocmd.
解決方案:   Check the allbuf_lock flag in ex_cd().
相關文件:   src/ex_docmd.c

Patch 7.2.137
問題:	    When 'virtualedit' is set, a left shift of a blockwise selection
	    that starts and ends inside a tab shifts too much. (Helmut
	    Stiegler)
解決方案:   Redo the block left shift code. (Lech Lorens)
相關文件:   src/ops.c, src/testdir/Makefile, src/testdir/test66.in,
	    src/testdir/test66.ok

Patch 7.2.138 (extra part of 7.2.137)
問題:	    See 7.2.137.
解決方案:   See 7.2.137.
相關文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms

Patch 7.2.139
問題:	    Crash when 'virtualedit' is "all". (James Vega)
解決方案:   Avoid overflow when column is MAXCOL. (Dominique Pelle)
相關文件:   src/misc2.c

Patch 7.2.140
問題:	    Diff highlighting isn't displayed before the Visual area if it
	    starts at the cursor position. (Markus Heidelberg)
解決方案:   Also check fromcol_prev.
相關文件:   src/screen.c

Patch 7.2.141
問題:	    When redrawing a character for bold spill this causes the next
	    character to be redrawn as well.
解決方案:   Only redraw one extra character. (Yukihiro Nakadaira)
相關文件:   src/screen.c

Patch 7.2.142
問題:	    Motif and Athena balloons don't use tooltip colors.
解決方案:   Set the colors. (Matt Wozniski)
相關文件:   src/gui_beval.c

Patch 7.2.143
問題:	    No command line completion for ":cscope" command.
解決方案:   Add the completion for ":cscope". (Dominique Pelle)
相關文件:   src/ex_docmd.c, src/ex_getln.c, src/if_cscope.c,
	    src/proto/if_cscope.pro, src/vim.h

Patch 7.2.144
問題:	    When 't_Co' is set to the value it already had the color scheme is
	    reloaded anyway.
解決方案:   Only load the colorscheme when the t_Co value changes. (Dominique
	    Pelle)
相關文件:   src/option.c

Patch 7.2.145
問題:	    White space in ":cscope find" is not ignored.
解決方案:   Ignore the white space, but not when the leading white space is
	    useful for the argument.
相關文件:   runtime/doc/if_scop.txt, src/if_cscope.c

Patch 7.2.146
問題:	    v:warningmsg isn't used for all warnings.
解決方案:   Set v:warningmsg for relevant warnings. (Ingo Karkat)
相關文件:   src/fileio.c, src/misc1.c, src/option.c

Patch 7.2.147
問題:	    When compiled as small version and 'number' is on the cursor is
	    displayed in the wrong position after a tab. (James Vega)
解決方案:   Don't increment vcol when still displaying the line number.
相關文件:   src/screen.c

Patch 7.2.148
問題:	    When searching for "$" while 'hlsearch' is set, highlighting the
	    character after the line does not work in the cursor column.
	    Also highlighting for Visual mode after the line end when this
	    isn't needed.  (Markus Heidelberg)
解決方案:   Only compare the cursor column in the cursor line.  Only highlight
	    for Visual selection after the last character when it's needed to
	    see where the Visual selection ends.
相關文件:   src/screen.c

Patch 7.2.149
問題:	    Using return value of function that doesn't return a value results
	    in reading uninitialized memory.
解決方案:   Set the default to return zero.  Make cursor() return -1 on
	    failure.  Let complete() return an empty string in case of an
	    error.  (partly by Dominique Pelle)
相關文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.2.150 (extra)
問題:	    Can't use tab pages from VisVim.
解決方案:   Add tab page support to VisVim. (Adam Slater)
相關文件:   src/VisVim/Commands.cpp, src/VisVim/Resource.h,
	    src/VisVim/VisVim.rc

Patch 7.2.151
問題:	    ":hist a" doesn't work like ":hist all" as the docs suggest.
解決方案:   Make ":hist a" and ":hist al" work. (Dominique Pelle)
相關文件:   src/ex_getln.c

Patch 7.2.152
問題:	    When using "silent echo x" inside ":redir" a next echo may start
	    halfway the line. (Tony Mechelynck, Dennis Benzinger)
解決方案:   Reset msg_col after redirecting silently.
相關文件:   src/ex_docmd.c, src/message.c, src/proto/message.pro

Patch 7.2.153
問題:	    Memory leak for ":recover empty_dir/".
解決方案:   Free files[] when it becomes empty. (Dominique Pelle)
相關文件:   src/memline.c

Patch 7.2.154 (after 7.2.132)
問題:	    ":cd" is still possible in a SwapExists autocmd.
解決方案:   Set allbuf_lock in do_swapexists().
相關文件:   src/memline.c

Patch 7.2.155
問題:	    Memory leak in ":function /pat".
解決方案:   Free the memory. (Dominique Pelle)
相關文件:   src/eval.c

Patch 7.2.156 (after 7.2.143)
問題:	    No completion for :scscope and :lcscope commands.
解決方案:   Implement the completion. (Dominique Pelle)
相關文件:   src/if_cscope.c, src/ex_docmd.c, src/proto/if_cscope.pro

Patch 7.2.157
問題:	    Illegal memory access when searching in path.
解決方案:   Avoid looking at a byte after end of a string. (Dominique Pelle)
相關文件:   src/search.c

Patch 7.2.158
問題:	    Warnings from VisualC compiler.
解決方案:   Add type casts. (George Reilly)
相關文件:   src/ops.c

Patch 7.2.159
問題:	    When $x_includes ends up being "NONE" configure fails.
解決方案:   Check for $x_includes not to be "NONE" (Rainer)
相關文件:   src/auto/configure, src/configure.in

Patch 7.2.160
問題:	    Search pattern not freed on exit when 'rightleft' set.
解決方案:   Free mr_pattern_alloced.
相關文件:   src/search.c

Patch 7.2.161
問題:	    Folds messed up in other tab page. (Vlad Irnov)
解決方案:   Instead of going over all windows in current tab page go over all
	    windows in all tab pages.  Also free memory for location lists in
	    other tab pages when exiting. (Lech Lorens)
相關文件:   src/fileio.c, src/mark.c, src/misc1.c, src/misc2.c

Patch 7.2.162
問題:	    The quickfix window may get wrong filetype.
解決方案:   Do not detect the filetype for the quickfix window. (Lech Lorens)
相關文件:   src/quickfix.c

Patch 7.2.163
問題:	    The command line window may get folding.
解決方案:   Default to no/manual folding. (Lech Lorens)
相關文件:   src/ex_getln.c

Patch 7.2.164
問題:	    When 'showbreak' is set the size of the Visual block may be
	    reported wrong. (Eduardo Daudt Flach)
解決方案:   Temporarily make 'sbr' empty.
相關文件:   src/normal.c, src/ops.c

Patch 7.2.165
問題:	    The argument for the FuncUndefined autocmd event is expanded like
	    a file name.
解決方案:   Don't try expanding it. (Wang Xu)
相關文件:   src/fileio.c

Patch 7.2.166
問題:	    No completion for ":sign" command.
解決方案:   Add ":sign" completion. (Dominique Pelle)
相關文件:   src/ex_cmds.c, src/ex_docmd.c, src/ex_getln.c, src/vim.h,
	    src/proto/ex_cmds.pro

Patch 7.2.167
問題:	    Splint doesn't work well for checking the code.
解決方案:   Add splint arguments in the Makefile.  Exclude some code from
	    splint that it can't handle.  Tune splint arguments to give
	    reasonable errors.  Add a filter for removing false warnings from
	    splint output.  Many small changes to avoid warnings.  More to
	    follow...
相關文件:   Filelist, src/Makefile, src/buffer.c, src/charset.c,
	    src/cleanlint.vim, src/digraph.c, src/edit.c, src/ex_cmds.c,
	    src/globals.h, src/ops.c, src/os_unix.c, src/os_unix.h,
	    src/proto/buffer.pro, src/proto/edit.pro, src/screen.c,
	    src/structs.h

Patch 7.2.168
問題:	    When no ctags program can be found, "make tags" attempts to
	    execute the first C file.
解決方案:   Default to "ctags" when no ctags program can be found.
相關文件:   src/configure.in, src/auto/configure

Patch 7.2.169
問題:	    Splint complains about a lot of things.
解決方案:   Add type casts, #ifdefs and other changes to avoid warnings.
	    Change colnr_T from unsigned to int.  Avoids mistakes with
	    subtracting columns.
相關文件:   src/cleanlint.vim, src/diff.c, src/edit.c, src/ex_cmds.c,
	    src/ex_cmds2.c, src/ex_docmd.c, src/proto/ex_cmds.pro,
	    src/proto/spell.pro, src/quickfix.c, src/spell.c, src/structs.h,
	    src/term.h, src/vim.h

Patch 7.2.170
問題:	    Using b_dev while it was not set. (Dominique Pelle)
解決方案:   Add the b_dev_valid flag.
相關文件:   src/buffer.c, src/fileio.c, src/structs.h

Patch 7.2.171 (after 7.2.169)
問題:	    Compiler warnings. (Tony Mechelynck)
解決方案:   Add function prototype. (Patrick Texier)  Init variable.
相關文件:   src/ex_cmds.c

Patch 7.2.172 (extra)
問題:	    Compiler warning.
解決方案:   Adjust function prototype. (Patrick Texier)
相關文件:   src/os_mswin.c

Patch 7.2.173
問題:	    Without lint there is no check for unused function arguments.
解決方案:   Use gcc -Wunused-parameter instead of lint.  For a few files add
	    attributes to arguments that are known not to be used.
相關文件:   src/auto/configure, src/buffer.c, src/charset.c, src/diff.c,
	    src/configure.in, src/config.h.in, src/edit.c, src/ex_cmds.c,
	    src/ex_cmds2.c, src/version.c, src/vim.h

Patch 7.2.174
問題:	    Too many warnings from gcc -Wextra.
解決方案:   Change initializer.  Add UNUSED.  Add type casts.
相關文件:   src/edit.c, src/eval.c, src/ex_cmds.c, src/ex_docmd.c,
	    src/ex_getln.c, src/fileio.c, getchar.c, globals.h, main.c,
	    memline.c, message.c, src/misc1.c, src/move.c, src/normal.c,
	    src/option.c, src/os_unix.c, src/os_unix.h, src/regexp.c,
	    src/search.c, src/tag.c

Patch 7.2.175
問題:	    Compiler warning in OpenBSD.
解決方案:   Add type cast for NULL. (Dasn)
相關文件:   src/if_cscope.c

Patch 7.2.176
問題:	    Exceptions for splint are not useful.
解決方案:   Remove the S_SPLINT_S ifdefs.
相關文件:   src/edit.c, src/ex_cmds.c, src/ex_docmd.c, src/os_unix.c,
	    src/os_unix.h, src/os_unixx.h, src/structs.h, src/term.h

Patch 7.2.177
問題:	    Compiler warnings when using -Wextra
解決方案:   Add UNUSED and type casts.
相關文件:   src/eval.c, src/ex_docmd.c, src/ex_eval.c, src/ex_getln.c,
	    src/fileio.c, src/hardcopy.c, src/if_cscope.c, src/if_xcmdsrv.c,
	    src/farsi.c, src/mark.c, src/menu.c

Patch 7.2.178
問題:	    Using negative value for device number might not work.
解決方案:   Use a separate flag for whether ffv_dev was set.
相關文件:   src/misc2.c

Patch 7.2.179
問題:	    Using negative value for device number might not work.
解決方案:   Use a separate flag for whether sn_dev was set.
相關文件:   src/ex_cmds2.c

Patch 7.2.180
問題:	    Some more compiler warnings when using gcc -Wextra.
解決方案:   Add UNUSED and type casts.
相關文件:   src/buffer.c, src/ex_cmds.c, src/macros.h, src/main.c,
	    src/menu.c, src/message.c, src/misc1.c, src/mbyte.c,
	    src/normal.c, src/option.c, src/os_unix.c, src/quickfix.c,
	    src/screen.c, src/search.c, src/spell.c, src/syntax.c, src/tag.c,
	    src/term.c, src/ui.c

Patch 7.2.181
問題:	    Some more compiler warnings when using gcc -Wextra.
解決方案:   Add UNUSED and type casts.
相關文件:   src/if_mzsch.c, src/gui.c, src/gui_gtk.c, src/gui_gtk_x11.c,
	    src/gui_gtk_f.c, src/gui_beval.c, src/netbeans.c

Patch 7.2.182 (after 7.2.181)
問題:	    Compilation problems after previous patch for Motif.  Gvim with
	    GTK crashes on startup.
解決方案:   Add comma.  Init form structure to zeroes.
相關文件:   src/netbeans.c, src/gui_gtk_f.c

Patch 7.2.183
問題:	    Configure problem for sys/sysctl.h on OpenBSD. (Dasn)
解決方案:   Add separate check for this header file.  Also switch to newer
	    version of autoconf.
相關文件:   src/auto/configure, src/configure.in

Patch 7.2.184
問題:	    Some more compiler warnings when using gcc -Wextra.
解決方案:   Add UNUSED and type casts.  Autoconf check for wchar_t.
相關文件:   src/auto/configure, src/config.h.in, src/configure.in,
	    src/gui_athena.c, src/gui_x11.c, src/gui.c, src/gui_beval.c,
	    src/gui_at_sb.c, src/gui_at_fs.c, src/gui_motif.c,
	    src/gui_xmdlg.c, src/gui_xmebw.c, src/if_python.c, src/window.c,
	    src/workshop.c

Patch 7.2.185
問題:	    Some more compiler warnings when using gcc -Wextra.
解決方案:   Add UNUSED and type casts.
相關文件:   src/Makefile, src/if_tlc.c, src/if_ruby.c

Patch 7.2.186
問題:	    Some more compiler warnings when using gcc -Wextra.
解決方案:   Now with the intended if_tcl.c changes.
相關文件:   src/if_tcl.c

Patch 7.2.187 (after 7.2.186)
問題:	    Doesn't build with older versions of TCL. (Yongwei Wu)
解決方案:   Add #ifdefs. (Dominique Pelle)
相關文件:   src/if_tcl.c

Patch 7.2.188
問題:	    Crash with specific use of function calls. (Meikel Brandmeyer)
解決方案:   Make sure the items referenced by a function call are not freed
	    twice.  (based on patch from Nico Weber)
相關文件:   src/eval.c

Patch 7.2.189
問題:	    Possible hang for deleting auto-indent. (Dominique Pelle)
解決方案:   Make sure the position is not beyond the end of the line.
相關文件:   src/edit.c

Patch 7.2.190
問題:	    The register executed by @@ isn't restored.
解決方案:   Mark the executable register in the viminfo file.
相關文件:   src/ops.c

Patch 7.2.191
問題:	    Mzscheme interface doesn't work on Ubuntu.
解決方案:   Change autoconf rules.  Define missing macro.  Some changes to
	    avoid gcc warnings.  Remove per-buffer namespace. (Sergey Khorev)
相關文件:   runtime/doc/if_mzsch.txt, src/Makefile, src/Make_ming.mak,
	    src/Make_mvc.mak, src/auto/configure, src/configure.in,
	    src/config.mk.in, src/eval.c, src/if_mzsch.c, src/if_mzsch.h,
	    src/main.c, src/proto/if_mzsch.pro

Patch 7.2.192 (after 7.2.188)
問題:	    Still a crash in the garbage collector for a very rare situation.
解決方案:   Make sure current_copyID is always incremented correctly. (Kent
	    Sibilev)
相關文件:   src/eval.c

Patch 7.2.193
問題:	    Warning for uninitialized values.
解決方案:   Initialize all the struct items.
相關文件:   src/eval.c

Patch 7.2.194 (extra)
問題:	    MSVC: rem commands are echoed.
解決方案:   Add commands to switch off echo. (Wang Xu)
相關文件:   src/msvc2008.bat

Patch 7.2.195
問題:	    Leaking memory for the command Vim was started with.
解決方案:   Remember the pointer and free it.
相關文件:   src/gui_gtk_x11.c

Patch 7.2.196 (after 7.2.167)
問題:	    Turns out splint doesn't work well enough to be usable.
解決方案:   Remove splint support.
相關文件:   Filelist, src/cleanlint.vim

Patch 7.2.197
問題:	    Warning for uninitialized values.
解決方案:   Initialize all the struct items of typebuf.
相關文件:   src/globals.h

Patch 7.2.198
問題:	    Size of buffer used for tgetent() may be too small.
解決方案:   Use the largest known size everywhere.
相關文件:   src/vim.h

Patch 7.2.199
問題:	    Strange character in comment.
解決方案:   Change to "message". (Yongwei Wu)
相關文件:   src/term.c

Patch 7.2.200
問題:	    Reading past end of string when navigating the menu bar or
	    resizing the window.
解決方案:   Add and use mb_ptr2len_len(). (partly by Dominique Pelle)
	    Also add mb_ptr2cells_len() to prevent more trouble.
相關文件:   src/gui_gtk_x11.c, src/os_unix.c, src/globals.h, src/mbyte.c,
	    src/proto/mbyte.pro

Patch 7.2.201
問題:	    Cannot copy/paste HTML to/from Firefox via the clipboard.
解決方案:   Implement this for GTK.  Add the "html" value to 'clipboard'.
相關文件:   runtime/doc/options.txt, src/globals.h, src/gui_gtk_x11.c,
	    src/mbyte.c, src/proto/mbyte.pro, src/option.c

Patch 7.2.202
問題:	    BufWipeout autocommand that edits another buffer causes problems.
解決方案:   Check for the situation, give an error and quit the operation.
相關文件:   src/fileio.c

Patch 7.2.203
問題:	    When reloading a buffer or doing anything else with a buffer that
	    is not displayed in a visible window, autocommands may be applied
	    to the current window, folds messed up, etc.
解決方案:   Instead of using the current window for the hidden buffer use a
	    special window, splitting the current one temporarily.
相關文件:   src/fileio.c, src/globals.h, src/gui.c, src/if_perl.xs,
	    src/progo/gui.pro, src/proto/window.pro, src/screen.c,
	    src/structs.h, src/window.c

Patch 7.2.204 (extra)
問題:	    Win32: Can't build with Visual Studio 2010 beta 1.
解決方案:   Fix the makefile. (George Reilly)
相關文件:   src/Make_mvc.mak

Patch 7.2.205 (extra)
問題:	    Win32: No support for High DPI awareness.
解決方案:   Fix the manifest file. (George Reilly)
相關文件:   src/Make_mvc.mak, src/gvim.exe.mnf

Patch 7.2.206
問題:	    Win32: Can't build netbeans interface with Visual Studio 2010.
解決方案:   Undefine ECONNREFUSED. (George Reilly)
相關文件:   src/netbeans.c

Patch 7.2.207
問題:	    Using freed memory with ":redrawstatus" when it works recursively.
解決方案:   Prevent recursively updating the status line. (partly by Dominique
	    Pelle)
相關文件:   src/screen.c

Patch 7.2.208
問題:	    "set novice" gives an error message, it should be ignored.
解決方案:   Don't see "no" in "novice" as unsetting an option.  (Patrick
	    Texier)
相關文件:   src/option.c

Patch 7.2.209
問題:	    For xxd setmode() is undefined on Cygwin.
解決方案:   Include io.h. (Dominique Pelle)
相關文件:   src/xxd/xxd.c

Patch 7.2.210
問題:	    When a file that is being edited has its timestamp updated outside
	    of Vim and ":checktime" is used still get a warning when writing
	    the file. (Matt Mueller)
解決方案:   Store the timestamp in b_mtime_read when the timestamp is the only
	    thing that changed.
相關文件:   src/fileio.c

Patch 7.2.211
問題:	    Memory leak when expanding a series of file names.
解決方案:   Use ga_clear_strings() instead of ga_clear().
相關文件:   src/misc1.c

Patch 7.2.212 (extra)
問題:	    Warnings for redefining SIG macros.
解決方案:   Don't define them if already defined. (Bjorn Winckler)
相關文件:   src/os_mac.h

Patch 7.2.213
問題:	    Warning for using vsprintf().
解決方案:   Use vim_vsnprintf().
相關文件:   src/netbeans.c

Patch 7.2.214
問題:	    Crash with complete function for user command. (Andy Wokula)
解決方案:   Avoid using a NULL pointer (Dominique Pelle)
相關文件:   src/ex_getln.c

Patch 7.2.215
問題:	    ml_get error when using ":vimgrep".
解決方案:   Load the memfile for the hidden buffer before putting it in a
	    window.  Correct the order of splitting the window and filling
	    the window and buffer with data.
相關文件:   src/fileio.c, src/proto/window.pro, src/quickfix.c, src/window.c

Patch 7.2.216
問題:	    Two error messages have the same number E812.
解決方案:   Give one message a different number.
相關文件:   runtime/doc/autocmd.txt, runtime/doc/if_mzsch.txt, src/if_mzsch.c

Patch 7.2.217
問題:	    Running tests with valgrind doesn't work as advertised.
解決方案:   Fix the line in the Makefile.
相關文件:   src/testdir/Makefile

Patch 7.2.218
問題:	    Cannot build GTK with hangul_input feature. (Dominique Pelle)
解決方案:   Adjust #ifdef.  (SungHyun Nam)
相關文件:   src/gui.c

Patch 7.2.219 (extra)
問題:	    Photon GUI is outdated.
解決方案:   Updates for QNX 6.4.0. (Sean Boudreau)
相關文件:   src/gui_photon.c

Patch 7.2.220 (after 7.2.215)
問題:	    a BufEnter autocommand that changes directory causes problems.
	    (Ajit Thakkar)
解決方案:   Disable autocommands when opening a hidden buffer in a window.
相關文件:   src/fileio.c

Patch 7.2.221
問題:	    X cut_buffer0 text is used as-is, it may be in the wrong encoding.
解決方案:   Convert between 'enc' and latin1. (James Vega)
相關文件:   src/gui_gtk_x11.c, src/message.c, src/ops.c, src/proto/ui.pro,
	    src/ui.c

Patch 7.2.222
問題:	   ":mksession" doesn't work properly with 'acd' set. 
解決方案:   Make it work. (Yakov Lerner)
相關文件:   src/ex_docmd.c

Patch 7.2.223
問題:	    When a script is run with ":silent" it is not able to give warning
	    messages.
解決方案:   Add the ":unsilent" command.
相關文件:   runtime/doc/various.txt, src/ex_cmds.h, src/ex_docmd.c

Patch 7.2.224
問題:	    Crash when using 'completefunc'. (Ingo Karkat)
解決方案:   Disallow entering edit() recursively when doing completion.
相關文件:   src/edit.c

Patch 7.2.225
問題:	    When using ":normal" a saved character may be executed.
解決方案:   Also store old_char when saving typeahead.
相關文件:   src/getchar.c, src/structs.h

Patch 7.2.226
問題:	    ml_get error after deleting the last line. (Xavier de Gaye)
解決方案:   When adjusting marks a callback may be invoked.  Adjust the cursor
	    position before invoking deleted_lines_mark().
相關文件:   src/ex_cmds.c, src/ex_docmd.c, src/if_mzsch.c, src/if_python.c,
	    src/if_perl.xs, src/misc1.c

Patch 7.2.227
問題:	    When using ":cd" in a script there is no way to track this.
解決方案:   Display the directory when 'verbose' is 5 or higher.
相關文件:   src/ex_docmd.c

Patch 7.2.228
問題:	    Cscope is limited to 8 connections.
解決方案:   Allocated the connection array to handle any number of
	    connections. (Dominique Pelle)
相關文件:   runtime/doc/if_cscop.txt, src/if_cscope.h, src/if_cscope.c

Patch 7.2.229
問題:	    Warning for shadowed variable.
解決方案:   Rename "wait" to "wait_time".
相關文件:   src/os_unix.c

Patch 7.2.230
問題:	    A few old lint-style ARGUSED comments.
解決方案:   Change to the new UNUSED style.
相關文件:   src/getchar.c

Patch 7.2.231
問題:	    Warning for unreacheable code.
解決方案:   Add #ifdef.
相關文件:   src/if_perl.xs

Patch 7.2.232
問題:	    Cannot debug problems with being in a wrong directory.
解決方案:   When 'verbose' is 5 or higher report directory changes.
相關文件:   src/os_unix.c, src/os_unix.h, src/proto/os_unix.pro

Patch 7.2.233 (extra part of 7.2.232)
問題:	    Cannot debug problems with being in a wrong directory.
解決方案:   When 'verbose' is 5 or higher report directory changes.
相關文件:   src/os_msdos.c, src/os_mswin.c, src/os_riscos.c, src/os_mac.h

Patch 7.2.234
問題:	    It is not possible to ignore file names without a suffix.
解決方案:   Use an empty entry in 'suffixes' for file names without a dot.
相關文件:   runtime/doc/cmdline.txt, src/misc1.c

Patch 7.2.235
問題:	    Using CTRL-O z= in Insert mode has a delay before redrawing.
解決方案:   Reset msg_didout and msg_scroll.
相關文件:   src/misc1.c, src/spell.c

Patch 7.2.236
問題:	    Mac: Compiling with Ruby doesn't always work.
解決方案:   In configure filter out the --arch argument (Bjorn Winckler)
相關文件:   src/configure.in, src/auto/configure

Patch 7.2.237
問題:	    Crash on exit when window icon not set.
解決方案:   Copy terminal name when using it for the icon name.
相關文件:   src/os_unix.c

Patch 7.2.238
問題:	    Leaking memory when setting term to "builtin_dumb".
解決方案:   Free memory when resetting term option t_Co.
相關文件:   src/option.c, src/proto/option.pro, src/term.c

Patch 7.2.239
問題:	    Using :diffpatch twice or when patching fails causes memory
	    corruption and/or a crash.  (Bryan Venteicher)
解決方案:   Detect missing output file.  Avoid using non-existing buffer.
相關文件:   src/diff.c

Patch 7.2.240
問題:	    Crash when using find/replace dialog repeatedly. (Michiel
	    Hartsuiker)
解決方案:   Avoid doing the operation while busy or recursively.  Also refuse
	    replace when text is locked.
相關文件:   src/gui.c

Patch 7.2.241
問題:	    When using a combination of ":bufdo" and "doautoall" we may end up
	    in the wrong directory. (Ajit Thakkar)
	    Crash when triggering an autocommand in ":vimgrep".  (Yukihiro
	    Nakadaira)
解決方案:   Clear w_localdir and globaldir when using the aucmd_win.
	    Use a separate flag to decide aucmd_win needs to be restored.
相關文件:   src/fileio.c, src/globals.h, src/structs.h

Patch 7.2.242
問題:	    Setting 'lazyredraw' causes the cursor column to be recomputed.
	    (Tom Link)
解決方案:   Only recompute the cursor column for a boolean option if changes
	    the cursor position.
相關文件:   src/option.c

Patch 7.2.243
問題:	    Memory leak when using :vimgrep and resizing. (Dominique Pelle)
解決方案:   Free memory for aucmd_win when resizing and don't allocate it
	    twice.
相關文件:   src/screen.c

Patch 7.2.244
問題:	    When 'enc' is utf-8 and 'fenc' is latin1, writing a non-latin1
	    character gives a conversion error without any hint what is wrong.
解決方案:   When known add the line number to the error message.
相關文件:   src/fileio.c

Patch 7.2.245
問題:	    When 'enc' is "utf-16" and 'fenc' is "utf-8" writing a file does
	    conversion while none should be done. (Yukihiro Nakadaira) When
	    'fenc' is empty the file is written as utf-8 instead of utf-16.
解決方案:   Do proper comparison of encodings, taking into account that all
	    Unicode values for 'enc' use utf-8 internally.
相關文件:   src/fileio.c

Patch 7.2.246
問題:	    Cscope home page link is wrong.
解決方案:   Update the URL. (Sergey Khorev)
相關文件:   runtime/doc/if_cscop.txt

Patch 7.2.247
問題:	    Mzscheme interface minor problem.
解決方案:   Better error message when build fails. (Sergey Khorev)
相關文件:   src/if_mzsch.c

Patch 7.2.248 (extra)
問題:	    Mzscheme interface building minor problems.
解決方案:   Update Win32 makefiles. (Sergey Khorev)
相關文件:   src/Make_cyg.mak, src/Make_ming.mak, src/Make_mvc.mak

Patch 7.2.249
問題:	    The script to check .po files can't handle '%' in plural forms.
解決方案:   Remove "Plural-Forms:" from the checked string.
相關文件:   src/po/check.vim

Patch 7.2.250 (extra)
問題:	    Possible buffer overflow.
解決方案:   Compute the remaining space. (Dominique Pelle)
相關文件:   src/GvimExt/gvimext.cpp

Patch 7.2.251 (after 7.2.044)
問題:	    Compiler adds invalid memory bounds check.
解決方案:   Remove _FORTIFY_SOURCE=2 from CFLAGS. (Dominique Pelle)
相關文件:   src/auto/configure, src/configure.in

Patch 7.2.252
問題:	    When using a multi-byte 'enc' the 'iskeyword' option cannot
	    contain characters above 128.
解決方案:   Use mb_ptr2char_adv().
相關文件:   src/charset.c

Patch 7.2.253
問題:	    Netbeans interface: getLength always uses current buffer.
解決方案:   Use ml_get_buf() instead of ml_get(). (Xavier de Gaye)
相關文件:   src/netbeans.c

Patch 7.2.254
問題:	    Compiler warning for assigning size_t to int.
解決方案:   Use size_t for the variable. (George Reilly)
相關文件:   src/fileio.c

Patch 7.2.255 (after 7.2.242)
問題:	    Setting 'rightleft', 'linebreak' and 'wrap' may cause cursor to be
	    in wrong place.
解決方案:   Recompute the cursor column for these options.
相關文件:   src/option.c

Patch 7.2.256
問題:	    When 'guifont' was not set GTK font dialog doesn't have a default.
	    (Andreas Metzler)
解決方案:   Set default to DEFAULT_FONT. (James Vega)
相關文件:   src/gui_gtk_x11.c

Patch 7.2.257
問題:	    With GTK 2.17 lots of assertion error messages.
解決方案:   Remove check for static gravity. (Sebastian Droege)
相關文件:   src/gui_gtk_f.c

Patch 7.2.258
問題:	    v:beval_col and b:beval_text are wrong in UTF-8 text. (Tony
	    Mechelynck)
解決方案:   Use byte number instead of character number for the column.
相關文件:   src/ui.c

Patch 7.2.259
問題:	    exists() doesn't work properly for an empty aucmd group.
解決方案:   Change how au_exists() handles a missing pattern.  Also add a
	    test for this. (Bob Hiestand)
相關文件:   src/fileio.c, src/testdir/Makefile, src/testdir/test67.in,
	    src/testdir/test67.ok

Patch 7.2.260 (extra part of 7.2.259)
問題:	    exists() doesn't work properly for empty aucmd group.
解決方案:   Change how au_exists() handles a missing pattern.  Also add a
	    test for this. (Bob Hiestand)
相關文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms

Patch 7.2.261
問題:	    When deleting lines with a specific folding configuration E38 may
	    appear. (Shahaf)
解決方案:   When adjusting nested folds for deleted lines take into account
	    that they don't start at the top of the enclosing fold.
相關文件:   src/fold.c

Patch 7.2.262
問題:	    When using custom completion for a user command the pattern string
	    goes beyond the cursor position. (Hari Krishna Dara)
解決方案:   Truncate the string at the cursor position.
相關文件:   src/ex_getln.c, src/structs.h

Patch 7.2.263
問題:	    GTK2: when using the -geom argument with an offset from the right
	    edge and the size is smaller than the default, the Vim window is
	    not positioned properly.
解決方案:   Use another function to set the size. (Vitaly Minko)
相關文件:   src/gui_gtk_x11.c

Patch 7.2.264
問題:	    GTK2: When the Vim window is maximized setting 'columns' or
	    'lines' doesn't work.
解決方案:   Unmaximize the window before setting the size. (Vitaly Minko)
相關文件:   src/gui.c, src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro

Patch 7.2.265
問題:	    When using ":silent broken" inside try/catch silency may persist.
	    (dr-dr xp)
解決方案:   Set msg_silent when there is an error and it's bigger than the
	    saved value.
相關文件:   src/ex_docmd.c

Patch 7.2.266
問題:	    When an expression abbreviation is triggered, the typed character
	    is unknown.
解決方案:   Make the typed character available in v:char.
相關文件:   runtime/doc/map.txt, src/eval.c, src/getchar.c, src/ops.c,
	    src/proto/eval.pro

Patch 7.2.267
問題:	    Crash for narrow window and double-width character.
解決方案:   Check for zero width.  (Taro Muraoka)
相關文件:   src/charset.c

Patch 7.2.268
問題:	    Crash when using Python to set cursor beyond end of line.
	    (winterTTr)
解決方案:   Check the column to be valid.
相關文件:   src/if_python.c

Patch 7.2.269
問題:	    Many people struggle to find out why Vim startup is slow.
解決方案:   Add the --startuptime command line flag.
相關文件:   runtime/doc/starting.txt, src/globals.h, src/feature.h,
	    src/main.c, src/macros.h

Patch 7.2.270
問題:	    Using ":@c" when the c register contains a CR causes the rest to
	    be executed later. (Dexter Douglas)
解決方案:   Don't check for typeahead to start with ':', keep executing
	    commands until all added typeahead has been used.
相關文件:   src/ex_docmd.c

Patch 7.2.271
問題:	    Using freed memory in Motif GUI version when making a choice.
解決方案:   Free memory only after using it. (Dominique Pelle)
相關文件:   src/gui_xmdlg.c

Patch 7.2.272
問題:	    "_.svz" is not recognized as a swap file. (David M. Besonen)
解決方案:   Accept .s[uvw][a-z] as a swap file name extension.
相關文件:   src/memline.c

Patch 7.2.273
問題:	    Crash with redir to unknown array. (Christian Brabandt)
解決方案:   Don't assign the redir result when there was an error.
相關文件:   src/eval.c

Patch 7.2.274
問題:	    Syntax folding doesn't work properly when adding a comment.
解決方案:   Fix it and add a test. (Lech Lorens)
相關文件:   src/fold.c, src/testdir/test45.in, src/testdir/test45.ok

Patch 7.2.275
問題:	    Warning for unused argument and comparing signed and unsigned.
解決方案:   Add type cast.
相關文件:   src/memline.c

Patch 7.2.276
問題:	    Crash when setting 'isprint' to a small bullet. (Raul Coronado)
解決方案:   Check for the character to be < 256.  Also make it possible to
	    specify a range of multi-byte characters. (Lech Lorens)
相關文件:   src/charset.c

Patch 7.2.277
問題:	    CTRL-Y in a diff'ed window may move the cursor outside of the
	    window. (Lech Lorens)
解決方案:   Limit the number of filler lines to the height of the window.
	    Don't reset filler lines to zero for an empty buffer.
相關文件:   src/move.c

Patch 7.2.278
問題:	    Using magic number in the folding code.
解決方案:   Use the defined MAX_LEVEL.
相關文件:   src/fold.c

Patch 7.2.279
問題:	    Invalid memory read with visual mode "r". (Dominique Pelle)
解決方案:   Make sure the cursor position is valid.  Don't check the cursor
	    position but the position being used.  And make sure we get the
	    right line.
相關文件:   src/misc2.c, src/ops.c

Patch 7.2.280
問題:	    A redraw in a custom statusline with %! may cause a crash.
	    (Yukihiro Nakadaira)
解決方案:   Make a copy of 'statusline'.  Also fix typo in function name
	    redraw_custum_statusline. (partly by Dominique Pelle)
相關文件:   src/screen.c

Patch 7.2.281
問題:	    'cursorcolumn' highlighting is wrong in diff mode.
解決方案:   Adjust the column computation. (Lech Lorens)
相關文件:   src/screen.c

Patch 7.2.282
問題:	    A fold can't be closed.
解決方案:   Initialize fd_small to MAYBE. (Lech Lorens)
相關文件:   src/fold.c

Patch 7.2.283
問題:	    Changing font while the window is maximized doesn't keep the
	    window maximized.
解決方案:   Recompute number of lines and columns after changing font. (James
	    Vega)
相關文件:   src/gui_gtk_x11.c

Patch 7.2.284
問題:	    When editing the same buffer in two windows, one with folding,
	    display may be wrong after changes.
解決方案:   Call set_topline() to take care of side effects. (Lech Lorens)
相關文件:   src/misc1.c

Patch 7.2.285 (after 7.2.169)
問題:	    CTRL-U in Insert mode also deletes indent. (Andrey Voropaev)
解決方案:   Fix mistake made in patch 7.2.169.
相關文件:   src/edit.c

Patch 7.2.286 (after 7.2.269)
問題:	    The "--startuptime=<file>" argument is not consistent with other
	    arguments.
解決方案:   Use "--startuptime <file>".  Added the +startuptime feature.
相關文件:   runtime/doc/eval.txt, runtime/doc/starting.txt,
	    runtime/doc/various.txt, src/eval.c, src/main.c, src/version.c

Patch 7.2.287
問題:	    Warning from gcc 3.4 about uninitialized variable.
解決方案:   Move assignment outside of #ifdef.
相關文件:   src/if_perl.xs

Patch 7.2.288
問題:	    Python 2.6 pyconfig.h redefines macros.
解決方案:   Undefine the macros before including pyconfig.h.
相關文件:   src/if_python.c

Patch 7.2.289
問題:	    Checking wrong struct member.
解決方案:   Change tb_buf to tb_noremap. (Dominique Pelle)
相關文件:   src/getchar.c

Patch 7.2.290
問題:	    Not freeing memory from ":lmap", ":xmap" and ":menutranslate".
解決方案:   Free the memory when exiting. (Dominique Pelle)
相關文件:   src/misc2.c

Patch 7.2.291
問題:	    Reading uninitialised memory in arabic mode.
解決方案:   Use utfc_ptr2char_len() rather than utfc_ptr2char().  (Dominique
	    Pelle)
相關文件:   src/screen.c

Patch 7.2.292
問題:	    Block right-shift doesn't work properly with multi-byte encoding
	    and 'list' set.
解決方案:   Add the missing "else". (Lech Lorens)
相關文件:   src/ops.c

Patch 7.2.293
問題:	    When setting 'comments' option it may be used in a wrong way. 
解決方案:   Don't increment after skipping over digets. (Yukihiro Nakadaira)
相關文件:   src/misc1.c

Patch 7.2.294
問題:	    When using TEMPDIRS dir name could get too long.
解決方案:   Overwrite tail instead of appending each time.  Use mkdtemp() when
	    available. (James Vega)
相關文件:   src/auto/configure, src/config.h.in, src/configure.in, src/fileio.c

Patch 7.2.295
問題:	    When using map() on a List the index is not known.
解決方案:   Set v:key to the  index. (Hari Krishna Dara)
相關文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.2.296
問題:	    Help message about startuptime is wrong. (Dominique Pelle)
解決方案:   Remove the equal sign.
相關文件:   src/main.c

Patch 7.2.297
問題:	    Reading freed memory when writing ":reg" output to a register.
	    (Dominique Pelle)
解決方案:   Skip the register being written to.
相關文件:   src/ops.c

Patch 7.2.298
問題:	    ":vimgrep" crashes when there is an autocommand that sets a
	    window-local variable.
解決方案:   Initialize the w: hashtab for re-use. (Yukihiro Nakadaira)
相關文件:   src/fileio.c

Patch 7.2.299
問題:	    Crash when comment middle is longer than start.
解決方案:   Fix size computation. (Lech Lorens)
相關文件:   src/misc1.c

Patch 7.2.300
問題:	    Vim doesn't close file descriptors when forking and executing
	    another command, e.g., ":shell".
解決方案:   Use FD_CLOEXEC when available. (James Vega)
相關文件:   auto/configure, src/config.h.in, src/configure.in,
	    src/ex_cmdds2.c, src/fileio.c, src/memfile.c, src/memline.c

Patch 7.2.301
問題:	    Formatting is wrong when 'tw' is set to a small value.
解決方案:   Fix it and add tests.  Also fix behavior of "1" in 'fo'. (Yukihiro
	    Nakadaira)
相關文件:   src/edit.c, src/testdir/Makefile, src/testdir/test68.in,
	    src/testdir/test68.ok, src/testdir/test69.in,
	    src/testdir/test69,ok

Patch 7.2.302 (extra part of 7.2.301)
問題:	    Formatting wrong with small 'tw' value.
解決方案:   Add build rules for tests.
相關文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms

Patch 7.2.303 (after 7.2.294)
問題:	    Can't build on MS-Windows.
解決方案:   Add #ifdef around vim_settempdir(). (James Vega)
相關文件:   src/fileio.c

Patch 7.2.304
問題:	    Compiler warning for bad pointer cast.
解決方案:   Use another variable for int pointer.
相關文件:   src/ops.c

Patch 7.2.305
問題:	    Recursively redrawing causes a memory leak. (Dominique Pelle)
解決方案:   Disallow recursive screen updating.
相關文件:   src/screen.c

Patch 7.2.306
問題:	    shellescape("10%%", 1) only escapes first %. (Christian Brabandt)
解決方案:   Don't copy the character after the escaped one.
相關文件:   src/misc2.c

Patch 7.2.307
問題:	    Crash with a very long syntax match statement. (Guy Gur Ari)
解決方案:   When the offset does not fit in the two bytes available give an
	    error instead of continuing with invalid pointers.
相關文件:   src/regexp.c

Patch 7.2.308
問題:	    When using a regexp in the "\=" expression of a substitute
	    command, submatch() returns empty strings for further lines.
	    (Clockwork Jam)
解決方案:   Save and restore the line number and line count when calling
	    reg_getline().
相關文件:   src/regexp.c

Patch 7.2.309 (after 7.2.308)
問題:	    Warning for missing function prototype. (Patrick Texier)
解決方案:   Add the prototype.
相關文件:   src/regexp.c

Patch 7.2.310
問題:	    When a filetype plugin in ~/.vim/ftdetect uses ":setfiletype" and
	    the file starts with a "# comment" it gets "conf" filetype.
解決方案:   Check for "conf" filetype after using ftdetect plugins.
相關文件:   runtime/filetype.vim

Patch 7.2.311
問題:	    Can't compile with FreeMiNT.
解決方案:   Change #ifdef for limits.h. (Alan Hourihane)
相關文件:   src/fileio.c

Patch 7.2.312
問題:	    iconv() returns an invalid character sequence when conversion
	    fails.  It should return an empty string. (Yongwei Wu)
解決方案:   Be more strict about invalid characters in the input.
相關文件:   src/mbyte.c

Patch 7.2.313
問題:	    Command line completion doesn't work after "%:h" and similar.
解決方案:   Expand these items before doing the completion.
相關文件:   src/ex_getln.c, src/misc1.c, src/proto/misc1.pro

Patch 7.2.314
問題:	    Missing function in small build.
解決方案:   Always include concat_str.
相關文件:   src/misc1.c

Patch 7.2.315
問題:	    Python libs can't be found on 64 bit system.
解決方案:   Add lib64 to the list of directories. (Michael Henry)
相關文件:   src/auto/configure, src/configure.in

Patch 7.2.316
問題:	    May get multiple _FORTIFY_SOURCE arguments. (Tony Mechelynck)
解決方案:   First remove all these arguments and then add the one we want.
	    (Dominique Pelle)
相關文件:   src/auto/configure, src/configure.in

Patch 7.2.317
問題:	    Memory leak when adding a highlight group with unprintable
	    characters, resulting in E669.
解決方案:   Free the memory.  And fix a few typos. (Dominique Pelle)
相關文件:   src/syntax.c

Patch 7.2.318
問題:	    Wrong locale value breaks floating point numbers for gvim.
解決方案:   Set the locale again after doing GUI inits. (Dominique Pelle)
相關文件:   src/main.c

Patch 7.2.319
問題:	    Motif: accessing freed memory when cancelling font dialog.
解決方案:   Destroy the widget only after accessing it. (Dominique Pelle)
相關文件:   src/gui_xmdlg.c

Patch 7.2.320
問題:	    Unused function in Mzscheme interface.
解決方案:   Remove the function and what depends on it. (Dominique Pelle)
相關文件:   src/if_mzsch.c, src/proto/if_mzsch.pro

Patch 7.2.321
問題:	    histadd() and searching with "*" fails to add entry to history
	    when it is empty.
解決方案:   Initialize the history. (Lech Lorens)
相關文件:   src/eval.c, src/normal.c

Patch 7.2.322
問題:	    Wrong indenting in virtual replace mode with CTRL-Y below a short
	    line.
解決方案:   Check for character to be NUL. (suggested by Lech Lorens)
相關文件:   src/edit.c

Patch 7.2.323 (extra)
問題:	    Balloon evaluation crashes on Win64.
解決方案:   Change pointer types. (Sergey Khorev)
相關文件:   src/gui_w32.c

Patch 7.2.324
問題:	    A negative column argument in setpos() may cause a crash.
解決方案:   Check for invalid column number. (James Vega)
相關文件:   src/eval.c, src/misc2.c

Patch 7.2.325
問題:	    A stray "w" in the startup vimrc file causes the edited file to be
	    replaced with an empty file. (Stone Kang).
解決方案:   Do not write a buffer when it has never been loaded.
相關文件:   src/fileio.c

Patch 7.2.326
問題:	    Win32: $HOME doesn't work when %HOMEPATH% is not defined.
解決方案:   Use "\" for %HOMEPATH% when it is not defined.
相關文件:   src/misc1.c

Patch 7.2.327
問題:	    Unused functions in Workshop.
解決方案:   Add "#if 0" and minor cleanup. (Dominique Pelle)
相關文件:   src/workshop.c, src/integration.c, src/integration.h

Patch 7.2.328
問題:	    has("win64") does not return 1 on 64 bit MS-Windows version.
解決方案:   Also check for _WIN64 besides WIN64.
相關文件:   src/eval.c

Patch 7.2.329
問題:	    "g_" doesn't position cursor correctly when in Visual mode and
	    'selection' is "exclusive". (Ben Fritz)
解決方案:   Call adjust_for_sel().
相關文件:   src/normal.c

Patch 7.2.330
問題:	    Tables for Unicode case operators are outdated.
解決方案:   Add a Vim script for generating the tables.  Include tables for
	    Unicode 5.2.
相關文件:   runtime/tools/README.txt, runtime/tools/unicode.vim, src/mbyte.c

Patch 7.2.331
問題:	    Can't interrupt "echo list" for a very long list.
解決方案:   Call line_breakcheck() in list_join().
相關文件:   src/eval.c

Patch 7.2.332
問題:	    Crash when spell correcting triggers an autocommand that reloads
	    the buffer.
解決方案:   Make a copy of the line to be modified. (Dominique Pelle)
相關文件:   src/spell.c

Patch 7.2.333
問題:	    Warnings from static code analysis.
解決方案:   Small changes to various lines. (Dominique Pelle)
相關文件:   src/buffer.c, src/edit.c, src/ex_getln.c, src/fileio.c,
	    src/if_cscope.c, src/netbeans.c, src/ops.c, src/quickfix.c,
	    src/syntax.c, src/ui.c

Patch 7.2.334
問題:	    Postponing keys in Netbeans interface does not work properly.
解決方案:   Store the key string instead of the number.  Avoid an infinite
	    loop. (Mostly by Xavier de Gaye)
相關文件:   src/netbeans.c, src/proto/netbeans.pro

Patch 7.2.335
問題:	    The CTRL-] command escapes too many characters.
解決方案:   Use a different list of characters to be escaped. (Sergey Khorev)
相關文件:   src/normal.c

Patch 7.2.336
問題:	    MzScheme interface can't evaluate an expression.
解決方案:   Add mzeval(). (Sergey Khorev)
相關文件:   runtime/doc/eval.txt, runtime/doc/if_mzsch.txt,
	    runtime/doc/usr_41.txt, src/eval.c, src/if_mzsch.c,
	    src/proto/eval.pro, src/proto/if_mzsch.pro,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Makefile, src/testdir/main.aap, src/testdir/test1.in,
	    src/testdir/test70.in, src/testdir/test70.ok

Patch 7.2.337
問題:	    The :compiler command doesn't function properly when invoked in a
	    function.
解決方案:   Add "g:" before "current_compiler". (Yukihiro Nakadaira)
相關文件:   src/ex_cmds2.c

Patch 7.2.338 (after 7.2.300)
問題:	    Part of FD_CLOEXEC change is missing.
解決方案:   Include source file skipped because of typo.
相關文件:   src/ex_cmds2.c

Patch 7.2.339 (after 7.2.269)
問題:	    Part of --startuptime patch is missing.
解決方案:   Add check for time_fd.
相關文件:   src/ex_cmds2.c

Patch 7.2.340
問題:	    Gcc warning for condition that can never be true. (James Vega)
解決方案:   Use start_lvl instead flp->lvl.
相關文件:   src/fold.c

Patch 7.2.341
問題:	    Popup menu wraps to next line when double-wide character doesn't
	    fit. (Jiang Ma)
解決方案:   Display a ">" instead. (Dominique Pelle)
相關文件:   src/screen.c

Patch 7.2.342
問題:	    Popup menu displayed wrong in 'rightleft' mode when there are
	    multi-byte characters.
解決方案:   Adjust the column computations. (Dominique Pelle)
相關文件:   src/popupmnu.c

Patch 7.2.343 (after 7.2.338)
問題:	    Can't compile on Win32.
解決方案:   Insert the missing '|'.
相關文件:   src/ex_cmds2.c

Patch 7.2.344 (after 7.2.343)
問題:	    Can't compile on some systems
解決方案:   Move the #ifdef outside of the mch_open macro. (Patrick Texier)
相關文件:   src/ex_cmds2.c

Patch 7.2.345
問題:	    Tab line is not updated when the value of 'bt' is changed.
解決方案:   Call redraw_titles(). (Lech Lorens)
相關文件:   src/option.c

Patch 7.2.346
問題:	    Repeating a command with @: causes a mapping to be applied twice.
解決方案:   Do not remap characters inserted in the typeahead buffer. (Kana
	    Natsuno)
相關文件:   src/ops.c

Patch 7.2.347
問題:	    Crash when executing <expr> mapping redefines that same mapping.
解決方案:   Save the values used before evaluating the expression.
相關文件:   src/getchar.c

Patch 7.2.348 (after 7.2.330)
問題:	    Unicode double-width characters are not up-to date.
解決方案:   Produce the double-width table like the others.
相關文件:   runtime/tools/unicode.vim, src/mbyte.c

Patch 7.2.349
問題:	    CTRL-W gf doesn't put the new tab in the same place as "tab split"
	    and "gf". (Tony Mechelynck)
解決方案:   Store the tab number in cmdmod.tab.
相關文件:   src/window.c

Patch 7.2.350
問題:	    Win32: When changing font the window may jump from the secondary
	    to the primary screen. (Michael Wookey)
解決方案:   When the screen position was negative don't correct it to zero.
相關文件:   src/gui.c

Patch 7.2.351 (after 7.2.347)
問題:	    Can't build with some compilers.
解決方案:   Move the #ifdef outside of a macro.  Cleanup the code.
相關文件:   src/getchar.c

Patch 7.2.352 (extra)
問題:	    Win64: Vim doesn't work when cross-compiled with MingW libraries.
解決方案:   Always return TRUE for the WM_NCCREATE message. (Andy Kittner)
相關文件:   src/gui_w48.c

Patch 7.2.353
問題:	    No command line completion for ":profile".
解決方案:   Complete the subcommand and file name.
相關文件:   src/ex_docmd.c, src/ex_cmds2.c, src/ex_getln.c,
	    src/proto/ex_cmds2.pro, src/vim.h

Patch 7.2.354
問題:	    Japanese single-width double-byte characters not handled correctly.
解決方案:   Put 0x8e in ScreenLines[] and the second byte in ScreenLines2[].
	    (partly by Kikuchan)
相關文件:   src/screen.c

Patch 7.2.355
問題:	    Computing the cursor column in validate_cursor_col() is wrong when
	    line numbers are used and 'n' is not in 'cpoptions', causing the
	    popup menu to be positioned wrong.
解決方案:   Correctly use the offset. (partly by Dominique Pelle)
相關文件:   src/move.c

Patch 7.2.356
問題:	    When 'foldmethod' is changed not all folds are closed as expected.
解決方案:   In foldUpdate() correct the start position and reset fd_flags when
	    w_foldinvalid is set. (Lech Lorens)
相關文件:   src/fold.c

Patch 7.2.357
問題:	    When changing 'fileformat' from/to "mac" and there is a CR in the
	    text the display is wrong.
解決方案:   Redraw the text when 'fileformat' is changed. (Ben Schmidt)
相關文件:   src/option.c

Patch 7.2.358
問題:	    Compiler warnings on VMS. (Zoltan Arpadffy)
解決方案:   Pass array itself instead its address.  Return a value.
相關文件:   src/gui_gtk_x11.c, src/os_unix.c

Patch 7.2.359
問題:	    Crash when using the Netbeans join command.
解決方案:   Make sure the ml_flush_line() function is not used recursively.
	    (Xavier de Gaye)
相關文件:   src/memline.c

Patch 7.2.360
問題:	    Ruby on MS-Windows: can't use sockets.
解決方案:   Call NtInitialize() during initialization. (Ariya Mizutani)
相關文件:   src/if_ruby.c

Patch 7.2.361
問題:	    Ruby 1.9 is not supported.
解決方案:   Add Ruby 1.9 support. (Masaki Suketa)
相關文件:   src/Makefile, src/auto/configure, src/configure.in, src/if_ruby.c

Patch 7.2.362 (extra, after 7.2.352)
問題:	    Win64: Vim doesn't work when cross-compiled with MingW libraries.
解決方案:   Instead of handling WM_NCCREATE, create wide text area window
	    class if the parent window iw side. (Sergey Khorev)
相關文件:   src/gui_w32.c, src/gui_w48.c

Patch 7.2.363
問題:	    Can't dynamically load Perl 5.10.
解決方案:   Add the function Perl_croak_xs_usage. (Sergey Khorev)
相關文件:   src/if_perl.xs

Patch 7.2.364 (extra)
問題:	    Can't build gvimext.dll on Win 7 x64 using MinGW (John Marriott)
解決方案:   Check if _MSC_VER is defined. (Andy Kittner)
相關文件:   src/GvimExt/gvimext.h

Patch 7.2.365 (extra)
問題:	    MS-Windows with MingW: "File->Save As" does not work. (John
	    Marriott)
解決方案:   Correctly fill in structure size. (Andy Kittner)
相關文件:   src/gui_w48.c

Patch 7.2.366
問題:	    CTRL-B doesn't go back to the first line of the buffer.
解決方案:   Avoid an overflow when adding MAXCOL.
相關文件:   src/move.c

Patch 7.2.367
問題:	    "xxd -r -p" doesn't work as documented.
解決方案:   Skip white space. (James Vega)
相關文件:   src/xxd/xxd.c

Patch 7.2.368 (after 7.2.361)
問題:	    Ruby interface: Appending line doesn't work. (Michael Henry)
解決方案:   Reverse check for NULL line. (James Vega)
相關文件:   src/if_ruby.c

Patch 7.2.369
問題:	    Error message is not easy to understand.
解決方案:   Add quotes. (SungHyun Nam)
相關文件:   src/ex_cmds2.c

Patch 7.2.370 (after 7.2.356)
問題:	    A redraw may cause folds to be closed.
解決方案:   Revert part of the previous patch.  Add a test. (Lech Lorens)
相關文件:   src/diff.c, src/fold.c, src/option.c, src/testdir/test45.in,
	    src/testdir/test45.ok

Patch 7.2.371
問題:	    Build problems on Tandem NonStop.
解決方案:   A few changes to #ifdefs (Joachim Schmitz)
相關文件:   src/auto/configure, src/configure.in, src/config.h.in, src/vim.h,
	    src/if_cscope.c, src/osdef1.h.in, src/tag.c

Patch 7.2.372 (extra)
問題:	    Cross-compiling GvimExt and xxd doesn't work.
解決方案:   Change the build files. (Markus Heidelberg)
相關文件:   src/INSTALLpc.txt, src/GvimExt/Make_ming.mak, src/Make_cyg.mak,
	    src/Make_ming.mak, src/xxd/Make_cyg.mak

Patch 7.2.373
問題:	    Gcc 4.5 adds more error messages. (Chris Indy)
解決方案:   Update default 'errorformat'.
相關文件:   src/option.h

Patch 7.2.374
問題:	    Ruby eval() doesn't understand Vim types.
解決方案:   Add the vim_to_ruby() function.  (George Gensure)
相關文件:   src/eval.c, src/if_ruby.c

Patch 7.2.375
問題:	    ml_get errors when using ":bprevious" in a BufEnter autocmd.
	    (Dominique Pelle)
解決方案:   Clear w_valid when entering another buffer.
相關文件:   src/buffer.c

Patch 7.2.376
問題:	    ml_get error when using SiSU syntax. (Nathan Thomas)
解決方案:   If the match ends below the last line move it to the end of the
	    last line.
相關文件:   src/syntax.c

Patch 7.2.377 (extra, after 7.2.372)
問題:	    Misplaced assignment.  Duplicate build line for gvimext.dll.
解決方案:   Move setting CROSS_COMPILE to before ifneq.  Remove the wrong
	    build line. (Markus Heidelberg)
相關文件:   src/Make_ming.mak

Patch 7.2.378
問題:	    C function declaration indented too much. (Rui)
解決方案:   Don't see a line containing { or } as a type. (Matt Wozniski)
相關文件:   src/misc1.c

Patch 7.2.379
問題:	    'eventignore' is set to an invalid value inside ":doau". (Antony
	    Scriven)
解決方案:   Don't include the leading comma when the option was empty.
相關文件:   src/fileio.c

Patch 7.2.380 (after 7.2.363)
問題:	    Perl interface builds with 5.10.1 but not with 5.10.0.
解決方案:   Change the #ifdefs. (Sergey Khorev)
相關文件:   src/if_perl.xs

Patch 7.2.381
問題:	    No completion for :behave.
解決方案:   Add :behave completion.  Minor related fixes. (Dominique Pelle)
相關文件:   src/ex_docmd.c, src/ex_getln.c, src/proto/ex_docmd.pro, src/vim.h

Patch 7.2.382
問題:	    Accessing freed memory when closing the cmdline window when
	    'bufhide' is set to "wipe".
解決方案:   Check if the buffer still exists before invoking close_buffer()
	    (Dominique Pelle)
相關文件:   src/ex_getln.c

Patch 7.2.383
問題:	    Vim doesn't build cleanly with MSVC 2010.
解決方案:   Change a few types. (George Reilly)
相關文件:   src/ex_cmds2.c, src/if_python.c, src/syntax.c

Patch 7.2.384 (extra)
問題:	    Vim doesn't build properly with MSVC 2010.
解決方案:   Add the nmake version to the build file. (George Reilly)
相關文件:   src/Make_mvc.mak, src/testdir/Make_dos.mak

Patch 7.2.385
問題:	    When in the command line window dragging status line only works
	    for last-but-one window. (Jean Johner)
解決方案:   Remove the code that disallows this.
相關文件:   src/ui.c

Patch 7.2.386
問題:	    Focus hack for KDE 3.1 causes problems for other window managers.
解決方案:   Remove the hack. (forwarded by Joel Bradshaw)
相關文件:   src/gui_gtk.c

Patch 7.2.387
問題:	    Ruby with MingW still doesn't build all versions.
解決方案:   More #ifdefs for the  Ruby code. (Sergey Khorev)
相關文件:   src/if_ruby.c

Patch 7.2.388 (extra part of 7.2.387)
問題:	    Ruby with MingW still doesn't build all versions.
解決方案:   Different approach to build file. (Sergey Khorev)
相關文件:   src/Make_ming.mak

Patch 7.2.389
問題:	    synIDattr() cannot return the font.
解決方案:   Support the "font" argument. (Christian Brabandt)
相關文件:   runtime/doc/eval.txt, src/eval.c, src/syntax.c

Patch 7.2.390
問題:	    In some situations the popup menu can be displayed wrong.
解決方案:   Remove the popup menu if the cursor moved. (Lech Lorens)
相關文件:   src/edit.c

Patch 7.2.391
問題:	    Internal alloc(0) error when doing "CTRL-V $ c". (Martti Kuparinen)
解決方案:   Fix computations in getvcol(). (partly by Lech Lorens)
相關文件:   src/charset.c, src/memline.c

Patch 7.2.392
問題:	    Netbeans hangs reading from a socket at the maximum block size.
解決方案:   Use select() or poll(). (Xavier de Gaye)
相關文件:   src/vim.h, src/os_unixx.h, src/if_xcmdsrv.c, src/netbeans.c

Patch 7.2.393
問題:	    Mac: Can't build with different Xcode developer tools directory.
解決方案:   make "Developer" directory name configurable. (Rainer Muller)
相關文件:   src/configure.in, src/auto/configure

Patch 7.2.394
問題:	    .lzma and .xz files are not supported.
解決方案:   Recognize .lzma and .xz files so that they can be edited.
相關文件:   runtime/plugin/gzip.vim

Patch 7.2.395
問題:	    In help CTRL=] on g?g? escapes the ?, causing it to fail. (Tony
	    Mechelynck)
解決方案:   Don't escape ? for a help command. (Sergey Khorev)
相關文件:   src/normal.c

Patch 7.2.396
問題:	    Get E38 errors. (Dasn)
解決方案:   Set cursor to line 1 instead of 0. (Dominique Pelle)
相關文件:   src/popupmnu.c

Patch 7.2.397
問題:	    Redundant check for w_lines_valid.
解決方案:   Remove the if.  (Lech Lorens)
相關文件:   src/fold.c

Patch 7.2.398
問題:	    When moving windows the cursor ends up in the wrong line.
解決方案:   Set the window width and height properly. (Lech Lorens)
相關文件:   src/window.c

Patch 7.2.399 (extra, after 7.2.388)
問題:	    Cannot compile on MingW.
解決方案:   Move ifneq to separate line. (Vlad Sandrini, Dominique Pelle)
相關文件:   src/Make_ming.mak

Patch 7.2.400 (after 7.2.387)
問題:	    Dynamic Ruby is not initialised properly for version 1.9.1.
	    Ruby cannot create strings from NULL.
解決方案:   Cleanup #ifdefs.  Handle NULL like an empty string.  Add
	    ruby_init_stack. (Sergey Khorev)
相關文件:   src/if_ruby.c

Patch 7.2.401
問題:	    ":e dir<Tab>" with 'wildmode' set to "list" doesn't highlight
	    directory names with a space. (Alexandre Provencio)
解決方案:   Remove the backslash before checking if the name is a directory.
	    (Dominique Pelle)
相關文件:   src/ex_getln.c

Patch 7.2.402
問題:	    This gives a #705 error: let X = function('haslocaldir')
	    let X = function('getcwd')
解決方案:   Don't give E705 when the name is found in the hashtab. (Sergey
	    Khorev)
相關文件:   src/eval.c

Patch 7.2.403 (after 7.2.400)
問題:	    Compiler warning for pointer type. (Tony Mechelynck)
解決方案:   Move type cast to the right place.
相關文件:   src/if_ruby.c

Patch 7.2.404
問題:	    Pointers for composing characters are not properly initialized.
解決方案:   Compute the size of the pointer, not what it points to. (Yukihiro
	    Nakadaira)
相關文件:   src/screen.c

Patch 7.2.405
問題:	    When built with small features the matching text is not
	    highlighted for ":s/pat/repl/c".
解決方案:   Remove the #ifdef for IncSearch. (James Vega)
相關文件:   src/syntax.c

Patch 7.2.406
問題:	    Patch 7.2.119 introduces uninit mem read. (Dominique Pelle)
解決方案:   Only used ScreeenLinesC when ScreeenLinesUC is not zero. (Yukihiro
	    Nakadaira)  Also clear ScreeenLinesC when allocating.
相關文件:   src/screen.c

Patch 7.2.407
問題:	    When using an expression in ":s" backslashes in the result are
	    dropped. (Sergey Goldgaber, Christian Brabandt)
解決方案:   Double backslashes.
相關文件:   src/regexp.c

Patch 7.2.408
問題:	    With ":g/the/s/foo/bar/" the '[ and '] marks can be set to a line
	    that was not changed.
解決方案:   Only set '[ and '] marks when a substitution was done.
相關文件:   src/ex_cmds.c

Patch 7.2.409
問題:	    Summary of number of substitutes is incorrect for ":folddo". (Jean
	    Johner)
解決方案:   Reset sub_nsubs and sub_nlines in global_exe().
相關文件:   src/ex_cmds.c

Patch 7.2.410
問題:	    Highlighting directories for completion doesn't work properly.
解決方案:   Don't halve backslashes when not needed, expanded "~/".
	    (Dominique Pelle)
相關文件:   src/ex_getln.c

Patch 7.2.411
問題:	    When parsing 'cino' a comma isn't skipped properly.
解決方案:   Skip the comma. (Lech Lorens)
相關文件:   src/misc1.c

Patch 7.2.412
問題:	    [ or ] followed by mouse click doesn't work.
解決方案:   Reverse check for key being a mouse event. (Dominique Pelle)
相關文件:   src/normal.c

Patch 7.2.413
問題:	    Large file support is incorrect.
解決方案:   Add AC_SYS_LARGEFILE to configure. (James Vega)
相關文件:   src/configure.in, src/config.h.in, src/auto/configure

Patch 7.2.414
問題:	    CTRK-K <space> <space> does not produce 0xa0 as expected. (Tony
	    Mechelynck)
解決方案:   Remove the Unicode range 0xe000 - 0xefff from digraphs, these are
	    not valid characters.
相關文件:   src/digraph.c

Patch 7.2.415
問題:	    Win32: Can't open a remote file when starting Vim.
解決方案:   Don't invoke cygwin_conv_path() for URLs. (Tomoya Adachi)
相關文件:   src/main.c

Patch 7.2.416
問題:	    Logtalk.dict is not installed.
解決方案:   Add it to the install target. (Markus Heidelberg)
相關文件:   src/Makefile

Patch 7.2.417
問題:	    When 'shell' has an argument with a slash then 'shellpipe' is not
	    set properly. (Britton Kerin)
解決方案:   Assume there are no spaces in the path, arguments follow.
相關文件:   src/option.c

Patch 7.2.418
問題:	    Vim tries to set the background or foreground color in a terminal
	    to -1.  (Graywh)  Happens with ":hi Normal ctermbg=NONE".
解決方案:   When resetting the foreground or background color don't set the
	    color, let the clear screen code do that.
相關文件:   src/syntax.c

Patch 7.2.419
問題:	    Memory leak in Motif when clicking on "Search Vim Help".
解決方案:   Free string returned by XmTextGetString(). (Dominique Pelle)
相關文件:   src/gui_motif.c

Patch 7.2.420
問題:	    ":argedit" does not accept "++enc=utf8" as documented. (Dominique
	    Pelle)
解決方案:   Add the ARGOPT flag to ":argedit".
相關文件:   src/ex_cmds.h

Patch 7.2.421
問題:	    Folds are sometimes not updated properly and there is no way to
	    force an update.
解決方案:   Make "zx" and "zX" recompute folds (suggested by Christian
	    Brabandt)
相關文件:   src/normal.c

Patch 7.2.422
問題:	    May get E763 when using spell dictionaries.
解決方案:   Avoid utf-8 case folded character to be truncated to 8 bits and
	    differ from latin1. (Dominique Pelle)
相關文件:   src/spell.c

Patch 7.2.423
問題:	    Crash when assigning s: to variable. (Yukihiro Nakadaira)
解決方案:   Make ga_scripts contain pointer to scriptvar_T instead of
	    scriptvar_T itself. (Dominique Pelle)
相關文件:   src/eval.c

Patch 7.2.424
問題:	    ":colorscheme" without an argument doesn't do anything.
解決方案:   Make it echo the current color scheme name.  (partly by Christian
	    Brabandt)
相關文件:   runtime/doc/syntax.txt, src/ex_cmds.h, src/ex_docmd.c

Patch 7.2.425
問題:	    Some compilers complain about fourth EX() argument.
解決方案:   Add cast to long_u.
相關文件:   src/ex_cmds.h

Patch 7.2.426
問題:	    Commas in 'langmap' are not always handled correctly.
解決方案:   Require commas to be backslash escaped. (James Vega)
相關文件:   src/option.c

Patch 7.2.427
問題:	    The swapfile is created using the destination of a symlink, but
	    recovery doesn't follow symlinks.
解決方案:   When recovering, resolve symlinks. (James Vega)
相關文件:   src/memline.c

Patch 7.2.428
問題:	    Using setqflist([]) to clear the error list doesn't work properly.
解決方案:   Set qf_nonevalid to TRUE when appropriate. (Christian Brabandt)
相關文件:   src/quickfix.c

Patch 7.2.429
問題:	    A file that exists but access is denied may result in a "new file"
	    message.  E.g. when its directory is unreadable.
解決方案:   Specifically check for ENOENT to decide a file doesn't exist.
	    (partly by James Vega)
相關文件:   src/fileio.c

Patch 7.2.430
問題:	    The ++bad argument is handled wrong, resulting in an invalid
	    memory access.
解決方案:   Use the bad_char field only for the replacement character, add
	    bad_char_idx to store the position. (Dominique Pelle)
相關文件:   src/eval.c, src/ex_cmds.h, src/ex_docmd.c

Patch 7.2.431
問題:	    ":amenu" moves the cursor when in Insert mode.
解決方案:   Use CTRL-\ CTRL-O instead of CTRL-O. (Christian Brabandt)
相關文件:   src/menu.c

Patch 7.2.432
問題:	    When menus are translated they can only be found by the translated
	    name.  That makes ":emenu" difficult to use.
解決方案:   Store the untranslated name and use it for completion and :emenu.
	    (Liang Peng (Bezetek James), Edward L. Fox)
相關文件:   src/menu.c, src/structs.h

Patch 7.2.433
問題:	    Can't use cscope with QuickFixCmdPre and QuickFixCmdPost.
解決方案:   Add cscope support for these autocmd events. (Bryan Venteicher)
相關文件:   runtime/doc/autocmd.txt, src/if_cscope.c

Patch 7.2.434 (after 7.2.432)
問題:	    Compilation fails without the multi-lang feature.
解決方案:   Add #ifdefs. (John Marriott)
相關文件:   src/menu.c

Patch 7.2.435 (after 7.2.430)
問題:	    Crash when using bad_char_idx uninitialized. (Patrick Texier)
解決方案:   Don't use bad_char_idx, reproduce the ++bad argument from bad_char.
相關文件:   src/eval.c, src/ex_cmds.h, src/ex_docmd.c

Patch 7.2.436
問題:	    Reproducible crash in syntax HL. (George Reilly, Dominique Pelle)
解決方案:   Make sst_stacksize an int instead of short. (Dominique Pelle)
相關文件:   src/structs.h

Patch 7.2.437 (after 7.2.407)
問題:	    When "\\\n" appears in the expression result the \n doesn't result
	    in a line break. (Andy Wokula)
解決方案:   Also replace a \n after a backslash into \r.
相關文件:   src/regexp.c

Patch 7.2.438 (after 7.2.427)
問題:	    "vim -r" crashes.
解決方案:   Don't use NULL pointer argument.
相關文件:   src/memline.c

Patch 7.2.439
問題:	    Invalid memory access when doing thesaurus completion and
	    'infercase' is set.
解決方案:   Use the minimal length of completed word and replacement.
	    (Dominique Pelle)
相關文件:   src/edit.c

Patch 7.2.440
問題:	    Calling a function through a funcref, where the function deletes
	    the funcref, leads to an invalid memory access.
解決方案:   Make a copy of the function name. (Lech Lorens)
相關文件:   src/eval.c, src/testdir/test34.in, src/testdir/test34.ok

Patch 7.2.441
問題:	    When using ":earlier" undo information may be wrong.
解決方案:   When changing alternate branches also adjust b_u_oldhead.
相關文件:   src/undo.c

Patch 7.2.442 (after 7.2.201)
問題:	    Copy/paste with OpenOffice doesn't work.
解決方案:   Do not offer the HTML target when it is not supported. (James
	    Vega)
相關文件:   src/gui_gtk_x11.c, src/option.c, src/proto/gui_gtk_x11.pro

Patch 7.2.443
問題:	    Using taglist() on a tag file with duplicate fields generates an
	    internal error. (Peter Odding)
解決方案:   Check for duplicate field names.
相關文件:   src/eval.c, src/proto/eval.pro, src/tag.c

Patch 7.2.444 (after 7.2.442)
問題:	    Can't build with GTK 1, gtk_selection_clear_targets() is not
	    available. (Patrick Texier)
解決方案:   Don't change the targets for GTK 1, set them once.
相關文件:   src/gui_gtk_x11.c, src/option.c

Patch 7.2.445
問題:	    Crash when using undo/redo and a FileChangedRO autocmd event that
	    reloads the buffer. (Dominique Pelle)
解決方案:   Do not allow autocommands while performing and undo or redo.
相關文件:   src/misc1.c, src/undo.c

Patch 7.2.446
問題:	    Crash in GUI when closing the last window in a tabpage. (ryo7000)
解決方案:   Remove the tabpage from the list before freeing the window.
相關文件:   src/window.c

When writing a file, switching tab pages and selecting a word the file write
message would be displayed again.  This happened in Insert mode and with
'cmdheight' set to 2.

When using ":lang" to set a locale that uses a comma for decimal separator and
using GTK floating point numbers stop working.  Use gtk_disable_setlocale().
(James Vega)

"g8" didn't produce the right value on a NUL. (Dominique Pelle)

Use BASEMODLIBS instead of MODLIBS for Python configuration to pick up the
right compiler flags. (Michael Bienia)

Window title was not updated after dropping a file on Vim. (Hari G)

synstack() did not return anything when just past the end of the line.  Useful
when using the cursor position in Insert mode.

When entering a digraph or special character after a line that fits the window
the '?' or '^' on the next line is not redrawn. (Ian Kelling)

Composing characters in |:s| substitute text were dropped.

|exists()| was causing an autoload script to be loaded.

Filter out -pthread for cproto.

Make CTRL-L in command line mode respect 'ignorecase' and 'smartcase'. (Martin
Toft)

Spell menu moved the cursor, causing Copy not to work.  Spell replacement
didn't work in 'compatible' mode.

Various small fixes from Dominique Pelle.

Fix that :mksession may generate "2argu" even though there is no such
argument. (Peter Odding)

Fixes for time in clipboard request.  Also fix ownership.  (David Fries)

Fixed completion of file names with '%' and '*'.

Fixed MSVC makefile use of /Wp64 flag.

Correct use of long instead of off_t for file size. (James Vega)

Add a few #ifdefs to exclude functions that are not used. (Dominique Pelle)

Remove old and unused method to allocate memory for undo.

Fix definition of UINT_PTR for 64 bit systems.

Some versions of Ruby redefine rb_str_new2 to rb_str_new_cstr.

Window title not updated after file dropped.

Fixed crash for ":find" completion, might also happen in other path expansion
usage.

When 'searchhl' causes a hang make CTRL-C disable 'searchhl'.

When resetting both 'title' and 'icon' the title would be set after a shell
command.

Reset 'title' and 'icon' in test47 to avoid the xterm title getting messed up.

Fix for compiler warning about function prototype in pty.c.

Added 'window' to the options window.

Fixed: errors for allocating zero bytes when profiling an empty function.

Remove -arch flag from build flags for Perl. (Bjorn Wickler)

Fix 'autochdir' not showing up in :options window. (Dominique Pelle)

Fix: test 69 didn't work on MS-Windows.  Test 72 beeped too often.

Avoid illegal memory access in spell suggestion. (Dominique Pelle)
Fix: crash in spell checking with a 0x300 character.

Avoid that running tests changes viminfo.

Fix: changing case of a character removed combining characters.
Fixed: CTRL-R in Insert mode doesn't insert composing characters.

Added the WOW64 flag to OLE registration, for 64 bit Windows systems.

Various fixes for coverity warnings.

Fix compile warnings, esp. for 64-bit systems.  (Mike Williams)

Fix: :redir to a dictionary that is changed before ":redir END" causes a
memory access error.

Fix: terminal title not properly restored when there are multi-byte
characters.  (partly by James Vega)

Set 'wrapscan' when checking the .po files. (Mike Williams)

Win32: Put quotes around the gvim.exe path for the "Open with" menu entry.

On MS-Windows sometimes files with number 4913 or higher are left behind.

'suffixesadd' was used for finding tags file.

Removed unused code.

Improved positioning of combining characters in GTK.

Made test 11 pass when there is no gzip program. (John Beckett)

Changed readfile() to ignore byte order marks, unless in binary mode.

On MS-Windows completion of shell commands didn't work.

An unprintable multi-byte character at the start of the screen line caused the
following text to be drawn at the wrong position.

Got ml_get errors when using undo with 'virtualedit'.

Call gui_mch_update() before triggering GuiEnter autocmd. (Ron Aaron)

Unix "make install" installed a few Amiga .info files.

Disallow setting 'ambiwidth' to "double" when 'listchars' or 'fillchars'
contains a character that would become double width.

Set 'wrapscan' when checking the .po files. (Mike Williams)

Fixed: using expression in command line may cause a crash.

Avoid warnings from the clang compiler. (Dominique Pelle)

Fix: Include wchar.h in charset.c for towupper().

Fixed: Using ":read file" in an empty buffer when 'compatible' is set caused
an error.  Was caused by patch 7.2.132.

Make the references to features in the help more consistent. (Sylvain Hitier)

 
 vim:tw=78:ts=8:ft=help:norl:
