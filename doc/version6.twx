*version6.txt*  For Vim version 7.3.  最近更新: 2010年7月


		  VIM 參考手冊    by Bram Moolenaar
				譯者: Willis
				http://vimcdoc.sf.net


歡迎來到 Vim 6.0 版本！新版本增加了很多新特性。本文檔列出所有加入的新項目、已
有特性的改動以及 Vim 5.x 的漏洞修正。
|vi_diff.txt| 提供 Vi 和 Vim 6.0 的區別的一個概述。
|version4.txt| 說明 Vim 3.0 和 Vim 4.0 的區別。
|version5.txt| 說明 Vim 4.0 和 Vim 5.0 的區別。

不 兼 容 的 改 動			|incompatible-6|

可視模式的光標位置			|curpos-visual|
替代命令與 Vi 兼容			|substitute-CR|
引入全局選項值				|new-global-values|
改變 'fileencoding'			|fileencoding-changed|
改變二合字母				|digraphs-changed|
改變文件類型檢測			|filetypedetect-changed|
引入列表外緩衝區			|new-unlisted-buffers|
改變命令行模式的 CTRL-U 		|CTRL-U-changed|
去掉 Ctags				|ctags-gone|
重新調整文檔				|documentation-6|
無模式選擇和剪貼板			|modeless-and-clipboard|
細小的不兼容之處			|incomp-small-6|

新 特 性				|new-6|

折疊					|new-folding|
垂直分割窗口				|new-vertsplit|
diff 模式				|new-diff-mode|
簡易 Vim: 點擊-輸入			|new-evim|
用戶手冊				|new-user-manual|
靈活的縮進方式				|new-indent-flex|
擴展的搜索模式				|new-searchpat|
UTF-8 支持				|new-utf-8|
多語言支持				|new-multi-lang|
插件支持				|new-plugins|
文件類型插件				|new-filetype-plugins|
文件瀏覽器				|new-file-browser|
在網絡上編輯文件			|new-network-files|
命令行編輯的窗口			|new-cmdwin|
調試模式				|new-debug-mode|
虛擬位置的光標				|new-virtedit|
調試器接口				|new-debug-itf|
Vim 間的通信				|new-vim-server|
緩衝區類型選項				|new-buftype|
打印					|new-printing|
移植版本				|ports-6|
擴展的 Quickfix				|quickfix-6|
操作符修飾符				|new-operator-mod|
搜索路徑				|new-search-path|
改進文件寫入				|new-file-writing|
參數列表				|new-argument-list|
恢復視圖				|new-View|
色彩方案				|new-color-schemes|
若干新項目				|new-items-6|

改 進					|improvements-6|

編 譯 時 的 改 變			|compile-changes-6|

漏 洞 修 正				|bug-fixes-6|

6.1 版 本			|version-6.1|
改動					|changed-6.1|
新增					|added-6.1|
修正					|fixed-6.1|

6.2 版 本			|version-6.2|
改動					|changed-6.2|
新增					|added-6.2|
修正					|fixed-6.2|

6.3 版 本			|version-6.3|
改動					|changed-6.3|
新增					|added-6.3|
修正					|fixed-6.3|

6.4 版 本			|version-6.4|
改動					|changed-6.4|
新增					|added-6.4|
修正					|fixed-6.4|

(譯者注: 各版本的修正一節，因內容過於瑣碎，保留原文未翻譯)

==============================================================================
不 兼 容 的 改 動				*incompatible-6*

這些改動和以前的發佈版本不兼容。如果你從 Vim 5.x 升級到 6.0 時遇到問題，檢查此
列表。


可視模式的光標位置				*curpos-visual*
------------------------------

在可視模式裡，如果從同一緩衝區的一個窗口跳到另一個窗口，另一個窗口的光標位置被
調整，以維持相同的可視區域。這可以用來在一個窗口設置可視區域的開始，而在另一個
窗口裡設置可視區域的結束。vim 5.x 裡會使用另一個窗口的光標位置，它可以在任何地
方，從而不是十分有用。


替代命令與 Vi 兼容				*substitute-CR*
--------------------------------

替代字符串 (substitute 命令的 "to" 部分) 現在和 Vi 兼容。以前，CTRL-V 有特殊含
義，可以用來防止 <CR> 插入換行符。這使得在換行符之前無法插入 CTRL-V。現在使用
反斜槓來防止 <CR> 產生換行符。因為通過反斜槓數量減半，仍然可能在行尾插入換行符
(譯者注: 似應為反斜槓)。這和 Vi 類似，但和 6.0 之前的 Vim 版本不兼容。

如果 ":s" 命令不進行任何替代，它不再設置 '[ 和 '] 位置標記。這和 Vi 無關，因為
它沒有這些位置標記。


引入全局選項值					*new-global-values*
-------------------------------

現在，局部於緩衝區或者窗口的選項有了全局值。以前，局部選項從一個緩衝區複製到另
一個。如果編輯另一個文件，可能導致模式行的選項值用在錯誤的文件上。現在進入以前
沒有使用過的緩衝區會使用全局值。另外，如果在一個窗口裡編輯另一個緩衝區，窗口的
局部變量被復位到它們的全局值上。":set" 命令同時設置局部和全局值，這仍然是兼容
的行為。但模式行只會設置局部值，這與後向不兼容。

現在，":let &opt = val" 設置局部和全局值，類似於 ":set"。加入新的命令，以分別
設置全局或局部值:
	:let &opt = val		類似於 ":set"
	:let &g:opt = val	類似於 ":setglobal"
	:let &l:opt = val	類似於 ":setlocal"


改變 'fileencoding'				*fileencoding-changed*
----------------------

在 Vim 5.x 裡，'fileencoding' 用來設置 Vim 裡所有的編碼。這有點奇怪，因為它是
局部於緩衝區的，但它影響所有的緩衝區。不同緩衝區不可能有不一樣，因為它改變了所
有緩衝區的文本的解釋方式。
現在，它被用作緩衝區相關文件的編碼。如果你仍然設置 'fileencoding'，它可能被
'fileencodings' 檢測到的編碼替代，因而是 "基本上無害的"。
舊的 FileEncoding 自動命令現在和新的 EncodingChanged 事件相同。


改變二合字母					*digraphs-changed*
----------------

缺省的二合字母現在和 RFC1345 對應。這和 Vim 5.x 使用的非常不同。|digraphs|


改變文件類型檢測				*filetypedetect-changed*
--------------------------

過去，文件類型檢測使用 "filetype" 自動命令組。這和 FileType 事件名混淆 (大小寫
是忽略的)。現在，該組叫做 "filetypedetect"。舊的名字仍然可以用，但如果使用了
"filetype" 組，":filetype off" 不會刪除裡面的自動命令。
   'runtimepath' 的支持使得 "myfiletypefile" 和 "mysyntaxfile" 機制被廢棄。為
了後向兼容，它們仍然保留。

FileType 事件和 'syntax' 選項的設置之間的聯繫，以前在 "syntax" 自動命令組裡設
置。這和 Syntax 事件名有混淆。該組現在叫 "syntaxset"。

發佈的語法文件不再包含 "syntax clear"。這使得在一個文件包含另一個文件不再需要
什麼技巧。現在，語法的清理在設置 'syntax' 選項時進行 (通過 synload.vim 裡加入
的自動命令)。這使得 'syntax' 的值不對應語法文件時進行語法清理。以前則保留已有
的高亮。


引入列表外緩衝區				*new-unlisted-buffers*
---------------------------

現在緩衝區有不出現在緩衝區列表和實際不在緩衝區列表的區別。":ls"、 ":bnext"、
":blast" 和 Buffers 菜單的命令會跳過不出現在緩衝區列表的緩衝區。
|unlisted-buffer|
'buflisted' 選項可以用來決定緩衝區是否出現在緩衝區列表裡。

以前把緩衝區加到緩衝區列表的一些命令現在會建立列表外緩衝區。這意味著 ":bnext"
和 ":ball" 不會找到這些文件，除非實際開始編輯。比如，":write file" 和 ":read
file" 的輪換文件使用的緩衝區。
   別的命令以前完全刪除緩衝區，而現在只從緩衝區列表裡刪除緩衝區。依賴於緩衝區
不存在的命令可能會失敗。例如，自動命令裡用了 ":bdelete" 命令，該自動命令可能會
依賴於其後發生的事情會失敗 (過去用於自動測試裡)。
|:bwipeout| 可以用來實現 ":bdelete" 的舊含義。

BufDelete 自動命令事件現在當從緩衝區列表裡刪除緩衝區時激活。BufCreate 事件則在
緩衝區列表裡加入了新建立或者已有的緩衝區時激活。BufAdd 是 BufCreate 的新名字。
新的 BufNew 事件用於任何緩衝區的建立，而 BufWipeout 用於真正地刪除緩衝區。

如果進行插入模式的補全，只有緩衝區列表裡的緩衝區被掃瞄。在 'complete' 裡加入
'U' 標誌位可以從列表外緩衝區中尋找補全。

列表外緩衝區不會在 viminfo 文件裡保存。


改變命令行模式的 CTRL-U				*CTRL-U-changed*
-----------------------------------

編輯命令行時，CTRL-U 過去清除整行。多數外殼裡，它只清除光標之前的字符。現在使
其行為類似於此。(Steve Wall)

你可以用 CTRL-E CTRL-U 得到舊的行為: >
	:cnoremap <C-U> <C-E><C-U>


去掉 Ctags					*ctags-gone*
----------

Ctags 不再是 Vim 發佈的一部分。現在它自己獨立門戶，值得自己單獨進行發佈。
Ctags 可以在這裡找到: http://ctags.sf.net/。


重新調整文檔					*documentation-6*
-------------------------

文檔現在被重新調整，不一定能在 Vim 5.x 相同的位置裡找到每個項目。
- 加入了用戶手冊，有些項目被移到了參考手冊。
- 快速參考指南現在放到了單獨文件裡 (以便打印)。

文檔裡的示例以前用第一列的 ">" 標出。它增加了複製/粘貼這些示例的困難。現在示
例以單個 ">" 開始，而以第一列出現的 "<" 或非空白結束。這使得沒有高亮的時候看
起來好一些。

不再用 'helpfile' 找到幫助標籤文件。這使得用戶可以加入自己的幫助文件 (比如，插
件的文檔)。


無模式選擇和剪貼板				*modeless-and-clipboard*
--------------------------------

無模式的選擇用來在無法使用可視模式時，例如在編輯命令行時或者在 more 提示時。選
擇文本。
Vim 5.x 裡，總是使用無模式的選擇。MS-Windows 上，這導致剪貼板被覆蓋，而且沒有
辦法避免。現在，無模式的選擇由 'guioptions' 裡的 'a' 和 'A' 標誌位以及
'clipboard' 裡的 "autoselect" 和 "autoselectml" 控制。缺省，在 MS-Windows 上沒
有自動複製。用 |c_CTRL-Y| 命令手動複製選擇區。

要得到舊的行為，可以這麼做: >

	:set clipboard^=autoselectml guioptions+=A


細小的不兼容之處				*incomp-small-6*
-----------------------

為了更好的安全性，模式行上不再能設置 'backupdir'、'cdpath'、'directory'、
'equalprg'、'errorfile'、'formatprg'、 'grepprg'、'helpfile'、'makeef'、
'makeprg'、'keywordprg'、'cscopeprg'、 'viminfo' 和 'runtimepath'。

'breakat' 的缺省刪除了 '_':  關鍵字裡經常用到。

'mousehide' 的缺省是打開的，因為這適用於多數人。

Amiga 二進製程序現在總是用 "big" 特性編譯。"big" 二進制歸檔不再存在。

'statusline' 裡的 "[RO]"、"[+]"、"[help]"、"[Preview]" 和 "[filetype]" 項目不
再有引導空格。

非 Unix 系統: Vim 參數里擴展通配符時，不使用 'suffixes'。現在它的工作方式就像
外殼擴展了這些參數一樣。

'paste' 置位時，'lisp'、'smartindent' 和 'cindent' 選項不關閉。'paste' 置位
時，自動縮進被關閉，但用 "=" 的手動縮進仍然可以工作。

用 "=" 排版時，使用 'cindent' 或 'indentexpr' 縮進，如果沒有縮進的變動，不作為
改變處理 (不置位 'modified'，而且沒有什麼可撤銷的)。

如果設置了 'fileencoding' 或 'fileformat'，報告 'modified' 為已修改。這樣它忠
實地反映了放棄緩衝區是否會丟失改變的可能性。

"Save As" 菜單項目現在編輯要保存的文件。多數人期望它就是如此。

目錄的緩衝區不再加到 Buffers 菜單裡。

<Return> 被換名為 <Enter>，因為這是多數鍵盤的稱呼方式。這樣，現在我們說
hit-enter 提示，而不是 hit-return 提示。
可以就像 <CR> 或 <Return> 那樣映射 <Enter>。

如果沒有置位 'compatible'，'viminfo' 選項的缺省現在是 '20,"50,h。多數用戶希望
使用該功能，包括初學者，但這需要設置該選項，這並不容易。

用了 ":colder" 以後，新的錯誤列表被覆蓋。可用於使用 ":grep" 進行樹狀方式瀏覽。
必須使用 ":cnewer 99" 才能得到原來的行為。

'errorformat' 的模式有時會忽略大小寫 (MS-Windows)，有時又不會 (Unix)。現在，總
是忽略大小寫。在模式裡加上 "\C" 以匹配大小寫。

現在，16 位 MS-DOS 版本編譯時不加入 +listcmds 特性 (操作緩衝區列表的命令)。並
不經常需要它們，而這使需要的可執行文件小一些。

現在，'sessionoptions' 缺省包括 "curdir"。這意味著恢復會話會使得當前目錄也被恢
復，而不是轉到會話文件所在的目錄上。

過去，會話刪除所有的緩衝區，刪除所有的位置標記。現在保持了緩衝區列表，不應該影
響已有的緩衝區的繼續存在。
如果參數列表為空，":argdel *" 過去產生錯誤信息。

不再把標籤跳轉的搜索模式放到歷史裡。

不可顯示字符的高亮使用 "SpecialKey" 高亮，而不再是 "NonText"。這裡的思路是，不
可顯示字符或者任何和文件裡的字符的顯示不同的文本使用 "SpecialKey"，而
"NonText" 用於文件裡實際不存在的文本。

Motif 的菜單和滾動條現在使用系統的缺省顏色。過去是灰色的。你仍然可以用
":highlight" 命令和資源設置顏色。

"gq" 的文本排版在非空的空白行上斷開段落。過去該行被刪除，看來那種方法不怎麼有
用。

如果參數在命令未完成時結束，":normal" 不再掛起。
過去 Vim 會等到輸入更多的字符，但不刷新屏幕。現在，它假設輸入了一個 <Esc>。

工具欄的位圖不再從 "$VIM/bitmaps" 裡尋找，而是從 'runtimepath' 的 "bitmaps" 目
錄下尋找。

現在，hit-enter 提示使用命令行模式的菜單，而不是普通模式的菜單。通常，這樣效果
更好，而且允許使用 "Copy" 菜單，以產生 CTRL-Y 萊複製無模式選擇區。

字體選擇從 Windows 移到了 Edit 菜單，包括其它的設置。

缺省的 'isfname' 包含了更多字符，使得 "gf" 效果更好。

文檔的許可證改為 Open Publication License。看起來很公平，因為它包含了 "the Vim
book" 的部分內容，而後者也在 OPL 下發行。不利之處是，我們不能再強制銷售手冊的
人為烏干達作貢獻了。

"ayy 之後，不要讓 ""yy  或  :let @" = val 覆蓋 "a 寄存器。使用無名寄存器代替。

MSDOS: 模式 "*.*" 過去也匹配沒有句號的文件名。這和其它版本不一致。

插入模式裡，CTRL-O CTRL-\ CTRL-N {cmd} 留在普通模式。過去它會回到插入模式。這
使得 CTRL-\ CTRL-N 的含義不清，因為它應該把我們帶到普通模式 (尤其是在 ":amenu"
裡)。

允許操作符後面使用 ":" 命令。可以用來實現新的移動命令。它不再中止等待的操作
符。

Amiga 上可以使用 "-d {device}" 參數。如果編譯時加入 diff 特性，就不行了。可用
"-dev {device}" 代替。|-dev|

插入模式下的 <S-Insert> 缺省映射按本義插入文本，這樣避免了 BS 這樣的特殊字符產
生副作用。

":confirm" 過去適用於一行的其餘部分。現在只適用於其後的命令。因而，
":confirm if x | edit | endif" 就不行了。
要用 ":if x | confirm edit | endif"。這才是原來的想法，過去的工作方式不同是個
漏洞。

==============================================================================
新 特 性						*new-6*

折疊							*new-folding*
-------

Vim 現在可以顯示文本折疊的緩衝區。能用於快速瀏覽文件結構。也可以抽出、刪除和放
置折疊的文本，比如把函數移動到另一個位置。

有一系列相關的新的命令和選項。見 |folding|。


垂直分割窗口						*new-vertsplit*
------------------------

窗口也可以垂直分割。這使得窗口可以肩並肩的顯示。它很好的一個使用方式是比較兩個
相似的文件 (見 |new-diff-mode|)。'scrollbind' 選項可以用來同步滾動。

垂直分割可以用下面的命令建立:
	:vsplit	  或  CTRL-W v  或 CTRL-W CTRL-V	|:vsplit|
	:vnew						|:vnew|
	:vertical {cmd}					|:vertical|
最後一個是修飾符，它對任何分割窗口的命令有意義。比如: >
	:vertical stag main
會垂直分割窗口，然後在新窗口裡跳轉到標籤 "main"。

窗口到窗口的水平切換可以用 |CTRL-W_h| 和 |CTRL-W_l| 命令完成。|CTRL-W_k| 和
|CTRL-W_j| 命令被改為跳轉到光標位置之上和之下的窗口。

垂直和水平分割可以用你願意的任何方式組合。如果使用鼠標，改變窗口大小很容易，只
要把指針定位在狀態行上或者垂直分割線上然後拖動就可以了。GUI 上，特殊的鼠標指針
形狀指示你在哪裡可以拖動狀態行或分割線。

要改變垂直分割的窗口的大小，用 |CTRL-W_<| 和 |CTRL-W_>| 命令。
要使得窗口使用最大寬度，用 CTRL-W | 命令 |CTRL-W_bar|。

要強制新窗口使用 Vim 窗口的全部寬度或高度，可以使用這兩個修飾符:
	:topleft {cmd}		新窗口出現在頂部並使用全部寬度，或在左側並使用
				全部高度。
	:botright {cmd}		新窗口出現在底部並使用全部寬度，或在右側並使用
				全部高度。
這可以和 ":vertical" 一起使用，來強制垂直分割: >
	:vert bot dsplit DEBUG
會在最右側打開窗口，佔據 Vim 窗口的全部高度，光標在第一個 "DEBUG" 的定義上。
如果當前窗口的寬度不到 80 個字符，幫助窗口在上方打開，就像使用了 ":topleft" 一
樣。

若干選項可以用來設置垂直分割窗口的屬性。這和已經有的水平的等價命令相類似:
	水平		垂直 ~
	'splitbelow'	'splitright'
	'winheight'	'winwidth'
	'winminheight'	'winminwidth'
可以設置 'winminwidth' 為零，使得不用的窗口暫時幾乎不佔據任何空間，而不用關閉
它們。

新的 'eadirection' 選項指示哪裡可以應用 'equalalways':
	:set eadirection=both		兩個方向
	:set eadirection=ver		使窗口高度相同
	:set eadirection=hor		使窗口寬度相同
可以用來避免在你需要保持窗口大小的時候改變之。

因為垂直分割可以使窗口變得很窄，文本行經常可能放不下。加入了 'sidescrolloff'
選項，使得光標左右可以保留一些上下文。'listchars' 選項被擴展，加入了
"precedes" 項目，它在文本左側離開屏幕時顯示記號，比如說，"<"。(Utz-Uwe Haus)

"-O" 命令行參數: 類似於 "-o"，但垂直分割窗口。(Scott Urban)

加入命令，使得當前窗口移到最頂部 (CTRL-W K)，底部 (CTRL-W J)，左側 (CTRL-W H)
和右側 (CTRL-W L)。在新的位置上，窗口使用屏幕的完整的寬度/高度。

如果狀態行上沒有足夠的空間同時顯示文件名和標尺，標尺使用一半的寬度。用於狹窄的
窗口。


diff 模式						*new-diff-mode*
---------

在 diff 模式裡，Vim 顯示兩個、三個或四個文件的差異。折疊用來隱藏文件的相同部
分。高亮用來顯示刪除和改變的行。見 |diff-mode|。

啟動 diff 模式的簡單方法是用 "vimdiff file1 file2" 啟動 Vim。
加入了 vimdiff 手冊頁面。

在運行中的 Vim 裡，|:diffsplit| 命令用當前文件和另一個文件開始 diff 模式。
|:diffpatch| 命令使用當前文件和補丁文件開始 diff 模式。|:diffthis| 命令開始當
前窗口的 diff 模式。

可以用 |:diffget| 和 |:diffput| 命令消除不同之處。

- 'diff' 選項打開窗口的 diff 模式。
- |:diffupdate| 命令刷新比較結果。
- 'diffopt' 選項改變差異文的顯示方法。
- 'diffexpr' 選項可以設置如何得到比較結果。
- 'patchexpr' 選項可以設置如何把補丁應用到文件上。
- 加入 "diff" 折疊方法。如果打開窗口進入 diff 模式，設置 'foldlevel' 為零並打
  開 'foldenable' 可以關閉折疊。
- 加入 DiffAdd、DiffChange、DiffDelete 和 DiffText 高亮組以指定差異文的高亮方
  式。缺省設置挺難看的...
- Unix:  "make install" 裡使 vimdiff 成為一個符號鏈接。
- 從發佈裡刪除現在廢棄的 "vimdiff.vim" 腳本。
- 加入 "[c" 和 "]c" 命令，在 diff 模式裡移動到下一個/前一個改變。


簡易 Vim: 點擊-輸入					*new-evim*
------------------------

eVim 代表 "Easy Vim" (簡易 Vim)。這是一個單獨的程序，但也可用 "vim -y" 啟動。

Vim 這樣啟動時，置位 'insertmode'，以打開點擊-輸入的編輯方式。使用
$VIMRUNTIME/evim.vim 腳本加入一些映射和設置一些選項，使得多數行為類似於
Notepad。這是為那些不能忍受兩種模式的人專門設計的。

eView 和它一樣，但使用只讀模式。

GUI 上，CTRL-C 現在只在忙於做事情的時候中斷，等待輸入的時候不算。可以使用
CTRL-C 來複製文本到剪貼板。


用戶手冊						*new-user-manual*
-----------

加入了用戶手冊。它的組織圍繞著編輯任務進行。從頭到底讀起來，就像一本書。它方便
初學者開始學習 Vim，也幫助所有人學習使用最有用的 Vim 特性。它比閱讀參考手冊容
易得多，但沒有提供其中一些細節。見 |user-manual|。

用戶手冊包含了 Steve Oualline 的 "the Vim book" 的部分內容 |frombook|。
它在 OPL 下發行 |manual-copyright|。

如果沒有打開語法高亮，幫助文件裡標注示例 ('>' 和 '<') 和頭部行 ('~') 的字符被
空格代替。

關閉幫助窗口時，如果窗口佈局從那時起沒有改變的話，窗口佈局恢復為打開幫助之前的
狀況。
打開幫助窗口時，如果當前窗口的寬度小於 80 個字符並且不是屏幕的全部寬度，把它放
在 Vim 窗口的頂部。


靈活的縮進方式						*new-indent-flex*
------------------

自動縮進現在可以用於任何語言。它用 Vim 腳本實現，使得縮進的計算非常靈活。

":filetype indent on" 命令允許使用提供的縮進腳本。用戶手冊有解釋: |30.3|。

計算 'indentexpr' 選項可以得到行的縮進。'indentkeys' 選項指示什麼時候重新啟動
縮進。通常，這些選項在縮進腳本裡設置。就像語法文件一樣，縮進腳本也會由很多人提
供和維護。


擴展的搜索模式						*new-searchpat*
------------------------

增加了模式匹配多行的可能性。 (部分由 Loic Grenie 提供)
搜索模式裡增加的用於多行匹配的新項目:
\n		匹配行尾，在 [] 裡也是
\_[]		匹配範圍裡的字符還有行尾
\_x		匹配字符類還有行尾
\_.		匹配任何字符還有行尾
\_^		匹配行首，可以用在正規表達式的任何位置
\_$		匹配行尾，可以用在正規表達式的任何位置

若干其它搜索模式的新項目:
\c		忽略整個模式的大小寫
\C		匹配整個模式的大小寫
\m		為後面打開 magic
\M		為後面關閉 magic
\v		使得後面的字符 "非常 magic"
\V		使得後面的字符 "非常不 magic"

\@!		不匹配前導的匹配原。
		例如: "foo\(bar\)\@!" 匹配 "foo " 但不是 "foobar"。
\@=		匹配匹配原，產生零寬度的匹配
		例如: "foo\(bar\)\@=" 匹配 "foobar" 裡的 "foo"。
\@<!		光標之前不匹配前導的匹配原
\@<=		光標之前匹配前導的匹配原
\@>		作為子表達式匹配前導的匹配原 (不能回溯)

\&		只有在前面和後面的分支都匹配的時候才匹配

\%[]		可選的匹配匹配原的列表；"end\%[if]" 匹配 "end"、"endi" 和
		"endif"
\%(\)		類似於 \(\)，但不建立反向引用；可以由任何數量，突破了
		\( \) 組對只能有九個的限制
\%^		匹配文件首 (Chase Tingley)
\%$		匹配文件尾 (Chase Tingley)
\%#		匹配光標位置。(Chase Tingley)
\?		類似於 "\="，但不能用於 "?" 命令。

\%23l		在第 23 行匹配
\%<23l		在第 23 行前匹配
\%>23l		在第 23 行後匹配
\%23c、\%<23c、\%>23c   在/不到/超過第 23 列處匹配
\%23v、\%<23v、\%>23v	在/不到/超過虛擬第 23 列處匹配


用於語法項目:
\z(...\)	設置外部引用匹配 (在區域項目的開始模式裡)
\z1 - \z9	使用外部引用匹配 (在區域項目的跳過或結束模式裡)
	(Scott Bigham)

\zs		使用該位置作為匹配的開始
\ze		使用該位置作為匹配的結束

取消了匹配只能有不超過 32767 次的 *，\+ 等等的限制。

增加了匹配多字節字符的支持。(部分有 Muraoka Taro 提供)
使得 "\<" 和 "\>" 支持 UTF-8。(Muraoka Taro)


UTF-8 支持						*new-utf-8*
-------------

Vim 現在可以編輯 UTF-8 編碼的文件。可以使用至多 31 位的字符，但只能顯示 16 位
字符。支持不超過兩個的組合用字符，它們疊加在前導字符之上。還支持雙寬字符。見
|UTF-8|。

也支持 UCS-2、UCS-4 和 UTF-16 編碼，它們在內部轉換為 UTF-8。還提供在 Latin1
環境下編輯 Unicode 文件的支持。其它的編碼使用 iconv() 轉換，或者使用
'charconvert' 指定的外部轉換器。

有許多多字節支持的新項目:
- 加入 'encoding' 選項: 指定 Vim 內使用的字符編碼。可以是任何 8 位編碼，一些雙
  字節編碼或者是 Unicode。它從環境中初始化，如果找到能支持的值的話。
- 加入 'fileencoding' 和 'fileencodings': 指定文件的字符編碼，類似於
  'fileformat' 和 'fileformats'。
  如果 'encoding' 為 "utf-8" 而 'fileencodings' 為 "utf-8,latin1"，那麼如果文
  件不是合法的 UTF-8，它被自動切換為 latin1。
- 加入 'bomb' 選項以檢測文件開頭的 BOM。可以在 'fileencodings' 裡指定
  "ucs-bom" 以自動判斷文件是否以 BOM 開頭，從而檢測出 Unicode 文件。在
  MS-Windows (NT 和 2000) 裡尤其有用，因為它使用帶 BOM 的 ucs-2le 文件
  (比如，註冊表的導出文件)。
- 加入 'termencoding' 選項: 指定終端使用的編碼。可用於在非 Unicode 的 locale
  裡把 Vim 置於 utf-8 模式: >
    :let &termencoding = &encoding
    :set encoding=utf-8
- 如果 'viminfo' 包含 'c' 標誌位，viminfo 文件從寫入時的 'encoding' 轉換為當前
  的 'encoding'。
- 加入 ":scriptencoding" 命令: 轉換要執行的腳本的文本行到 'encoding' 編碼。可
  用於菜單文件。
- 加入 'guifontwide' 已指定雙寬字符的字體。
- 加入韓語的字符類檢測支持。同時修正了 search.c 的 cls()。(Chong-Dae Park)
- Win32: 無需 IME 輸入多字節字符。(Alexander Smishlajev)
- Win32 使用 Mingw: 編譯時加入 iconv 庫。(Ron Aaron)
- Win32 使用 MSVC: 動態載入 iconv.dll 庫。(Muraoka Taro)
- 可以用 Borland 5.5 編譯多字節版本和 iconv 支持。(Yasuhiro Matsumoto)
- 加入 'delcombine' 選項: 單獨刪除組合用字符。(Ron Aaron)
-  "xim" 不需要 "xfontset" 特性。現在，它們是兩個獨立的特性。
- XIM: 輸入語言字符時打開 XIM (插入模式、搜索模式、"f" 或 "r" 命令)。輸入普通
  模式命令時關閉 XIM。
- XIM 激活時，'showmode' 消息顯示 "XIM"。(Nam SungHyun)
- 支持 XIM 的 "CursorIM"。(Nam SungHyun)
- 'formatoptions' 加入 'm' 標誌位: 迴繞單詞時，允許在每個多字節上分割，而不單
  是空格上。
- 使 ":syntax keyword" 能用於多字節字符。
- 加入 Unicode 大寫/小寫反轉和比較的支持。(基於 Raphael Finkel 的補丁)
  有第三種寫法 ("title case"，詞首字母大寫) 的多字節字符上用 "~" 可以在三種寫
  法間切換。 (Raphael Finkel)

允許為多字節字符定義二合字母。
加入 Unicode 的 RFC1345 二合字母。
多數接受字符參數的普通模式命令，比如 "r"、"t" 和 "f" 現在可以接受二合字母。
'cpoptions' 的 'D' 標誌位關閉這一功能，以和 Vi 兼容。

加入語言映射和 'keymap' 以便輸入多字節字符:
- 加入 ":lmap" 命令和相關設置: 定義輸入該文本語言的字符使用的映射，也適用於
  "r"、"t" 等。插入和命令行模式下，CTRL-^ 切換映射的開關。
  如果沒有語言映射的話。CTRL-^ 也切換輸入方法 (Input Method) 的使用。可以在輸
  入一半的時候切換出 IM。
- ":map" 的 "<char-123>" 參數可以指定字符的十進制、八進制和十六進制的值。
- 實現了 'keymap' 選項: 載入鍵盤映射表文件。用 ":lnoremap" 來定義該鍵盤映射表
  的映射。新的 ":loadkeymap" 命令可以在鍵盤映射表文件裡使用。
- 加入 'statusline' 的 'k' 標誌位: 使用鍵盤映射表時，"b:keymap_name" 或者說
  'keymap' 的值。如果沒有載入鍵盤映射表而激活了 ":lmap" 的話，"<lang>"。在缺省
  的狀態行裡也顯示此文本。
- 加入 'iminsert' 和 'imsearch' 選項: 用選項指定使用的是 langmap 映射和輸入方
  法。(Muraoka Taro)
  加入 'imcmdline' 選項: 如果置位，開始編輯命令行時總是打開輸入方法。可用於使
  用死鍵 (dead key) 輸入帶重音的字符的 XIM。
  加入 'imactivatekey' 選項以更好的控制 XIM。(Muraoka Taro)
- 輸入還沒有結束的映射時，在插入模式和命令行模式裡，顯示光標下的最後一個字符。
  對死鍵字符看起來不錯。
- 使得 'langmap' 選項能識別多字節字符。不過映射只能用於 8-位字符。有助於使用
  UTF-8。
- ":lmap" 映射激活時，使用不同的光標。可以在 'guicursor' 的每個項目裡指定兩種
  高亮組 (用和不用語言映射)。缺省 "lCursor" 和 "Cursor" 是一樣的，用戶必須自己
  設定他喜歡的顏色。
  韓語輸入頁使用光標顏色。(Sung-Hyun Nam)
- 如果語言映射打開，'showmode' 裡顯示 "(lang)"。
- UTF-8: "r" 可用包含合成用字符的 ":lmap"。也適用於 "f，現在可以尋找包含合成用
  字符的字符。

其它多字節字符的新增特點:
- euc-jp 支持雙字節單寬度字符: 0x8E 開始的字符。增加 ScreenLines2[] 來保存第二
  個字節。


多語言支持						*new-multi-lang*
----------------------

Vim 使用的消息可以翻譯。已經有幾個翻譯版本。這裡，使用了 gettext 機制。它可以
加入翻譯版本而無需重新編譯 Vim。|multi-lang| (部分由 Marcin Dalecki 提供)

翻譯文件在 src/po 目錄裡。src/po/README.txt 文件解釋進行翻譯的一些事項。

也可以用翻譯的菜單。用新的 |:menutranslate| 命令。翻譯可以在運行時目錄 "lang"
裡找到。用戶因而可以增加翻譯。

加入 |:language| 命令來設置消息、時間和字符類型的語言 (locale)。可以用來在 Vim
裡切換語言，而無需離開 Vim 去更改 locale。

可以使用不同語言的 vimtutor。(Eduardo Fernandez) 現在包含了西班牙語 (Eduardo
Fernandez)、意大利語 (Antonio Colombo)、日語 (Yasuhiro Matsumoto) 和法語
(Adrien Beau) 的翻譯。
加入 "vimtutor.bat": MS-Windows 上，在教學文件上啟動 Vim 的腳本。(Dan Sharp)

- 加入 v:lang 變量已得到當前的語言設置。(Marcin Dalecki)  還有 v:lc_time 和
  v:ctype。
- 可以翻譯菜單使用的對話框。使用全局的 "menutrans_" 變量。":menutrans clear"
  刪除它們。
- 刪除了 "有問題的 locale" (Marcin Dalecki)。
- 圖標裡不使用色彩名，使用 RGB 值。名字可能被翻譯。
- Win32: 加入 global IME 支持 (Muraoka)
- Win32: 加入動態載入 IME 的支持。
- ":messages" 顯示關於誰維護消息或翻譯的信息。可用於找到哪裡可以給出錯誤翻譯的
  意見的相關信息。
- configure 的 --disable-nls 參數: 關閉 gettext() 的使用。(Sung-Hyun Nam)
- 加入使用 MingW 編譯器的 Win32 版本的 NLS 支持。(Eduardo Fernandez)
- 如果可用，調用 bind_textdomain_codeset() 來使得 gettext() 把消息翻譯成
  'encoding'。這需要 GNU gettext 0.10.36 或其後的版本。
- 加入 Win32 的 gettext 支持。這意味著消息會在設置了 locale 和找到 libintl.dll
  的前提下被翻譯。(Muraoka Taro)
  也可以用於 MingW 編譯器的版本。(Eduardo Fernandez)
  檢測語言並設置 $LANG 已得到合適的翻譯過的消息 (如果支持的話)。也用 $LANG 來
  選擇語言，:lang 是不同類型的名字。
- 使得 gvimext.dll 使用翻譯過的消息，如果可能的話。(Yasuhiro Matsumoto)


插件支持					*new-plugins*
--------------

要在啟動 Vim 時非常方便地載入 Vim 腳本，可以用 "plugin" 運行時目錄。所以這裡面
的 "*.vim" 文件被自動載入。Unix 上，缺省使用 "~/.vim/plugin"。 'runtimepath'
選項可以設置在別的目錄下查找插件。|load-plugins| |add-plugin|

加入 |:runtime| 命令以載入一個或多個 'runtimepath' 的文件。

標準插件:
netrw.vim - 在網絡上編輯文件 |new-network-files|
gzip.vim - 編輯壓縮文件
explorer.vim - 瀏覽目錄 |new-file-browser|

加入本地幫助文件的支持。|add-local-help|。
搜索幫助標籤時，使用 'runtimepath' 的 "doc/tags" 的所有文件。
加入 ":helptags" 命令: 為一個幫助目錄生成標籤文件。
每個幫助文件的第一行被自動 (神奇地) 加到 doc/help.txt 的 "本地附加文檔" 一節。

":map" 加入 <unique> 參數: 只有在沒有定義過的時候才加入映射。

設置 'verbose' 以後顯示選項值會給出關於該選項最後在哪裡設置的消息。對發現什麼
腳本設置了選項非常有用。

新的 |:scriptnames| 命令顯示所有執行過的腳本的列表。

GUI: Athena、Motif 和 GTK 版本在 'runtimepath' 的 "bitmaps" 目錄裡尋找工具欄位
圖。可以加入你自己的位圖。


文件類型插件					*new-filetype-plugins*
-----------------

加入一組新的文件，提供特定文件類型的設置。它們是專用於 'filetype' 某個值的選項
和映射。

這些文件在 "$VIMRUNTIME/ftplugin" 裡。'runtimepath' 選項可以使你使用幾組不同的
插件: 你自己的、系統範圍的、Vim 發佈裡包含的，等等。

要使之工作，加入了若干特性:
- 加入 "s:" 變量，局部於腳本。避免和全局變量的命令衝突。可用於腳本和腳本裡定義
  的函數、自動命令和用戶命令。在同一腳本的多次調用間保持它們的值。|s:var|
- 加入局部選項的全局值。該值在打開新緩衝區或者編輯另一個文件的時候使用。模式行
  或文件類型設置不會帶到另一個緩衝區裡去。
  ":set" 同時設置局部和全局值。
  ":setlocal" 只設置局部選項值。
  ":setglobal" 設置和顯示局部選項的全局值。
  ":setlocal name<" 設置局部選項為其全局值。
- 加入一些全局選項的局部於緩衝區的值: 'equalprg'、'makeprg'、'errorformat'、
  'grepprg'、'path'、'dictionary'、'thesaurus'、'tags'、'include' 和
  'define'。可以設置這些全局選項的局部值，而不會使它不兼容。
- 加入局部於緩衝區的映射和縮寫: ":map <buffer>"。
- 映射裡可以用 "<Leader>" 得到 "mapleader" 變量的值。這簡化了使用 "mapleader"
  的映射。"<Leader>" 缺省為 "\"。"<LocalLeader>" 和 "maplocalleader" 相同。它
  用在局部於緩衝區的映射裡。
- 加入腳本 ID <SID>，定義局部於腳本的函數和映射。
- ":noremap" 和 ":noremenu" 加入 <script> 參數: 只重映射局部於腳本的映射。避免
  其它腳本的映射的妨礙，但允許使用腳本裡定義的映射。
- 用戶命令可以局部於緩衝區: ":command -buffer"。

文件類型檢測的自動命令使用新的 ":setfiletype" 命令，以避免設置 'filetype' 兩
次。


文件瀏覽器						*new-file-browser*
------------

編輯目錄時，explorer 插件會列出該目錄的文件。在文件名上按 <Enter> 編輯該文件。
在目錄上按 <Enter> 切換瀏覽器到該目錄裡。

有若干其它的可能，比如在預覽窗口裡打開文件，給文件換名或者刪除文件。


在網絡上編輯文件					*new-network-files*
----------------------------

scp://、rcp://、ftp:// 和 http:// 開始的文件被識別為遠程文件。使用指定的方法，
作出相應的嘗試以取得該文件。http:// 只能讀取，其他的方法也支持寫入。這裡，使用
了標準 "插件" netrw.vim 腳本。|netrw|

使得 "gf" 可用於 URL 上。它不再假設該文件是在本地計算機上的 (多數也不會工作，
因為需要完整路徑)。為此，調整了 test2。

允許在 'path' 裡使用 URL。使得 ":find index.html" 可以工作。

GTK: 允許在 Vim 上放置 (drop) http:// 和 ftp:// URL。netrw 插件會處理文件的下
載。 (MiKael Berthe)


命令行編輯的窗口					*new-cmdwin*
-------------------------------

命令行窗口可以使用普通模式和插入模式的命令來編輯命令行。打開的時候，它包含歷史
記錄。從而可以從以前的命令行上複製部分內容。|cmdwin|

命令行窗口可以從命令行上用 'cedit' 選項指定的鍵打開 (類似於 Nvi)。也可以直接在
普通模式裡用 "q:"、"q/" 和 "q?" 打開。

'cmdwinheight' 指定該窗口的初始高度。

插入模式裡，CTRL-X CTRL-V 補全 Ex 命令行，就像命令行所做的那樣。可以用來編寫
Vim 腳本！

另外，還有 "增強的 Ex 模式"。Vim 以 "exim" 或 "vim -E" 啟動，或者使用 "gQ" 命
令都可以進入該模式。就像重複使用 ":" 命令一樣，提供完整的命令行編輯和補全功
能。(Ulf Carlsson)


調試模式						*new-debug-mode*
--------------

在調試模式裡，腳本和用戶函數的執行可以逐行進行。提供跳過 (step over) 或跳入
(step into) 命令的命令。|debug-mode|

可以設置斷點，使得繼續運行，直到在腳本或用戶函數的特定行上停止。|:breakadd|

調試可以用 ":debug {cmd}" 開始，它調試執行該命令時發生了什麼事。啟動時，可以用
|-D| 參數來調試。


虛擬位置的光標						*new-virtedit*
--------------------------

加入 'virtualedit' 選項: 插入模式、可視模式或任何情況下，可以定位光標到沒有實
際字符存在的位置。(Matthias Kramm)
對可視列塊模式特別有用。它能定位到區域的沒有文本字符的一角。(許多改進由 Chase
Tingley 提供)


調試器接口						*new-debug-itf*
------------------

原先，這是為 Sun Visual Workshop 提供的。(Gordon Prieur)
見 |debugger.txt|、|sign.txt| 和 |workshop.txt|。

加入 ":sign" 命令，定義和放置標號。它們可以顯示為兩個 ASCII 字符或一個圖標。標
號之後的行被高亮顯示。可以用來顯示斷點和當前的 PC 位置。

加入 |:wsverb| 命令來執行調試器命令。

加入氣泡的設置: 'balloondelay' 和 'ballooneval' 選項。

加入 ":menu" 的 "icon=" 參數。可以為某個 ToolBar 項目定義特定的圖標。


Vim 間的通信						*new-vim-server*
--------------------------

加入兩個 Vim 之間的通信機制。可以從一個 Vim 發送命令到另一個 Vim。支持
X-Windows 和 MS-Windows |clientserver|。

用 "--remote" 來用已經運行的 Vim 裡編輯文件。
用 "--remote-wait" 來做相同的事，並等待編輯結束。
用 "--remote-send" 從一個 Vim 發送命令給另一個。
用 "--remote-expr" 來在另一個 Vim 裡計算表達式。
用 "--serverlist" 列出當前可用的 Vim 服務器。(只限於 X)
還有服務器和客戶之間通信的函數。|remote_send()| |remote_expr()|

(X-windows 版本由 Flemming Madsen 實現，MS-Windows 版本由 Paul Moore 提供)

在窗口標題裡加入命令服務器的名字，使得你可以看到哪個服務器名屬於哪個 Vim。

從發佈裡刪除了 OleVim 目錄、SendToVim.exe 和 EditWithVim.exe。現在可以用可以
移植的 "gvim --remote" 和 "gvim --remote-send"。

GTK+: 支持在別的窗口裡運行 Vim。用 --socketid 參數 (Neil Bird)


緩衝區類型選項						*new-buftype*
-------------------

加入了 'buftype' 和 'bufhidden' 選項。它們可以設置不同類型的緩衝區。例如:
- 'buftype' = "quickfix": 錯誤列表緩衝區
- 'buftype' = "nofile" 而 'bufhidden' = "delete": 草稿緩衝區，一旦沒有窗口顯
  示，會盡快刪除。

'bufhidden' 可以用來否決一個緩衝區的 'hidden' 選項。

這些選項與 'buflisted' 和 'swapfile' 的組合提供了使用不同類型的特殊緩衝區的可
能性。見 |special-buffers|。


打印							*new-printing*
--------

包含了第一個 ":hardcopy" 命令的實現，用以打印到紙張上。MS-Windows 上，可以使用
任何安裝的打印機。其他系統上，生成 PostScript 文件，可以用 'printexpr' 選項進
行打印。
(MS-Windows 部分由 Vince Negri、Vipin Aravind 提供，PostScript 由 Vince Negri
和 Mike Williams 提供)

使得 ":hardcopy" 可用於多字節字符。(Muraoka Taro，Yasuhiro Matsumoto)

加入選項，微調打印的工作方式: (Vince Negri)
- 'printoptions' 定義一些設置。
- 'printheader' 指定頁眉格式。'statusline' 加入了 "N" 域，顯示頁號。
- 'printfont' 指定字體名和屬性。
- 'printdevice' 定義 ":hardcopy!" 的缺省打印機。


移植版本						*ports-6*
-----

OS/390 Unix 的移植版本 (Ralf Schandl)
- 很多改動，為了處理 EBCDIC 編碼。
- 改變 Ctrl('x') 為 Ctrl_x 定義。

包含 jsbmouse 支持。(Darren Garth)
Unix 上支持 dec 鼠標。(Steve Wall)

移植到 16 位 MS Windows (Windows 3.1x) (Vince Negri)

移植到 QNX。支持 Photon GUI、鼠標等。(Julian Kinraid)

用 Make_ming.mak 可以進行 Win32 版本的跨平台編譯。(Ron Aaron)
Mingw 的編譯加入 Python 支持。(Ron Aaron)

32 位 Dos: 加入 Windows 剪貼板的支持。(David Kotchan)

Win32: 動態載入 Perl 和 Python。可以編譯 Vim 來使用這些接口，並在運行時尋找這
些 DLL。(Muraoka Taro)

用 Cygwin 編譯 Win32 GUI。同時編譯 vimrun、dosinst 和 uninstall。(Gerfried)

Mac: 使得 Vim 能用 Apple 提供的免費的 MPW 編譯器編譯。CodeWarrior 的更新。
(Axel Kielhorn)

加入一些類型轉換和 ifdef，作為 Vim 在 Win64 上工作的開始 (George Reilly)


擴展的 Quickfix						*quickfix-6*
-----------------

加入 "錯誤窗口"。它包含了所有的當前錯誤列表的錯誤。在一行上按 <Enter> 使得 Vim
跳轉到該行上 (在別的窗口裡)。這使得錯誤列表的導航容易得多。|quickfix-window|。

- |:copen| 打開 quickfix 窗口。
- |:cclose| 關閉 quickfix 窗口。
- |:cwindow| 只在有識別出來的錯誤時，才打開 quickfix 窗口。(Dan Sharp)

- 除了 "warning" 和 "error" 類型以外，Quickfix 也知道 "info"。"%I" 可用來定義
  多行信息消息的開始。(Tony Leneis)
- 'errorformat' 裡的 "%p" 參數可用來得到指針行的列號，其中 "^" 指向該列。
  (Stefan Roemer)
- DOS/Windows 系統上，'errorformat' 的 "%f" 會在文件名裡加入 "c:"，即使使用的
  是 "%f:"。


操作符修飾符						*new-operator-mod*
------------------

操作符和動作命令之間插入 "v"、"V" 或 CTRL-V 強制該操作符以面向字符、面向行和面
向列塊的方式工作。|o_v|


搜索路徑						*new-search-path*
-----------

Vim 可以在目錄樹裡搜索，不只是往下，也可以往上。
可用於 'path'、'cdpath' 和 'tags' 選項。(Ralf Schandl)

也用於 'tags' 選項的 "**"。(Ralf Schandl)

加入 'includeexpr'，用來修改 'include' 選項找到的文件名。
'includeexpr' 也在 "gf" 和 "<cfile>" 裡使用，如果找不到未經修改的文件的話。用
於在 include 或 import 語句之後的名字上執行 "gf"。

加入 'cdpath' 選項: 找到 ":cd" 參數的位置。(Raf)

加入 'suffixesadd' 選項: 用 "gf"、"[I" 等命令搜索文件時給文件名附加的後綴。


改進文件寫入						*new-file-writing*
----------------------

加入 'backupcopy' 選項: 選擇文件要通過複製還是換名來建立備份文件。用於在 Unix
上加快寫入普通文件的速度。其它系統上，也有助於保留文件屬性和編輯 Unix 文件系統
的文件。

加入 'autowriteall' 選項。和 'autowrite' 類似，但用於更多命令。

加入 'backupskip' 選項: 文件名模式的列表，如果匹配，不建立備份。Unix 的缺省值
包含 "/tmp/*"，這使得 "crontab -e" 可以工作。

加入 FreeBSD 和 Win32 上的訪問控制表 (ACL) 的支持。ACL 從原來的文件複製到新文
件裡 (或者備份文件，如果選擇它是複製建立的話)。
AIX、Solaris 和通用的 POSIX 也支持 ACL。(Tomas Ogren)
SGI 亦然。


參數列表						*new-argument-list*
-------------

參數列表的支持也有了擴展。現在，可以操作參數列表以包含你要包含的文件。

參數列表現在可以局部於窗口。用 |:arglocal| 命令建立這樣的參數列表。
|:argglobal| 命令可以用來回到全局的參數列表。

|:argdo| 命令在參數列表的所有文件上執行命令。

用 |:argadd| 可以把文件名加進參數列表。|:argdelete| 可以刪除文件名。

"##" 類似於 "#"，它被參數列表所有名字的連接替換。用於 ":grep foo ##" 這樣的場
合。

|:argedit| 把文件名加入參數列表，並編輯之。類似於 ":argadd" 然後 ":edit"。


恢復視圖						*new-View*
--------------

":mkview" 命令寫入 Vim 腳本，包含單個窗口的設置和映射。執行建立的文件可以恢復
該窗口的視圖。類似於單個窗口的 ":mksession"。
視圖也包含局部參數列表和手動建立的打開或關閉的折疊。

加入 ":loadview" 命令和 'viewdir' 選項: 可以用簡單的命令保存和恢復文件的視圖。
":mkview 1" 保存當前文件的視圖 1，而 ":loadview 1" 又可以載入。另外，可以在同
一文件的兩個視圖間快速切換。還可以保存和恢復手動折疊以及折疊的狀態。

加入 'viewoptions' 以指定 ":mkview" 的工作方式。

現在，":mksession" 也支持垂直分割。它被進一步改進，以恢復每個窗口的視圖。它對
預覽和 quickfix 窗口同樣能正確工作。

'sessionoptions' 也用於 ":mkview"。
'sessionoptions' 加入 "curdir" 和 "sesdir"。它們可以選擇如何恢復當前目錄。

會話文件現在也包含了參數列表。


色彩方案						*new-color-schemes*
-------------

支持載入色彩方案。加入了 ":colorscheme" 命令。
自動為可用的方案加入菜單項。
現在，應該會在 'background' 或 't_Co' 改變時，正確地自動復位色彩。
":highlight clear" 可以再次設置缺省的顏色。
":syntax reset" 設置語法高亮顏色為其缺省值。
":set bg&" 猜測其值。這使得色彩方案可以切換回缺省的顏色。
如果打開了語法高亮時已經定義了色彩方案，該色彩方案被重新載入以 (再次) 定義顏
色。


若干新項目						*new-items-6*
-----------------

普通模式命令: ~

"gi"		跳轉到 ^ 位置標記並開始插入模式。即使位置標記在行尾之後也可
		以。|gi|

"g'm" 和 "g`m"
		跳轉到位置標記，而不修改跳轉表。現在，你可以用 g`" 來跳回最近
		所知的文件位置，而不會有副作用。對映射也有用。

['、[`、]' 和 ]`
		移動光標到下一個/前一個小寫的位置標記。

g_		轉到行內的最後的一個非空白。(Steve Wall)


選項: ~

'autoread'	如果檢測到文件在 Vim 之外改變而緩衝區沒有改動的話，自動再次讀
		入緩衝區。它有全局和局部值。用 ":setlocal autoread<" 來回到直
		接使用 'autoread' 的全局值的設定。

'debug'		如果設為 "msg"，會顯示平時忽略的錯誤消息。用於調試
		'indentexpr' 和 'foldexpr'。

'lispwords'	Lisp 縮進用的單詞列表。以前是直接在源代碼裡編碼的。缺省加入了
		一些 Lisp 名字。

'fold...'	折疊的許多新選項。

'modifiable'	如果關閉，不能修改緩衝區。'statusline' 的 %m 和 %M 項目顯示
		'-'。

'previewwindow' 在預覽窗口裡置位。在會話文件裡使用，以標記一窗口為預覽窗口。

'printfont'
'printexpr'
'printheader'
'printdevice'
'printoptions'	用於 ":hardcopy"。

'buflisted'	使得緩衝區出現或不出現在緩衝區列表裡。

模式行裡使用 "vim{version}:" 可以使它只在版本 >= {version} 時才執行。還有
"vim>{version}"、"vim<{version}" 和 "vim={version}"。


Ex 命令: ~

:sav[eas][!] {file}
		類似於 ":w file" 和 ":e #"，但不會再次載入，也避免了其它的副作
		用。|:saveas|

:silent[!] {cmd}
		安靜的執行命令。也不使用消息之後可能的延遲，也不使用
		'showmatch'。
		RISCOS: 刪除了 "!~cmd" 不產生輸出也不等待之後的 <Enter> 的效
		果。現在可以用 ":silent !cmd"。
:menu <silent>  加入不回顯 Ex 命令的菜單。
:map <silent>   加入不回顯 Ex 命令的映射。

:checktime	檢查緩衝區的改變。

:verbose {cmd}  為單個命令設置 'verbose'。

:echomsg {expr}
:echoerr {expr} 類似於 ":echo"，但在歷史裡保存消息。(Mark Waggoner)

:grepadd	類似於 ":grep"，但加到當前的錯誤列表，而不是定義新的列表。
		|:grepadd|

:finish		結束文件的執行。可以用來跳過 Vim 腳本的其餘部分。|:finish|

:leftabove
:aboveleft	在當前窗口的左側/上方分割窗口。

:rightbelow
:belowright	在當前窗口的右側/下方分割窗口。

:first、:bfirst、:ptfirst 等
		":rewind" 的別名。和 ":last" 相較，更加合乎邏輯。

:enew		編輯新的無名緩衝區。這有必要，因為 ":edit" 重新編輯同一文件。
		(Wall)

:quitall	等同於 ":qall"。

:match		定義局部於窗口的匹配高亮。可以為當前窗口高亮項目，而不會影響語
		法高亮。

:menu enable
:menu disable	打開/關閉菜單項的命令，而不用刪除它們。(Monish Shah)

:windo		在所有窗口裡執行命令。
:bufdo		在所有緩衝區裡執行命令。

:wincmd		窗口 (CTRL-W) 命令。可用於不能使用普通模式命令的場合 (比如，
		CursorHold 自動命令裡)。|CursorHold-example| 給出一個很好的應
		用實例。

:lcd 和 :lchdir
		設置窗口的本地目錄。(Benjie Chen)

:hide {command}
		以置位的 'hidden' 執行 {command}。

:emenu		在可視模式裡，執行 ":vmenu" 項目。

:popup		彈出彈出式菜單。

:redraw		即使忙於執行腳本或函數時，也刷新屏幕。

:hardcopy	打印到紙張。

:compiler	載入 Vim 腳本，以處理特定編譯器的設定。

:z#		列出編號的行。(Bohdan Vlasyuk)


新的位置標記: ~

'( 和 ')	當前句子的開始或結束。用於 Ex 命令。
'{ 和 '}	當前段落的開始或結束。用於 Ex 命令。
'.		當前緩衝區的最近改變位置。
'^		插入模式停止的位置。

viminfo 文件保存 ^ 和 . 位置標記。可以用來跳轉到最近的插入位置或改變文本上。


新函數: ~
argidx()	參數列表的當前索引。
buflisted()	檢查緩衝區是否存在並置位了 'buflisted'。
cindent()	得到 'cindent' 的縮進。
eventhandler()	如果在事件處理程序而不能使用交互命令的時候返回 1。
executable()	檢查是否程序或批處理腳本可執行。
filewritable()	檢查文件是否可寫。(Ron Aaron)
foldclosed()	檢查是否有關閉折疊。(Johannes Zellner)。
foldcloseend()	發現關閉折疊的結尾。
foldlevel()	發現折疊級別。(Johannes Zellner)
foreground()	把 GUI 窗口移到前台。
getchar()	讓用戶輸入一個字符。可以用來定義接受一個參數的映射。
getcharmod()	得到最近使用的鍵修飾符。
getbufvar()	得到緩衝區裡選項或局部變量的值 (Ron Aaron)
getfsize()	返回文件大小。
getwinvar()	得到窗口裡選項或局部變量的值 (Ron Aaron)
globpath()	發現目錄列表裡匹配的文件
hasmapto()	檢測是否到字符串的映射已經存在。
iconv()		把字符串從一個編碼轉換為另一個編碼。
indent()	得到行的縮進 (Ron Aaron)
inputdialog()	類似於 input()，但在可能的情況下，使用 GUI 對話框。目前支持
		Win32、Motif、Athena 和 GTK。
		Edit/Settings/Text Width 菜單使用 inputdialog()。
		Help/Find.. 和 Toolbar FindHelp 項目也是。
		(Win32 支持由 Thore B. Karlsen 提供)
		(Win16 支持由 Vince Negri 提供)
inputsecret()	要求用戶輸入字符串，但不回顯輸入的鍵。(Charles Campbell)
libcall()	用於 Unix (Neil Bird，Johannes Zellner，Stephen Wall)
libcallnr()	用於 Win32 和 Unix
lispindent()	得到 'lisp' 的縮進。
mode()		返回指示當前模式的字符串。
nextnonblank()	跳過正向的空行。
prevnonblank()	跳過反向的空行。可用於縮進腳本。
resolve()	MS-Windows: 解析快捷方式為它指向的文件。
		Unix: 解析符號鏈接。
search()	搜索模式。
searchpair()	搜索匹配的組對。可用於縮進文件，以找到匹配 endif 的 "if"。
setbufvar()	設置緩衝區的選項或局部變量。(Ron Aaron)
setwinvar()	設置窗口的選項或局部變量。(Ron Aaron)
stridx()	搜索一個字符串在另一個字符串裡的第一次出現。
strridx()	搜索一個字符串在另一個字符串裡的最後一次出現。
tolower()	把字符串轉換為全部小寫。
toupper()	把字符串轉換為全部大寫。
type()		檢查表達式的類型。
wincol()	光標的窗口列
winwidth()	窗口寬度。(Johannes Zellner)
winline()	光標的窗口行


加入了變量和函數命令的花括號擴展。可以用於包含選項值的變量名。也可以用來提供原
始的數組。(Vince Negri)


新的自動命令事件: ~
BufWinEnter	緩衝區在窗口顯示時激活。在使用模式行之後。可用於載入視圖。
BufWinLeave	緩衝區不再出現於窗口時激活。也在退出 Vim 時激活。可用於保存視
		圖。
FileChangedRO	在第一次修改只讀文件之前激活。可用於文件的刷新。(Scott Graham)
TermResponse	在終端應答版本請求時激活。v:termresponse 內部變量保存該值。可
		用於對終端版本進行處理。(Ronald Schild)
FileReadCmd	在讀入文件前激活。
BufReadCmd	在讀入文件到緩衝區前激活。
FileWriteCmd	在寫回文件前激活。
BufWriteCmd	在寫回緩衝區到文件前激活。
FileAppendCmd	在附加到文件前激活。
FuncUndefined	在用戶函數沒有定義時激活。(Ron Aaron)

*Cmd 事件的自動命令進行文件讀寫，以取代普通的文件讀寫。netrw.vim 利用這一點來
編輯遠程系統上的文件。(Charles Campbell)


新的語法文件: ~

bdf		BDF 字體定義 (Nikolai Weibull)
catalog		SGML 目錄 (Johannes Zellner)
debchangelog	Debian Changelog (Wichert Akkerman)
debcontrol	Debian 控制 (Wichert Akkerman)
dot		dot (Markus Mottl)
dsl		DSSSL 語法 (Johannes Zellner)
eterm		Eterm 配置 (Nikolai Weibull)
indent		縮進概要文件 (profile) (Nikolai Weibull)
lftp		LFTP (Nikolai Weibull)
lynx		Lynx 配置 (Doug Kearns)
mush		mush 源代碼 (Bek Oberin)
natural		Natural (Marko Leipert)
pilrc		Pal 資源編譯器 (Brian Schau)
plm		PL/M (Philippe Coulonges)
povini		Povray 配置 (David Necas)
ratpoison	Ratpoison 配置/命令 (Doug Kearns)
readline	readline 配置 (Nikolai Weibull)
screen		Screen RC (Nikolai Weibull)
specman		Specman (Or Freund)
sqlforms	SQL*Forms (Austin Ziegler)
terminfo	terminfo (Nikolai Weibull)
tidy		Tidy 配置 (Doug Kearns)
wget		Wget 配置 (Doug Kearns)


更新了許多語法文件，使得在 Vim 5.7 和 6.0 裡都能工作。

Ruby 接口。(Shugo Maeda)
支持 MS-Windows 上的 Ruby 接口的動態載入。(Muraoka Taro)
Mingw 也支持。(Benoit Cerrina)

Win32: 加入動態載入 TCL 的可能性。(Muraoka Taro)
也適用於 Borland 5.5。(Dan Sharp)

Win32: 編輯快捷方式的文件 (*.lnk 文件) 時，編輯它指向的文件。除非置位了
'binary'，此時編輯快捷方式文件自身。(Yasuhiro Matsumoto)

":command" 命令現在接受 "-bar" 參數。使得用戶命令可以被 "| command" 跟隨。

現在，預覽窗口也被以下命令使用:
- |:pedit| 在預覽窗口編輯指定文件
- |:psearch| 類似於 |:ijump|，在頭文件裡搜索單詞，並在預覽窗口顯示找到的文本。
加入 CTRL-W P 命令: 轉到預覽窗口。

MS-DOS 和 MS-Windows 也讀入系統範圍的 vimrc 文件 $VIM/vimrc。多用於多用戶的 NT
系統。

鼠標在字符上雙擊時，如果該字符有 "%" 匹配，選擇從該字符到對應匹配的文本。類似
於 "v%"。

"-S session.vim" 參數: 啟動時執行腳本。便於 Vim 啟動時載入會話文件。

加入 "--cmd {command}" Vim 參數，在 vimrc 文件載入之前執行命令。(Vince Negri)

加入 "-M" Vim 參數: 復位 'modifiable' 和 'write'，從而禁止對文件修改和寫回。

加入 runtime/delmenu.vim。執行之可以刪除所有菜單並為載入新菜單做好準備。可用於
修改 'langmenu'。

Perl 腳本，用來過濾 Perl 錯誤信息並轉化為 quickfix 可用的格式。(Joerg Ziefle)

加入 runtime/macros/less.vim: 模擬 less 的 Vim 腳本，但提供語法高亮。

MS-Windows 安裝程序: (Jon Merz)
- Win32 程序現在可以在桌面上建立快捷方式，並在開始菜單安裝 Vim。
- 可以刪除舊的 "Edit with Vim" 項目。
- Vim 可執行文件無須移動或者改變 $PATH。在 $PATH 裡建立了一個小的批處理文件。
  減少了要作出的選擇。
- 檢測已經安裝的 Vim 的版本，並提供先卸載它們的選擇。

改進的 MS-Windows 卸載程序。現在，它同時刪除開始菜單的項目，桌面的圖標和建立的
批處理文件。(Jon Merz)
也可以只刪除其中的一部分。同時撤銷 gvim 的 OLE 註冊。

生成 MS-Windows 上自安裝的 Vim 包。用的是 NSIS。(Jon Merz 等人)

加入 ":filetype detect"。嘗試再次檢測文件類型。有助於 (比如說) 加入
"#!/bin/csh" 以後，編寫的新外殼腳本。

加入 ":augroup! name" 命令，刪除自動命令組。客戶-服務器 "--remote-wait" 需要。

viminfo 文件裡加入 Vim 的版本號，有助於調試。

==============================================================================
改 進							*improvements-6*

'cpoptions' 加入 'n' 標誌位: 如果省略，迴繞行的文本不放在 'number' 選項顯示的
行號中間。這樣閱讀迴繞行容易多了。

如果標籤文件有格式錯誤，報告其字節位置以定位錯誤。

"gf" 可用於可視模式: 使用選擇文本作為文件名。(Chase Tingley)

允許有二義性的映射。這樣可以同時映射 "aa" 和 "aaa"，使用最長的匹配。這對
":lmap" 和 'keymap' 特別有用。

加密: 第一次加密時要求加密鍵輸入兩次。否則一旦輸錯，文本就永久丟失了。(Chase
Tingley)

現在窗口標題在最後加上了 "VIM"。文件名在前面，這樣任務欄上能夠看清楚。如果文件
修改過，加 "+"，如果文件只讀，加 "="。如果文件 'modifiable' 關閉，加 "-"。

可視模式裡，在 'showcmd' 的位置提及選擇區域的大小。

加入 "b:changedtick" 變量。每次改變都遞增，包括撤消。用於在緩衝區有改變時採取
行動。

":s" 命令的替代字符串中，用 "\=" 可以替代為表達式的運算結果。該表達式內部可用
submatch() 函數訪問子匹配。

如果執行 ":qall" 且其它窗口裡正在編輯的緩衝區有修改，跳轉到那個窗口，而不是編
輯當前窗口的緩衝區。

文件讀/寫命令加入 "++enc=" 和 "++ff=" 參數，強制使用給定的 'encoding' 或
'fileformat'。同時加入 "v:cmdarg" 變量，用於 FileReadCmd 這些自己讀寫文件的自
動命令。

讀入標準輸入時，先用二進制模式讀入文本，然後再用基於 'fileformat' 和
'fileencoding' 的自動選擇重新讀入。這樣避免了重新開始文件 (例如，如果在靠近文
件末的行以 LF 而不是 CR-LF 結束的話)。
如果從標準輸入讀取文本而緩衝區為空，不標記它為已改變。退出時省得麻煩。

給許多錯誤信息加入 ID，方便尋找消息的幫助。

插入模式:
- 用 "CTRL-G j" 和 "CTRL-G k" 可以在另一行的相同列插入。可用於編輯表格。
- 加入同義詞補全，CTRL-X CTRL-T。(Vince Negri)
- 加入 'thesaurus' 選項，在同義詞補全裡代替 'dictionary'。'complete' 加入
  's' 標誌位。
- 插入模式的 CTRL-X CTRL-L 使用 'complete' 選項。也在其它載入的緩衝區裡掃瞄匹
  配行。
- 插入模式用 CTRL-X 或 CTRL-N 補全時也可用 CTRL-R。(Neil Bird)
- 插入模式補全時，如果補全結束，檢查來自 'cinkeys' 或 'indentkeys' 的單詞匹
  配。

性能:
- 使得顯示更新更有效率。所有改變都可能會使用插入/刪除行，包括撤消/重做。
- 如果插入模式下有預輸入，不刷新顯示。大大加快了 CTRL-R。
- 為 32 位 DOS 版本改進了屏幕的輸出速度。(Vince Negri)
- 鼠標拖動時，往前看鼠標代碼，如果下面還有一個，跳過之前的鼠標鍵。這使得鼠標拖
  動快很多。
- 另一個內存用量的改進: 如果調用 u_save 時只有一行且該行最近已經為相同的撤消保
  存過，不再保存。
- 使用一次附加一個字符的腳本時，過去分配的內存慢慢增加。'undolevels' 為 -1 也
  是如此。因為 "U" 保存的行從來不釋放。現在撤銷塊為空時就釋放內存。
- GUI 和 Dos32: 使用垂直滾動區域，使得垂直分割的窗口滾動更快。不需要重畫整個窗
  口。
- 如果終端代碼不支持滾動 (例如，用於垂直分割的窗口)，從 ScreenLines[] 重畫。應
  該比通過 win_line() 的行更快，使用語法高亮時尤其如此。
- 用單獨的腳本預先生成 Syntax 菜單。使得菜單的載入加快了 70%，也使 gvim 的啟動
  時間減半。
- 執行 ":help tag" 時，不先打開 help.txt，直接跳轉到要幫助的標籤上。更快也避免
  額外的信息。
- Win32: 如果文件名不以 ".lnk" 結尾，不試圖解析快捷方式。那需要不少時間。
- 如果有預輸入的字符，不更新鼠標指針形狀。
- META[] 從字符串改為數組，避免使用 strchr()。
- 加入字符時不清除命令行，避免調用 screen_fill 而不做任何事。

健壯性:
- Unix: 執行正規表達式時檢查堆棧是否溢出。避免很麻煩的溢出。只用於支持能在另一
  個堆棧上運行 signal 函數的系統。
- 不允許 ":source <dirname>"。Unix 上可以讀取目錄，但用它作為 Vim 命令沒有任何
  意義。

安全:
- 從臨時文件讀或寫時，檢查它不是符號鏈接。提供一些針對符號鏈接攻擊的保護。
- 建立備份文件或交換文件時，檢查是否已經存在以避免符號鏈接攻擊。(Colin Phipps)
- 在沙盤 |sandbox| 裡計算表達式選項。如果用模式行設置選項，它不能造成破壞。
- 使用安全的方式生成臨時文件名: 建立一個私人目錄用於臨時文件。可用於 Unix、
  MS-DOS 和 OS/2。
- 'makeef' 可為空，意味著使用內部生成的文件名。舊的缺省值是 "/tmp/file"，造成
  了安全風險。
  在當前目錄寫入 'makeef' 會在只讀目錄失敗，因而導致在所有文件上 ":grep" 會有
  問題。所有系統上的缺省都為空，以便使用臨時文件。
- 標籤文件的命令在沙盤裡執行，以提供更好的安全性。
- 不能在沙盤裡使用 Ruby、Tcl 和 Python 接口。它們可能執行危險的任務。Perl 可
  以，但只限於安全環境。(Donnie Smith)

語法高亮:
- 通過緩存整個文件的狀態棧而不只是顯示的部分優化速度。折疊需要如此。
- 加入 ":syntax sync fromstart": 總是從文件開始處進行分析。
- 為語法項目加入 "display" 參數: 只在顯示結果時使用該項目。使得不用顯示的文本
  的分析加快。
- 用 CTRL-L 時，刪除緩存的狀態以強制再次分析文本。
- 關鍵字表的存儲使用 elfhash 算法。應該會產生更好的分佈並加快關鍵字的查找。
  (Campbell)
- "lc" 引導上下文也可用於跳過和結束模式。(Scott Bigham)
- 語法項目可用 "extend" 參數來撤銷它所在的項目的 "keepend" 參數的效果。它可以
  用來使一些包含的項目擴展一個區域，而另一些不能。
- ":syntax clear" 現在刪除 b:current_syntax 變量。這合乎邏輯，因為此命令之後就
  沒有定義任何語法了。
- 加入 ":syntax enable": 打開語法高亮而不改變顏色。可以在 .vimrc 文件裡指定顏
  色，而不需要 mysyntaxfile。
- 加入 ":syntax reset": 復位色彩為其缺省值。
- 加入 "contains=TOP" 和 "contains=CONTAINED" 參數，可以定義不包含自身的透明項
  目。
- 給語法項目加入 "containedin" 參數。允許加入 contained 項目到已有的項目裡 (例
  如，要高亮註釋裡的一個名字)。

無模式選擇:
- 在命令行窗口裡，為其它窗口使用無模式選擇。這樣可以複製可視文本到命令行窗口。
- 支持終端的命令行的無模式選擇，以前只能用於 GUI。
- 無模式選擇裡雙擊右鍵選擇整個單詞。單擊右鍵不使用雙擊左鍵開始的單詞選擇。使之
  和可視模式。
- 無模式選擇不再隱含自動複製到剪貼板。現在它取決於 'guioptions' 的 'a' 和 'A'
  標誌位或者 'clipboard' 的 "autoselect" 和 "autoselectml"。
- 命令行模式加入 CTRL-Y 命令，複製無模式選擇內容到剪貼板。也可用於 hit-enter
  提示和 more 提示。
  刪除 runtime/mswin.vim 中命令行模式裡 CTRL-Y 和 CTRL-Z 的映射，以便使用新的
  CTRL-Y 方式。

減少了 regmatch() 使用的堆棧空間的用量，可以在更長的文本上處理複雜的模式。

'isfname' 現在包含 '%' 和 '#'。使得 "vim dir\#file" 可用於 MS-DOS。

加入數字鍵盤的特殊鍵 <kEnter>、<k0> - <k9>，如果沒有映射，和 ASCII 等價字符完
全相同。(Ivan Wellesz 和 Vince Negri)
識別更多的一些 xterm 鍵: <C-Right>、<C-Left>、<C-End>、<C-Home>

Vim 將要退出時同時激活 BufUnload 事件。可能腳本需要進行一些處理。

擴展反引號裡的表達式: `={expr}`。任何進行反引號擴展的地方都可用。(Vince Negri)

GUI:
- 'guioptions' 加入 'L' 和 'R' 標誌位: 只有在垂直分割窗口存在時才加入左或右滾
  動條。
- X11: 如果一個顏色不能分配，使用最接近的 colormap 的匹配。否則太多東西會使用
  黑色。(Monish Shah)
  也用於菜單和滾動條，否則它們都變成黑色了。
- Win32 和 X11: 加入 'mouseshape' 選項: 根據當前模式調整鼠標指針形狀。
  (Vince Negri)
- 加入 'linespace' 選項: 行間插入像素行。(Nam)
- 允許按住 CTRL 和 SHIFT 來進入無模式選擇 (不用移動光標)。(Ivan Wellesz)
- Motif: 加入工具欄。(Gordon Prieur)  也加入工具提示。
- Athena: 加入工具欄和工具提示。(David Harrison -- 基於 Gordon Prieur 的工
  作)
- 'toolbar' 選項可用於 Athena 和 Motif。現在可以在線切換文本和圖標。
  (David Harrison)
- 支持 Athena 的菜單分隔行。(David Harrison)
- Athena: 調整下拉菜單裡的箭頭位圖，使之和字體的大小相同。(David Harrison)
- Win32: 'guifont' 加入 "c" 標誌位以指定字符集。(Artem Khodush)
- 如果沒有給出 --enable-xim 參數，使用 X GUI 時自動打開它。需要它來提供死鍵支
  持 (和多字節支持)。
- 文件選擇對話框之後，檢查編輯文件沒有被改變或刪除。Win32 對話框允許刪除和換名
  文件。
- Motif 和 Athena: 加入 "editres" 的支持。(Marcin Dalecki)
- Motif 和 Athena: 加入 "menuFont"，指定菜單的字體或字體集。也可以用 "Menu" 高
  亮組設置。用於 locale 和 'encoding' 不同的場合。(David Harrison)
  如果定義了 FONTSET_ALWAYS，菜單總是使用字體集。避免從字體切換到字體集時出現
  的問題。(David Harrison)
- 工具提示的高亮和字體可以用 "Tooltip" 高亮組指定。(David Harrison)
- more 提示裡可用命令行模式菜單。這基本上都能工作，因為它們以 CTRL-C 啟動。
  "Copy" 菜單可用於複製無模式的選擇。允許不用自動選擇而複製 ":set all" 或
  ":intro" 的輸出。
- 啟動 GUI 時如果標準輸出和標準錯誤沒有連接到終端，在對話框裡顯示錯誤信息。過
  去徹底不顯示。
- 允許設置 'browsedir' 為目錄名，用於文件對話框。(Dan Sharp)
- 可以設置 b:browsefilter 和 g:browsefilter 為文件對話框使用的過濾。Win32 和
  Motif GUI 支持。(Dan Sharp)

X11:
- 支持剪貼板的選擇區作為寄存器 "+。退出或者暫停時，複製選擇區到剪切緩衝區 0。
  這樣可以用 X11 的標準方式複製/粘貼到許多應用程序。(Neil Bird)
- 在任何終端上使用 X 剪貼板，不只是 xterm。
  'clipboard' 加入 "exclude:": 指定模式，匹配的終端名不建立到 X 服務器的連接。
  缺省值目前可用於 FreeBSD 和 Linux 控制台。
- 如果 'verbose' 非零，加入一些消息顯示連接到 X 服務器時發生了什麼。如果要研究
  為什麼啟動很慢，應該有幫助。

GTK GUI: (部分由 Marcin Dalecki 提供)
- 一些字體的字符可能比 ascent + descent 還要高，例如
  "-misc-fixed-*-*-*-*-18-*-*-*-*-*-iso10646-1"。給字符單元高度加一。
- 實現 'winaltkeys' 的 "no" 值: 如果建立菜單後改變了 'wak'，不使用 Alt 鍵作為
  菜單快捷鍵。
- GUI 啟動後可以設置 'wak'。
- 回收文本 GC 以減少通信。
- 調整窗口管理器的圖標大小。
- 字體處理進行了清理。
- XQueryColor 被 GDK 調用替換。
- Gnome 支持。configure 裡會檢測 Gnome 並為此使用不同的窗口組件 (widget)。否則
  和 GTK 基本類似。(Andy Kahn)
  缺省關閉，因為會造成一些問題。
- 刪除先分叉 (fork) 然後啟動 GUI 用的特殊代碼。現在用 _exit() 代替 exit()，這
  不需要任何特殊技巧。
- 對話框有時出現的位置遠了些。現在把對話框定位在 gvim 窗口內部。
  (Brent Verner)
- 放置文件到 Vim 時，刪除路徑開始處額外的斜槓。如果可能，也縮短文件名。

Motif: (Marcin Dalecki)
- 使對話框的佈局更好一點。
- 加入搜索和搜索/替代對話框。
- 菜單裡把 "iso-8859" 換成 "iso_8859"。Linux 看來需要如此。
- 對話框裡加入圖標，就像 GTK 那樣。
- 如有可能，圖標使用 XPM 位圖。如果存在，使用 Solaris 的 XpmP.h 頭文件。
- 改變工具欄項目的陰影，使得按下時它的可視反饋不那麼 Lesstif。
- 為了提高速度，一些項目使用 gadget 而不是 window。

命令行補全:
- 補全環境變量名。(Mike Steed)
- ":command" 加入一些補全方法: "mapping"、"function"、"expression" 和
  "environment"。
- 如果函數不接受參數，補全加上 () 而不是 (。

MS-DOS、MS-Windows 和 OS/2 上: 擴展 %VAR% 環境變量，就像 $VAR 一樣。
(Walter Briscoe)

重定向消息到剪貼板 ":redir @*" 和到無名寄存器 ":redir @""。(Wall)

":let @/ = ''" 清除搜索模式，而不是把它設為空字符串。

表達式計算:
- 可用 "? :"，就像 C 那樣。
- col("$") 返回光標行的長度加一。(Stephen P. Wall)
- match()、matchend() 和 matchstr() 可選的附加參數: 開始尋找匹配的位移。
- 使 strpart() 第三個參數可選。(Paul Moore，Zdenek Sekera)
- exists() 也可用於檢查 Ex 命令和自動命令的定義與否。
- input() 加入額外參數: 缺省文本。
- ":silinet! cmd" 同時設置 "v:errmsg"。
- 加入 v:prevcount 變量: 前一個命令的 v:count。
- 加入 "v:progname"，Vim 啟動時所用的名字。(Vince Negri)
- 關於函數返回的 verbose 消息也顯示返回值。

Cscope:
- 加入 cscope_connection() 函數。(Andy Kahn)
- ":cscope kill -1" 殺死所有的 cscope 連接。(Andy Kahn)
- 加入 'cscopepathcomp' 選項。(Scott Hauck)
- 加入 ":scscope" 命令，分割窗口並執行 Cscope 命令。(Jason Duell)

VMS:
- 命令行參數總是大寫的。"-X" 參數被理解為 "-x" 而 "-/X" 則成為 "-X"。
- 使得 'makeprg' 和 'grepprg' 的缺省值有意義。(Zoltan Arpadffy)
- 使用 X 剪貼板特性和 X 命令服務器。(Zoltan Arpadffy)

Macintosh: (Dany St-Amant)
- 允許標籤文件使用 CR、CR-LF 或 LF 作為換行符。(Axel Kielhorn)
- 代碼改用 Carbon 環境 (同時保留非 Carbon 的代碼)
  (一些工作是從 Ammon Skidmore 那裡 "偷來的")
- 改進了菜單項目索引的處理 (應該更快了)
- 運行時命令現在能處理文件名裡的 / (MacOS 9 版本)
- 加入 ":winpos" 支持。
- 支持在文件裡用 "~" 代表主目錄。

選項:
- 用 set += 或 ^= 時，檢查使用兩次的項目。刪除重複項目。(Vince Negri)
- 設置標誌位列表的選項時，刪除重複的標誌位。
- 如果可能，使用 getrlimit() 來設置 'maxmemtot' 和 'maxmem'。(Pina)
- 'nrformats' 加入 "alpha": 用 CTRL-A 和 CTRL-X 可以遞增或遞減字母表字符。
- ":set opt&vi" 設置選項為 Vi 缺省值。":set opt&vim" 則設為 Vim 缺省值。可用於
  只想設置 'cpo' 為 Vim 缺省值而不想知道其中包含什麼標誌位的場合。
- 'scrolloff' 現在也適用於長的窗口放不下的迴繞行。
- 缺省菜單加入更多選項設置。
- 更新選項窗口以包含新的選項。使它更易閱讀。

內部改變:
- 把行指針分成文本部分和屬性部分。這樣將來可以方便修改，屬性可以多於一個字節。
- 如果系統沒有的話，提供 qsort() 函數。
- 把一個用於普通模式的大的 switch 換成一個表。這使代碼清晰很多，也避免了一些編
  譯器的優化出現的麻煩。
- 賦給特殊鍵一個負值，避免它們和 Unicode 字符混淆起來。
- 全局變量 expand_context 和 expand_pattern 本來不打算是全局的。把它們傳給
  ExpandOne() 和所有它調用的函數。
- 不再使用全局的 reg_ic 標誌位。它造成了麻煩，而且一些地方它也沒有設置。
- 刪除用於 "*"、"K"、CTRL-] 等的 stuff 緩衝區的使用。避免自動命令的問題。
- 一些代碼從 ex_docmd.c 移到了 ex_cmds2.c。該文件太大了。一些代碼也從 screen.c
  移到了 move.c。
- 不直接包含加密用的 CRC 表而是生成它。這樣減少了不少源代碼的空間。
  (Matthias Kramm)
- multibyte.c 換名為 mbyte.c，避免 8.3 文件系統的問題。
- 刪除 ":findhelp" 的 GTK 實現，現在使用 ToolBar.FindHelp 菜單項。
- 換名 mch_windexit() 為 mch_exit()，mch_init() 為 mch_early_init()，還有
  mch_shellinit() 為 mch_init()。

高亮:
- ":highlight" 列表中，用高亮自己的顏色顯示 "xxx"。
- 加入 xterm 88 色或 256 色的支持。正確的高亮數目被用作 ":highlight" 命令的名
  字。 (Steve Wall)
- ":highlight" 加入 "default" 參數。如果包含且該高亮組已經定義，忽略此命令。
  所有的語法文件現在使用 ":hi default ..."，這樣用戶可以在自己的 vimrc 文件裡
  指定顏色。另外，不再需要 "if did_xxx_syntax_inits"。這大大簡化了為特定語言使
  用非缺省顏色的工作。
- 調整了 colortest.vim: 包含正常背景的顏色，還有用 while 循環減少了代碼。
  (Rafael Garcia-Suarez)
- 加入 "DarkYellow" 顏色名，使標準顏色的清單更一致。雖然它本身並不那麼好看。

如果 xterm 處於 8 位模式，用 |t_RV| 返回的編碼來檢測這種情況。所有的鍵碼都被自
動轉換為它們的 8 位版本。

用 xterm patch level 141 和之後版本的 OPT_TCAP_QUERY 獲得實際使用的鍵碼和 t_Co
中顏色的編碼。只有同時使用 |t_RV| 時才會如此。

":browse set" 現在也可用於控制台模式。":browse edit" 則會給出錯誤信息。

":bdelete" 和 ":bunload" 只報告多於 'report' 的刪除/卸載緩衝區數目。如果在腳本
裡刪除緩衝區，這個消息的出現會相當討厭。

跳轉表:
- 跳轉表保存的位置標記的數目從 50 個增加到 100 個。
- viminfo 文件現在保存跳轉表。CTRL-O 可以用來跳轉到前一個編輯會話的位置。
- 執行 ":split" 時把跳轉表複製到新窗口裡。

"~" 和 "r" 命令同時設置 '[ 和 '] 位置標記。現在用普通模式命令進行改變時，總是
設置這些位置標記。

Python 接口: 允許設置垂直分割窗口的寬度。(John Cook)

'cinkeys' 加入 "=word" 和 "=~word" (也用於 'indentkeys')。

'cinoptions' 加入 "j1" 參數: 縮進 Java () 裡的 {}。(Johannes Zellner)
'cinoptions' 加入 "l" 標誌位。(Anduin Withers)
'cinoptions' 加入 'C'、'U'、'w' 和 'm' 標誌位。(Servatius Brandt)

執行 ":wall" 或 ":wqall" 而修改過的緩衝區沒有名字時，在錯誤信息裡提到緩衝區的
編號。

":function Name" 列出函數和行號。容易發現錯誤在何處。

非面向列塊的可視模式裡，"r" 替換所有選擇的字符為輸入的單個字符，和面向列塊的可
視模式相同。

用任何方式編輯參數列表中的最後一個文件就允許退出。以前用 ":next" 或 ":last" 訪
問該文件才可以。

'formatoptions' 加入 '1' 標誌位。(Vit Stradal)
'formatoptions' 加入 'n' 標誌位: 排版編號列表。

交換文件:
- 如果交換文件已經存在並且用戶在 ATTENTION 提示時選擇了 "Delete"，使用相同的
  ".swp" 交換文件以避免建立 ".swo" 文件，後者不一定總能找到。
- 如果給出 ATTENTION 消息並且文件的日期比交換文件的日期更新，給出警告。
- 簡化關於已有的交換文件的消息，使之能在 24 行的屏幕上顯示。
- 原來可以建立和交換文件同名且到不存在的文件的符號鏈接。Vim 這時會安靜的使用另
  一個文件 (如果用 O_EXCL 打開文件時拒絕符號鏈接的話) 現在檢查符號鏈接是否指向
  存在的文件。也在建立之前檢查交換文件是否已經存在以發現符號鏈接攻擊。

g CTRL-G 命令也可用於可視模式並計算單詞的個數。 (Chase Tingley)

如果使用 'shell' 但為空，報錯。

加入 'shellpipe' 包含 "%s" 的可能性。

'display' 加入 "uhex" 值: 用 <xx> 形式顯示不可顯示字符。不可顯示字符使用
NonText 高亮，命令行上也是如此。

要求顯示隱藏選項的值時，說明不支持這麼做。

Win32:
- 把快捷方式放置在 gvim (.lnk file) 之上會編輯目標文件，而不是快捷方式本身。
  (Yasuhiro Matsumoto)
- 加入 C 版本的 OpenWithVim 和 SendToVim 程序。(Walter Briscoe)
- 如果 'shell' 是 "cmd" 或 "cmd.exe"，設置 'shellredir' 使之同時重定向標準錯誤
  (stderr)。也檢查 Unix 的外殼名。
- 如果定義 $HOMEDRIVE 和 $HOMEPATH，用它們來定義 $HOME。(Craig Barkhouse)

Win32 控制台版本:
- ":version" 消息，如有可能，包含用戶名和系統名。為此，生成 pathdef.c 文件。
  (Jon Miner)
- 設置窗口圖標為 Vim 的圖標 (只用於 Windows 2000)。執行外殼命令時，修改窗口標
  題以顯示這一點。退出時也恢復光標位置。(Craig Barkhouse)
- Win32 控制台版本可以在編譯時加入 OLE 支持，但只會作為客戶端而非 OLE 服務器。

錯誤格式:
- 'errorformat' 的 "%p" (一列字符指示的錯誤列) 也能接受一行句號。
- 'errorformat' 加入 "%v" 項目: 虛擬列號。(Dan Sharp)
- 'errorformat' 加入 VMS 的缺省值。(Jim Bush)

"p" 命令現在可用於可視模式。它用寄存器的內容覆蓋選擇文本。

介紹消息裡高亮 <> 項目，明確它們是特殊的。

使用 ":substitute" 的 "c" 標誌位時，允許輸入 "l" 來替換項目並停止: l 代表
"last (最後)"。

執行其它文件時顯示 verbose 消息時，顯示行號。

改變 Vim 窗口大小時，不使用 'equalalways'。避免 Vim 窗口變小時分割窗口變大。文
檔是這麼說的。

插入模式輸入 CTRL-D 時，如果剛在自動縮進之後，輸入 CR 過去保持餘下的空白。現在
和 BS 類似: 刪除自動縮進，避免產生空白 (但非空) 的行。

OLE 接口加入 GetHwnd() 調用。(Vince Negri)

使得 ":normal" 可用於事件處理程序。用於把文件放置到 Vim 中和 CursorHold 自動命
令。

MS-Windows 版本上，如果使用斜槓而不是反斜槓，不改變到文件的目錄。探索器總是用
反斜槓，而用戶可以在輸入命令時使用斜槓。

修改時間 (時間戳):
- 如果緩衝區在 Vim 的外部被改變並重新獲得焦點，給出對話框，用於用戶重新載入文
  件。現在也適用於 MS-Windows 之外的其它 GUI，還有編譯時加入對話框支持的控制
  台。
- 檢查文件內容以發現它是否真的改變了，忽略只有時間戳本身被修改的情況 (例如，從
  CVS check out 文件)。
- 檢查時間戳時，先檢查文件大小是否改變，如果是就不用進行文件比較了。不斷附加的
  大 (日誌) 文件會快很多。
- 如果設置 'buftype'，不給出改變或刪除文件的警告。
- 不再警告目錄的改變，否則文件探索器會產生警告。
- 只對不隱藏的緩衝區檢查時間戳。否則，等它們不隱藏時才檢查。
- 檢查文件是否在 Vim 之外改變時，同時檢查文件權限是否改變。如果文件內容不改變
  但權限改變了，給出警告。
- 避免過於頻繁的檢查，不然對於不斷增長的文件，對話框會不斷彈出來。

如果 'encoding' 為 "latin1" 映射 <M-A> 然後把 'encoding' 改為 "utf-8" 會使得多
字節的第一個字節被映射。這個問題很難發現。現在禁止映射多字節字符的一部分。

":python" 和 ":tcl" 接受內含腳本。(Johannes Zellner)
也適用於 ":ruby" 和 ":perl"。(Benoit Cerrina)

如果文件名不是完整路徑，":syn include" 使用 'runtimepath'。

如果 'switchbuf' 包含 "split" 而當前窗口為空，不分割窗口。

Unix: 捕獲 SIGPWR，電源將要關閉時保存文件。

Sniff 接口: (Anton Leherbauer)
- 修正窗口代碼，尤其是事件處理部分
- 更新到 sniff 4.x ($SNIFF_DIR4)
- 支持運行時加入 sniff 請求

支持 <A-x> 記法，作為 <M-x> 的別名。這合乎邏輯，因為使用了 Alt 鍵。

":find" 接受計數，意味著使用 'path' 的第 count 個匹配。

":ls" 和 ":buffers" 輸出顯示 modified/readonly/modifiable 標誌位。如果緩衝區激
活，顯示 "a" 而不是什麼都不顯示。如果緩衝區未載入，什麼都不顯示而不是 "-"。

Unix 安裝:
- 安裝 tools 時，使用 tools 腳本 efm_perl.pl 和 mve.awk 的絕對路徑。這樣用戶就
  不用編輯這些文件。
- KDE 在目錄存在但圖標還不存在時安裝圖標。

加入 has("win95")，在 Vim 腳本裡用於區別 MS-Windows 95/98/ME 和 NT/2000/XP。

輸入 ":cd" 命令時，回顯新的當前目錄。(Dan Sharp)

如果在 GUI 窗口打開前使用 ":winpos"，先記住其值，打開後才使用。

":version" 的輸出裡，加入 "/dyn" 代表特性能動態載入。這也同時意味著該特性不一
定總能用。

Windows NT 上目錄可以只讀但允許刪除文件。用換名文件建立備份而 'backupdir' 不用
當前目錄時，原先的文件被被刪除，但新文件卻不能建立。現在給出額外的錯誤信息，警
告用戶這一情況。

命令行上的 CTRL-R CTRL-O 和 CTRL-R CTRL-R 類似，和插入模式的行為一致。

==============================================================================
編 譯 時 的 改 變					*compile-changes-6*

所有生成的文件現在從 "src" 目錄移出。這使得觀察哪些文件是或不是手動編輯更為容
易。configure 生成的文件現在放在 "src/auto" 目錄。Unix 上，經過編譯的目標文件
放在 objects 目錄裡。

源代碼的歸檔已經超過了 1.4M 軟盤的大小。現在把歸檔分割為兩個運行時歸檔和兩個源
代碼歸檔。另外提供 bzip2 壓縮歸檔，它包含所有的源程序和運行時文件。

make 增加了 "reconfig" 目標。在修改某些需要刷新緩存的參數時有用。比如從 GTK
到 Motif 的切換。調整 GUI_INC_LOC 和 GUI_LIB_LOC 的含義，使得不同 GUI 之間能夠
一致。

加入 src/README.txt，提供源代碼主要部分的總覽。

Unix 的 Makefile 現在完全支持使用 $(DESTDIR) 來安裝到特定的位置。替換手動的
*ENDLOC 變量設置。

configure 加入 --with-compiledby 參數，提供二進製版本的維護者加入 e-mail 地址
的可能性。

包含的特性現在使用如下的特性包 "tiny"、"small"、"normal"、"big" 和 "huge"。這
替代了以前的 "min-features" 和 "max-features"。要得到一個真的很小的 Vim，可以
使用 "tiny"，它關閉了多重窗口。

使用 tiny 版本或者如果沒有定義 FEAT_WINDOWS: Firstwin 和 lastwin 等於 curwin，
而且不使用 w_next 和 w_prev。

加入 +listcmds 特性。可以用來使得編譯時沒有操作緩衝區列表和參數列表的 Vim 命令
(緩衝區列表自己還是在的，不能沒有它)。

加入 +vreplace 特性。在 "small" 版本裡，它被關閉，以免 16 位的 DOS 版本內存占
用過多。

刪除了 1.6.16 版本之前的 GTK+ 支持。

configure 對是否可以使用 PTY 的檢查有了改進。代碼來自 screen 的新近版本。

configure 加入安裝 Vim、Ex 和 View 為其它名字的選項 (比如，vim6、ex6 和
view6)。

configure 加入 "--with-global-runtime" 參數。可以指定 'runtimepath' 使用的缺省
全局目錄。

可以用 configure 參數打開 SNiFF+ 接口。

configure 現在總是在 /usr/local/lib 裡檢查庫，還有在 /usr/local/include 裡檢查
頭文件。這有助於找到 iconv() 和 gettext()。

把命令行歷史的代碼移到 +cmdline_hist 特性裡，以從 tiny 版本裡去掉命令行歷史。

MS-Windows: Win16 和 Win32 公用的函數移到了 os_mswin.c。避免為同一問題修改兩個
文件。(Vince Negri)

把 gui_w16.c 和 gui_w32.c 的公共代碼移到 gui_w48.c (Vince Negri)

現在，跳轉表是一個單獨的特性。"small" 版本關閉此特性 (16 位 MS-DOS)。

所有 _t 結尾的類型換名為 _T 結尾。避免潛在的和系統類型衝突的問題。

configure 加入隱含定義返回類型為 int 的 X11 頭文件的檢查。(Steve Wall)

頂層目錄的 "make doslang" 建立 Windows 的菜單和 .mo 文件的歸檔。它使用 Unix 上
產生的文件，這些文件應該在 MS-Windows 上也能用。

os_vms.c 和 os_unix.c 有很大一部分進行了合併。過去，重複的代碼使得維護需要更多
工作。(Zoltan Arpadffy)

Borland C 版本 5 Makefile 的改進: (Dan Sharp)
- 修正 Perl 支持
- 加入 python 和 tcl 支持
- 加入動態的 perl 和動態的 python 支持
- 加入 uninstal.exe 支持
- 選項使用 "yes" 和 "no"，類似於 Make_mvc.mak。

Win32: 合併 Make_gvc.mak 和 Make_ovc.mak 為一個文件: Make_ivc.mak。它更小，許
多不必要的文本被刪除了。(Walter Briscoe)
增加 Make_dvc.mak，允許調試 MS-Devstudio 的 Make_mvc.mak 生成的 exe。
(Walter Briscoe)

MS-Windows: big 版本的 gvim.exe，包括  OLE，現在也包含了動態載入的 Tcl、Perl
和 Python。它使用 ActivePerl 5.6.1、ActivePython 2.1.1 和 ActiveTCL 8.3.3

configure.in 裡加入 AC_EXEEXT，在 Cygwin 或 MingW 下檢查可執行文件是否需要
".exe"，以便在 Makefile 裡把 SUFFIX 換名為 EXEEXT。

Win32: 延遲載入 comdlg32.dll 以加快啟動。只用於 VC 6。(Vipin Aravind)

Win32: 如果用 Borland 編譯，允許使用 IME。(Yasuhiro Matsumoto)

Win32: 加入 Borland 5 編譯 gvimext.dll 的 Makefile。(Yasuhiro Matsumoto)

==============================================================================
漏 洞 修 正						*bug-fixes-6*

When checking the command name for "gvim", "ex", etc. ignore case.  Required
for systems where case is ignored in command names.

Search pattern "[a-c-e]" also matched a 'd' and didn't match a '-'.

When double-clicking in another window, wasn't recognized as double click,
because topline is different.  Added set_mouse_topline().

The BROKEN_LOCALE check was broken.  (Marcin Dalecki)

When "t_Co" is set, the default colors remain the same, thus wrong.  Reset the
colors after changing "t_Co". (Steve Wall)

When exiting with ":wqall" the messages about writing files could overwrite
each other and be lost forever.

When starting Vim with an extremely long file name (around 1024 characters) it
would crash.  Added a few checks to avoid buffer overflows.

CTRL-E could get stuck in a file with very long lines.

":au syntax<Tab>" expanded event names while it should expand groups starting
with "syntax".

When expanding a file name caused an error (e.g., for <amatch>) it was
produced even when inside an "if 0".

'cindent' formatted C comments differently from what the 'comments' option
specified. (Steve Wall)

Default for 'grepprg' didn't include the file name when only grepping in one
file.  Now /dev/null has been added for Unix.

Opening the option window twice caused trouble.  Now the cursor goes to the
existing option window.

":sview" and ":view" didn't set 'readonly' for an existing buffer.  Now do set
'readonly', unless the buffer is also edited in another window.

GTK GUI: When 'guioptions' excluded 'g', the more prompt caused the toolbar
and menubar to disappear and resize the window (which clears the text).
Now always grey-out the toplevel menus to avoid that the menubar changes size
or disappears.

When re-using the current buffer for a new buffer, buffer-local variables were
not deleted.

GUI: when 'scrolloff' is 0 dragging the mouse above the window didn't cause a
down scroll.  Now pass on a mouse event with mouse_row set to -1.

Win32: Console version didn't work on telnet, because of switching between two
console screens.  Now use one console screen and save/restore the contents
when needed.  (Craig Barkhouse)

When reading a file the magic number for encryption was included in the file
length. (Antonio Colombo)

The quickfix window contained leading whitespace and NULs for multi-line
messages. (David Harrison)

When using cscope, redundant tags were removed.  This caused a numbering
problem, because they were all listed.  Don't remove redundant cscope tags.
(David Bustos).

Cscope: Test for which matches are in the current buffer sometimes failed,
causing a jump to another match than selected. (David Bustos)

Win32: Buffer overflow when adding a charset name in a font.

'titlestring' and 'iconstring' were evaluating an expression in the current
context, which could be a user function, which is a problem for local
variables vs global variables.

Win32 GUI: Mapping <M-F> didn't work.  Now handle SHIFT and CTRL in
_OnSysChar().

Win32 GUI: (on no file), :vs<CR>:q<CR> left a trail of pixels down the middle.
Could also happen for the ruler.  screen_puts() didn't clear the right char in
ScreenLines[] for the bold trick.

Win32: ":%!sort|uniq" didn't work, because the input file name touches the
"|".  Insert a space before the "|".

OS/2: Expanding wildcards included non-existing files.  Caused ":runtime" to
fail, which caused syntax highlighting to fail.

Pasting a register containing CTRL-R on the command line could cause an
endless loop that can't be interrupted.  Now it can be stopped with CTRL-C.

When 'verbose' is set, a message for file read/write could overwrite the
previous message.
When 'verbose' is set, the header from ":select" was put after the last
message.  Now start a new line.

The hit-enter prompt reacted to the response of the t_RV string, causing
messages at startup to disappear.

When t_Co was set to 1, colors were still used.  Now only use color when t_Co
> 1.

Listing functions with ":function" didn't quit when 'q' or ':' was typed at
the more prompt.

Use mkstemp() instead of mktemp() when it's available, avoids a warning for
linking on FreeBSD.

When doing Insert mode completion it's possible that b_sfname is NULL.  Don't
give it to printf() for the "Scanning" message.

":set runtimepath-=$VIMRUNTIME" didn't work, because expansion of wildcards
was done after trying to remove the string.  Now for ":set opt+=val" and ":set
opt-=val" the expansion of wildcards is done before adding or removing "val".

Using CTRL-V with the "r" command with a blockwise Visual selection inserted a
CTRL-V instead of getting a special character.

Unix: Changed the order of libraries: Put -lXdmcp after -lX11 and -lSM -lICE
after -lXdmcp.  Should fix link problem on HP-UX 10.20.

Don't remove the last "-lm" from the link line.  Vim may link but fail later
when the GUI starts.

When the shell returns with an error when trying to expand wildcards, do
include the pattern when the "EW_NOTFOUND" flag was set.
When expanding wildcards with the shell fails, give a clear error message
instead of just "1 returned".

Selecting a Visual block, with the start partly on a Tab, deleting it leaves
the cursor too far to the left.  Causes "s" to work in the wrong position.

Pound sign in normal.c caused trouble on some compilers.  Use 0xA3 instead.

Warning for changing a read-only file wasn't given when 'insertmode' was set.

Win32: When 'shellxquote' is set to a double quote (e.g., using csh), ":!start
notepad file" doesn't work.  Remove the double quotes added by 'shellxquote'
when using ":!start". (Pavol Juhas)

The "<f-args>" argument of ":command" didn't accept Tabs for white space.
Also, don't add an empty argument when there are trailing blanks.

":e test\\je" edited "test\je", but ":next test\\je" edited "testje".
Backslashes were removed one time too many for ":next".

VMS: "gf" didn't work properly.  Use vms_fixfilename() to translate the file
name. (Zoltan Arpadffy)

After ":hi Normal ctermbg=black ctermfg=white" and suspending Vim not all
characters are redrawn with the right background.

When doing "make test" without +eval or +windows feature, many tests failed.
Now have test1 generate a script to copy the correct output, so that a test
that doesn't work is skipped.

On FreeBSD the Perl interface added "-lc" to the link command and Python added
"-pthread".  These two don't work together, because the libc_r library should
be used.  Removed "-lc" from Perl, it should not be needed.
Also: Add "-pthread" to $LIBS, so that the checks for functions is done with
libc_r.  Sigaltstack() appears to be missing from libc_r.

The Syntax sub-menus were getting too long, reorganized them and added another
level for some languages.

Visual block "r"eplace didn't work well when a Tab is partly included.
(Matthias Kramm)

When yanking a Visual block, where some lines end halfway the block, putting
the text somewhere else doesn't insert a block.  Padd with spaces for missing
characters.  Added "y_width" to struct yankreg. (Matthias Kramm)

If a substitute string has a multibyte character after a backslash only the
first byte of it was skipped. (Muraoka Taro)

Win32: Numeric keypad keys were missing from the builtin termcap entry.

When a file was read-only ":wa!" didn't force it to be written. (Vince Negri)

Amiga: A file name starting with a colon was considered absolute but it isn't.
Amiga: ":pwd" added a slash when in the root of a drive.

Don't let 'ttymouse' default to "dec" when compiled with dec mouse support.
It breaks the gpm mouse (Linux console).

The prototypes for the Perl interface didn't work for threaded Perl.  Added a
sed command to remove the prototypes from proto/if_perl.pro and added them
manually to if_perl.xs.

When ":w!" resets the 'readonly' option the title and status lines were not
updated.

":args" showed the current file when the argument list was empty.  Made this
work like Vi: display nothing.

"99:<C-U>echo v:count" echoed "99" in Normal mode, but 0 in Visual mode.
Don't set v:count when executing a stuffed command.

Amiga: Got a requester for "home:" because it's in the default runtime path.
Don't bring up a requester when searching for a file in 'path', sourcing the
.vimrc file or using ":runtime".

Win16 and Win32: Considered a file "\path\file" absolute.  Can cause the same
file to appear as two different buffers.

Win32: Renaming a file to an empty string crashed Vim.  Happened when using
explorer.vim and hitting ESC at the rename prompt.

Win32: strftime() crashed when called with a "-1" value for the time.

Win32 with Borland compiler: mch_FullName() didn't work, caused tag file not
to be found.

Cscope sometimes jumped to the wrong tag. (David Bustos)

OS/2: Could not find the tags file.  mch_expand_wildcards() added another
slash to a directory name.

When using ">>" the `] mark was not in the last column.

When Vim was compiled without menu support, filetype.vim was still trying to
source the menu.vim script. (Rafael Garcia-Suarez)

":ptag" added an item to the tag stack.

Win32 IME: "gr" didn't use IME mode.

In the "vim --help" message the term "options" was used for arguments.  That's
confusing, call them "arguments".

When there are two windows, and a BufUnload autocommand for closing window #1
closed window #2, Vim would crash.

When there is a preview window and only one other window, ":q" wouldn't exit.

In Insert mode, when cancelling a digraph with ESC, the '?' wasn't removed.

On Unix glob(".*") returned "." and "..", on Windows it didn't.  On Windows
glob("*") also returned files starting with a dot.  Made this work like Unix
on all systems.

Win32: Removed old code to open a console.  Vimrun is now used and works fine.

Compute the room needed by the intro message accurately, so that it also fits
on a 25 line console. (Craig Barkhouse)

":ptnext" was broken.  Now remember the last tag used in the preview window
separately from the tagstack.

Didn't check for "-display" being the last argument. (Wichert Akkerman)

GTK GUI: When starting "gvim" under some conditions there would be an X error.
Don't replace the error handler when creating the xterm clipboard. (Wichert
Akkerman)

Adding a space after a help tag caused the tag not to be found.  E.g., ":he
autoindent ".

Was trying to expand a URL into a full path name.  On Windows this resulted in
the current directory to be prepended to the URL.  Added vim_isAbsName() and
vim_FullName() to avoid that various machine specific functions do it
differently.

":n *.c" ":cd .." ":n" didn't use the original directory of the file.  Vi only
does it for the current file (looks like a bug).  Now remember the buffer used
for the entry in the argument list and use it's name (adjusted when doing
":cd"), unless it's deleted.

When inserting a special key as its name ("<F8>" as four characters) after
moving around in Insert mode, undo didn't work properly.

Motif GUI: When using the right mouse button, for some people gvim froze for
a couple of seconds (Motif 1.2?).  This doesn't happen when there is no Popup
menu.  Solved by only creating a popup menu when 'mousemodel' is "popup" or
"popup_setpos". (David Harrison)

Motif: When adding many menu items, the "Help" menu disappeared but the
menubar didn't wrap.  Now manually set the menubar height.

When using <BS> in Insert mode to remove a line break, or using "J" to join
lines, the cursor could end up halfway a multi-byte character. (Muraoka Taro)

Removed defining SVR4 in configure.  It causes problems for some X header
files and doesn't appear to be used anywhere.

When 'wildignore' is used, 'ignorecase' for a tag match was not working.

When 'wildignore' contains "*~" it was impossible to edit a file ending in a
"~".  Now don't recognize a file ending in "~" as containing wildcards.

Disabled the mouse code for OS/2.  It was not really used.

":mksession" always used the full path name for a buffer, also when the short
name could be used.
":mkvimrc" and ":mksession" didn't save 'wildchar' and 'pastetoggle' in such a
way that they would be restored.  Now use the key name if possible, this is
portable.

After recovering a file and abandoning it, an ":edit" command didn't give the
ATTENTION prompt again.  Would be useful to be able to delete the file in an
easy way.  Reset the BF_RECOVERED flag when unloading the buffer.

histdel() could match or ignore case, depending on what happened before it.
Now always match case.

When a window size was specified when splitting a window, it would still get
the size from 'winheight' or 'winwidth' if it's larger.

When using "append" or "insert" inside a function definition, a line starting
with "function" or "endfunction" caused confusion.  Now recognize the commands
and skip lines until a ".".

At the end of any function or sourced file need_wait_return could be reset,
causing messages to disappear when redrawing.

When in a while loop the line number for error messages stayed fixed.  Now the
line number is remembered in the while loop.

"cd c:/" didn't work on MS-DOS.  mch_isdir() removed a trailing slash.

MS-Windows: getftime() didn't work when a directory had a trailing slash or
backslash.  Didn't show the time in the explorer because of this.

When doing wildcard completion, a directory "a/" sorted after "a-b".  Now
recognize path separators when sorting files.

Non-Unix systems: When editing "c:/dir/../file" and "c:/file" they were
created as different buffers, although it's the same file.  Expand to a full
file name also when an absolute name contains "..".

"g&" didn't repeat the last substitute properly.

When 'clipboard' was set to "unnamed", a "Y" command would not write to "0.
Now make a copy of register 0 to the clipboard register.

When the search pattern matches in many ways, it could not always be
interrupted with a CTRL-C.  And CTRL-C would have to be hit once for every
line when 'hlsearch' is on.
When 'incsearch' is on and interrupting the search for a match, don't abandon
the command line.

When turning a directory name into a full path, e.g., with fnamemodify(),
sometimes a slash was added.  Make this consistent: Don't add a slash.

When a file name contains a "!", using it in a shell command will cause
trouble: ":!cat %".  Escape the "!" to avoid that.  Escape it another time
when 'shell' contains "sh".

Completing a file name that has a tail that starts with a "~" didn't work:
":e view/~<Tab>".

Using a ":command" argument that contains < and > but not for a special
argument was not skipped properly.

The DOS install program: On Win2000 the check for a vim.exe or gvim.exe in
$PATH didn't work, it always found it in the current directory.
Rename the vim.exe in the current dir to avoid this. (Walter Briscoe)

In the MS-DOS/Windows install program, use %VIM% instead of an absolute path,
so that moving Vim requires only one change in the batch file.

Mac: mch_FullName() changed the "fname" argument and didn't always initialize
the buffer.

MS-DOS: mch_FullName() didn't fix forward/backward slashes in an absolute file
name.

"echo expand("%:p:h")" with an empty file name removed one directory name on
MS-DOS.  For Unix, when the file name is a directory, the directory name was
removed.  Now make it consistent: "%:p" adds a path separator for all systems,
but no path separator is added in other situations.

Unix: When checking for a CTRL-C (could happen any time) and there is an X
event (e.g., clipboard updated) and there is typeahead, Vim would hang until a
character was typed.

MS-DOS, MS-Windows and Amiga: expanding "$ENV/foo" when $ENV ends in a colon,
had the slash removed.

":he \^=" gave an error for using \_.  ":he ^=" didn't find tag :set^=.  Even
"he :set^=" didn't find it.

A tags file name "D:/tags" was used as file "tags" in "D:".  That doesn't work
when the current path for D: isn't the root of the drive.

Removed calls to XtInitializeWidgetClass(), they shouldn't be necessary.

When using a dtterm or various other color terminals, and the Normal group has
been set to use a different background color, the background wouldn't always
be displayed with that color.  Added check for "ut" termcap entry: If it's
missing, clearing the screen won't give us the current background color.  Need
to draw each character instead.  Vim now also works when the "cl" (clear
screen) termcap entry is missing.

When repeating a "/" search command with a line offset, the "n" did use the
offset but didn't make the motion linewise.  Made "d/pat/+2" and "dn" do the
same.

Win32: Trying to use ":tearoff" for a menu that doesn't exist caused a crash.

OpenPTY() didn't work on Sequent.  Add a configure check for getpseudotty().

C-indenting: Indented a line starting with ")" with the matching "(", but not
a line starting with "x)" looks strange.  Also compute the indent for aligning
with items inside the () and use the lowest indent.

MS-DOS and Windows: ":n *.vim" also matched files ending in "~".
Moved mch_expandpath() from os_win16.c and os_msdos.c to misc1.c, they are
equal.

Macintosh: (Dany St-Amant)
- In Vi-compatible mode didn't read files with CR line separators.
- Fixed a bug in the handling of Activate/Deactivate Event
- Fixed a bug in gui_mch_dialog (using wrong pointer)

Multibyte GDK XIM: While composing a multibyte-word, if user presses a
mouse button, then the word is removed.  It should remain and composing end.
(Sung-Hyun Nam)

MS-DOS, MS-Windows and OS/2: When reading from stdin, automatic CR-LF
conversion by the C library got in the way of detecting a "dos" 'fileformat'.

When 'smartcase' is set, patterns with "\S" would also make 'ignorecase'
reset.

When clicking the mouse in a column larger than 222, it moved to the first
column.  Can't encode a larger number in a character.  Now limit the number to
222, don't jump back to the first column.

GUI: In some versions CSI would cause trouble, either when typed directly or
when part of a multi-byte sequence.

When using multibyte characters in a ":normal" command, a trailing byte that
is CSI or K_SPECIAL caused problems.

Wildmenu didn't handle multi-byte characters.

":sleep 10" could not be interrupted on Windows, while "gs" could.  Made them
both work the same.

Unix: When waiting for a character is interrupted by an X-windows event (e.g.,
to obtain the contents of the selection), the wait time would not be honored.
A message could be overwritten quickly.  Now compute the remaining waiting
time.

Windows: Completing "\\share\c$\S" inserted a backslash before the $ and then
the name is invalid.  Don't insert the backslash.

When doing an auto-write before ":make", IObuff was overwritten and the wrong
text displayed later.

On the Mac the directories "c:/tmp" and "c:/temp" were used in the defaults
for 'backupdir' and 'directory', they don't exist.

The check for a new file not to be on an MS-DOS filesystem created the file
temporarily, which can be slow.  Don't do this if there is another check for
the swap file being on an MS-DOS filesystem.

Don't give the "Changing a readonly file" warning when reading from stdin.

When using the "Save As" menu entry and not entering a file name, would get an
error message for the trailing ":edit #".  Now only do that when the
alternate file name was changed.

When Vim owns the X11 selection and is being suspended, an application that
tries to use the selection hangs.  When Vim continues it could no longer
obtain the selection.  Now give up the selection when suspending.

option.h and globals.h were included in some files, while they were already
included in vim.h.  Moved the definition of EXTERN to vim.h to avoid doing it
twice.

When repeating an operator that used a search pattern and the search pattern
contained characters that have a special meaning on the cmdline (e.g., CTRL-U)
it didn't work.

Fixed various problems with using K_SPECIAL (0x80) and CSI (0x9b) as a byte in
a (multibyte) character.  For example, the "r" command could not be repeated.

The DOS/Windows install program didn't always work from a directory with a
long filename, because $VIM and the executable name would not have the same
path.

Multi-byte:
- Using an any-but character range [^x] in a regexp didn't work for UTF-8.
  (Muraoka Taro)
- When backspacing over inserted characters in Replace mode multi-byte
  characters were not handled correctly. (Muraoka Taro)
- Search commands "#" and "*" didn't work with multibyte characters. (Muraoka
  Taro)
- Word completion in Insert mode didn't work with multibyte characters.
  (Muraoka Taro)
- Athena/Motif GUI: when 'linespace' is non-zero the cursor would be drawn too
  wide (number of bytes instead of cell width).
- When changing 'encoding' to "euc-jp" and inserting a character Vim would
  crash.
- For euc-jp characters positioning the cursor would sometimes be wrong.
  Also, with two characters with 0x8e leading byte only the first one would be
  displayed.
- When using DYNAMIC_ICONV on Win32 conversion might fail because of using the
  wrong error number. (Muraoka Taro)
- Using Alt-x in the GUI while 'encoding' was set to "utf-8" didn't produce
  the right character.
- When using Visual block selection and only the left halve of a double-wide
  character is selected, the highlighting continued to the end of the line.
- Visual-block delete didn't work properly when deleting the right halve of a
  double-wide character.
- Overstrike mode for the cmdline replaced only the first byte of a multibyte
  character.
- The cursor in Replace mode (also in the cmdline) was to small on a
  double-wide character.
- When a multibyte character contained a 0x80 byte, it didn't work (was using
  a CSI byte instead). (Muraoka Taro)
- Wordwise selection with the mouse didn't work.
- Yanking a modeless selection of multi-byte characters didn't work.
- When 'selection' is "exclusive", selecting a word that ends in a multi-byte
  character used wrong highlighting for the following character.

Win32 with Make_mvc.mak: Didn't compile for debugging. (Craig Barkhouse)

Win32 GUI: When "vimrun.exe" is used to execute an external command, don't
give a message box with the return value, it was already printed by vimrun.
Also avoid printing the return value of the shell when ":silent!" is used.

Win32: selecting a lot of text and using the "find/replace" dialog caused a
crash.

X11 GUI: When typing a character with the 8th bit set and the Meta/Alt
modifier, the modifier was removed without changing the character.

Truncating a message to make it fit on the command line, using "..." for the
middle, didn't always compute the space correctly.

Could not imap <C-@>.  Now it works like <Nul>.

VMS:
- Fixed a few things for VAXC.  os_vms_fix.com had some strange CTRL-M
  characters. (Zoltan Arpadffy and John W. Hamill)
- Added VMS-specific defaults for the 'isfname' and 'isprint' options.
  (Zoltan Arpadffy)
- Removed os_vms_osdef.h, it's no longer used.

The gzip plugin used a ":normal" command, this doesn't work when dropping a
compressed file on Vim.

In very rare situations a binary search for a tag would fail, because an
uninitialized value happens to be half the size of the tag file. (Narendran)

When using BufEnter and BufLeave autocommands to enable/disable a menu, it
wasn't updated right away.

When doing a replace with the "c"onfirm flag, the cursor was positioned after
the ruler, instead of after the question.  With a long replacement string the
screen could scroll up and cause a "more" prompt.  Now the message is
truncated to make it fit.

Motif: The autoconf check for the Xp library didn't work.

When 'verbose' is set to list lines of a sourced file, defining a function
would reset the counter used for the "more" prompt.

In the Win32 find/replace dialog, a '/' character caused problems.  Escape it
with a backslash.

Starting a shell with ":sh" was different from starting a shell for CTRL-Z
when suspending doesn't work.  They now work the same way.

Jumping to a file mark while in a changed buffer gave a "mark not set" error.

":execute histget("cmd")" causes an endless loop and crashed Vim.  Now catch
all commands that cause too much recursiveness.

Removed "Failed to open input method" error message, too many people got this
when they didn't want to use a XIM.

GUI: When compiled without the +windows feature, the scrollbar would start
below line one.

Removed the trick with redefining character class functions from regexp.c.

Win32 GUI: Find dialog gives focus back to main window, when typing a
character mouse pointer is blanked, it didn't reappear when moving it in the
dialog window. (Vince Negri)

When recording and typing a CTRL-C, no character was recorded.  When in Insert
mode or cancelling half a command, playing back the recorded sequence wouldn't
work.  Now record the CTRL-C.

When the GUI was started, mouse codes for DEC and netterm were still checked
for.

GUI: When scrolling and 'writedelay' is non-zero, the character under the
cursor was displayed in the wrong position (one line above/below with
CTRL-E/CTRL-Y).

A ":normal" command would reset the 'scrollbind' info.  Causes problems when
using a ":normal" command in an autocommand for opening a file.

Windows GUI: a point size with a dot, like "7.5", wasn't recognized. (Muraoka
Taro)

When 'scrollbind' wasn't set would still remember the current position,
wasting time.

GTK: Crash when 'shell' doesn't exist and doing":!ls".  Use _exit() instead of
exit() when the child couldn't execute the shell.

Multi-byte:
- GUI with double-byte encoding: a mouse click in left halve of double-wide
  character put the cursor in previous char.
- Using double-byte encoding and 'selection' is "exclusive": "vey" and "^Vey"
  included the character after the word.
- When using a double-byte encoding and there is a lead byte at the end of the
  line, the preceding line would be displayed.  "ga" also showed wrong info.
- "gf" didn't include multi-byte characters before the cursor properly.
  (Muraoka Taro)

GUI: The cursor was sometimes not removed when scrolling.  Changed the policy
from redrawing the cursor after each call to gui_write() to only update it at
the end of update_screen() or when setting the cursor position.  Also only
update the scrollbars at the end of update_screen(), that's the only place
where the window text may have been scrolled.

Formatting "/*<Tab>long text", produced "* <Tab>" in the next line.  Now
remove the space before the Tab.
Formatting "/*<Tab>  long text", produced "* <Tab> long text" in the next
line.  Now keep the space after the Tab.

In some places non-ASCII alphabetical characters were accepted, which could
cause problems.  For example, ":X" (X being such a character).

When a pattern matches the end of the line, the last character in the line was
highlighted for 'hlsearch'.  That looks wrong for "/\%3c".  Now highlight the
character just after the line.

Motif: If a dialog was closed by clicking on the "X" of the window frame Vim
would no longer respond.

When using CTRL-X or CTRL-A on a number with many leading zeros, Vim would
crash. (Matsumoto)

When 'insertmode' is set, the mapping in mswin.vim for CTRL-V didn't work in
Select mode.  Insert mode wasn't restarted after overwriting the text.
Now allow nesting Insert mode with insert and change commands.  CTRL-O
cwfoo<Esc> now also works.

Clicking with the right mouse button in another window started Visual mode,
but used the start position of the current window.  Caused ml_get errors when
the line number was invalid.  Now stay in the same window.

When 'selection' is "exclusive", "gv" sometimes selected one character fewer.

When 'comments' contains more than one start/middle/end triplet, the optional
flags could be mixed up.  Also didn't align the end with the middle part.

Double-right-click in Visual mode didn't update the shown mode.

When the Normal group has a font name, it was never used when starting up.
Now use it when 'guifont' and 'guifontset' are empty.
Setting a font name to a highlight group before the GUI was started didn't
work.

"make test" didn't use the name of the generated Vim executable.

'cindent' problems:
- Aligned with an "else" inside a do-while loop for a line below that loop.
  (Meikel Brandmeyer)
- A line before a function would be indented even when terminated with a
  semicolon. (Meikel Brandmeyer)
- 'cindent' gave too much indent to a line after a "};" that ends an array
  init.
- Support declaration lines ending in "," and "\".  (Meikel Brandmeyer)
- A case statement inside a do-while loop was used for indenting a line after
  the do-while loop. (Meikel Brandmeyer)
- When skipping a string in a line with one double quote it could continue in
  the previous line. (Meikel Brandmeyer)

When 'list' is set, 'hlsearch' didn't highlight a match at the end of the
line.  Now highlight the '$'.

The Paste menu item in the menu bar, the popup menu and the toolbar were all
different.  Now made them all equal to how it was done in mswin.vim.

st_dev can be smaller than "unsigned".  The compiler may give an overflow
warning.  Added a configure check for dev_t.

Athena: closing a confirm() dialog killed Vim.

Various typos in the documentation. (Matt Dunford)

Python interface: The definition of _DEBUG could cause trouble, undefine it.
The error message for not being able to load the shared library wasn't
translated.  (Muraoka Taro)

Mac: (Dany St-Amant and Axel Kielhorn)
- Several fixes.
- Vim was eating 80% of the CPU time.
- The project os_mac.pbxproj didn't work,  Moved it to a subdirectory.
- Made the menu priority work for the menubar.
- Fixed a problem with dragging the scrollbar.
- Cleaned up the various #ifdefs.

Unix: When catching a deadly signal and we keep getting one use _exit() to
exit in a quick and dirty way.

Athena menu ordering didn't work correctly. (David Harrison)

A ":make" or ":grep" command with a long argument could cause a crash.

Doing ":new file" and using "Quit" for the ATTENTION dialog still opened a new
window.

GTK: When starting the GUI and there is an error in the .vimrc file, don't
present the wait-return prompt, since the message was given in the terminal.

When there was an error in a .vimrc file the terminal where gvim was started
could be cleared.  Set msg_row in main.c before writing any messages.

GTK and X11 GUI: When trying to read characters from the user (e.g. with
input()) before the Vim window was opened caused Vim to hang when it was
started from the desktop.

OS/390 uses 31 bit pointers.  That broke some computations with MAX_COL.
Reduce MAX_COL by one bit for OS/390. (Ralf Schandl)

When defining a function and it already exists, Vim didn't say it existed
until after typing it.  Now do this right away when typing it.

The message remembered for displaying later (keep_msg) was sometimes pointing
into a generic buffer, which might be changed by the time the message is
displayed.  Now make a copy of the message.

When using multi-byte characters in a menu and a trailing byte is a backslash,
the menu would not be created correctly.  (Muraoka Taro)
Using a multibyte character in the substitute string where a trail byte is a
backslash didn't work.  (Muraoka Taro)

When setting "t_Co" in a vimrc file, then setting it automatically from an
xterm termresponse and then setting it again manually caused a crash.

When getting the value of a string option that is not supported, the number
zero was returned.  This breaks a check like "&enc == "asdf".  Now an empty
string is returned for string options.

Crashed when starting the GTK GUI while using 'notitle' in the vimrc, setting
'title' in the gvimrc and starting the GUI with ":gui".  Closed the connection
to the X server accidentally.

Had to hit return after selecting an entry for ":ts".

The message from ":cn" message was sometimes cleared.  Now display it after
redrawing if it doesn't cause a scroll (truncated when necessary).

hangulin.c didn't compile when the GUI was disabled.  Disable it when it won't
work.

When setting a termcap option like "t_CO", the value could be displayed as
being for a normal key with a modifier, like "<M-=>".

When expanding the argument list, entries which are a directory name did not
get included.  This stopped "vim c:/" from opening the file explorer.

":syn match sd "^" nextgroup=asdf" skipped the first column and matched the
nextgroup in the second column.

GUI: When 'lazyredraw' is set, 'showmatch' didn't work.  Required flushing
the output.

Don't define the <NetMouse> termcode in an xterm, reduces the problem when
someone types <Esc> } in Insert mode.

Made slash_adjust() work correctly for multi-byte characters. (Yasuhiro
Matsumoto)
Using a filename in Big5 encoding for autocommands didn't work (backslash in
trailbyte).  (Yasuhiro Matsumoto)

DOS and Windows: Expanding *.vim also matched file.vimfoo.  Expand path like
Unix to avoid problems with Windows dir functions.  Merged the DOS and Win32
functions.

Win32: Gvimext could not edit more than a few files at once, the length of the
argument was fixed.

"ls -1 * | xargs vim" worked, but the input was in cooked mode.  Now switch to
raw mode when needed.  Use dup() to copy the stderr file descriptor to stdin
to make shell commands work.  No longer requires an external program to do
this.

When using ":filetype off", ftplugin and indent usage would be switched off at
the same time.  Don't do this, setting 'filetype' manually can still use them.

GUI: When writing a double-byte character, it could be split up in two calls
to gui_write(), which doesn't work.  Now flush before the output buffer
becomes full.

When 'laststatus' is set and 'cmdheight' is two or bigger, the intro message
would be written over the status line.
The ":intro" command didn't work when there wasn't enough room.

Configuring for Ruby failed with a recent version of Ruby. (Akinori Musha)

Athena: When deleting the directory in which Vim was started, using the file
browser made Vim exit.  Removed the use of XtAppError().

When using autoconf 2.50, UNIX was not defined.  Moved the comment for "#undef
UNIX" to a separate line.

Win32: Disabled _OnWindowPosChanging() to make maximize work better.

Win32: Compiling with VC 4.0 didn't work. (Walter Briscoe)

Athena:
- Finally fixed the problems with deleting a menu. (David Harrison)
- Athena: When closing the confirm() dialog, worked like OK was pressed,
  instead of Cancel.

The file explorer didn't work in compatible mode, because of line
continuation.

Didn't give an error message for ":digraph a".

When using Ex mode in the GUI and typing a special key, <BS> didn't delete it
correctly.  Now display '?' for a special key.

When an operator is pending, clicking in another window made it apply to that
window, even though the line numbers could be beyond the end of the buffer.

When a function call doesn't have a terminating ")" Vim could crash.

Perl interface: could crash on exit with perl 5.6.1. (Anduin Withers)

Using %P in 'errorformat' wasn't handled correctly. (Tomas Zellerin)

Using a syntax cluster that includes itself made Vim crash.

GUI: With 'ls' set to 2, dragging the status line all the way up, then making
the Vim window smaller: Could not the drag status line anymore.

"vim -c startinsert! file" placed cursor on last char of a line, instead of
after it.  A ":set" command in the buffer menu set w_set_curswant.  Now don't
do this when w_curswant is MAXCOL.

Win32: When the gvim window was maximized and selecting another font, the
window would no longer fill the screen.

The line with 'pastetoggle' in ":options" didn't show the right value when it
is a special key.  Hitting <CR> didn't work either.

Formatting text, resulting in a % landing in the first line, repeated the % in
the following lines, like it's the start of a comment.

GTK: When adding a toolbar item while gvim is already running, it wasn't
possible to use the tooltip.  Now it works by adding the tooltip first.

The output of "g CTRL-G" mentioned "Char" but it's actually bytes.

Searching for the end of a oneline region didn't work correctly when there is
an offset for the highlighting.

Syntax highlighting: When synchronizing on C-comments, //*/ was seen as the
start of a comment.

Win32: Without scrollbars present, the MS mouse scroll wheel didn't work.
Also handle the scrollbars when they are not visible.

Motif: When there is no right scrollbar, the bottom scrollbar would still
leave room for it.  (Marcin Dalecki)

When changing 'guicursor' and the value is invalid, some of the effects would
still take place.  Now first check for errors and only make the new value
effective when it's OK.

Using "A" In Visual block mode, appending to lines that don't extend into the
block, padding was wrong.

When pasting a block of text, a character that occupies more than one screen
column could be deleted and spaces inserted instead.  Now only do that with a
tab.

Fixed conversion of documentation to HTML using Perl. (Dan Sharp)

Give an error message when a menu name starts with a dot.

Avoid a hang when executing a shell from the GUI on HP-UX by pushing "ptem"
even when sys/ptem.h isn't present.

When creating the temp directory, make sure umask is 077, otherwise the
directory is not accessible when it was set to 0177.

Unix: When resizing the window and a redraw is a bit slow, could get a window
resize event while redrawing, resulting in a messed up window.  Any input
(e.g., a mouse click) would redraw.

The "%B" item in the status line became zero in Insert mode (that's normal)
for another than the current window.

The menu entries to convert to xxd and back didn't work in Insert mode.

When ":vglobal" didn't find a line where the pattern doesn't match, the error
message would be the wrong way around.

When ignoring a multi-line error message with "%-A", the continuation lines
would be used anyway. (Servatius Brandt)

"grx" on a double-wide character inserted "x", instead of replacing the
character with "x ".  "gR" on <xx> ('display' set the "uhex") didn't replace
at all.  When doing "gRxx" on a control character the first "x" would be
inserted, breaking the alignment.

Added "0)" to 'cinkeys', so that when typing a ) it is put in the same place
as where "==" would put it.

Win32: When maximized, adding/removing toolbar didn't resize the text area.

When using <C-RightMouse> a count was discarded.

When typing CTRL-V and <RightMouse> in the command line, would insert
<LeftMouse>.

Using "vis" or "vas" when 'selection' is exclusive didn't include the last
character.

When adding to an option like 'grepprg', leading space would be lost.  Don't
expand environment variables when there is no comma separating the items.

GUI: When using a bold-italic font, would still use the bold trick and
underlining.

Motif: The default button didn't work in dialogs, the first one was always
used.  Had to give input focus to the default button.

When using CTRL-T to jump within the same file, the '' mark wasn't set.

Undo wasn't Vi compatible when using the 'c' flag for ":s".  Now it undoes the
whole ":s" command instead of each confirmed replacement.

The Buffers menu, when torn-off, disappeared when being refreshed.  Add a
dummy item to avoid this.

Removed calling msg_start() in main(), it should not be needed.

vim_strpbrk() did not support multibyte characters. (Muraoka Taro)

The Amiga version didn't compile, the code was too big for relative jumps.
Moved a few files from ex_docmd.c to ex_cmds2.c

When evaluating the "= register resulted in the "= register being changed, Vim
would crash.

When doing ":view file" and it fails, the current buffer was made read-only.

Motif: For some people the separators in the toolbar disappeared when resizing
the Vim window. (Marcin Dalecki)

Win32 GUI: when setting 'lines' to a huge number, would not compute the
available space correctly.  Was counting the menu height twice.

Conversion of the docs to HTML didn't handle the line with the +quickfix tag
correctly. (Antonio Colombo)

Win32: fname_case() didn't handle multi-byte characters correctly. (Yasuhiro
Matsumoto)

The Cygwin version had trouble with fchdir().  Don't use that function for
Cygwin.

The generic check in scripts.vim for "conf" syntax was done before some checks
in filetype.vim, resulting in "conf" syntax too often.

Dos32: Typing lagged behind.  Would wait for one biostick when checking if a
character is available.

GTK: When setting 'columns' while starting up "gvim", would set the width of
the terminal it was started in.

When using ESC in Insert mode, an autoindent that wraps to the next line
caused the cursor to move to the end of the line temporarily.  When the
character before the cursor was a double-wide multi-byte character the cursor
would be on the right halve, which causes problems with some terminals.

Didn't handle multi-byte characters correctly when expanding a file name.
(Yasuhiro Matsumoto)

Win32 GUI: Errors generated before the GUI is decided to start were not
reported.

globpath() didn't reserve enough room for concatenated results. (Anduin
Withers)

When expanding an option that is very long already, don't do the expansion, it
would be truncated to MAXPATHL. (Anduin Withers)

When 'selection' is "exclusive", using "Fx" in Visual mode only moved until
just after the character.

When using IME on the console to enter a file name, the screen may scroll up.
Redraw the screen then. (Yasuhiro Matsumoto)

Motif: In the find/replace dialog the "Replace" button didn't work first time,
second time it replaced all matches.  Removed the use of ":s///c".
GTK: Similar problems with the find/replace dialog, moved the code to a common
function.

X11: Use shared GC's for text. (Marcin Dalecki)

"]i" found the match under the cursor, instead of the first one below it.
Same for "]I", "] CTRL-I", "]d", "]D" and "] CTRL-D".

Win16: When maximized and the font is changed, don't change the window size.
(Vince Negri)

When 'lbr' is set, deleting a block of text could leave the cursor in the
wrong position.

Win32: When opening a file with the "Edit with Vim" popup menu entry,
wildcards would cause trouble.  Added the "--literal" argument to avoid
expanding file names.

When using "gv", it didn't restore that "$" was used in Visual block mode.

Win32 GUI: While waiting for a shell command to finish, the window wasn't
redrawn at all. (Yasuhiro Matsumoto)

Syntax highlighting: A match that continues on a next line because of a
contained region didn't end when that region ended.

The ":s" command didn't allow flags like 'e' and 'i' right after it.

When using ":s" to split a line, marks were moved to the next line.  Vi keeps
them in the first line.

When using ":n" ":rew", the previous context mark was at the top of the file,
while Vi puts it in the same place as the cursor.  Made it Vi compatible.

Fixed Vi incompatibility: Text was not put in register 1 when using "c" and
"d" with a motion character, when deleting within one line with one of the
commands: % ( ) `<character> / ? N n { }

Win32 GUI: The tooltip for tear-off items remained when the tear-off item was
no longer selected.

GUI: When typing ":" at the more prompt, would return to Normal mode and not
redraw the screen.

When starting Vim with an argument "-c g/at/p" the printed lines would
overwrite each other.

BeOS: Didn't compile.  Configure didn't add the os_beos files, the QNX check
removed them.  Various changes to os_beos.cc. (Joshua Haberman)
Removed the check for the hardware platform, the BeBox has not been produced
for a long time now.

Win32 GUI: don't use a message box when the shell returns an error code,
display the message in the Vim window.

Make_mvc.mak always included "/debug" for linking.  "GUI=no" argument didn't
work.  Use "DEBUG=yes" instead of "DEBUG=1" to make it consistent. (Dan Sharp)

When a line in the tags file ended in ;" (no TAB following) the command would
not be recognized as a search command.

X11: The inputMethod resource never worked.  Don't use the "none" input method
for SGI, it apparently makes the first character in Input method dropped.

Fixed incorrect tests in os_mac.h. (Axel Kielhorn)

Win32 console: When the console where Vim runs in is closed, Vim could hang in
trying to restore the window icon. (Yasuhiro Matsumoto)

When using ":3call func()" or ":3,3call func() the line number was ignored.

When 'showbreak' and 'linebreak' were both set, Visual highlighting sometimes
continued until the end of the line.

GTK GUI: Tearoff items were added even when 'guioptions' didn't contain 't'
when starting up.

MS-Windows: When the current directory includes a "~", searching files with
"gf" or ":find" didn't work.  A "$" in the directory had the same problem.
Added mch_has_exp_wildcard() functions.

When reducing the Vim window height while starting up, would get an
out-of-memory error message.

When editing a very long search pattern, 'incsearch' caused the redraw of the
command line to fail.

Motif GUI: On some systems the "Help" menu would not be on the far right, as
it should be.  On some other systems (esp. IRIX) the command line would not
completely show.  Solution is to only resize the menubar for Lesstif.

Using "%" in a line that contains "\\" twice didn't take care of the quotes
properly.  Now make a difference between \" and \\".

For non-Unix systems a dummy file is created when finding a swap name to
detect a 8.3 filesystem.  When there is an existing swap file, would get a
warning for the file being created outside of Vim.  Also, when closing the Vim
window the file would remain.

Motif: The menu height was always computed, using a "-menuheight" argument
was setting the room for the command line.  Now make clear the argument is not
supported.

For some (EBCDIC) systems, POUND was equal to '#'.  Added an #if for that to
avoid a duplicate case in a switch.

The GUI may have problems when forking.  Always call _exit() instead of exit()
in the parent, the child will call exit().

Win32 GUI: Accented characters were often wrong in dialogs and tearoff menus.
Now use CP_ACP instead of CP_OEMCP. (Vince Negri)

When displaying text with syntax highlighting causes an error (e.g., running
out of stack) the syntax highlighting is disabled to avoid further messages.

When a command in a .vimrc or .gvimrc causes an ATTENTION prompt, and Vim was
started from the desktop (no place to display messages) it would hang.  Now
open the GUI window early to be able to display the messages and pop up the
dialog.

"r<CR>" on a multi-byte character deleted only the first byte of the
character.  "3r<CR>" deleted three bytes instead of three characters.

When interrupting reading a file, Vi considers the buffer modified.  Added the
'i' flag in 'cpoptions' flag for this (we don't want it modified to be able to
do ":q").

When using an item in 'guicursor' that starts with a colon, Vim would get
stuck or crash.

When putting a file mark in a help file and later jumping back to it, the
options would not be set.  Extended the modeline in all help files to make
this work better.

When a modeline contained "::" the local option values would be printed.  Now
ignore it.

Some help files did not use a 8.3 names, which causes problems when using
MS-DOS unzip.  Renamed "multibyte.txt" to "mbyte.txt", "rightleft.txt" to
"rileft.txt", "tagsearch.txt" to "tagsrch.txt", "os_riscos.txt" to
"os_risc.txt".

When Visual mode is blockwise, using "iw" or "aw" made it characterwise.  That
doesn't seem right, only do this when in linewise mode.  But then do it
always, not only when start and end of Visual mode are equal.

When using "viw" on a single-letter word and 'selection' is exclusive, would
not include the word.

When formatting text from Insert mode, using CTRL-O, could mess up undo
information.

While writing a file (also for the backup file) there was no check for an
interrupt (hitting CTRL-C).  Vim could hang when writing a large file over a
slow network, and moving the mouse didn't make it appear (when 'mousehide' is
set) and the screen wasn't updated in the GUI.  Also allow interrupting when
syncing the swap file, it can take a long time.

When using ":mksession" while there is help window, it would later be restored
to the right file but not marked as a help buffer.  ":help" would then open
another window.  Now use the value "help" for 'buftype' to mark a help buffer.

The session file contained absolute path names in option values, that doesn't
work when the home directory depends on the situation.  Replace the home
directory with ~/ when possible.

When using 'showbreak' a TAB just after the shown break would not be counted
correctly, the cursor would be positioned wrong.

With 'showbreak' set to "--->" or "------->" and 'sts' set to 4, inserting
tabs did not work right.  Could cause a crash.  Backspacing was also wrong,
could get stuck at a line break.

Win32: crashed when tearing off a menu with over 300 items.

GUI: A menu or toolbar item would appear when only a tooltip was defined for
it.

When 'scrolloff' is non-zero and "$" is in 'cpoptions', using "s" while the
last line of the file is the first line on screen, the text wasn't displayed.

When running "autoconf", delete the configure cache to force starting cleanly
when configure is run again.

When changing the Normal colors for cterm, the value of 'background' was
changed even when the GUI was used.

The warning for a missing vimrun.exe was always given on startup, but some
people just editing a file don't need to be bothered by it.  Only show it when
vimrun would be used.

When using "%" in a multibyte text it could get confused by trailbytes that
match. (Muraoka Taro)

Termcap entry for RiscOS was wrong, using 7 and 8 in octal codes.

Athena: The title of a dialog window and the file selector window were not
set. (David Harrison)

The "htmlLink" highlight group specified colors, which gives problems when
using a color scheme.  Added the "Underlined" highlight group for this.

After using ":insert" or ":change" the '[ mark would be one line too low.

When looking for the file name after a match with 'include' one character was
skipped.  Same for 'define'.

Win32 and DJGPP: When editing a file with a short name in a directory, and
editing the same file but using the long name, would end up with two buffers
on the same file.

"gf" on a filename that starts with "../" only worked when the file being
edited is in the current directory.  An include file search didn't work
properly for files starting with "../" or ".".  Now search both relative to
the file and to the current directory.

When 'printheader', 'titlestring', 'iconstring', 'rulerformat' or 'statusline'
contained "%{" but no following "}" memory was corrupted and a crash could
happen.

":0append" and then inserting two lines did not redraw the blank lines that
were scrolled back down.

When using insert mode completion in a narrow window, the message caused a
scroll up.  Now shorten the message if it doesn't fit and avoid writing the
ruler over the message.

XIM still didn't work correctly on some systems, especially SGI/IRIX.  Added
the 'imdisable' option, which is set by default for that system.

Patch 6.0aw.008
問題:	    When the first character of a file name is over 127, the Buffers
	    menu entry would get a negative priority and cause problems.
解決方案:   Reduce the multiplier for the first character when computing
	    the hash value for a Buffers menu entry.
相關文件:   runtime/menu.vim

Patch 6.0aw.010
問題:	    Win32: ":browse edit dir/dir" didn't work. (Vikas)
解決方案:   Change slashes to backslashes in the directory passed to the file
	    browser.
相關文件:   src/gui_w48.c

Athena file browser: On some systems wcstombs() can't be used to get the
length of a multi-byte string.  Use the maximum length then. (Yasuhiro
Matsumoto)

Patch 6.0ax.001
問題:	    When 'patchmode' is set, appending to a file gives an empty
	    original file. (Ed Ralston)
解決方案:   Also make a backup copy when appending and 'patchmode' is set.
相關文件:   src/fileio.c

Patch 6.0ax.002
問題:	    When 'patchmode' is set, appending to a compressed file gives an
	    uncompressed original file. (Ed Ralston)
解決方案:   Create the original file before decompressing.
相關文件:   runtime/plugin/gzip.vim

Patch 6.0ax.005
問題:	    Athena file selector keeps the title of the first invocation.
解決方案:   Set the title each time the file selector is opened. (David
	    Harrison)
相關文件:   src/gui_at_fs.c

Patch 6.0ax.007
問題:	    When using GPM (mouse driver in a Linux console) a double click is
	    interpreted as a scroll wheel click.
解決方案:   Check if GPM is being used when deciding if a mouse event is for
	    the scroll wheel.
相關文件:   src/term.c

Patch 6.0ax.010
問題:	    The Edit.Save menu and the Save toolbar button didn't work when
	    the buffer has no file name.
解決方案:   Use a file browser to ask for a file name.  Also fix the toolbar
	    Find item in Visual mode.
相關文件:   runtime/menu.vim

Patch 6.0ax.012
問題:	    When 'cpoptions' contains "$", breaking a line for 'textwidth'
	    doesn't redraw properly. (Stefan Schulze)
解決方案:   Remove the dollar before breaking the line.
相關文件:   src/edit.c

Patch 6.0ax.014
問題:	    Win32: On Windows 98 ":make -f file" doesn't work when 'shell' is
	    "command.com" and 'makeprg' is "nmake".  The environment isn't
	    passed on to "nmake".
解決方案:   Also use vimrun.exe when redirecting the output of a command.
相關文件:   src/os_win32.c

Patch 6.0ax.016
問題:	    The version number was reported wrong in the intro screen.
解決方案:   Check for a version number with two additional letters.
相關文件:   src/version.c

Patch 6.0ax.019
問題:	    When scrolling a window with folds upwards, switching to another
	    vertically split window and back may not update the scrollbar.
解決方案:   Limit w_botline to the number of lines in the buffer plus one.
相關文件:   src/move.c


==============================================================================
6.1 版 本						*version-6.1*

本小節討論 6.0 和 6.1 版本之間的改進。

這是一個漏洞修正版。其實沒有什麼新特性。


改動							*changed-6.1*
-------

用 ":lmap" 定義語言映射時，不再有設置 'iminsert' 和 'imsearch' 的副作用。


新增							*added-6.1*
-----

語法文件:
ampl		AMPL (David Krief)
ant		Ant (Johannes Zellner)
baan		Baan (Her van de Vliert)
cs		C# (Johannes Zellner)
lifelines	Lifelines (Patrick Texier)
lscript		LotusScript (Taryn East)
moo		MOO (Timo Frenay)
nsis		NSIS (Alex Jakushev)
ppd		Postscript Printer Description (Bjoern Jacke)
rpl		RPL/2 (Joel Bertrand)
scilab		Scilab (Benoit Hamelin)
splint		Splint (Ralf Wildenhues)
sqlj		SQLJ (Andreas Fischbach)
wvdial		WvDial (Prahlad Vaidyanathan)
xf86conf	XFree86 config (Nikolai Weibull)
xmodmap		Xmodmap (Nikolai Weibull)
xslt		Xslt (Johannes Zellner)
monk		Monk (Mike Litherland)
xsd		Xsd (Johannes Zellner)
cdl		CDL (Raul Segura Acevedo)
sendpr		Send-pr (Hendrik Scholz)

加入 Scheme 縮進文件。(Dorai Sitaram)
加入 Prolog 縮進文件。(Kontra Gergely)
加入 Povray 縮進文件。(David Necas)
加入 IDL 縮進文件  (Aleksandar Jelenak)
加入 C# 縮進和文件類型插件腳本。

加入烏克蘭語菜單翻譯。(Bohdan Vlasyuk)
加入捷克菜單的 ASCII 版本。(Jiri Brezina)

加入教程的簡體中文翻譯。(Mendel L Chan)

加入 yawerty 鍵盤的俄羅斯鍵盤映射表。

教程裡加上使用 vimrc 文件的解釋。
修改 tutor.vim，台灣版教程能使用合適的編碼。

加入俄語教程。(Andrey Kiselev)
加入波蘭語教程。(Mikolaj Machowski)

加入 darkblue 色彩方案。(Bohdan Vlasyuk)

打包時，dos 語言歸檔自動生成需要的 .mo 文件。

改進了 NSIS 腳本以支持 NSIS 180。加入打開/關閉狀態的圖標。(Mirek Pruchnik)

cp1250 版本的斯洛伐克消息翻譯版本。

IRIX 編譯器的編譯器插件。(David Harrison)


修正							*fixed-6.1*
-----

The license text was updated to make the meaning clearer and make it
compatible with the GNU GPL.  Otherwise distributors have a problem when
linking Vim with a GPL'ed library.

When installing the "less.sh" script it was not made executable. (Chuck Berg)

Win32: The "9" key on the numpad wasn't working. (Julian Kinraid)

The NSIS install script didn't work with NSIS 1.80 or later.  Also add
Vim-specific icons. (Pruchnik)

The script for conversion to HTML contained an "if" in the wrong place.
(Michael Geddes)

Allow using ":ascii" in the sandbox, it's harmless.

Removed creat() from osdef2.h.in, it wasn't used and may cause a problem when
it's redefined to creat64().

The text files in the VisVim directory were in "dos" format.  This caused
problems when applying a patch.  Now keep them in "unix" format and convert
them to "dos" format only for the PC archives.

Add ruby files to the dos source archive, they can be used by Make_mvc.mak.
(Mirek Pruchnik)

"cp -f" doesn't work on all systems.  Change "cp -f" in the Makefile to "rm
-f" and "cp".

Didn't compile on a Compaq Tandem Himalaya OSS. (Michael A. Benzinger)

The GTK file selection dialog didn't include the "Create Dir", "Delete File"
and "Rename File" buttons.

When doing ":browse source" the dialog has the title "Run Macro".  Better
would be "Source Vim script". (Yegappan Lakshmanan)

Win32: Don't use the printer font as default for the font dialog.

"make doslang" didn't work when configure didn't run (yet).  Set $MAKEMO to
"yes". (Mirek Pruchnik)

The ToolBar TagJump item used "g]", which prompts for a selection even when
there is only one matching tag.  Use "g<C-]>" instead.

The ming makefile for message translations didn't have the right list of
files.

The MS-Windows 3.1 version complains about LIBINTL.DLL not found.  Compile
this version without message translations.

The Borland 5 makefile contained a check for Ruby which is no longer needed.
The URLs for the TCL library was outdated. (Dan Sharp)

The eviso.ps file was missing from the DOS runtime archive, it's needed for
printing PostScript in the 32bit DOS version.

In menu files ":scriptencoding" was used in a wrong way after patch 6.1a.032
Now use ":scriptencoding" in the file where the translations are given.  Do
the same for all menus in latin1 encoding.

Included a lot of fixes for the Macintosh, mostly to make it work with Carbon.
(Dany StAmant, Axel Kielhorn, Benji Fisher)

Improved the vimtutor shell script to use $TMPDIR when it exists, and delete
the copied file when exiting in an abnormal way. (Max Ischenko)

When "iconv.dll" can't be found, try using "libiconv.dll".

When encryption is used, filtering with a shell command wasn't possible.

DJGPP: ":cd c:" always failed, can't get permissions for "c:".
Win32: ":cd c:/" failed if the previous current directory on c: had become
invalid.

DJGPP: Shift-Del and Del both produce \316\123.  Default mapping for Del is
wrong.  Disabled it.

Dependencies on header files in MingW makefile was wrong.

Win32: Don't use ACL stuff for MSVC 4.2, it's not supported. (Walter Briscoe)

Win32 with Borland: bcc.cfg was caching the value for $(BOR), but providing a
different argument to make didn't regenerate it.

Win32 with MSVC: Make_ivc.mak generates a new if_ole.h in a different
directory, the if_ole.h in the src directory may be used instead.  Delete the
distributed file.

When a window is vertically split and then ":ball" is used, the window layout
is messed up, can cause a crash. (Muraoka Taro)

When 'insertmode' is set, using File/New menu and then double clicking, "i" is
soon inserted. (Merlin Hansen)

When Select mode is active and using the Buffers menu to switch to another
buffer, an old selection comes back.  Reset VIsual_reselect for a ":buffer"
command.

When Select mode is active and 'insertmode' is set, using the Buffers menu to
switch to another buffer, did not return to Insert mode.  Make sure
"restart_edit" is set.

When double clicking on the first character of a word while 'selection' is
"exclusive" didn't select that word.


Patch 6.0.001
問題:	    Loading the sh.vim syntax file causes error messages . (Corinna
	    Vinschen)
解決方案:   Add an "if". (Charles Campbell)
相關文件:   runtime/syntax/sh.vim

Patch 6.0.002
問題:	    Using a '@' item in 'viminfo' doesn't work. (Marko Leipert)
解決方案:   Add '@' to the list of accepted items.
相關文件:   src/option.c

Patch 6.0.003
問題:	    The configure check for ACLs on AIX doesn't work.
解決方案:   Fix the test program so that it compiles. (Tomas Ogren)
相關文件:   src/configure.in, src/auto/configure

Patch 6.0.004
問題:	    The find/replace dialog doesn't reuse a previous argument
	    properly.
解決方案:   After removing a "\V" terminate the string. (Zwane Mwaikambo)
相關文件:   src/gui.c

Patch 6.0.005
問題:	    In Insert mode, "CTRL-O :ls" has a delay before redrawing.
解決方案:   Don't delay just after wait_return() was called.  Added the
	    did_wait_return flag.
相關文件:   src/globals.h, src/message.c, src/normal.c, src/screen.c

Patch 6.0.006
問題:	    With a vertical split, 'number' set and 'scrolloff' non-zero,
	    making the window width very small causes a crash. (Niklas
	    Lindstrom)
解決方案:   Check for a zero width.
相關文件:   src/move.c

Patch 6.0.007
問題:	    When setting 'filetype' while there is no FileType autocommand, a
	    following ":setfiletype" would set 'filetype' again. (Kobus
	    Retief)
解決方案:   Set did_filetype always when 'filetype' has been set.
相關文件:   src/option.c

Patch 6.0.008
問題:	    'imdisable' is missing from the options window. (Michael Naumann)
解決方案:   Add an entry for it.
相關文件:   runtime/optwin.vim

Patch 6.0.009
問題:	    Nextstep doesn't have S_ISBLK. (John Beppu)
解決方案:   Define S_ISBLK using S_IFBLK.
相關文件:   src/os_unix.h

Patch 6.0.010
問題:	    Using "gf" on a file name starting with "./" or "../" in a buffer
	    without a name causes a crash. (Roy Lewis)
解決方案:   Check for a NULL file name.
相關文件:   src/misc2.c

Patch 6.0.011
問題:	    Python: After replacing or deleting lines get an ml_get error.
	    (Leo Lipelis)
解決方案:   Adjust the cursor position for deleted or added lines.
相關文件:   src/if_python.c

Patch 6.0.012
問題:	    Polish translations contain printf format errors, this can result
	    in a crash when using one of them.
解決方案:   Fix for translated messages. (Michal Politowski)
相關文件:   src/po/pl.po

Patch 6.0.013
問題:	    Using ":silent! cmd" still gives some error messages, like for an
	    invalid range. (Salman Halim)
解決方案:   Reset emsg_silent after calling emsg() in do_one_cmd().
相關文件:   src/ex_docmd.c

Patch 6.0.014
問題:	    When 'modifiable' is off and 'virtualedit' is "all", "rx" on a TAB
	    still changes the buffer. (Muraoka Taro)
解決方案:   Check if saving the line for undo fails.
相關文件:   src/normal.c

Patch 6.0.015
問題:	    When 'cpoptions' includes "S" and "filetype plugin on" has been
	    used, can get an error for deleting the b:did_ftplugin variable.
	    (Ralph Henderson)
解決方案:   Only delete the variable when it exists.
相關文件:   runtime/ftplugin.vim

Patch 6.0.016
問題:	    bufnr(), bufname() and bufwinnr() don't find unlisted buffers when
	    the argument is a string. (Hari Krishna Dara)
	    Also for setbufvar() and getbufvar().
解決方案:   Also find unlisted buffers.
相關文件:   src/eval.c

Patch 6.0.017
問題:	    When 'ttybuiltin' is set and a builtin termcap entry defines t_Co
	    and the external one doesn't, it gets reset to empty. (David
	    Harrison)
解決方案:   Only set t_Co when it wasn't set yet.
相關文件:   src/term.c

Patch 6.0.018
問題:	    Initializing 'encoding' may cause a crash when setlocale() is not
	    used. (Dany St-Amant)
解決方案:   Check for a NULL pointer.
相關文件:   src/mbyte.c

Patch 6.0.019
問題:	    Converting a string with multi-byte characters to a printable
	    string, e.g., with strtrans(), may cause a crash. (Tomas Zellerin)
解決方案:   Correctly compute the length of the result in transstr().
相關文件:   src/charset.c

Patch 6.0.020
問題:	    When obtaining the value of a global variable internally, could
	    get the function-local value instead.  Applies to using <Leader>
	    and <LocalLeader> and resetting highlighting in a function.
解決方案:   Prepend "g:" to the variable name. (Aric Blumer)
相關文件:   src/syntax.c, src/term.c

Patch 6.0.021
問題:	    The 'cscopepathcomp' option didn't work.
解決方案:   Change USE_CSCOPE to FEAT_CSCOPE. (Mark Feng)
相關文件:   src/option.c

Patch 6.0.022
問題:	    When using the 'langmap' option, the second character of a command
	    starting with "g" isn't adjusted.
解決方案:   Apply 'langmap' to the second character. (Alex Kapranoff)
相關文件:   src/normal.c

Patch 6.0.023
問題:	    Loading the lhaskell syntax doesn't work. (Thore B. Karlsen)
解決方案:   Use ":runtime" instead of "source" to load haskell.vim.
相關文件:   runtime/syntax/lhaskell.vim

Patch 6.0.024
問題:	    Using "CTRL-V u 9900" in Insert mode may cause a crash. (Noah
	    Levitt)
解決方案:   Don't insert a NUL byte in the text, use a newline.
相關文件:   src/misc1.c

Patch 6.0.025
問題:	    The pattern "\vx(.|$)" doesn't match "x" at the end of a line.
	    (Preben Peppe Guldberg)
解決方案:   Always see a "$" as end-of-line after "\v".  Do the same for "^".
相關文件:   src/regexp.c

Patch 6.0.026
問題:	    GTK: When using arrow keys to navigate through the menus, the
	    separators are selected.
解決方案:   Set the separators "insensitive". (Pavel Kankovsky)
相關文件:   src/gui_gtk.c, src/gui_gtk_x11.c

Patch 6.0.027
問題:	    VMS: Printing doesn't work, the file is deleted too quickly.
	    No longer need the VMS specific printing menu.
	    gethostname() is not available with VAXC.
	    The makefile was lacking selection of the tiny-huge feature set.
解決方案:   Adjust the 'printexpr' option default.  Fix the other problems and
	    update the documentation.  (Zoltan Arpadffy)
相關文件:   runtime/doc/os_vms.txt, runtime/menu.vim, src/INSTALLvms.txt,
	    src/Make_vms.mms, src/option.c, src/os_unix.c, src/os_vms_conf.h

Patch 6.0.028
問題:	    Can't compile without +virtualedit and with +visualextra. (Geza
	    Lakner)
解決方案:   Add an #ifdef for +virtualedit.
相關文件:   src/ops.c

Patch 6.0.029
問題:	    When making a change in line 1, then in line 2 and then deleting
	    line 1, undo info could be wrong.  Only when the changes are undone
	    at once. (Gerhard Hochholzer)
解決方案:   When not saving a line for undo because it was already done
	    before, remember for which entry the last line must be computed.
	    Added ue_getbot_entry pointer for this.  When the number of lines
	    changes, adjust the position of newer undo entries.
相關文件:   src/structs.h, src/undo.c

Patch 6.0.030
問題:	    Using ":source! file" doesn't work inside a loop or after
	    ":argdo". (Pavol Juhas)
解決方案:   Execute the commands in the file right away, do not let the main
	    loop do it.
相關文件:   src/ex_cmds2.c, src/ex_docmd.c, src/getchar.c, src/globals.h,
	    src/proto/ex_docmd.pro, src/proto/getchar.pro

Patch 6.0.031
問題:	    Nextstep doesn't have setenv() or putenv().  (John Beppu)
解決方案:   Move putenv() from pty.c to misc2.c
相關文件:   src/misc2.c, src/pty.c

Patch 6.0.032
問題:	    When changing a setting that affects all folds, they are not
	    displayed immediately.
解決方案:   Set the redraw flag in foldUpdateAll().
相關文件:   src/fold.c

Patch 6.0.033
問題:	    Using 'wildmenu' on MS-Windows, file names that include a space
	    are only displayed starting with that space. (Xie Yuheng)
解決方案:   Don't recognize a backslash before a space as a path separator.
相關文件:   src/screen.c

Patch 6.0.034
問題:	    Calling searchpair() with three arguments could result in a crash
	    or strange error message. (Kalle Bjorklid)
解決方案:   Don't use the fifth argument when there is no fourth argument.
相關文件:   src/eval.c

Patch 6.0.035
問題:	    The menu item Edit/Global_Settings/Toggle_Toolbar doesn't work
	    when 'ignorecase' is set. (Allen Castaban)
解決方案:   Always match case when checking if a flag is already present in
	    'guioptions'.
相關文件:   runtime/menu.vim

Patch 6.0.036
問題:	    OS/2, MS-DOS and MS-Windows: Using a path that starts with a
	    slash in 'tags' doesn't work as expected. (Mathias Koehrer)
解決方案:   Only use the drive, not the whole path to the current directory.
	    Also make it work for "c:dir/file".
相關文件:   src/misc2.c

Patch 6.0.037
問題:	    When the user has set "did_install_syntax_menu" to avoid the
	    default Syntax menu it still appears. (Virgilio)
解決方案:   Don't add the three default items when "did_install_syntax_menu"
	    is set.
相關文件:   runtime/menu.vim

Patch 6.0.038
問題:	    When 'selection' is "exclusive", deleting a block of text at the
	    end of a line can leave the cursor beyond the end of the line.
解決方案:   Correct the cursor position.
相關文件:   src/ops.c

Patch 6.0.039
問題:	    "gP" leaves the cursor in the wrong position when 'virtualedit' is
	    used.  Using "c" in blockwise Visual mode leaves the cursor in a
	    strange position.
解決方案:   For "gP" reset the "coladd" field for the '] mark.  For "c" leave
	    the cursor on the last inserted character.
相關文件:   src/ops.c

Patch 6.0.040
問題:	    When 'fileencoding' is invalid and writing fails because of
	    this, the original file is gone. (Eric Carlier)
解決方案:   Restore the original file from the backup.
相關文件:   src/fileio.c

Patch 6.0.041
問題:	    Using ":language messages en" when LC_MESSAGES is undefined
	    results in setting LC_CTYPE. (Eric Carlier)
解決方案:   Set $LC_MESSAGES instead.
相關文件:   src/ex_cmds2.c

Patch 6.0.042
問題:	    ":mksession" can't handle file names with a space.
解決方案:   Escape special characters in file names with a backslash.
相關文件:   src/ex_docmd.c

Patch 6.0.043
問題:	    Patch 6.0.041 was wrong.
解決方案:   Use mch_getenv() instead of vim_getenv().
相關文件:   src/ex_cmds2.c

Patch 6.0.044
問題:	    Using a "containedin" list for a syntax item doesn't work for an
	    item that doesn't have a "contains" argument.  Also, "containedin"
	    doesn't ignore a transparent item. (Timo Frenay)
解決方案:   When there is a "containedin" argument somewhere, always check for
	    contained items.  Don't check for the transparent item but the
	    item it's contained in.
相關文件:   src/structs.h, src/syntax.c

Patch 6.0.045
問題:	    After creating a fold with a Visual selection, another window
	    with the same buffer still has inverted text. (Sami Salonen)
解決方案:   Redraw the inverted text.
相關文件:   src/normal.c

Patch 6.0.046
問題:	    When getrlimit() returns an 8 byte number the check for running
	    out of stack may fail. (Anthony Meijer)
解決方案:   Skip the stack check if the limit doesn't fit in a long.
相關文件:   src/auto/configure, src/config.h.in, src/configure.in,
	    src/os_unix.c

Patch 6.0.047
問題:	    Using a regexp with "\(\)" inside a "\%[]" item causes a crash.
	    (Samuel Lacas)
解決方案:   Don't allow nested atoms inside "\%[]".
相關文件:   src/regexp.c

Patch 6.0.048
問題:	    Win32: In the console the mouse doesn't always work correctly.
	    Sometimes after getting focus a mouse movement is interpreted like
	    a button click.
解決方案:   Use a different function to obtain the number of mouse buttons.
	    Avoid recognizing a button press from undefined bits. (Vince Negri)
相關文件:   src/os_win32.c

Patch 6.0.049
問題:	    When using evim the intro screen is misleading. (Adrian Nagle)
解決方案:   Mention whether 'insertmode' is set and the menus to be used.
相關文件:   runtime/menu.vim, src/version.c

Patch 6.0.050
問題:	    UTF-8: "viw" doesn't include non-ASCII characters before the
	    cursor. (Bertilo Wennergren)
解決方案:   Use dec_cursor() instead of decrementing the column number.
相關文件:   src/search.c

Patch 6.0.051
問題:	    UTF-8: Using CTRL-R on the command line doesn't insert composing
	    characters. (Ron Aaron)
解決方案:   Also include the composing characters and fix redrawing them.
相關文件:   src/ex_getln.c, src/ops.c

Patch 6.0.052
問題:	    The check for rlim_t in patch 6.0.046 does not work on some
	    systems. (Zdenek Sekera)
解決方案:   Also look in sys/resource.h for rlim_t.
相關文件:   src/auto/configure, src/configure.in

Patch 6.0.053 (extra)
問題:	    Various problems with QNX.
解決方案:   Minor fix for configure.  Switch on terminal clipboard support in
	    main.c.  Fix "pterm" mouse support.  os_qnx.c didn't build without
	    photon. (Julian Kinraid)
相關文件:   src/auto/configure, src/configure.in, src/gui_photon.c,
	    src/main.c, src/misc2.c, src/option.h, src/os_qnx.c, src/os_qnx.h,
	    src/syntax.c

Patch 6.0.054
問題:	    When using mswin.vim, CTRL-V pastes a block of text like it is
	    normal text.  Using CTRL-V in blockwise Visual mode leaves "x"
	    characters behind.
解決方案:   Make CTRL-V work as it should.  Do the same for the Paste menu
	    entries.
相關文件:   runtime/menu.vim, runtime/mswin.vim

Patch 6.0.055
問題:	    GTK: The selection isn't copied the first time.
解決方案:   Own the selection at the right moment.
相關文件:   src/gui_gtk_x11.c

Patch 6.0.056
問題:	    Using "CTRL-O cw" in Insert mode results in a nested Insert mode.
	    <Esc> doesn't leave Insert mode then.
解決方案:   Only use nested Insert mode when 'insertmode' is set or when a
	    mapping is used.
相關文件:   src/normal.c

Patch 6.0.057
問題:	    Using ":wincmd g}" in a function doesn't work.  (Gary Holloway)
解決方案:   Execute the command directly, instead of putting it in the
	    typeahead buffer.
相關文件:   src/normal.c, src/proto/normal.pro, src/window.c

Patch 6.0.058
問題:	    When a Cursorhold autocommand moved the cursor, the ruler wasn't
	    updated. (Bohdan Vlasyuk)
解決方案:   Update the ruler after executing the autocommands.
相關文件:   src/gui.c

Patch 6.0.059
問題:	    Highlighting for 'hlsearch' isn't visible in lines that are
	    highlighted for diff highlighting.  (Gary Holloway)
解決方案:   Let 'hlsearch' highlighting overrule diff highlighting.
相關文件:   src/screen.c

Patch 6.0.060
問題:	    Motif: When the tooltip is to be popped up, Vim crashes.
	    (Gary Holloway)
解決方案:   Check for a NULL return value from gui_motif_fontset2fontlist().
相關文件:   src/gui_beval.c

Patch 6.0.061
問題:	    The toolbar buttons to load and save a session do not correctly
	    use v:this_session.
解決方案:   Check for v:this_session to be empty instead of existing.
相關文件:   runtime/menu.vim

Patch 6.0.062
問題:	    Crash when 'verbose' is > 3 and using ":shell". (Yegappan
	    Lakshmanan)
解決方案:   Avoid giving a NULL pointer to printf().  Also output a newline
	    and switch the cursor on.
相關文件:   src/misc2.c

Patch 6.0.063
問題:	    When 'cpoptions' includes "$", using "cw" to type a ')' on top of
	    the "$" doesn't update syntax highlighting after it.
解決方案:   Stop displaying the "$" when typing a ')' in its position.
相關文件:   src/search.c

Patch 6.0.064 (extra)
問題:	    The NSIS install script doesn't work with newer versions of NSIS.
	    The diff feature doesn't work when there isn't a good diff.exe on
	    the system.
解決方案:   Replace the GetParentDir instruction by a user function.
	    Fix a few cosmetic problems.  Use defined constants for the
	    version number, so that it's defined in one place only.
	    Only accept the install directory when it ends in "vim".
	    (Eduardo Fernandez)
	    Add a diff.exe and use it from the default _vimrc.
相關文件:   nsis/gvim.nsi, nsis/README.txt, src/dosinst.c

Patch 6.0.065
問題:	    When using ":normal" in 'indentexpr' it may use redo characters
	    before its argument.  (Neil Bird)
解決方案:   Save and restore the stuff buffer in ex_normal().
相關文件:   src/ex_docmd.c, src/getchar.c, src/globals.h, src/structs.h

Patch 6.0.066
問題:	    Sometimes undo for one command is split into two undo actions.
	    (Halim Salman)
解決方案:   Don't set the undo-synced flag when reusing a line that was
	    already saved for undo.
相關文件:   src/undo.c

Patch 6.0.067
問題:	    if_xcmdsrv.c doesn't compile on systems where fd_set isn't defined
	    in the usual header file (e.g., AIX). (Mark Waggoner)
解決方案:   Include sys/select.h in if_xcmdsrv.c for systems that have it.
相關文件:   src/if_xcmdsrv.c

Patch 6.0.068
問題:	    When formatting a Visually selected area with "gq" and the number
	    of lines increases the last line may not be redrawn correctly.
	    (Yegappan Lakshmanan)
解決方案:   Correct the area to be redrawn for inserted/deleted lines.
相關文件:   src/ops.c

Patch 6.0.069
問題:	    Using "K" on a word that includes a "!" causes a "No previous
	    command" error, because the "!" is expanded. (Craig Jeffries)
解決方案:   Put a backslash before the "!".
相關文件:   src/normal.c

Patch 6.0.070
問題:	    Win32: The error message for a failed dynamic linking of a Perl,
	    Ruby, Tcl and Python library is unclear about what went wrong.
解決方案:   Give the name of the library or function that could not be loaded.
	    Also for the iconv and gettext libraries when 'verbose' is set.
相關文件:   src/eval.c, src/if_perl.xs, src/if_python.c, src/if_ruby.c,
	    src/if_tcl.c, src/mbyte.c, src/os_win32.c, src/proto/if_perl.pro,
	    src/proto/if_python.pro, src/proto/if_ruby.pro,
	    src/proto/if_tcl.pro, src/proto/mbyte.pro

Patch 6.0.071
問題:	    The "iris-ansi" builtin termcap isn't very good.
解決方案:   Fix the wrong entries. (David Harrison)
相關文件:   src/term.c

Patch 6.0.072
問題:	    When 'lazyredraw' is set, a mapping that stops Visual mode, moves
	    the cursor and starts Visual mode again causes a redraw problem.
	    (Brian Silverman)
解決方案:   Redraw both the old and the new Visual area when necessary.
相關文件:   src/normal.c, src/screen.c

Patch 6.0.073 (extra)
問題:	    DJGPP: When using CTRL-Z to start a shell, the prompt is halfway
	    the text. (Volker Kiefel)
解決方案:   Position the system cursor before starting the shell.
相關文件:   src/os_msdos.c

Patch 6.0.074
問題:	    When using "&" in a substitute string a multi-byte character with
	    a trailbyte 0x5c is not handled correctly.
解決方案:   Recognize multi-byte characters inside the "&" part. (Muraoka Taro)
相關文件:   src/regexp.c

Patch 6.0.075
問題:	    When closing a horizontally split window while 'eadirection' is
	    "hor" another horizontally split window is still resized. (Aron
	    Griffis)
解決方案:   Only resize windows in the same top frame as the window that is
	    split or closed.
相關文件:   src/main.c, src/proto/window.pro, src/window.c

Patch 6.0.076
問題:	    Warning for wrong pointer type when compiling.
解決方案:   Use char instead of char_u pointer.
相關文件:   src/version.c

Patch 6.0.077
問題:	    Patch 6.0.075 was incomplete.
解決方案:   Fix another call to win_equal().
相關文件:   src/option.c

Patch 6.0.078
問題:	    Using "daw" at the end of a line on a single-character word didn't
	    include the white space before it.  At the end of the file it
	    didn't work at all.  (Gavin Sinclair)
解決方案:   Include the white space before the word.
相關文件:   src/search.c

Patch 6.0.079
問題:	    When "W" is in 'cpoptions' and 'backupcopy' is "no" or "auto", can
	    still overwrite a read-only file, because it's renamed. (Gary
	    Holloway)
解決方案:   Add a check for a read-only file before renaming the file to
	    become the backup.
相關文件:   src/fileio.c

Patch 6.0.080
問題:	    When using a session file that has the same file in two windows,
	    the fileinfo() call in do_ecmd() causes a scroll and a hit-enter
	    prompt. (Robert Webb)
解決方案:   Don't scroll this message when 'shortmess' contains 'O'.
相關文件:   src/ex_cmds.c

Patch 6.0.081
問題:	    After using ":saveas" the new buffer name is added to the Buffers
	    menu with a wrong number. (Chauk-Mean Proum)
解決方案:   Trigger BufFilePre and BufFilePost events for the renamed buffer
	    and BufAdd for the old name (which is with a new buffer).
相關文件:   src/ex_cmds.c

Patch 6.0.082
問題:	    When swapping screens in an xterm and there is an (error) message
	    from the vimrc script, the shell prompt is after the message.
解決方案:   Output a newline when there was output on the alternate screen.
	    Also when starting the GUI.
相關文件:   src/main.c

Patch 6.0.083
問題:	    GTK: When compiled without menu support the buttons in a dialog
	    don't have any text. (Erik Edelmann)
解決方案:   Add the text also when GTK_USE_ACCEL isn't defined.  And define
	    GTK_USE_ACCEL also when not using menus.
相關文件:   src/gui_gtk.c

Patch 6.0.084
問題:	    UTF-8: a "r" command with an argument that is a keymap for a
	    character with a composing character can't be repeated with ".".
	    (Raphael Finkel)
解決方案:   Add the composing characters to the redo buffer.
相關文件:   src/normal.c

Patch 6.0.085
問題:	    When 'mousefocus' is set, using "s" to go to Insert mode and then
	    moving the mouse pointer to another window stops Insert mode,
	    while this doesn't happen with "a" or "i". (Robert Webb)
解決方案:   Reset finish_op before calling edit().
相關文件:   src/normal.c

Patch 6.0.086
問題:	    When using "gu" the message says "~ed".
解決方案:   Make the message say "changed".
相關文件:   src/ops.c

Patch 6.0.087 (lang)
問題:	    Message translations are incorrect, which may cause a crash.
	    (Peter Figura)
	    The Turkish translations needed more work and the maintainer
	    didn't have time.
解決方案:   Fix order of printf arguments.  Remove %2$d constructs.
	    Add "-v" to msgfmt to get a warning for wrong translations.
	    Don't install the Turkish translations for now.
	    Update a few more translations.
相關文件:   src/po/Makefile, src/po/af.po, src/po/cs.po, src/po/cs.cp1250.po,
	    src/po/de.po, src/po/es.po, src/po/fr.po, src/po/it.po,
	    src/po/ja.po, src/po/ja.sjis.po, src/po/ko.po, src/po/pl.po,
	    src/po/sk.po, src/po/uk.po, src/po/zh_CN.UTF-8.po,
	    src/po/zh_CN.cp936.po, src/po/zh_CN.po, src/po/zh_TW.po

Patch 6.0.088
問題:	    "." doesn't work after using "rx" in Visual mode.  (Charles
	    Campbell)
解決方案:   Also store the replacement character in the redo buffer.
相關文件:   src/normal.c

Patch 6.0.089
問題:	    In a C file, using "==" to align a line starting with "*  " after
	    a line with "* -" indents one space too few.  (Piet Delport)
解決方案:   Align with the previous line if the comment-start-string matches
	    there.
相關文件:   src/misc1.c

Patch 6.0.090
問題:	    When a wrapping line does not fit in a window and 'scrolloff' is
	    bigger than half the window height, moving the cursor left or
	    right causes the screen to flash badly. (Lubomir Host)
解決方案:   When there is not enough room to show 'scrolloff' screen lines and
	    near the end of the line, show the end of the line.
相關文件:   src/move.c

Patch 6.0.091
問題:	    Using CTRL-O in Insert mode, while 'virtualedit' is "all" and the
	    cursor is after the end-of-line, moves the cursor left. (Yegappan
	    Lakshmanan)
解決方案:   Keep the cursor in the same position.
相關文件:   src/edit.c

Patch 6.0.092
問題:	    The explorer plugin doesn't ignore case of 'suffixes' on
	    MS-Windows. (Mike Williams)
解決方案:   Match or ignore case as appropriate for the OS.
相關文件:   runtime/plugin/explorer.vim

Patch 6.0.093
問題:	    When the Tcl library couldn't be loaded dynamically, get an error
	    message when closing a buffer or window. (Muraoka Taro)
解決方案:   Only free structures if already using the Tcl interpreter.
相關文件:   src/if_tcl.c

Patch 6.0.094
問題:	    Athena: When clicking in the horizontal scrollbar Vim crashes.
	    (Paul Ackersviller)
解決方案:   Use the thumb size instead of the window pointer of the scrollbar
	    (which is NULL). (David Harrison)
	    Also avoid that scrolling goes the wrong way in a narrow window.
相關文件:   src/gui_athena.c

Patch 6.0.095
問題:	    Perl: Deleting lines may leave the cursor beyond the end of the
	    file.
解決方案:   Check the cursor position after deleting a line. (Serguei)
相關文件:   src/if_perl.xs

Patch 6.0.096
問題:	    When ":saveas fname" fails because the file already exists, the
	    file name is changed anyway and a following ":w" will overwrite
	    the file. (Eric Carlier)
解決方案:   Don't change the file name if the file already exists.
相關文件:   src/ex_cmds.c

Patch 6.0.097
問題:	    Re-indenting in Insert mode with CTRL-F may cause a crash with a
	    multi-byte encoding.
解決方案:   Avoid using a character before the start of a line. (Sergey
	    Vlasov)
相關文件:   src/edit.c

Patch 6.0.098
問題:	    GTK: When using Gnome the "Search" and "Search and Replace" dialog
	    boxes are not translated.
解決方案:   Define ENABLE_NLS before including gnome.h. (Eduardo Fernandez)
相關文件:   src/gui_gtk.c, src/gui_gtk_x11.c

Patch 6.0.099
問題:	    Cygwin: When running Vi compatible MS-DOS line endings cause
	    trouble.
解決方案:   Make the default for 'fileformats' "unix,dos" in Vi compatible
	    mode.  (Michael Schaap)
相關文件:   src/option.h

Patch 6.0.100
問題:	    ":badd +0 test%file" causes a crash.
解決方案:   Take into account that the "+0" is NUL terminated when allocating
	    room for replacing the "%".
相關文件:   src/ex_docmd.c

Patch 6.0.101
問題:	    ":mksession" doesn't restore editing a file that has a '#' or '%'
	    in its name.  (Wolfgang Blankenburg)
解決方案:   Put a backslash before the '#' and '%'.
相關文件:   src/ex_docmd.c

Patch 6.0.102
問題:	    When changing folds the cursor may appear halfway a closed fold.
	    (Nam SungHyun)
解決方案:   Set w_cline_folded correctly. (Yasuhiro Matsumoto)
相關文件:   src/move.c

Patch 6.0.103
問題:	    When using 'scrollbind' a large value of 'scrolloff' will make the
	    scroll binding stop near the end of the file. (Coen Engelbarts)
解決方案:   Don't use 'scrolloff' when limiting the topline for scroll
	    binding. (Dany StAmant)
相關文件:   src/normal.c

Patch 6.0.104
問題:	    Multi-byte: When '$' is in 'cpoptions', typing a double-wide
	    character that overwrites the left halve of an old double-wide
	    character causes a redraw problem and the cursor stops blinking.
解決方案:   Clear the right half of the old character. (Yasuhiro Matsumoto)
相關文件:   src/edit.c, src/screen.c

Patch 6.0.105
問題:	    Multi-byte: In a window of one column wide, with syntax
	    highlighting enabled a crash might happen.
解決方案:   Skip getting the syntax attribute when the character doesn't fit
	    anyway.  (Yasuhiro Matsumoto)
相關文件:   src/screen.c

Patch 6.0.106 (extra)
問題:	    Win32: When the printer font is wrong, there is no error message.
解決方案:   Give an appropriate error message. (Yasuhiro Matsumoto)
相關文件:   src/os_mswin.c

Patch 6.0.107 (extra)
問題:	    VisVim: When editing another file, a modified file may be written
	    unexpectedly and without warning.
解決方案:   Split the window if a file was modified.
相關文件:   VisVim/Commands.cpp

Patch 6.0.108
問題:	    When using folding could try displaying line zero, resulting in an
	    error for a NULL pointer.
解決方案:   Stop decrementing w_topline when the first line of a window is in
	    a closed fold.
相關文件:   src/window.c

Patch 6.0.109
問題:	    XIM: When the input method is enabled, repeating an insertion with
	    "." disables it. (Marcel Svitalsky)
解決方案:   Don't store the input method status when a command comes from the
	    stuff buffer.
相關文件:   src/ui.c

Patch 6.0.110
問題:	    Using undo after executing "OxjAxkdd" from a register in
	    an empty buffer gives an error message.  (Gerhard Hochholzer)
解決方案:   Don't adjust the bottom line number of an undo block when it's
	    zero.  Add a test for this problem.
相關文件:   src/undo.c, src/testdir/test20.in, src/testdir/test20.ok

Patch 6.0.111
問題:	    The virtcol() function doesn't take care of 'virtualedit'.
解決方案:   Add the column offset when needed. (Yegappan Lakshmanan)
相關文件:   src/eval.c

Patch 6.0.112
問題:	    The explorer plugin doesn't sort directories with a space or
	    special character after a directory with a shorter name.
解決方案:   Ignore the trailing slash when comparing directory names.  (Mike
	    Williams)
相關文件:   runtime/plugin/explorer.vim

Patch 6.0.113
問題:	    ":edit ~/fname" doesn't work if $HOME includes a space.  Also,
	    expanding wildcards with the shell may fail. (John Daniel)
解決方案:   Escape spaces with a backslash when needed.
相關文件:   src/ex_docmd.c, src/misc1.c, src/proto/misc1.pro, src/os_unix.c

Patch 6.0.114
問題:	    Using ":p" with fnamemodify() didn't expand "~/" or "~user/" to a
	    full path.  For Win32 the current directory was prepended.
	    (Michael Geddes)
解決方案:   Expand the home directory.
相關文件:   src/eval.c

Patch 6.0.115 (extra)
問題:	    Win32: When using a dialog with a textfield it cannot scroll the
	    text.
解決方案:   Add ES_AUTOHSCROLL to the textfield style. (Pedro Gomes)
相關文件:   src/gui_w32.c

Patch 6.0.116 (extra)
問題:	    MS-Windows NT/2000/XP: filewritable() doesn't work correctly for
	    filesystems that use ACLs.
解決方案:   Use ACL functions to check if a file is writable. (Mike Williams)
相關文件:   src/eval.c, src/macros.h, src/os_win32.c, src/proto/os_win32.pro

Patch 6.0.117 (extra)
問題:	    Win32: when disabling the menu, "set lines=999" doesn't use all
	    the available screen space.
解決方案:   Don't subtract the fixed caption height but the real menu height
	    from the available screen space.  Also: Avoid recursion in
	    gui_mswin_get_menu_height().
相關文件:   src/gui_w32.c, src/gui_w48.c

Patch 6.0.118
問題:	    When $TMPDIR is a relative path, the temp directory is missing a
	    trailing slash and isn't deleted when Vim exits. (Peter Holm)
解決方案:   Add the slash after expanding the directory to an absolute path.
相關文件:   src/fileio.c

Patch 6.0.119 (depends on patch 6.0.116)
問題:	    VMS: filewritable() doesn't work properly.
解決方案:   Use the same method as for Unix. (Zoltan Arpadffy)
相關文件:   src/eval.c

Patch 6.0.120
問題:	    The conversion to html isn't compatible with XHTML.
解決方案:   Quote the values. (Jess Thrysoee)
相關文件:   runtime/syntax/2html.vim

Patch 6.0.121 (extra) (depends on patch 6.0.116)
問題:	    Win32: After patch 6.0.116 Vim doesn't compile with mingw32.
解決方案:   Add an #ifdef HAVE_ACL.
相關文件:   src/os_win32.c

Patch 6.0.122 (extra)
問題:	    Win16: Same resize problems as patch 6.0.117 fixed for Win32.  And
	    dialog textfield problem from patch 6.0.115.
解決方案:   Set old_menu_height only when used.  Add ES_AUTOHSCROLL flag.
	    (Vince Negri)
相關文件:   src/gui_w16.c

Patch 6.0.123 (depends on patch 6.0.119)
問題:	    Win16: Compilation problems.
解決方案:   Move "&&" to other lines. (Vince Negri)
相關文件:   src/eval.c

Patch 6.0.124
問題:	    When using a ":substitute" command that starts with "\="
	    (evaluated as an expression), "~" was still replaced with the
	    previous substitute string.
解決方案:   Skip the replacement when the substitute string starts with "\=".
	    Also adjust the documentation about doubling backslashes.
相關文件:   src/ex_cmds.c, runtime/doc/change.txt

Patch 6.0.125 (extra)
問題:	    Win32: When using the multi_byte_ime feature pressing the shift
	    key would be handled as if a character was entered, thus mappings
	    with a shifted key didn't work. (Charles Campbell)
解決方案:   Ignore pressing the shift, control and alt keys.
相關文件:   src/os_win32.c

Patch 6.0.126
問題:	    The python library was always statically linked.
解決方案:   Link the python library dynamically. (Matthias Klose)
相關文件:   src/auto/configure, src/configure.in

Patch 6.0.127
問題:	    When using a terminal that swaps screens and the Normal background
	    color has a different background, using an external command may
	    cause the color of the wrong screen to be changed. (Mark Waggoner)
解決方案:   Don't call screen_stop_highlight() in stoptermcap().
相關文件:   src/term.c

Patch 6.0.128
問題:	    When moving a vertically split window to the far left or right,
	    the scrollbars are not adjusted. (Scott E Lee)  When 'mousefocus'
	    is set the mouse pointer wasn't adjusted.
解決方案:   Adjust the scrollbars and the mouse pointer.
相關文件:   src/window.c

Patch 6.0.129
問題:	    When using a very long file name, ":ls" (repeated a few times)
	    causes a crash.  Test with "vim `perl -e 'print "A"x1000'`".
	    (Tejeda)
解決方案:   Terminate a string before getting its length in buflist_list().
相關文件:   src/buffer.c

Patch 6.0.130
問題:	    When using ":cprev" while the error window is open, and the new
	    line at the top wraps, the window isn't correctly drawn.
	    (Yegappan Lakshmanan)
解決方案:   When redrawing the topline don't scroll twice.
相關文件:   src/screen.c

Patch 6.0.131
問題:	    When using bufname() and there are two matches for listed buffers
	    and one match for an unlisted buffer, the unlisted buffer is used.
	    (Aric Blumer)
解決方案:   When there is a match with a listed buffer, don't check for
	    unlisted buffers.
相關文件:   src/buffer.c

Patch 6.0.132
問題:	    When setting 'iminsert' in the vimrc and using an xterm with two
	    screens the ruler is drawn in the wrong screen. (Igor Goldenberg)
解決方案:   Only draw the ruler when using the right screen.
相關文件:   src/option.c

Patch 6.0.133
問題:	    When opening another buffer while 'keymap' is set and 'iminsert'
	    is zero, 'iminsert' is set to one unexpectedly. (Igor Goldenberg)
解決方案:   Don't set 'iminsert' as a side effect of defining a ":lmap"
	    mapping.  Only do that when 'keymap' is set.
相關文件:   src/getchar.c, src/option.c

Patch 6.0.134
問題:	    When completing ":set tags=" a path with an embedded space causes
	    the completion to stop. (Sektor van Skijlen)
解決方案:   Escape spaces with backslashes, like for ":set path=".  Also take
	    backslashes into account when searching for the start of the path
	    to complete (e.g., for 'backupdir' and 'cscopeprg').
相關文件:   src/ex_docmd.c, src/ex_getln.c, src/option.c, src/structs.h

Patch 6.0.135
問題:	    Menus that are not supposed to do anything used "<Nul>", which
	    still produced an error beep.
	    When CTRL-O is mapped for Insert mode, ":amenu" commands didn't
	    work in Insert mode.
	    Menu language falls back to English when $LANG ends in "@euro".
解決方案:   Use "<Nop>" for a menu item that doesn't do anything, just like
	    mappings.
	    Use ":anoremenu" instead of ":amenu".
	    Ignore "@euro" in the locale name.
相關文件:   runtime/makemenu.vim, runtime/menu.vim, src/menu.c

Patch 6.0.136
問題:	    When completing in Insert mode, a mapping could be unexpectedly
	    applied.
解決方案:   Don't use mappings when checking for a typed character.
相關文件:   src/edit.c

Patch 6.0.137
問題:	    GUI: When using the find or find/replace dialog from Insert mode,
	    the input mode is stopped.
解決方案:   Don't use the input method status when the main window doesn't
	    have focus.
相關文件:   src/ui.c

Patch 6.0.138
問題:	    GUI: When using the find or find/replace dialog from Insert mode,
	    the text is inserted when CTRL-O is mapped. (Andre Pang)
	    When opening the dialog again, a whole word search isn't
	    recognized.
	    When doing "replace all" a whole word search was never done.
解決方案:   Don't put a search or replace command in the input buffer,
	    execute it directly.
	    Recognize "\<" and "\>" after removing "\V".
	    Add "\<" and "\>" also for "replace all".
相關文件:   src/gui.c

Patch 6.0.139
問題:	    When stopping 'wildmenu' completion, the statusline of the
	    bottom-left vertically split window isn't redrawn. (Yegappan
	    Lakshmanan)
解決方案:   Redraw all the bottom statuslines.
相關文件:   src/ex_getln.c, src/proto/screen.pro, src/screen.c

Patch 6.0.140
問題:	    Memory allocated for local mappings and abbreviations is leaked
	    when the buffer is wiped out.
解決方案:   Clear the local mappings when deleting a buffer.
相關文件:   src/buffer.c, src/getchar.c, src/proto/getchar.pro, src/vim.h

Patch 6.0.141
問題:	    When using ":enew" in an empty buffer, some buffer-local things
	    are not cleared.  b:keymap_name is not set.
解決方案:   Clear user commands and mappings local to the buffer when re-using
	    the current buffer.  Reload the keymap.
相關文件:   src/buffer.c

Patch 6.0.142
問題:	    When Python is linked statically, loading dynamic extensions might
	    fail.
解決方案:   Add an extra linking flag when needed. (Andrew Rodionoff)
相關文件:   src/configure.in, src/auto/configure

Patch 6.0.143
問題:	    When a syntax item includes a line break in a pattern, the syntax
	    may not be updated properly when making a change.
解決方案:   Add the "linebreaks" argument to ":syn sync".
相關文件:   runtime/doc/syntax.txt, src/screen.c, src/structs.h, src/syntax.c

Patch 6.0.144
問題:	    After patch 6.0.088 redoing "veU" doesn't work.
解決方案:   Don't add the "U" to the redo buffer, it will be used as an undo
	    command.
相關文件:   src/normal.c

Patch 6.0.145
問題:	    When Vim can't read any input it might get stuck.  When
	    redirecting stdin and stderr Vim would not read commands from a
	    file.  (Servatius Brandt)
解決方案:   When repeatedly trying to read a character when it's not possible,
	    exit Vim.  When stdin and stderr are not a tty, still try reading
	    from them, but don't do a blocking wait.
相關文件:   src/ui.c

Patch 6.0.146
問題:	    When 'statusline' contains "%{'-'}" this results in a zero.
	    (Milan Vancura)
解決方案:   Don't handle numbers with a minus as a number, they were not
	    displayed anyway.
相關文件:   src/buffer.c

Patch 6.0.147
問題:	    It's not easy to mark a Vim version as being modified.  The new
	    license requires this.
解決方案:   Add the --modified-by argument to configure and the MODIFIED_BY
	    define.  It's used in the intro screen and the ":version" output.
相關文件:   src/auto/configure, src/configure.in, src/config.h.in,
	    src/feature.h, src/version.c

Patch 6.0.148
問題:	    After "p" in an empty line, `[ goes to the second character.
	    (Kontra Gergely)
解決方案:   Don't increment the column number in an empty line.
相關文件:   src/ops.c

Patch 6.0.149
問題:	    The pattern "\(.\{-}\)*" causes a hang.  When using a search
	    pattern that causes a stack overflow to be detected Vim could
	    still hang.
解決方案:   Correctly report "operand could be empty" when using "\{-}".
	    Check for "out_of_stack" inside loops to avoid a hang.
相關文件:   src/regexp.c

Patch 6.0.150
問題:	    When using a multi-byte encoding, patch 6.0.148 causes "p" to work
	    like "P". (Sung-Hyun Nam)
解決方案:   Compute the byte length of a multi-byte character.
相關文件:   src/ops.c

Patch 6.0.151
問題:	    Redrawing the status line and ruler can be wrong when it contains
	    multi-byte characters.
解決方案:   Use character width and byte length correctly. (Yasuhiro Matsumoto)
相關文件:   src/screen.c

Patch 6.0.152
問題:	    strtrans() could hang on an illegal UTF-8 byte sequence.
解決方案:   Skip over illegal bytes. (Yasuhiro Matsumoto)
相關文件:   src/charset.c

Patch 6.0.153
問題:	    When using (illegal) double-byte characters and Vim syntax
	    highlighting Vim can crash. (Yasuhiro Matsumoto)
解決方案:   Increase a pointer over a character instead of a byte.
相關文件:   src/regexp.c

Patch 6.0.154
問題:	    MS-DOS and MS-Windows: The menu entries for xxd don't work when
	    there is no xxd in the path.
	    When converting back from Hex the filetype may remain "xxd" if it
	    is not detected.
解決方案:   When xxd is not in the path use the one in the runtime directory,
	    where the install program has put it.
	    Clear the 'filetype' option before detecting the new value.
相關文件:   runtime/menu.vim

Patch 6.0.155
問題:	    Mac: compilation problems in ui.c after patch 6.0.145. (Axel
	    Kielhorn)
解決方案:   Don't call mch_inchar() when NO_CONSOLE is defined.
相關文件:   src/ui.c

Patch 6.0.156
問題:	    Starting Vim with the -b argument and two files, ":next" doesn't
	    set 'binary' in the second file, like Vim 5.7. (Norman Diamond)
解決方案:   Set the global value for 'binary'.
相關文件:   src/option.c

Patch 6.0.157
問題:	    When defining a user command with "-complete=dir" files will also
	    be expanded.  Also, "-complete=mapping" doesn't appear to work.
	    (Michael Naumann)
解決方案:   Use the expansion flags defined with the user command.
	    Handle expanding mappings specifically.
相關文件:   src/ex_docmd.c

Patch 6.0.158
問題:	    When getting the warning for a file being changed outside of Vim
	    and reloading the file, the 'readonly' option is reset, even when
	    the permissions didn't change. (Marcel Svitalsky)
解決方案:   Keep 'readonly' set when reloading a file and the permissions
	    didn't change.
相關文件:   src/fileio.c

Patch 6.0.159
問題:	    Wildcard expansion for ":emenu" also shows separators.
解決方案:   Skip menu separators for ":emenu", ":popup" and ":tearoff".
	    Also, don't handle ":tmenu" as if it was ":tearoff".  And leave
	    out the alternatives with "&" included.
相關文件:   src/menu.c

Patch 6.0.160
問題:	    When compiling with GCC 3.0.2 and using the "-O2" argument, the
	    optimizer causes a problem that makes Vim crash.
解決方案:   Add a configure check to avoid "-O2" for this version of gcc.
相關文件:   src/configure.in, src/auto/configure

Patch 6.0.161 (extra)
問題:	    Win32: Bitmaps don't work with signs.
解決方案:   Make it possible to use bitmaps with signs. (Muraoka Taro)
相關文件:   src/ex_cmds.c, src/feature.h, src/gui_w32.c, src/gui_x11.c,
	    src/proto/gui_w32.pro, src/proto/gui_x11.pro

Patch 6.0.162
問題:	    Client-server: An error message for a wrong expression appears in
	    the server instead of the client.
解決方案:   Pass the error message from the server to the client.  Also
	    adjust the example code. (Flemming Madsen)
相關文件:   src/globals.h, src/if_xcmdsrv.c, src/main.c, src/os_mswin.c,
	    src/proto/if_xcmdsrv.pro, src/proto/os_mswin.pro,
	    runtime/doc/eval.txt, runtime/tools/xcmdsrv_client.c

Patch 6.0.163
問題:	    When using a GUI dialog, a file name is sometimes used like it was
	    a directory.
解決方案:   Separate path and file name properly.
	    For GTK, Motif and Athena concatenate directory and file name for
	    the default selection.
相關文件:   src/diff.c, src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c,
	    src/gui_athena.c, src/gui_gtk.c, src/gui_motif.c, src/message.c

Patch 6.0.164
問題:	    After patch 6.0.135 the menu entries for pasting don't work in
	    Insert and Visual mode. (Muraoka Taro)
解決方案:   Add <script> to allow script-local mappings.
相關文件:   runtime/menu.vim

Patch 6.0.165
問題:	    Using --remote and executing locally gives unavoidable error
	    messages.
解決方案:   Add --remote-silent and --remote-wait-silent to silently execute
	    locally.
	    For Win32 there was no error message when a server didn't exist.
相關文件:   src/eval.c, src/if_xcmdsrv.c, src/main.c, src/os_mswin.c,
	    src/proto/if_xcmdsrv.pro, src/proto/os_mswin.pro

Patch 6.0.166
問題:	    GUI: There is no way to avoid dialogs to pop up.
解決方案:   Add the 'c' flag to 'guioptions': Use console dialogs.  (Yegappan
	    Lakshmanan)
相關文件:   runtime/doc/options.txt, src/option.h, src/message.c

Patch 6.0.167
問題:	    When 'fileencodings' is "latin2" some characters in the help files
	    are displayed wrong.
解決方案:   Force the 'fileencoding' for the help files to be "latin1".
相關文件:   src/fileio.c

Patch 6.0.168
問題:	    ":%s/\n/#/" doesn't replace at an empty line. (Bruce DeVisser)
解決方案:   Don't skip matches after joining two lines.
相關文件:   src/ex_cmds.c

Patch 6.0.169
問題:	    When run as evim and the GUI can't be started we get stuck in a
	    terminal without menus in Insert mode.
解決方案:   Exit when using "evim" and "gvim -y" when the GUI can't be
	    started.
相關文件:   src/main.c

Patch 6.0.170
問題:	    When printing double-width characters the size of tabs after them
	    is wrong.  (Muraoka Taro)
解決方案:   Correctly compute the column after a double-width character.
相關文件:   src/ex_cmds2.c

Patch 6.0.171
問題:	    With 'keymodel' including "startsel", in Insert mode after the end
	    of a line, shift-Left does not move the cursor. (Steve Hall)
解決方案:   CTRL-O doesn't move the cursor left, need to do that explicitly.
相關文件:   src/edit.c

Patch 6.0.172
問題:	    CTRL-Q doesn't replace CTRL-V after CTRL-X in Insert mode while it
	    does in most other situations.
解決方案:   Make CTRL-X CTRL-Q work like CTRL-X CTRL-V in Insert mode.
相關文件:   src/edit.c

Patch 6.0.173
問題:	    When using "P" to insert a line break the cursor remains past the
	    end of the line.
解決方案:   Check for the cursor being beyond the end of the line.
相關文件:   src/ops.c

Patch 6.0.174
問題:	    After using "gd" or "gD" the search direction for "n" may still be
	    backwards. (Servatius Brandt)
解決方案:   Reset the search direction to forward.
相關文件:   src/normal.c, src/search.c, src/proto/search.pro

Patch 6.0.175
問題:	    ":help /\z(\)" doesn't work. (Thomas Koehler)
解決方案:   Double the backslashes.
相關文件:   src/ex_cmds.c

Patch 6.0.176
問題:	    When killed by a signal autocommands are still triggered as if
	    nothing happened.
解決方案:   Add the v:dying variable to allow autocommands to work differently
	    when a deadly signal has been trapped.
相關文件:   src/eval.c, src/os_unix.c, src/vim.h

Patch 6.0.177
問題:	    When 'commentstring' is empty and 'foldmethod' is "marker", "zf"
	    doesn't work. (Thomas S. Urban)
解決方案:   Add the marker even when 'commentstring' is empty.
相關文件:   src/fold.c, src/normal.c

Patch 6.0.178
問題:	    Uninitialized memory read from xp_backslash field.
解決方案:   Initialize xp_backslash field properly.
相關文件:   src/eval.c, src/ex_docmd.c, src/ex_getln.c, src/misc1.c, src/tag.c

Patch 6.0.179
問題:	    Win32: When displaying UTF-8 characters may read uninitialized
	    memory.
解決方案:   Add utfc_ptr2len_check_len() to avoid reading past the end of a
	    string.
相關文件:   src/mbyte.c, src/proto/mbyte.pro, src/gui_w32.c

Patch 6.0.180
問題:	    Expanding environment variables in a string that ends in a
	    backslash could go past the end of the string.
解決方案:   Detect the trailing backslash.
相關文件:   src/misc1.c

Patch 6.0.181
問題:	    When using ":cd dir" memory was leaked.
解決方案:   Free the allocated memory.  Also avoid an uninitialized memory
	    read.
相關文件:   src/misc2.c

Patch 6.0.182
問題:	    When using a regexp on multi-byte characters, could try to read a
	    character before the start of the line.
解決方案:   Don't decrement a pointer to before the start of the line.
相關文件:   src/regexp.c

Patch 6.0.183
問題:	    Leaking memory when ":func!" redefines a function.
解決方案:   Free the function name when it's not used.
相關文件:   src/eval.c

Patch 6.0.184
問題:	    Leaking memory when expanding option values.
解決方案:   Don't always copy the expanded option into allocated memory.
相關文件:   src/option.c

Patch 6.0.185
問題:	    Crash in Vim when pasting a selection in another application, on a
	    64 bit machine.
解決方案:   Fix the format for an Atom to 32 bits. (Peter Derr)
相關文件:   src/ui.c

Patch 6.0.186
問題:	    X11: Three warnings when compiling the client-server code.
解決方案:   Add a typecast to unsigned char.
相關文件:   src/if_xcmdsrv.c

Patch 6.0.187
問題:	    "I" in Visual mode and then "u" reports too many changes. (Andrew
	    Stryker)
	    "I" in Visual linewise mode adjusts the indent for no apparent
	    reason.
解決方案:   Only save those lines for undo that are changed.
	    Don't change the indent after inserting in Visual linewise mode.
相關文件:   src/ops.c

Patch 6.0.188
問題:	    Win32: After patch 6.0.161 signs defined in the vimrc file don't
	    work.
解決方案:   Initialize the sign icons after initializing the GUI. (Vince
	    Negri)
相關文件:   src/gui.c, src/gui_x11.c

Patch 6.0.189
問題:	    The size of the Visual area isn't always displayed when scrolling
	    ('ruler' off, 'showcmd' on).  Also not when using a search
	    command. (Sylvain Hitier)
解決方案:   Redisplay the size of the selection after showing the mode.
相關文件:   src/screen.c

Patch 6.0.190
問題:	    GUI: when 'mouse' is empty a click with the middle button still
	    moves the cursor.
解決方案:   Paste at the cursor position instead of the mouse position.
相關文件:   src/normal.c

Patch 6.0.191
問題:	    When no servers are available serverlist() gives an error instead
	    of returning an empty string. (Hari Krishna)
解決方案:   Don't give an error message.
相關文件:   src/eval.c

Patch 6.0.192
問題:	    When 'virtualedit' is set, "ylj" goes to the wrong column. (Andrew
	    Nikitin)
解決方案:   Reset the flag that w_virtcol is valid when moving the cursor back
	    to the start of the operated area.
相關文件:   src/normal.c

Patch 6.0.193
問題:	    When 'virtualedit' is set, col(".") after the end of the line
	    should return one extra.
解決方案:   Add one to the column.
相關文件:   src/eval.c

Patch 6.0.194
問題:	    "--remote-silent" tries to send a reply to the client, like it was
	    "--remote-wait".
解決方案:   Properly check for the argument.
相關文件:   src/main.c

Patch 6.0.195
問題:	    When 'virtualedit' is set and a search starts in virtual space
	    ":call search('x')" goes to the wrong position. (Eric Long)
解決方案:   Reset coladd when finding a match.
相關文件:   src/search.c

Patch 6.0.196
問題:	    When 'virtualedit' is set, 'selection' is "exclusive" and visually
	    selecting part of a tab at the start of a line, "x" joins it with
	    the previous line.  Also, when the selection spans more than one
	    line the whole tab is deleted.
解決方案:   Take coladd into account when adjusting for 'selection' being
	    "exclusive".  Also expand a tab into spaces when deleting more
	    than one line.
相關文件:   src/normal.c, src/ops.c

Patch 6.0.197
問題:	    When 'virtualedit' is set and 'selection' is "exclusive", "v$x"
	    doesn't delete the last character in the line. (Eric Long)
解決方案:   Don't reset the inclusive flag. (Helmut Stiegler)
相關文件:   src/normal.c

Patch 6.0.198
問題:	    When 'virtualedit' is set and 'showbreak' is not empty, moving the
	    cursor over the line break doesn't work properly. (Eric Long)
解決方案:   Make getviscol() and getviscol2() use getvvcol() to obtain the
	    virtual cursor position.  Adjust coladvance() and oneleft() to
	    skip over the 'showbreak' characters.
相關文件:   src/edit.c, src/misc2.c

Patch 6.0.199
問題:	    Multi-byte: could use iconv() after calling iconv_end().
	    (Yasuhiro Matsumoto)
解決方案:   Stop converting input and output stream after calling iconv_end().
相關文件:   src/mbyte.c

Patch 6.0.200
問題:	    A script that starts with "#!perl" isn't recognized as a Perl
	    filetype.
解決方案:   Ignore a missing path in a script header.  Also, speed up
	    recognizing scripts by simplifying the patterns used.
相關文件:   runtime/scripts.vim

Patch 6.0.201
問題:	    When scrollbinding and doing a long jump, switching windows jumps
	    to another position in the file.  Scrolling a few lines at a time
	    is OK. (Johannes Zellner)
解決方案:   When setting w_topline reset the flag that indicates w_botline is
	    valid.
相關文件:   src/diff.c

Patch 6.0.202
問題:	    The "icon=" argument for the menu command to define a toolbar icon
	    with a file didn't work for GTK. (Christian J. Robinson)
	    For Motif and Athena a full path was required.
解決方案:   Search the icon file using the specified path.  Expand environment
	    variables in the file name.
相關文件:   src/gui_gtk.c, src/gui_x11.c

Patch 6.0.203
問題:	    Can change 'fileformat' even though 'modifiable' is off.
	    (Servatius Brandt)
解決方案:   Correct check for kind of set command.
相關文件:   src/option.c

Patch 6.0.204
問題:	    ":unlet" doesn't work for variables with curly braces. (Thomas
	    Scott Urban)
解決方案:   Handle variable names with curly braces properly. (Vince Negri)
相關文件:   src/eval.c

Patch 6.0.205 (extra)
問題:	    "gvim -f" still forks when using the batch script to start Vim.
解決方案:   Add an argument to "start" to use a foreground session (Michael
	    Geddes)
相關文件:   src/dosinst.c

Patch 6.0.206
問題:	    Unix: if expanding a wildcard in a file name results in a
	    wildcard character and there are more parts in the path with a
	    wildcard, it is expanded again.
	    Windows: ":edit \[abc]" could never edit the file "[abc]".
解決方案:   Don't expand wildcards in already expanded parts.
	    Don't remove backslashes used to escape the special meaning of a
	    wildcard; can edit "[abc]" if '[' is removed from 'isfname'.
相關文件:   src/misc1.c, src/os_unix.c

Patch 6.0.207 (extra)
問題:	    Win32: The shortcuts and start menu entries let Vim startup in the
	    desktop directory, which is not very useful.
解決方案:   Let shortcuts start Vim in $HOME or $HOMEDIR$HOMEPATH.
相關文件:   src/dosinst.c

Patch 6.0.208
問題:	    GUI: When using a keymap and the cursor is not blinking, CTRL-^ in
	    Insert mode doesn't directly change the cursor color.  (Alex
	    Solow)
解決方案:   Force a redraw of the cursor after CTRL-^.
相關文件:   src/edit.c

Patch 6.0.209
問題:	    GUI GTK: After selecting a 'guifont' with the font dialog there
	    are redraw problems for multi-byte characters.
解決方案:   Separate the font dialog from setting the new font name to avoid
	    that "*" is used to find wide and bold fonts.
	    When redrawing extra characters for the bold trick, take care of
	    UTF-8 characters.
相關文件:   src/gui.c, src/gui_gtk_x11.c, src/option.c, src/proto/gui.pro,
	    src/proto/gui_gtk_x11.pro

Patch 6.0.210
問題:	    After patch 6.0.167 it's no longer possible to edit a help file in
	    another encoding than latin1.
解決方案:   Let the "++enc=" argument overrule the encoding.
相關文件:   src/fileio.c

Patch 6.0.211
問題:	    When reading a file fails, the buffer is empty, but it might still
	    be possible to write it with ":w" later.  The original file is
	    lost then. (Steve Amerige)
解決方案:   Set the 'readonly' option for the buffer.
相關文件:   src/fileio.c

Patch 6.0.212
問題:	    GUI GTK: confirm("foo", "") causes a crash.
解決方案:   Don't make a non-existing button the default.  Add a default "OK"
	    button if none is specified.
相關文件:   src/eval.c, src/gui_gtk.c

Patch 6.0.213
問題:	    When a file name contains unprintable characters, CTRL-G and other
	    commands don't work well.
解決方案:   Turn unprintable into printable characters. (Yasuhiro Matsumoto)
相關文件:   src/buffer.c, src/charset.c

Patch 6.0.214
問題:	    When there is a buffer without a name, empty entries appear in the
	    jumplist saved in the viminfo file.
解決方案:   Don't write jumplist entries without a file name.
相關文件:   src/mark.c

Patch 6.0.215
問題:	    After using "/" from Visual mode the Paste menu and Toolbar
	    entries don't work.  Pasting with the middle mouse doesn't work
	    and modeless selection doesn't work.
解決方案:   Use the command line mode menus and use the mouse like in the
	    command line.
相關文件:   src/gui.c, src/menu.c, src/ui.c

Patch 6.0.216
問題:	    After reloading a file, displayed in another window than the
	    current one, which was changed outside of Vim the part of the file
	    around the cursor set by autocommands may be displayed, but
	    jumping back to the original cursor position when entering the
	    window again.
解決方案:   Restore the topline of the window.
相關文件:   src/fileio.c

Patch 6.0.217
問題:	    When getting help from a help file that was used before, an empty
	    unlisted buffer remains in the buffer list. (Eric Long)
解決方案:   Wipe out the buffer used to do the tag jump from.
相關文件:   src/buffer.c, src/ex_cmds.c, src/proto/buffer.pro

Patch 6.0.218
問題:	    With explorer plugin: "vim -o filename dirname" doesn't load the
	    explorer window until entering the window.
解決方案:   Call s:EditDir() for each window after starting up.
相關文件:   runtime/plugin/explorer.vim

Patch 6.0.219
問題:	    ":setlocal" and ":setglobal", without arguments, display terminal
	    options. (Zdenek Sekera)
解決方案:   Skip terminal options for these two commands.
相關文件:   src/option.c

Patch 6.0.220
問題:	    After patch 6.0.218 get a beep on startup. (Muraoka Taro)
解決方案:   Don't try going to another window when there isn't one.
相關文件:   runtime/plugin/explorer.vim

Patch 6.0.221
問題:	    When using ":bdel" and all other buffers are unloaded the lowest
	    numbered buffer is jumped to instead of the most recent one. (Dave
	    Cecil)
解決方案:   Prefer an unloaded buffer from the jumplist.
相關文件:   src/buffer.c

Patch 6.0.222
問題:	    When 'virtualedit' is set and using autoindent, pressing Esc after
	    starting a new line leaves behind part of the autoindent. (Helmut
	    Stiegler)
解決方案:   After deleting the last char in the line adjust the cursor
	    position in del_bytes().
相關文件:   src/misc1.c, src/ops.c

Patch 6.0.223
問題:	    When splitting a window that contains the explorer, hitting CR on
	    a file name gives error messages.
解決方案:   Set the window variables after splitting the window.
相關文件:   runtime/plugin/explorer.vim

Patch 6.0.224
問題:	    When 'sidescroll' and 'sidescrolloff' are set in a narrow window
	    the text may jump left-right and the cursor is displayed in the
	    wrong position. (Aric Blumer)
解決方案:   When there is not enough room, compute the left column for the
	    window to put the cursor in the middle.
相關文件:   src/move.c

Patch 6.0.225
問題:	    In Visual mode "gk" gets stuck in a closed fold. (Srinath
	    Avadhanula)
解決方案:   Behave differently in a closed fold.
相關文件:   src/normal.c

Patch 6.0.226
問題:	    When doing ":recover file" get the ATTENTION prompt.
	    After recovering the same file five times get a read error or a
	    crash.  (Alex Davis)
解決方案:   Set the recoverymode flag before setting the file name.
	    Correct the amount of used memory for the size of block zero.
相關文件:   src/ex_docmd.c

Patch 6.0.227 (extra)
問題:	    The RISC OS port has several problems.
解決方案:   Update the makefile and fix some of the problems. (Andy Wingate)
相關文件:   src/Make_ro.mak, src/os_riscos.c, src/os_riscos.h,
	    src/proto/os_riscos.pro, src/search.c

Patch 6.0.228
問題:	    After putting text in Visual mode the '] mark is not at the end of
	    the put text.
	    Undo doesn't work properly when putting a word into a Visual
	    selection that spans more than one line.
解決方案:   Correct the '] mark for the deleting the Visually selected text.
	    #ifdef code that depends on FEAT_VISUAL properly.
	    Also fix that "d" crossing line boundary puts '[ just before
	    deleted text.
	    Fix undo by saving all deleted lines at once.
相關文件:   src/ex_docmd.c, src/globals.h, src/normal.c, src/ops.c,
	    src/structs.h, src/vim.h

Patch 6.0.229
問題:	    Multi-byte: With 'm' in 'formatoptions', formatting doesn't break
	    at a multi-byte char followed by an ASCII char, and the other way
	    around. (Muraoka Taro)
	    When joining lines a space is inserted between multi-byte
	    characters, which is not always wanted.
解決方案:   Check for multi-byte character before and after the breakpoint.
	    Don't insert a space before or after a multi-byte character when
	    joining lines and the 'M' flag is in 'formatoptions'.  Don't
	    insert a space between multi-byte characters when the 'B' flag is
	    in 'formatoptions'.
相關文件:   src/edit.c, src/ops.c, src/option.h

Patch 6.0.230
問題:	    The ":" used as a motion after an operator is exclusive, but
	    sometimes it should be inclusive.
解決方案:   Make the "v" in between an operator and motion toggle
	    inclusive/exclusive. (Servatius Brandt)
相關文件:   runtime/doc/motion.txt, src/normal.c

Patch 6.0.231
問題:	    "gd" and "gD" don't work when the variable matches in a comment
	    just above the match to be found. (Servatius Brandt)
解決方案:   Continue searching in the first column below the comment.
相關文件:   src/normal.c

Patch 6.0.232
問題:	    "vim --version" prints on stderr while "vim --help" prints on
	    stdout.
解決方案:   Make "vim --version" use stdout.
相關文件:   runtime/doc/starting.txt, src/globals.h, src/main.c, src/message.c

Patch 6.0.233
問題:	    "\1\{,8}" in a regexp is not allowed, but it should work, because
	    there is an upper limit.  (Jim Battle)
解決方案:   Allow using "\{min,max}" after an atom that can be empty if there
	    is an upper limit.
相關文件:   src/regexp.c

Patch 6.0.234
問題:	    It's not easy to set the cursor position without modifying marks.
解決方案:   Add the cursor() function. (Yegappan Lakshmanan)
相關文件:   runtime/doc/eval.txt, src/eval.c

Patch 6.0.235
問題:	    When writing a file and renaming the original file to make the
	    backup, permissions could change when setting the owner.
解決方案:   Only set the owner when it's needed and set the permissions again
	    afterwards.
	    When 'backupcopy' is "auto" check that the owner and permissions
	    of a newly created file can be set properly.
相關文件:   src/fileio.c

Patch 6.0.236
問題:	    ":edit" without argument should move cursor to line 1 in Vi
	    compatible mode.
解決方案:   Add 'g' flag to 'cpoptions'.
相關文件:   runtime/doc/options.txt, src/ex_docmd.c, src/option.h

Patch 6.0.237
問題:	    In a C file, using the filetype plugin, re-indenting a comment
	    with two spaces after the middle "*" doesn't align properly.
解決方案:   Don't use a middle entry from a start/middle/end to line up with
	    the start of the comment when the start part doesn't match with
	    the actual comment start.
相關文件:   src/misc1.c

Patch 6.0.238
問題:	    Using a ":substitute" command with a substitute() call in the
	    substitution expression causes errors. (Srinath Avadhanula)
解決方案:   Save and restore pointers when doing substitution recursively.
相關文件:   src/regexp.c

Patch 6.0.239
問題:	    Using "A" to append after a Visually selected block which is after
	    the end of the line, spaces are inserted in the wrong line and
	    other unexpected effects. (Michael Naumann)
解決方案:   Don't advance the cursor to the next line.
相關文件:   src/ops.c

Patch 6.0.240
問題:	    Win32: building with Python 2.2 doesn't work.
解決方案:   Add support for Python 2.2 with dynamic linking. (Paul Moore)
相關文件:   src/if_python.c

Patch 6.0.241
問題:	    Win32: Expanding the old value of an option that is a path that
	    starts with a backslash, an extra backslash is inserted.
解決方案:   Only insert backslashes where needed.
	    Also handle multi-byte characters properly when removing
	    backslashes.
相關文件:   src/option.c

Patch 6.0.242
問題:	    GUI: On a system with an Exceed X server sometimes get a "Bad
	    Window" error. (Tommi Maekitalo)
解決方案:   When forking, use a pipe to wait in the parent for the child to
	    have done the setsid() call.
相關文件:   src/gui.c

Patch 6.0.243
問題:	    Unix: "vim --version" outputs a NL before the last line instead of
	    after it. (Charles Campbell)
解決方案:   Send the NL to the same output stream as the text.
相關文件:   src/message.c, src/os_unix.c, src/proto/message.pro

Patch 6.0.244
問題:	    Multi-byte: Problems with (illegal) UTF-8 characters in menu and
	    file name (e.g., icon text, status line).
解決方案:   Correctly handle unprintable characters.  Catch illegal UTF-8
	    characters and replace them with <xx>.  Truncating the status line
	    wasn't done correctly at a multi-byte character. (Yasuhiro
	    Matsumoto)
	    Added correct_cmdspos() and transchar_byte().
相關文件:   src/buffer.c, src/charset.c, src/ex_getln.c, src/gui.c,
	    src/message.c, src/screen.c, src/vim.h

Patch 6.0.245
問題:	    After using a color scheme, setting the 'background' option might
	    not work. (Peter Horst)
解決方案:   Disable the color scheme if it switches 'background' back to the
	    wrong value.
相關文件:   src/option.c

Patch 6.0.246
問題:	    ":echomsg" didn't use the highlighting set by ":echohl". (Gary
	    Holloway)
解決方案:   Use the specified attributes for the message. (Yegappan
	    Lakshmanan)
相關文件:   src/eval.c

Patch 6.0.247
問題:	    GTK GUI: Can't use gvim in a kpart widget.
解決方案:   Add the "--echo-wid" argument to let Vim echo the window ID on
	    stdout. (Philippe Fremy)
相關文件:   runtime/doc/starting.txt, src/globals.h, src/gui_gtk_x11.c,
	    src/main.c

Patch 6.0.248
問題:	    When using compressed help files and 'encoding' isn't "latin1",
	    Vim converts the help file before decompressing. (David Reviejo)
解決方案:   Don't convert a help file when 'binary' is set.
相關文件:   src/fileio.c

Patch 6.0.249
問題:	    "vim -t edit -c 'sta ex_help'" doesn't move cursor to edit().
解決方案:   Don't set the cursor on the first line for "-c" arguments when
	    there also is a "-t" argument.
相關文件:   src/main.c

Patch 6.0.250 (extra)
問題:	    Macintosh: Various problems when compiling.
解決方案:   Various fixes, mostly #ifdefs. (Dany St. Amant)
相關文件:   src/gui_mac.c, src/main.c, src/misc2.c, src/os_mac.h,
	    src/os_mac.pbproj/project.pbxproj, src/os_unix.c

Patch 6.0.251 (extra)
問題:	    Macintosh: menu shortcuts are not very clear.
解決方案:   Show the shortcut with the Mac clover symbol. (raindog)
相關文件:   src/gui_mac.c

Patch 6.0.252
問題:	    When a user function was defined with "abort", an error that is
	    not inside if/endif or while/endwhile doesn't abort the function.
	    (Servatius Brandt)
解決方案:   Don't reset did_emsg when the function is to be aborted.
相關文件:   src/ex_docmd.c

Patch 6.0.253
問題:	    When 'insertmode' is set, after "<C-O>:edit file" the next <C-O>
	    doesn't work. (Benji Fisher)  <C-L> has the same problem.
解決方案:   Reset need_start_insertmode once in edit().
相關文件:   src/edit.c

Patch 6.0.254 (extra)
問題:	    Borland C++ 5.5: Checking for stack overflow doesn't work
	    correctly.  Matters when using a complicated regexp.
解決方案:   Remove -N- from Make_bc5.mak. (Yasuhiro Matsumoto)
相關文件:   src/Make_bc5.mak

Patch 6.0.255 (extra) (depends on patch 6.0.116 and 6.0.121)
問題:	    Win32: ACL support doesn't work well on Samba drives.
解決方案:   Add a check for working ACL support. (Mike Williams)
相關文件:   src/os_win32.c

Patch 6.0.256 (extra)
問題:	    Win32: ":highlight Comment guifg=asdf" does not give an error
	    message. (Randall W.  Morris)  Also for other systems.
解決方案:   Add gui_get_color() to give one error message for all systems.
相關文件:   src/gui.c, src/gui_amiga.c, src/gui_athena.c, src/gui_motif.c,
	    src/gui_riscos.c, src/gui_x11.c, src/gui_gtk_x11.c,
	    src/proto/gui.pro, src/syntax.c

Patch 6.0.257
問題:	    Win32: When 'mousefocus' is set and there is a BufRead
	    autocommand, after the dialog for permissions changed outside of
	    Vim: 'mousefocus' stops working. (Robert Webb)
解決方案:   Reset need_mouse_correct after checking timestamps.
相關文件:   src/fileio.c

Patch 6.0.258
問題:	    When 'scrolloff' is 999 and there are folds, the text can jump up
	    and down when moving the cursor down near the end of the file.
	    (Lubomir Host)
解決方案:   When putting the cursor halfway the window start counting lines at
	    the end of a fold.
相關文件:   src/move.c

Patch 6.0.259
問題:	    MS-DOS: after editing the command line the cursor shape may remain
	    like in Insert mode. (Volker Kiefel)
解決方案:   Reset the cursor shape after editing the command line.
相關文件:   src/ex_getln.c

Patch 6.0.260
問題:	    GUI: May crash while starting up when giving an error message for
	    missing color. (Servatius Brandt)
解決方案:   Don't call gui_write() when still starting up.  Don't give error
	    message for empty color name.  Don't use 't_vb' while the GUI is
	    still starting up.
相關文件:   src/fileio.c, src/gui.c, src/misc1.c, src/ui.c

Patch 6.0.261
問題:	    nr2char() and char2nr() don't work with multi-byte characters.
解決方案:   Use 'encoding' for these functions. (Yasuhiro Matsumoto)
相關文件:   runtime/doc/eval.txt, src/eval.c

Patch 6.0.262 (extra)
問題:	    Win32: IME doesn't work properly.  OnImeComposition() isn't used
	    at all.
解決方案:   Adjust various things for IME.
相關文件:   src/globals.h, src/gui_w32.c, src/mbyte.c, src/proto/ui.pro,
	    src/structs.h, src/ui.c

Patch 6.0.263
問題:	    GTK: When a dialog is closed by the window manager, Vim hangs.
	    (Christian J. Robinson)
解決方案:   Use GTK_WIDGET_DRAWABLE() instead of GTK_WIDGET_VISIBLE().
相關文件:   src/gui_gtk.c, src/gui_gtk_x11.c

Patch 6.0.264
問題:	    The amount of virtual memory is used to initialize 'maxmemtot',
	    which may be much more than the amount of physical memory,
	    resulting in a lot of swapping.
解決方案:   Get the amount of physical memory with sysctl(), sysconf() or
	    sysinfo() when possible.
相關文件:   src/auto/configure, src/configure.in, src/config.h.in,
	    src/os_unix.c, src/os_unix.h

Patch 6.0.265
問題:	    Win32: Using backspace while 'fkmap' is set causes a crash.
	    (Jamshid Oasjmoha)
解決方案:   Don't try mapping special keys.
相關文件:   src/farsi.c

Patch 6.0.266
問題:	    The rename() function deletes the file if the old and the new name
	    are the same. (Volker Kiefel)
解決方案:   Don't do anything if the names are equal.
相關文件:   src/fileio.c

Patch 6.0.267
問題:	    UTF-8: Although 'isprint' says a character is printable,
	    utf_char2cells() still considers it unprintable.
解決方案:   Use vim_isprintc() for characters upto 0x100. (Yasuhiro Matsumoto)
相關文件:   src/mbyte.c

Patch 6.0.268 (extra) (depends on patch 6.0.255)
問題:	    Win32: ACL check crashes when using forward slash in file name.
解決方案:   Improve the check for the path in the file name.
相關文件:   src/os_win32.c

Patch 6.0.269
問題:	    Unprintable characters in a file name may cause problems when
	    using the 'statusline' option or when 'buftype' is "nofile".
解決方案:   call trans_characters() for the resulting statusline. (Yasuhiro
	    Matsumoto)
相關文件:   src/buffer.c, src/screen.c, src/charset.c

Patch 6.0.270 (depends on patch 6.0.267)
問題:	    A tab causes UTF-8 text to be displayed in the wrong position.
	    (Ron Aaron)
解決方案:   Correct utf_char2cells() again.
相關文件:   src/mbyte.c

Patch 6.1a.001 (extra)
問題:	    32bit DOS: copying text to the clipboard may cause a crash.
	    (Jonathan D Johnston)
解決方案:   Don't copy one byte too much in SetClipboardData().
相關文件:   src/os_msdos.c

Patch 6.1a.002
問題:	    GTK: On some configurations, when closing a dialog from the window
	    manager, Vim hangs.
解決方案:   Catch the "destroy" signal. (Aric Blumer)
相關文件:   src/gui_gtk.c

Patch 6.1a.003
問題:	    Multi-byte: With UTF-8 double-wide char and 'virtualedit' set:
	    yanking in Visual mode doesn't include the last byte. (Eric Long)
解決方案:   Don't add a space for a double-wide character.
相關文件:   src/ops.c

Patch 6.1a.004 (extra)
問題:	    MINGW: undefined type. (Ron Aaron)
解決方案:   Make GetCompositionString_inUCS2() static.
相關文件:   src/gui_w32.c, src/gui_w48.c, src/proto/gui_w32.pro

Patch 6.1a.005 (extra)
問題:	    Win32: ":hardcopy" doesn't work after ":hardcopy!". (Jonathan
	    Johnston)
解決方案:   Don't keep the driver context when using ":hardcopy!". (Vince
	    Negri)
相關文件:   src/os_mswin.c

Patch 6.1a.006
問題:	    multi-byte: after setting 'encoding' the window title might be
	    wrong.
解決方案:   Force resetting the title. (Yasuhiro Matsumoto)
相關文件:   src/option.c

Patch 6.1a.007
問題:	    Filetype detection for "*.inc" doesn't work.
解決方案:   Use a ":let" command. (David Schweikert)
相關文件:   runtime/filetype.vim

Patch 6.1a.008 (extra)
問題:	    Win32: ACL detection for network shares doesn't work.
解決方案:   Include the trailing (back)slash in the root path. (Mike Williams)
相關文件:   src/os_win32.c

Patch 6.1a.009
問題:	    When using "\@<=" or "\@<!" in a pattern, a "\1" may refer to a ()
	    part that follows, but it generates an error message.
解決方案:   Allow a forward reference when there is a following "\@<=" or
	    "\@<!".
相關文件:   runtime/doc/pattern.txt, src/regexp.c

Patch 6.1a.010
問題:	    When using ":help" and opening a new window, the alternate file
	    isn't set.
解決方案:   Set the alternate file to the previously edited file.
相關文件:   src/ex_cmds.c

Patch 6.1a.011
問題:	    GTK: ":set co=77", change width with the mouse, ":set co=77"
	    doesn't resize the window. (Darren Hiebert)
解決方案:   Set the form size after handling a resize event.
相關文件:   src/gui_gtk_x11.c

Patch 6.1a.012
問題:	    GTK: The file browser always returns a full path. (Lohner)
解決方案:   Shorten the file name if possible.
相關文件:   src/gui_gtk.c

Patch 6.1a.013
問題:	    When using "=~word" in 'cinkeys' or 'indentkeys', the case of the
	    last character of the word isn't ignored. (Raul Segura Acevedo)
解決方案:   Ignore case when checking the last typed character.
相關文件:   src/edit.c

Patch 6.1a.014
問題:	    After patch 6.1a.006 can't compile without the title feature.
解決方案:   Add an #ifdef.
相關文件:   src/option.c

Patch 6.1a.015
問題:	    MS-Windows: When expanding a file name that contains a '[' or '{'
	    an extra backslash is inserted. (Raul Segura Acevedo)
解決方案:   Avoid adding the backslash.
相關文件:   src/ex_getln.c

Patch 6.1a.016
問題:	    Completion after ":language" doesn't include "time". (Raul Segura
	    Acevedo)
解決方案:   Add the alternative to the completions.
相關文件:   src/ex_cmds2.c

Patch 6.1a.017
問題:	    Clicking the mouse in the top row of a window where the first line
	    doesn't fit moves the cursor to the wrong column.
解決方案:   Add the skipcol also for the top row of a window.
相關文件:   src/ui.c

Patch 6.1a.018
問題:	    When 'scrolloff' is one and the window height is one, "gj" can put
	    the cursor above the window. (Raul Segura Acevedo)
解決方案:   Don't let skipcol become bigger than the cursor column.
相關文件:   src/move.c

Patch 6.1a.019
問題:	    When using a composing character on top of an ASCII character, the
	    "l" command clears the composing character.  Only when 'ruler' and
	    'showcmd' are off. (Raphael Finkel)
解決方案:   Don't move the cursor by displaying characters when there are
	    composing characters.
相關文件:   src/screen.c

Patch 6.1a.020
問題:	    GTK: after patch 6.1a.011 resizing with the mouse doesn't always
	    work well for small sizes. (Adrien Beau)
解決方案:   Use another way to avoid the problem with ":set co=77".
相關文件:   src/gui_gtk_x11.c

Patch 6.1a.021
問題:	    Several Syntax menu entries are wrong or confusing.
解決方案:   Rephrase and correct the menu entries. (Adrien Beau)
相關文件:   runtime/makemenu.vim, runtime/menu.vim

Patch 6.1a.022
問題:	    A tags file might be used twice on case insensitive systems.
	    (Rick Swanton)
解決方案:   Don't use the same file name twice in the default for the 'tags'
	    option.  Ignore case when comparing names of already visited
	    files.
相關文件:   src/misc2.c, src/option.c

Patch 6.1a.023
問題:	    When starting the GUI get "C" characters echoed in the terminal.
解決方案:   Don't try sending a clear-screen command while the GUI is starting
	    up.
相關文件:   src/screen.c

Patch 6.1a.024
問題:	    In other editors CTRL-F is often used for a find dialog.
解決方案:   In evim use CTRL-F for the find dialog.
相關文件:   runtime/evim.vim

Patch 6.1a.025
問題:	    The choices for the fileformat dialog can't be translated.
解決方案:   Add g:menutrans_fileformat_choices. (Adrien Beau)
相關文件:   runtime/menu.vim

Patch 6.1a.026
問題:	    Indenting Java files is wrong with "throws", "extends" and
	    "implements" clauses.
解決方案:   Update the Java indent script.
相關文件:   runtime/indent/java.vim

Patch 6.1a.027
問題:	    A few Syntax menu entries missing or incorrect.
解決方案:   Add and correct the menu entries. (Adrien Beau)
	    Shorten a few menus to avoid they become too long.
相關文件:   runtime/makemenu.vim, runtime/menu.vim

Patch 6.1a.028
問題:	    XIM: problems with feedback and some input methods.
解決方案:   Use iconv for calculating the cells.  Remove the queue for
	    key_press_event only when text was changed. (Yasuhiro Matsumoto)
相關文件:   src/globals.h, src/mbyte.c, src/screen.c

Patch 6.1a.029
問題:	    After patch 6.1a.028 can't compile GTK version with XIM but
	    without multi-byte chars.
解決方案:   Add an #ifdef. (Aschwin Marsman)
相關文件:   src/mbyte.c

Patch 6.1a.030
問題:	    With double-byte encodings toupper() and tolower() may have wrong
	    results.
解決方案:   Skip double-byte characters. (Eric Long)
相關文件:   src/eval.c

Patch 6.1a.031
問題:	    Accessing the 'balloondelay' variable may cause a crash.
解決方案:   Make the variable for 'balloondelay' a long. (Olaf Seibert)
相關文件:   src/option.h

Patch 6.1a.032 (extra)
問題:	    Some menu files used a wrong encoding name for "scriptencoding".
解決方案:   Move the translations to a separate file, which is sourced after
	    setting "scriptencoding".
	    Also add Czech menu translations in ASCII and update the other
	    encodings.
相關文件:   runtime/lang/menu_cs_cz.iso_8859-1.vim,
	    runtime/lang/menu_cs_cz.iso_8859-2.vim,
	    runtime/lang/menu_czech_czech_republic.1250.vim,
	    runtime/lang/menu_czech_czech_republic.1252.vim,
	    runtime/lang/menu_czech_czech_republic.ascii.vim,
	    runtime/lang/menu_de_de.iso_8859-1.vim,
	    runtime/lang/menu_de_de.latin1.vim,
	    runtime/lang/menu_fr_fr.iso_8859-1.vim,
	    runtime/lang/menu_fr_fr.latin1.vim,
	    runtime/lang/menu_french_france.1252.vim,
	    runtime/lang/menu_german_germany.1252.vim,
	    runtime/lang/menu_ja_jp.euc-jp.vim,
	    runtime/lang/menu_ja_jp.utf-8.vim,
	    runtime/lang/menu_japanese_japan.932.vim

Patch 6.1a.033
問題:	    XIM: doesn't reset input context.
解決方案:   call xim_reset() with im_set_active(FALSE). (Takuhiro Nishioka)
相關文件:   src/mbyte.c

Patch 6.1a.034 (extra)
問題:	    Win32: The ACL checks for a readonly file still don't work well.
解決方案:   Remove the ACL checks, go back to how it worked in Vim 6.0.
相關文件:   src/os_win32.c

Patch 6.1a.035
問題:	    multi-byte: When using ":sh" in the GUI, typed and displayed
	    multi-byte characters are not handled correctly.
解決方案:   Deal with multi-byte characters to and from the shell. (Yasuhiro
	    Matsumoto)  Also handle UTF-8 composing characters.
相關文件:   src/os_unix.c

Patch 6.1a.036
問題:	    GTK: the save-yourself event was not handled.
解決方案:   Catch the save-yourself event and preserve swap files. (Neil Bird)
相關文件:   src/gui_gtk_x11.c

Patch 6.1a.037
問題:	    The MS-Windows key mapping doesn't include CTRL-S for saving.
	    (Vlad Sandrini)
解決方案:   Map CTRL-S to ":update".
相關文件:   runtime/mswin.vim

Patch 6.1a.038
問題:	    Solaris: Including both sys/sysctl.h and sys/sysinfo.h doesn't
	    work. (Antonio Colombo)
解決方案:   Don't include sys/sysinfo.h when not calling sysinfo().
相關文件:   src/os_unix.c

Patch 6.1a.039
問題:	    Not all visual basic files are recognized.
解決方案:   Add checks to catch *.ctl files. (Raul Segura Acevedo)
相關文件:   runtime/filetype.vim

Patch 6.1a.040
問題:	    A *.pl file is recognized as Perl, but it could be a prolog file.
解決方案:   Check the first non-empty line. (Kontra Gergely)
相關文件:   runtime/filetype.vim

Patch 6.1a.041
問題:	    When pressing the left mouse button in the command line and them
	    moving the mouse upwards, nearly all the text is selected.
解決方案:   Don't try extending a modeless selection when there isn't one.
相關文件:   src/ui.c

Patch 6.1a.042
問題:	    When merging files, ":diffput" and ":diffget" are used a lot, but
	    they require a lot of typing.
解決方案:   Add "dp" for ":diffput" and "do" for ":diffget".
相關文件:   runtime/doc/diff.txt, src/diff.c, src/normal.c, src/proto/diff.pro


Patch 6.1b.001 (extra)
問題:	    Checking for wildcards in a path does not handle multi-byte
	    characters with a trail byte which is a wildcard.
解決方案:   Handle multi-byte characters correctly. (Muraoka Taro)
相關文件:   src/os_amiga.c, src/os_mac.c, src/os_msdos.c, src/os_mswin.c,
	    src/os_unix.c

Patch 6.1b.002
問題:	    A regexp that ends in "\{" is not flagged as an error.  May cause
	    a stack overflow when 'incsearch' is set. (Gerhard Hochholzer)
解決方案:   Handle a missing "}" as an error.
相關文件:   src/regexp.c

Patch 6.1b.003 (extra)
問題:	    The RISC OS GUI doesn't compile.
解決方案:   Include changes since Vim 5.7. (Andy Wingate)
相關文件:   src/Make_ro.mak, src/gui_riscos.c, src/os_riscos.c,
	    src/os_riscos.h, src/proto/gui_riscos.pro

Patch 6.1b.004
問題:	    col("'>") returns a negative number for linewise selection. (Neil
	    Bird)
解決方案:   Don't add one to MAXCOL.
相關文件:   src/eval.c

Patch 6.1b.005
問題:	    Using a search pattern that causes an out-of-stack error while
	    'hlsearch' is set keeps giving the hit-Enter prompt.
	    A search pattern that takes a long time delays typing when
	    'incsearch' is set.
解決方案:   Stop 'hlsearch' highlighting when the regexp causes an error.
	    Stop searching for 'incsearch' when a character is typed.
相關文件:   src/globals.h, src/message.c, src/screen.c, src/search.c,
	    src/vim.h

Patch 6.1b.006
問題:	    When entering a composing character on the command line with
	    CTRL-V, the text isn't redrawn correctly.
解決方案:   Redraw the text under and after the cursor.
相關文件:   src/ex_getln.c

Patch 6.1b.007
問題:	    When the cursor is in the white space between two sentences, "dis"
	    deletes the first character of the following sentence, "das"
	    deletes a space after the sentence.
解決方案:   Backup the cursor one character in these situations.
相關文件:   src/search.c

Patch 6.1b.008
問題:	    *.xsl files are not recognized as xslt but xml.
	    Monk files are not recognized.
解決方案:   Delete the duplicate line for *.xsl. (Johannes Zellner)
	    Recognize monk files.
相關文件:   runtime/filetype.vim

Patch 6.1b.009
問題:	    Can't always compile small features and then adding eval feature,
	    "sandbox" is undefined. (Axel Kielhorn)
解決方案:   Always define "sandbox" when the eval feature is used.
相關文件:   src/globals.h

Patch 6.1b.010 (extra)
問題:	    When compiling gvimext.cpp with MSVC 4.2 get a number of warnings.
解決方案:   Change "true" to "TRUE". (Walter Briscoe)
相關文件:   GvimExt/gvimext.cpp

Patch 6.1b.011
問題:	    When using a very long string for confirm(), can't quit the
	    displaying at the more prompt. (Hari Krishna Dara)
解決方案:   Jump to the end of the message to show the choices.
相關文件:   src/message.c

Patch 6.1b.012
問題:	    Multi-byte: When 'showbreak' is set and a double-wide character
	    doesn't fit at the right window edge the cursor gets stuck there.
	    Using cursor-left gets stuck when 'virtualedit' is set.  (Eric
	    Long)
解決方案:   Fix the way the extra ">" character is counted when 'showbreak' is
	    set.  Don't correct cursor for virtual editing on a double-wide
	    character.
相關文件:   src/charset.c, src/edit.c

Patch 6.1b.013
問題:	    A user command that partly matches with a buffer-local user
	    command and matches full with a global user command unnecessarily
	    gives an 'ambiguous command' error.
解決方案:   Find the full global match even after a partly local match.
相關文件:   src/ex_docmd.c

Patch 6.1b.014
問題:	    EBCDIC: switching mouse events off causes garbage on screen.
	    Positioning the cursor in the GUI causes garbage.
解決方案:   Insert an ESC in the terminal code. (Ralf Schandl)
	    Use "\b" instead of "\010" for KS_LE.
相關文件:   src/os_unix.c, src/term.c

Patch 6.1b.015
問題:	    Vimtutor has a typo.  Get a warning for "tempfile" if it
	    doesn't exist.
解決方案:   Move a quote to the end of a line. (Max Ischenko)
	    Use "mktemp" first, more systems have it.
相關文件:   src/vimtutor

Patch 6.1b.016
問題:	    GTK: loading a fontset that works partly, Vim might hang or crash.
解決方案:   Avoid that char_width becomes zero. (Yasuhiro Matsumoto)
相關文件:   src/gui_gtk_x11.c

Patch 6.1b.017
問題:	    GUI: When using ":shell" and there is a beep, nothing happens.
解決方案:   Call vim_beep() to produce the beep from the shell. (Yasuhiro
	    Matsumoto)
相關文件:   src/message.c

Patch 6.1b.018 (depends on 6.1b.006)
問題:	    When entering the encryption key, special keys may still reveal
	    the typed characters.
解決方案:   Make sure stars are used or nothing is shown in all cases.
相關文件:   src/digraph.c, src/getchar.c, src/ex_getln.c

Patch 6.1b.019 (depends on 6.1b.005)
問題:	    A search pattern that takes a long time slows down typing when
	    'incsearch' is set.
解決方案:   Pass SEARCH_PEEK to dosearch().
相關文件:   src/ex_getln.c

Patch 6.1b.020
問題:	    When using the matchit plugin, "%" finds a match on the "end" of a
	    ":syntax region" command in Vim scripts.
解決方案:   Skip over ":syntax region" commands by setting b:match_skip.
相關文件:   runtime/ftplugin/vim.vim

Patch 6.1b.021
問題:	    when 'mousefocus' is set, CTRL-W CTRL-] sometimes doesn't warp the
	    pointer to the new window. (Robert Webb)
解決方案:   Don't reset need_mouse_correct when checking the timestamp of a
	    file.
相關文件:   src/fileio.c

Patch 6.1b.022
問題:	    With lots of folds "j" does not obey 'scrolloff' properly.
	    (Srinath Avadhanula)
解決方案:   Go to end of the fold before counting context lines.
相關文件:   src/move.c

Patch 6.1b.023
問題:	    On MS-Windows system() may cause checking timestamps, because Vim
	    loses and gains input focus, while this doesn't happen on Unix.
解決方案:   Don't check timestamps while system() is busy.
相關文件:   src/ex_cmds2.c, src/fileio.c, src/globals.h, src/misc1.c

Patch 6.1b.024 (extra)
問題:	    Gettext 0.11 complains that "sjis" is not a standard name.
解決方案:   Use "cp932" instead.
相關文件:   src/po/sjiscorr.c

Patch 6.1b.025 (extra)
問題:	    Win32: When closing gvim while it is minimized  and has a changed
	    file, the file-changed dialog pops up in a corner of the screen.
解決方案:   Put the dialog in the middle of the screen.
相關文件:   src/gui_w48.c

Patch 6.1b.026
問題:	    When 'diffopt' contains 'iwhite' but not 'icase': differences in
	    case are not highlighted properly. (Gerhard Hochholzer)
解決方案:   Don't ignore case when ignoring white space differences.
相關文件:   src/diff.c

Patch 6.1b.027
問題:	    "vim --remote +" may cause a crash.
解決方案:   Check for missing file name argument. (Martin Kahlert)
相關文件:   src/main.c

Patch 6.1b.028 (extra)
問題:	    Win16: Can't compile after patch 6.1b.025.
解決方案:   Add code specifically for Win16. (Vince Negri)
相關文件:   src/gui_w48.c

Patch 6.1b.029
問題:	    Win32: When a directory on an NTFS partition is read/execute (no
	    delete,modify,write) and the file has modify rights, trying to
	    write the file deletes it.  Making the file read/write/execute
	    (not delete) solves it. (Mark Canup)
解決方案:   Use the Unix code to check for a writable directory.  If not, then
	    make a backup copy and overwrite the file.
相關文件:   src/fileio.c

Patch 6.1b.030 (extra)
問題:	    Mac: small mistake in the build script and prototypes.
解決方案:   Fix the build script and add the prototypes. (Axel Kielhorn)
相關文件:   src/os_mac.build, src/gui_mac.c

Patch 6.1b.031 (extra)
問題:	    Win32 GUI: ":set guifont=*" doesn't set 'guifont' to the resulting
	    font name. (Vlad Sandrini)
解決方案:   Put the code back in gui_mch_init_font() to form the font name out
	    of the logfont.
相關文件:   src/gui_w48.c

Patch 6.1b.032
問題:	    Athena: Setting a color scheme before the GUI has started causes a
	    crash. (Todd Blumer)
解決方案:   Don't try using color names that haven't been set yet.
相關文件:   src/gui_athena.c

Patch 6.1b.033
問題:	    When using a count after a ":s" command may get ml_get errors.
	    (Dietmar Lang)
解決方案:   Check that the resulting range does not go past the end of the
	    buffer.
相關文件:   src/ex_cmds.c

Patch 6.1b.034
問題:	    After sourcing mswin.vim, when using <C-S-Right> after
	    auto-indenting and then <Del>, get warning for allocating
	    ridiculous amount of memory. (Dave Delgreco)
解決方案:   Adjust the start of the Visual area when deleting the auto-indent.
相關文件:   src/edit.c

Patch 6.1b.035
問題:	    When using evim, dropping a file on Vim and then double clicking
	    on a word, it is changed to "i". (Merlin Hansen)
解決方案:   Reset need_start_insertmode after editing the file.
相關文件:   src/ex_docmd.c


==============================================================================
6.2 版 本						*version-6.2*

本小節討論 6.2 和 6.3 版本之間的改進。

這是一個漏洞修正版。也有一些新特性。

主要的新特性:
- 支持 GTK 2。(Daniel Elstner)
- 支持編輯阿拉伯文本。(Nadim Shaikli 和 Isam Bayazidi)
- ":try" 命令和例外處理。(Servatius Brandt)
- 支持 neXtaw GUI 工具集 (非常像 Athena)。(Alexey Froloff)
- Win32 的 Cscope 支持。(Khorev Sergey)
- 支持各種 8 位編碼的 PostScript 打印。(Mike Williams)


改動							*changed-6.2*
-------

刪除 scheme 縮進文件，內部的 Lisp 縮進現在已經很好了。

GvimEXt、OleVim 和 VisVim 目錄移到 "src" 目錄。和 xxd 的處理方式更加一致。

VisVim.dll 文件安裝在頂層目錄，緊靠著 gvimext.dll，而不是在 "VisVim" 子目錄。
修正 NSIS 卸載它時找到錯誤目錄的問題。

刪除 art 縮進文件。它什麼都不做。

submatch() 返回的換行符過去使用 CR 而不是 LF。

Win32 的 makefile 更加統一，也能編譯 gvimext.dll。(Dan Sharp)

'cindent': "//" 註釋和前一行的 "//" 註釋對齊。(Helmut Stiegler)

以前只有 xterm 和相近的終端上跟蹤父窗口組件 (widget) 以尋找標題和圖標文字。現
在對所有的終端模擬器都這麼做。

"%" 匹配時可以識別反斜槓。'cpoptions' 的 'M' 標誌位禁止如此。(Haakon Riiser)

刪除 Turbo C 的 Make_tcc.mak makefile。已經不能用而我們可能也沒有辦法讓它好起
來 (編譯器內存溢出)。

即使文檔說明的是關鍵字，"[ CTRL-D" 過去使用 'isident' 來尋找匹配。現在改為
'iskeyword'。也適用於其它搜索頭文件裡宏定義單詞的命令，包括 ":dsearch"、"[D"
和 "[d"。

使得 'keywordprg' 為全局-局部變量。(Christian Robinson)

缺省打開 Netbeans 接口。反轉 configure 的參數，從 "--enable-netbeans" 到
"--disable-netbeans"。


新增							*added-6.2*
-----

新選項:
	'arabic'
	'arabicshape'
	'ambiwidth'
	'autochdir'
	'casemap'
	'copyindent'
	'cscopequickfix'
	'preserveindent'
	'printencoding'
	'rightleftcmd'
	'termbidi'
	'toolbariconsize'
	'winfixheight'

新鍵盤映射表:
	塞爾維亞語 (Aleksandar Veselinovic)
	中文拼音 (Fredrik Roubert)
	世界語 (Antoine J. Mechelynck)

新語法文件:
	Valgrind (Roger Luethi)
	Smarty template (Manfred Stienstra)
	MySQL (Kenneth Pronovici)
	RockLinux package description (Piotr Esden-Tempski)
	MMIX (Dirk Huesken)
	gkrellmrc (David Necas)
	Tilde (Tobias Rundtrom)
	Logtalk (Paulo Moura)
	PLP (Juerd Waalboer)
	fvwm2m4 (David Necas)
	IPfilter (Hendrik Scholz)
	fstab (Radu Dineiu)
	Quake (Nikolai Weibull)
	Occam (Mario Schweigler)
	lpc (Shizhu Pan)
	Exim conf (David Necas)
	EDIF (Artem Zankovich)
	.cvsrc (Nikolai Weibull)
	.fetchmailrc (Nikolai Weibull)
	GNU gpg (Nikolai Weibull)
	Grub (Nikolai Weibull)
	Modconf (Nikolai Weibull)
	RCS (Dmitry Vasiliev)
	Art (Dorai Sitaram)
	Renderman Interface Bytestream (Andrew J Bromage)
	Mailcap (Doug Kearns)
	Subversion commit file (Dmitry Vasiliev)
	Microsoft IDL (Vadim Zeitlin)
	WildPackets EtherPeek Decoder (Christopher Shinn)
	Spyce (Rimon Barr)
	Resolv.conf (Radu Dineiu)
	A65 (Clemens Kirchgatterer)
	sshconfig 和 sshdconfig (David Necas)
	Cheetah 和 HTMLCheetah (Max Ischenko)
	Packet filter (Camiel Dobbelaar)

新縮進文件:
	Eiffel (David Clarke)
	Tilde (Tobias Rundtrom)
	Occam (Mario Schweigler)
	Art (Dorai Sitaram)
	PHP (Miles Lott)
	Dylan (Brent Fulgham)

新教程翻譯:
	斯洛伐克語 (Lubos Celko)
	希臘語 (Christos Kontas)
	德語 (Joachim Hofmann)
	挪威語 (Øyvind Holm)

新文件類型插件:
	Occam (Mario Schweigler)
	Art (Dorai Sitaram)
	ant.vim、aspvbs.vim、config.vim、csc.vim、csh.vim、dtd.vim、html.vim,
	jsp.vim、pascal.vim、php.vim、sgml.vim、sh.vim、svg.vim、tcsh.vim,
	xhtml.vim、xml.vim、xsd.vim。(Dan Sharp)

新編譯器插件:
	Checkstyle (Doug Kearns)
	g77 (Ralf Wildenhues)
	fortran (Johann-Guenter Simon)
	Xmllint (Doug Kearns)
	Ruby (Tim Hammerquist)
	Modelsim vcom (Paul Baleme)

新菜單翻譯:
	巴西 (葡萄牙) 語 (José de Paula)
	英國英語 (Mike Williams)
	UTF-8 韓語 (Nam SungHyun)
	挪威語 (Øyvind Holm)
	塞爾維亞語 (Aleksandar Jelenak)

挪威語的新消息翻譯。(Øyvind Holm)

新色彩方案:
	desert (Hans Fugal)

阿拉伯專用特性。'arabicshape'、'termbidi'、'arabic' 和 'rightleftcmd' 選項。
(Nadim Shaikli 和 Isam Bayazidi)

支持 neXtaw GUI toolkit，基本類似於 Athena。(Alexey Froloff)

Win32: cscope 支持。(Khorev Sergey)

VMS: 若干文檔和 makefile 的改進。(Zoltan Arpadffy)

探索器插件加入 "x" 鍵: 執行缺省動作。(Yasuhiro Matsumoto)

用 MingW 編譯 gvimext.dll。(Rene de Zwart)

加入 "tohtml.vim" 插件。它定義了 ":TOhtml" 用戶命令，提供把文本轉換為 HTML 的
簡易方法。

加入 ":try" / ":catch" / ":finally" / ":endtry" 命令。加入 E999 編號到所有的錯
誤信息，以便能用編號捕獲它們。(Servatius Brandt)
ex_docmd.c 部分內容移到新的 ex_eval.c 源文件。

加入 GTK+ 2.2.x 的支持 (Daniel Elstner)
加入 "~" 寄存器: 拖放文本。
加入 'toolbariconsize' 選項。
運行 lint 時加入 -Dalloca，處理 alloca() 原型的問題。

在錯誤窗口裡選擇項目用於跳轉時，努力尋找一個普通窗口 (不是預覽窗口) 來顯示該文
件。

支持若干 8 位編碼的 PostScript 打印。(Mike Williams)

inputdialog() 接受第三個參數，取消對話框時使用。可以用來區別取消和什麼都不輸入
的情況。

加入 Aap 構造文件 (recipe)。用於更新 Vim 到最新的版本、編譯和安裝。

'cinoptions' 的 "/" 選項: 註釋行的額外縮進。(Helmut Stiegler)

Vim 變量 "v:register" 和 setreg()、getreg() 和 getregtype() 函數。(Michael
Geddes)

'cpoptions' 的 "v" 標誌位: 插入模式使用退格保留屏幕上的文本。(Phillip Vandry)

Dosinst.exe 也會在 "GvimExt" 目錄裡尋找 gvimext.dll。用於在 "src" 目錄安裝時進
行測試。

支持忽略大小寫的排序方式的標籤文件。(Flemming Madsen)

補全開頭的路徑部分裡的通配符，如 "../*/Makefile" 時，只列出最後一個部分
("Makefile")。支持自定義的命令行補全。(Flemming Madsen)

"rxvt" 也被識別為和 xterm 類似的終端。(Tomas Styblo)

適當的 X11 會話處理。修正流行的桌面系統不使用 WM_SAVE_YOURSELF 事件的問題。
(Neil Bird)
不用於 Gnome 2，它有自己的處理方式。

支持 Borland 3 makefile 的 BOR、DEBUG 和 SPAWNO 參數。(Walter Briscoe)

支持打印時的換頁。'printoptions' 加入 "formfeed" 字段。(Mike Williams)

Mac OSX: 多語言支持: iconv 和 gettext。(Muraoka Taro，Axel Kielhorn)

模式裡的 "\Z" 標誌位: 忽略組合用字符的差異。(Ron Aaron)

加入 'preserveindent' 和 'copyindent' 選項。它們使用已存在的空白字符，而不是盡
可能多地使用製表。(Chris Leishman)

更新 Unicode 表到 Unicode 4.0。(Raphael Finkel)

支持 rxvt 裡的鼠標滾輪。(AIDA Shinra)

Win32: 加入 ":8" 文件名修飾符以得到短文件名。Test50 測試 Win32 系統的 ":8" 擴
展。(Michael Geddes)

'cscopequickfix' 選項: Cscope 命令的 quickfix 窗口。同時清理代碼，給出消息。
(Khorev Sergey)

GUI: 鼠標位置支持多於 222 列。

":stopinsert" 命令: 不回到插入模式。

調試模式的 "interrupt" 命令。用於模擬 CTRL-C。(Servatius Brandt)


修正							*fixed-6.2*
-----

Removed a few unused #defines from config.h.in, os_os2_cfg.h and os_vms_conf.h.

The Vim icons in PNG format didn't have a transparent background. (Greg
Roelofs)

Fixed a large number of spelling mistakes in the docs. (Adri Verhoef)

The #defines for prototype generation were causing trouble.  Changed them to
typedefs.

A new version of libintl.h uses __asm__, which confuses cproto.  Define a
dummy __asm__ macro.

When 'virtualedit' is set can't move to halfway an unprintable character.
Cripples CTRL-V selection. (Taro Muraoka)
Allow moving to halfway an unprintable character.  Don't let getvvcol() change
the pos->coladd argument.

When a tab wraps to the next line, 'listchars' is set and 'foldcolumn' is
non-zero, only one character of the foldcolumn is highlighted. (Muraoka Taro)

When using ":catch" without an argument Vim crashes. (Yasuhiro Matsumoto)
When no argument given use the ".*" pattern.

Win32: When gvim.exe is started from a shortcut with the window style property
set to maximize Vim doesn't start with a maximized window. (Yasuhiro
Matsumoto)  Open the window with the default size and don't call ShowWindow()
again when it's already visible. (Helmut Stiegler)

gui_gtk.c used MAX, but it's undefined to avoid a conflict with system header
files.

Win32: When closing a window from a mapping some pixels remain on the
statusline. (Yasuhiro Matsumoto)

A column number in an errorformat that goes beyond the end of the line may
cause a crash.

":throw 'test'" crashes Vim. (Yasuhiro Matsumoto)

The file selector's scrollbar colors are not set after doing a ":hi Scrollbar
guifg=color".  And the file selector's colors are not changed by the
colorscheme command.  (David Harrison)

Motif: When compiling with FEAT_FOOTER defined, the text area gets a few
pixels extra space on the right.  Remove the special case in
gui_get_base_width(). (David Harrison)

Using CTRL-R CTRL-P in Insert mode puts the '] mark in the wrong position.
(Helmut Stiegler)

When 'formatoptions' includes "awct" a non-comment wasn't auto-formatted.

Using a "--cmd" argument more than 10 times caused a crash.

DEC style mouse support didn't work if the page field is not empty.
(Uribarri)

"vim -l one two" did only set 'lisp' in the first file.  Vi does it for every
file.

":set tw<" didn't work.  Was checking for '^' instead of '<'.

In ":hardcopy > %.ps" the "%" was not expanded to the current filename.

Made ":redraw" also update the Visual area.

When a not implemented command, such as ":perl", has wrong arguments the less
important error was reported, giving the user the idea the command could work.

On non-Unix systems autocommands for writing did not attempt a match with the
short file name, causing a pattern like "a/b" to fail.

VMS: e_screenmode was not defined and a few other fixes for VMS. (Zoltan
Arpadffy)

redraw_msg() depended on FEAT_ARABIC instead of FEAT_RIGHTLEFT. (Walter
Briscoe)

Various changes for the PC Makefiles. (Walter Briscoe)

Use _truename() instead of our own code to expand a file name into a full
path. (Walter Briscoe)

Error in filetype check for /etc/modutils. (Lubomir Host)

Cscope interface: allocated a buffer too small.

Win16: remove a trailing backslash from a path when obtaining the permission
flags. (Vince Negri)

When searching for tags with case ignored Vim could hang.

When searching directories with a stopdir could get a crash.  Did not
re-allocate enough memory. (Vince Negri)

A user command may cause a crash.  Don't use the command index when it's
negative. (Vince Negri)

putenv() didn't work for MingW and Cygwin. (Dan Sharp)

Many functions were common between os_msdos.c and os_win16.c.  Use os_msdos.c
for compiling the Win16 version and remove the functions from os_win16.c.
(Vince Negri)

For terminals that behave like an xterm but didn't have a name that is
recognized, the window title would not always be set.

When syntax highlighting is off ":hardcopy" could still attempt printing
colors.

Crash when using ":catch" without an argument.  (Servatius Brandt)

Win32: ":n #" doubled the backslashes.

Fixed Arabic shaping for the command line. (Nadim Shaikli)

Avoid splitting up a string displayed on the command line into individual
characters, it breaks Arabic shaping.

Updated Cygwin and MingW makefiles to use more dependencies. (Dan Sharp)

2html.vim didn't work with 'nomagic' set.

When a local argument list is used and doing ":only" Vim could crash later.
(Muraoka Taro)

When using "%P" in 'statusline' and the fillchar is "-", a percentage of 3%
could result in "-3%".  Also avoid changing a space inside a filename to the
fill character.

MSwin: Handling of backslashes and double quotes for command line arguments
was not like what other applications do.  (Walter Briscoe)

Test32 sometimes didn't work, because test11.out was written as TEST11.OUT.

Avoid pointer conversions warnings for Borland C 5.5 in dosinst.c and
uninstal.c.

More improvements for Make_bc3.mak file. (Walter Briscoe)

When ":syn sync linebreaks=1" is used, editing the first line caused a redraw
of the whole screen.

Making translated messages didn't work, if_perl.xs wasn't found. (Vlad
Sandrini)

Motif and Athena: moving Vim to the foreground didn't uniconify it.  Use
XMapRaised() instead of XRaiseWindow(). (Srikanth Sankaran)

When using ":ptag" in a window where 'scrollbind' is set the preview window
would also have 'scrollbind' set.  Also reset 'foldcolumn' and 'diff'.

Various commands that split a window took over 'scrollbind', which is hardly
ever desired.  Esp. for "q:" and ":copen".  Mostly reset 'scrollbind' when
splitting a window.

When 'shellslash' is set in the vimrc file the first entry of ":scriptnames"
would still have backslashes.  Entries in the quickfix list could also have
wrong (back)slashes.

Win32: printer dialog texts were not translated. (Yasuhiro Matsumoto)

When using a multi-byte character with a K_SPECIAL byte or a special key code
with "--remote-send" the received byte sequence was mangled.  Put it in the
typeahead buffer instead of the input buffer.

Win32: The cursor position was incorrect after changing cursor shape.
(Yasuhiro Matsumoto).

Win32: When 'encoding' is not the current codepage the title could not be set
to non-ascii characters.

"vim -d scp://machine/file1 scp://machine/file2" did not work, there was only
one window.  Fixed the netrw plugin not to wipe out the buffer if it is
displayed in other windows.

"/$" caused "e" in last column of screen to disappear, a highlighted blank was
displayed instead.

":s/ *\ze\n//e" removed the line break and introduced arbitrary text.  Was
using the line count including what matched after the "\ze".

Using the "c" flag with ":s" changed the behavior when a line break is
replaced and "\@<=" is used.  Without "c" a following match was not found.

":%s/\vA@<=\nB@=//gce" got stuck on "A\nB" when entering "n".

VMS: add HAVE_STRFTIME in the config file. (Zoltan Arpadffy)

When a delete prompts if a delete should continue when yanking is not
possible, restore msg_silent afterwards.

":sign" did not complain about a missing argument.

When adding or deleting a sign 'hlsearch' highlighting could disappear.
Use the generic functions for updating signs.

On MS-Windows NT, 2K and XP don't use command.com but cmd.exe for testing.
Makes the tests work on more systems.

In the DOS tests don't create "/tmp" to avoid an error.

Mac classic: Problems with reading files with CR vs CR/LF.  Rely on the
library version of fgets() to work correctly for Metrowerks 2.2. (Axel
Kielhorn)

When typing a password a "*" was shown for each byte instead of for each
character.  Added multi-byte handling to displaying the stars. (Yasuhiro
Matsumoto)

When using Perl 5.6 accessing $curbuf doesn't work.  Add an #ifdef to use
different code for 5.6 and 5.8.  (Dan Sharp)

MingW and Cygwin: Don't strip the debug executable. (Dan Sharp)

An assignment to a variable with curlies that includes "==" doesn't work.
Skip over the curlies before searching for an "=". (Vince Negri)

When cancelling the selection of alternate matching tags the tag stack index
could be advanced too far, resulting in an error message when using CTRL-T.


Patch 6.1.001
問題:	    When formatting UTF-8 text it might be wrapped at a space that is
	    followed by a composing character. (Raphael Finkel)
	    Also correct a display error for removing a composing char on top
	    of a space.
解決方案:   Check for a composing character on a space.
相關文件:   src/edit.c, src/misc1.c, src/screen.c

Patch 6.1.002 (extra)
問題:	    Win32: after a ":popup" command the mouse pointer stays hidden.
解決方案:   Unhide the mouse pointer before showing the menu.
相關文件:   src/gui_w48.c

Patch 6.1.003
問題:	    When 'laststatus' is zero and there is a vertical split, the
	    vertical separator is drawn in the command line. (Srikant
	    Sankaran)
解決方案:   Don't draw the vertical separator where there is no statusline.
相關文件:   src/screen.c

Patch 6.1.004
問題:	    Unicode 3.2 changes width and composing of a few characters.
	    (Markus Kuhn)
解決方案:   Adjust the Unicode functions for the character width and composing
	    characters.
相關文件:   src/mbyte.c

Patch 6.1.005
問題:	    When using more than 50 items in 'statusline' Vim might crash.
	    (Steve Hall)
解決方案:   Increment itemcnt in check_stl_option(). (Flemming Madsen)
相關文件:   src/option.c

Patch 6.1.006
問題:	    When using "P" in Visual mode to put linewise selected text, the
	    wrong text is deleted. (Jakub Turski)
解決方案:   Put the text before the Visual area and correct the text to be
	    deleted for the inserted lines.
	    Also fix that "p" of linewise text in Visual block mode doesn't
	    work correctly.
相關文件:   src/normal.c, src/ops.c

Patch 6.1.007
問題:	    Using ":filetype plugin off" when filetype plugins were never
	    enabled causes an error message. (Yiu Wing)
解決方案:   Use ":silent!" to avoid the error message.
相關文件:   runtime/ftplugof.vim

Patch 6.1.008
問題:	    The "%" command doesn't ignore \" inside a string, it's seen as
	    the end of the string. (Ken Clark)
解決方案:   Skip a double quote preceded by an odd number of backslashes.
相關文件:   src/search.c

Patch 6.1.009
問題:	    Vim crashes when using a huge number for the maxwid value in a
	    statusline. (Robert M. Nowotniak)
解決方案:   Check for an overflow that makes maxwid negative.
相關文件:   src/buffer.c

Patch 6.1.010
問題:	    Searching backwards for a question mark with "?\?" doesn't work.
	    (Alan Isaac)  Same problem in ":s?\??" and ":g?\??".
解決方案:   Change the "\?" in a pattern to "?" when using "?" as delimiter.
相關文件:   src/ex_cmds.c, src/ex_docmd.c, src/proto/regexp.pro, src/regexp.c,
	    src/search.c, src/syntax.c, src/tag.c

Patch 6.1.011
問題:	    XIM: doesn't work correctly when 'number' is set.  Also, a focus
	    problem when selecting candidates.
解決方案:   Fix the XIM problems. (Yasuhiro Matsumoto)
相關文件:   src/mbyte.c, src/screen.c

Patch 6.1.012
問題:	    A system() call might fail if fread() does CR-LF to LF
	    translation.
解決方案:   Open the output file in binary mode. (Pavol Huhas)
相關文件:   src/misc1.c

Patch 6.1.013
問題:	    Win32: The default for 'printexpr' doesn't work when there are
	    special characters in 'printdevice'.
解決方案:   Add double quotes around the device name. (Mike Williams)
相關文件:   runtime/doc/option.txt, src/option.c

Patch 6.1.014
問題:	    An operator like "r" used in Visual block mode doesn't use
	    'virtualedit' when it's set to "block".
解決方案:   Check for 'virtualedit' being active in Visual block mode when the
	    operator was started.
相關文件:   src/ex_docmd.c, src/globals.h, src/misc2.c, src/normal.c,
	    src/ops.c, src/undo.c

Patch 6.1.015
問題:	    After patch 6.1.014 can't compile with tiny features. (Christian
	    J. Robinson)
解決方案:   Add the missing define of virtual_op.
相關文件:   src/vim.h

Patch 6.1.016 (extra)
問題:	    Win32: Outputting Hebrew or Arabic text might have a problem with
	    reversing.
解決方案:   Replace the RevOut() function with ETO_IGNORELANGUAGE. (Ron Aaron)
相關文件:   src/gui_w32.c

Patch 6.1.017
問題:	    Cygwin: After patch 6.1.012 Still doesn't do binary file I/O.
	    (Pavol Juhas)
解決方案:   Define BINARY_FILE_IO for Cygwin.
相關文件:   src/os_unix.h

Patch 6.1.018
問題:	    Error message when using cterm highlighting. (Leonardo Di Lella)
解決方案:   Remove a backslash before a question mark.
相關文件:   runtime/syntax/cterm.vim

Patch 6.1.019 (extra)
問題:	    Win32: File name is messed up when editing just a drive name.
	    (Walter Briscoe)
解決方案:   Append a NUL after the drive name. (Vince Negri)
相關文件:   src/os_win32.c

Patch 6.1.020
問題:	    col("'>") returns a huge number after using Visual line mode.
解決方案:   Return the length of the line instead.
相關文件:   src/eval.c

Patch 6.1.021 (depends on patch 6.1.009)
問題:	    Vim crashes when using a huge number for the minwid value in a
	    statusline. (Robert M. Nowotniak)
解決方案:   Check for an overflow that makes minwid negative.
相關文件:   src/buffer.c

Patch 6.1.022
問題:	    Grabbing the status line above the command-line window works like
	    the bottom status line was grabbed. (Jim Battle)
解決方案:   Make it possible to grab the status line above the command-line
	    window, so that it can be resized.
相關文件:   src/ui.c

Patch 6.1.023 (extra)
問題:	    VMS: running tests doesn't work properly.
解決方案:   Adjust the makefile. (Zoltan Arpadffy)
相關文件:   src/testdir/Make_vms.mms

Patch 6.1.024
問題:	    When header files use a new syntax for declaring functions, Vim
	    can't figure out missing prototypes properly.
解決方案:   Accept braces around a function name. (M. Warner Losh)
相關文件:   src/osdef.sh

Patch 6.1.025
問題:	    Five messages for "vim --help" don't start with a capital. (Vlad
	    Sandrini)
解決方案:   Make the messages consistent.
相關文件:   src/main.c

Patch 6.1.026
問題:	    *.patch files are not recognized as diff files.  In a script a
	    "VAR=val" argument after "env" isn't ignored.  PHP scripts are not
	    recognized.
解決方案:   Add *.patch for diff filetypes.  Ignore "VAR=val".  Recognize PHP
	    scripts. (Roman Neuhauser)
相關文件:   runtime/filetype.vim, runtime/scripts.vim

Patch 6.1.027
問題:	    When 'foldcolumn' is non-zero, a special character that wraps to
	    the next line disturbs the foldcolumn highlighting.  (Yasuhiro
	    Matsumoto)
解決方案:   Only use the special highlighting when drawing text characters.
相關文件:   src/screen.c

Patch 6.1.028
問題:	    Client-server: When a --remote-expr fails, Vim still exits with
	    status zero.
解決方案:   Exit Vim with a non-zero status to indicate the --remote-expr
	    failed. (Thomas Scott Urban)
相關文件:   src/main.c

Patch 6.1.029
問題:	    When 'encoding' is an 8-bit encoding other than "latin1", editing
	    a utf-8 or other Unicode file uses the wrong conversion. (Jan
	    Fedak)
解決方案:   Don't use Unicode to latin1 conversion for 8-bit encodings other
	    than "latin1".
相關文件:   src/fileio.c

Patch 6.1.030
問題:	    When CTRL-N is mapped in Insert mode, it is also mapped after
	    CTRL-X CTRL-N, while it is not mapped after CTRL-X CTRL-F.
	    (Kontra Gergely)
解決方案:   Don't map CTRL-N after CTRL-X CTRL-N.  Same for CTRL-P.
相關文件:   src/getchar.c

Patch 6.1.031
問題:	    Cygwin: Xxd could read a file in text mode instead of binary mode.
解決方案:   Use "rb" or "rt" when needed. (Pavol Juhas)
相關文件:   src/xxd/xxd.c

Patch 6.1.032
問題:	    Can't specify a quickfix file without jumping to the first error.
解決方案:   Add the ":cgetfile" command. (Yegappan Lakshmanan)
相關文件:   runtime/doc/index.txt, runtime/doc/quickfix.txt, src/ex_cmds.h,
	    src/quickfix.c

Patch 6.1.033
問題:	    GUI: When the selection is lost and the Visual highlighting is
	    changed to underlining, the cursor is left in a different
	    position. (Christian Michon)
解決方案:   Update the cursor position after redrawing the selection.
相關文件:   src/ui.c

Patch 6.1.034
問題:	    A CVS diff file isn't recognized as diff filetype.
解決方案:   Skip lines starting with "? " before checking for an "Index:" line.
相關文件:   runtime/scripts.vim

Patch 6.1.035 (extra, depends on 6.1.016)
問題:	    Win32: Outputting Hebrew or Arabic text might have a problem with
	    reversing on MS-Windows 95/98/ME.
解決方案:   Restore the RevOut() function and use it in specific situations
	    only. (Ron Aaron)
相關文件:   src/gui_w32.c

Patch 6.1.036
問題:	    This command may cause a crash: ":v/./,//-j". (Ralf Arens)
解決方案:   Compute the right length of the regexp when it's empty.
相關文件:   src/search.c

Patch 6.1.037
問題:	    When 'lazyredraw' is set, pressing "q" at the hit-enter prompt
	    causes an incomplete redraw and the cursor isn't positioned.
	    (Lubomir Host)
解決方案:   Overrule 'lazyredraw' when do_redraw is set.
相關文件:   src/main.c, src/screen.c

Patch 6.1.038
問題:	    Multi-byte: When a ":s" command contains a multi-byte character
	    where the trail byte is '~' the text is messed up.
解決方案:   Properly skip multi-byte characters in regtilde() (Muraoka Taro)
相關文件:   src/regexp.c

Patch 6.1.039
問題:	    When folds are defined and the file is changed outside of Vim,
	    reloading the file doesn't update the folds. (Anders
	    Schack-Nielsen)
解決方案:   Recompute the folds after reloading the file.
相關文件:   src/fileio.c

Patch 6.1.040
問題:	    When changing directory for expanding a file name fails there is
	    no error message.
解決方案:   Give an error message for this situation.  Don't change directory
	    if we can't return to the original directory.
相關文件:   src/diff.c, src/ex_docmd.c, src/globals.h, src/misc1.c,
	    src/os_unix.c

Patch 6.1.041
問題:	    ":mkvimrc" doesn't handle a mapping that has a leading space in
	    the rhs. (Davyd Ondrejko)
解決方案:   Insert a CTRL-V before the leading space.  Also display leading
	    and trailing white space in <> form.
相關文件:   src/getchar.c, src/message.c

Patch 6.1.042
問題:	    "vim -r" doesn't show all matches when 'wildignore' removes swap
	    files. (Steve Talley)
解決方案:   Keep all matching swap file names.
相關文件:   src/memline.c

Patch 6.1.043
問題:	    After patch 6.1.040 a few warnings are produced.
解決方案:   Add a type cast to "char *" for mch_chdir(). (Axel Kielhorn)
相關文件:   src/diff.c, src/ex_docmd.c.c, src/misc1.c, src/os_unix.c

Patch 6.1.044 (extra)
問題:	    GUI: When using the find/replace dialog with text that contains a
	    slash, an invalid substitute command is generated.
	    On Win32 a find doesn't work when 'insertmode' is set.
解決方案:   Escape slashes with a backslash.
	    Make the Win32, Motif and GTK gui use common code for the
	    find/replace dialog.
	    Add the "match case" option for Motif and GTK.
相關文件:   src/feature.h, src/proto/gui.pro, src/gui.c, src/gui.h,
	    src/gui_motif.c, src/gui_gtk.c, src/gui_w48.c

Patch 6.1.045
問題:	    In Visual mode, with lots of folds and 'scrolloff' set to 999,
	    moving the cursor down near the end of the file causes the text to
	    jump up and down. (Lubomir Host)
解決方案:   Take into account that the cursor may be on the last line of a
	    closed fold.
相關文件:   src/move.c

Patch 6.1.046
問題:	    X11 GUI: ":set lsp=2 gcr=n-v-i:hor1-blinkon0" draws a black
	    rectangle.  ":set lsp=2 gcr=n-v-i:hor10-blinkon0" makes the cursor
	    disappear.  (Nam SungHyun)
解決方案:   Correctly compute the height of the horizontal cursor.
相關文件:   src/gui_gtk_x11.c, src/gui_x11.c

Patch 6.1.047
問題:	    When skipping commands after an error was encountered, expressions
	    for ":if", ";elseif" and ":while" are still evaluated.
解決方案:   Skip the expression after an error. (Servatius Brandt)
相關文件:   src/ex_docmd.c

Patch 6.1.048
問題:	    Unicode 3.2 changes were missing a few Hangul Jamo characters.
解決方案:   Recognize more characters as composing characters. (Jungshik Shin)
相關文件:   src/mbyte.c

Patch 6.1.049 (extra)
問題:	    On a 32 bit display a valid color may cause an error message,
	    because its pixel value is negative. (Chris Paulson-Ellis)
解決方案:   Check for -11111 instead of the color being negative.
	    Don't add one to the pixel value, -1 may be used for white.
相關文件:   src/globals.h, src/gui.c, src/gui.h, src/gui_amiga.c,
	    src/gui_athena.c, src/gui_beos.cc, src/gui_gtk_x11.c,
	    src/gui_mac.c, src/gui_motif.c, src/gui_photon.c,
	    src/gui_riscos.c, src/gui_w16.c, src/gui_w32.c, src/gui_w48.c,
	    src/gui_x11.c, src/mbyte.c, src/syntax.c

Patch 6.1.050 (depends on 6.1.049)
問題:	    After patch 6.1.049 the non-GUI version doesn't compile.
解決方案:   Add an #ifdef FEAT_GUI.  (Robert Stanton)
相關文件:   src/syntax.c

Patch 6.1.051 (depends on 6.1.044)
問題:	    Doesn't compile with GUI and small features.
解決方案:   Adjust the #if for ga_append().
相關文件:   src/misc2.c

Patch 6.1.052
問題:	    Unix: The executable() function doesn't work when the "which"
	    command isn't available.
解決方案:   Go through $PATH manually.  Also makes it work for VMS.
相關文件:   src/os_unix.c

Patch 6.1.053
問題:	    When 'sessionoptions' contains "globals", or "localoptions" and an
	    option value contains a line break, the resulting script is wrong.
解決方案:   Use "\n" and "\r" for a line break. (Srinath Avadhanula)
相關文件:   src/eval.c

Patch 6.1.054
問題:	    GUI: A mouse click is not recognized at the more prompt, even when
	    'mouse' includes 'r'.
解決方案:   Recognize a mouse click at the more prompt.
	    Also accept a mouse click in the last line in the GUI.
	    Add "ml" entry in 'mouseshape'.
相關文件:   src/gui.c, src/message.c, src/misc1.c, src/misc2.c, src/option.c,
	    src/structs.h

Patch 6.1.055
問題:	    When editing a compressed file, Vim will inspect the contents to
	    guess the filetype.
解決方案:   Don't source scripts.vim for .Z, .gz, .bz2, .zip and .tgz files.
相關文件:   runtime/filetype.vim, runtime/plugin/gzip.vim

Patch 6.1.056
問題:	    Loading the Syntax menu can take quite a bit of time.
解決方案:   Add the "skip_syntax_sel_menu" variable.  When it's defined the
	    available syntax files are not in the Syntax menu.
相關文件:   runtime/doc/gui.txt, runtime/menu.vim

Patch 6.1.057
問題:	    An ESC inside a mapping doesn't work as documented when
	    'insertmode' is set, it does go from Visual or Normal mode to
	    Insert mode. (Benji Fisher)
解決方案:   Make it work as documented.
相關文件:   src/normal.c

Patch 6.1.058
問題:	    When there is a closed fold just above the first line in the
	    window, using CTRL-X CTRL-Y in Insert mode will show only one line
	    of the fold. (Alexey Marinichev)
解決方案:   Correct the topline by putting it at the start of the fold.
相關文件:   src/move.c

Patch 6.1.059
問題:	    ":redir > ~/file" doesn't work. (Stephen Rasku)
解決方案:   Expand environment variables in the ":redir >" argument.
相關文件:   src/ex_docmd.c

Patch 6.1.060
問題:	    When 'virtualedit' is set and 'selection' is "exclusive", deleting
	    a character just before a tab changes the tab into spaces.  Undo
	    doesn't restore the tab. (Helmut Stiegler)
解決方案:   Don't replace the tab by spaces when it's not needed.  Correctly
	    save the line before it's changed.
相關文件:   src/ops.c

Patch 6.1.061
問題:	    When 'virtualedit' is set and 'selection' is "exclusive", a Visual
	    selection that ends just after a tab doesn't include that tab in
	    the highlighting.  (Helmut Stiegler)
解決方案:   Use a different way to exclude the character under the cursor.
相關文件:   src/screen.c

Patch 6.1.062
問題:	    The "man" filetype plugin doesn't work properly on Solaris 5.
解決方案:   Use a different way to detect that "man -s" should be used. (Hugh
	    Sasse)
相關文件:   runtime/ftplugin/man.vim

Patch 6.1.063
問題:	    Java indenting doesn't work properly.
解決方案:   Ignore comments when checking if the indent doesn't increase after
	    a "}".
相關文件:   runtime/indent/java.vim

Patch 6.1.064
問題:	    The URLs that the netrw plugin recognized for ftp and rcp did not
	    conform to the standard method://[user@]host[:port]/path.
解決方案:   Use ftp://[user@]host[[:#]port]/path, which supports both the new
	    and the previous style.  Also added a bit of dav/cadaver support.
	    (Charles Campbell)
相關文件:   runtime/plugin/netrw.vim

Patch 6.1.065
問題:	    VMS: The colorscheme, keymap and compiler menus are not filled in.
解決方案:   Ignore case when looking for ".vim" files. (Coen Engelbarts)
相關文件:   runtime/menu.vim

Patch 6.1.066 (extra)
問題:	    When calling system() in a plugin reading stdin hangs.
解決方案:   Don't set the terminal to RAW mode when it wasn't in RAW mode
	    before the system() call.
相關文件:   src/os_amiga.c, src/os_msdos.c, src/os_riscos.c, src/os_unix.c,
	    src/os_win16.c, src/os_win32.c

Patch 6.1.067
問題:	    ":set viminfo+=f0" is not working. (Benji Fisher)
解決方案:   Check the "f" flag instead of "'" in 'viminfo'.
相關文件:   src/mark.c

Patch 6.1.068
問題:	    When a file is reloaded after it was changed outside of Vim, diff
	    mode isn't updated. (Michael Naumann)
解決方案:   Invalidate the diff info so that it's updated when needed.
相關文件:   src/fileio.c

Patch 6.1.069
問題:	    When 'showmatch' is set and "$" is in 'cpoptions', using
	    "C}<Esc>" may forget to remove the "$". (Preben Guldberg)
解決方案:   Restore dollar_vcol after displaying the matching cursor position.
相關文件:   src/search.c

Patch 6.1.070 (depends on 6.1.060)
問題:	    Compiler warning for signed/unsigned mismatch. (Mike Williams)
解決方案:   Add a typecast to int.
相關文件:   src/ops.c

Patch 6.1.071
問題:	    When 'selection' is exclusive, g CTRL-G in Visual mode counts one
	    character too much. (David Necas)
解決方案:   Subtract one from the end position.
相關文件:   src/ops.c

Patch 6.1.072
問題:	    When a file name in a tags file starts with http:// or something
	    else for which there is a BufReadCmd autocommand, the file isn't
	    opened anyway.
解決方案:   Check if there is a matching BufReadCmd autocommand and try to
	    open the file.
相關文件:   src/fileio.c, src/proto/fileio.pro, src/tag.c

Patch 6.1.073 (extra)
問題:	    BC5: Can't easily specify a tiny, small, normal, big or huge
	    version.
解決方案:   Allow selecting the version with the FEATURES variable. (Ajit
	    Thakkar)
相關文件:   src/Make_bc5.mak

Patch 6.1.074
問題:	    When 'cdpath' includes "../..", changing to a directory in which
	    we currently already are doesn't work.  ff_check_visited() adds
	    the directory both when using it as the root for searching and for
	    the actual matches. (Stephen Rasku)
解決方案:   Use a separate list for the already searched directories.
相關文件:   src/misc2.c

Patch 6.1.075 (depends on 6.1.072)
問題:	    Can't compile fileio.c on MS-Windows.
解決方案:   Add a declaration for the "p" pointer. (Madoka Machitani)
相關文件:   src/fileio.c

Patch 6.1.076 (extra)
問題:	    Macintosh: explorer plugin doesn't work on Mac Classic.
	    IME doesn't work.  Dialog boxes don't work on Mac OS X
解決方案:   Fix explorer plugin and key modifiers. (Axel Kielhorn)
	    Fix IME support. (Muraoka Taro)
	    Disable dialog boxes. (Benji Fisher)
相關文件:   src/edit.c, src/feature.h, src/gui_mac.c, src/os_mac.c

Patch 6.1.077
問題:	    On a Debian system with ACL linking fails. (Lubomir Host)
解決方案:   When the "acl" library is used, check if the "attr" library is
	    present and use it.
相關文件:   src/auto/configure, src/configure.in, src/link.sh

Patch 6.1.078
問題:	    When using 'foldmethod' "marker" and the end marker appears before
	    the start marker in the file, no fold is found. (Nazri Ramliy)
解決方案:   Don't let the fold depth go negative.
相關文件:   src/fold.c

Patch 6.1.079
問題:	    When using "s" in Visual block mode with 'virtualedit' set, when
	    the selected block is after the end of some lines the wrong text
	    is inserted and some lines are skipped. (Servatius Brandt)
解決方案:   Insert the right text and extend short lines.
相關文件:   src/ops.c

Patch 6.1.080
問題:	    When using gcc with /usr/local already in the search path, adding
	    it again causes problems.
解決方案:   Adjust configure.in to avoid adding /usr/local/include and
	    /usr/local/lib when using GCC and they are already used. (Johannes
	    Zellner)
相關文件:   src/auto/configure, src/configure.in

Patch 6.1.081
問題:	    ":help CTRL-\_CTRL-N" doesn't work.  (Christian J. Robinson)
解決方案:   Double the backslash to avoid the special meaning of "\_".
相關文件:   src/ex_cmds.c

Patch 6.1.082
問題:	    On MS-Windows the vimrc_example.vim script is sourced and then
	    mswin.vim.  This enables using select mode, but since "p" is
	    mapped it doesn't replace the selection.
解決方案:   Remove the mapping of "p" from vimrc_example.vim, it's obsolete.
	    (Vlad Sandrini)
相關文件:   runtime/vimrc_example.vim

Patch 6.1.083
問題:	    When $LANG is "sk" or "sk_sk", the Slovak menu file isn't found.
	    (Martin Lacko)
解決方案:   Guess the right menu file based on the system.
相關文件:   runtime/lang/menu_sk_sk.vim

Patch 6.1.084 (depends on 6.1.080)
問題:	    "include" and "lib" are mixed up when checking the directories gcc
	    already searches.
解決方案:   Swap the variable names. (SunHo Kim)
相關文件:   src/auto/configure, src/configure.in

Patch 6.1.085
問題:	    When using CTRL-O CTRL-\ CTRL-N from Insert mode, the displayed
	    mode "(insert)" isn't removed. (Benji Fisher)
解決方案:   Clear the command line.
相關文件:   src/normal.c

Patch 6.1.086 (depends on 6.1.049)
問題:	    The guifg color for CursorIM doesn't take effect.
解決方案:   Use the foreground color when it's defined. (Muraoka Taro)
相關文件:   src/gui.c

Patch 6.1.087
問題:	    A thesaurus with Japanese characters has problems with characters
	    in different word classes.
解決方案:   Only separate words with single-byte non-word characters.
	    (Muraoka Taro)
相關文件:   src/edit.c

Patch 6.1.088 (extra)
問題:	    Win32: no debugging info is generated.  Tags file excludes .cpp
	    files.
解決方案:   Add "/map" to compiler flags.  Add "*.cpp" to ctags command.
	    (Muraoka Taro)
相關文件:   src/Make_mvc.mak

Patch 6.1.089
問題:	    On BSDI systems there is no ss_sp field in stack_t. (Robert Jan)
解決方案:   Use ss_base instead.
相關文件:   src/auto/configure, src/configure.in, src/config.h.in,
	    src/os_unix.c

Patch 6.1.090
問題:	    CTRL-F gets stuck when 'scrolloff' is non-zero and there is a mix
	    of long wrapping lines and a non-wrapping line.
解決方案:   Check that CTRL-F scrolls at least one line.
相關文件:   src/move.c

Patch 6.1.091
問題:	    GTK: Can't change preeditstate without setting 'imactivatekey'.
解決方案:   Add some code to change preeditstate for OnTheSpot. (Yasuhiro
	    Matsumoto)
相關文件:   src/mbyte.c

Patch 6.1.092
問題:	    ":mapclear <buffer>" doesn't work. (Srikanth Adayapalam)
解決方案:   Allow an argument for ":mapclear".
相關文件:   src/ex_cmds.h

Patch 6.1.093 (extra)
問題:	    Mac and MS-Windows GUI: when scrolling while ":s" is working the
	    results can be messed up, because the cursor is moved.
解決方案:   Disallow direct scrolling when not waiting for a character.
相關文件:   src/gui_mac.c, src/gui_w16.c, src/gui_w32.c, src/gui_w48.c

Patch 6.1.094
問題:	    Cygwin: Passing a file name that has backslashes isn't handled
	    very well.
解決方案:   Convert file name arguments to Posix.  (Chris Metcalf)
相關文件:   src/main.c

Patch 6.1.095
問題:	    When using signs can free an item on the stack.
	    Overruling sign colors doesn't work. (Srikanth Sankaran)
解決方案:   Don't free the item on the stack.  Use NULL instead of "none" for
	    the value of the color.
相關文件:   src/gui_x11.c

Patch 6.1.096
問題:	    When erasing the right halve of a double-byte character, it may
	    cause further characters to be erased. (Yasuhiro Matsumoto)
解決方案:   Make sure only one character is erased.
相關文件:   src/screen.c

Patch 6.1.097 (depends on 6.1.090)
問題:	    When 'scrolloff' is set to a huge value, CTRL-F at the end of the
	    file scrolls one line. (Lubomir Host)
解決方案:   Don't scroll when CTRL-F detects the end-of-file.
相關文件:   src/move.c

Patch 6.1.098
問題:	    MS-Windows: When the xxd program is under "c:\program files" the
	    "Convert to Hex" menu doesn't work. (Brian Mathis)
解決方案:   Put the path to xxd in double quotes.
相關文件:   runtime/menu.vim

Patch 6.1.099
問題:	    Memory corrupted when closing a fold with more than 99999 lines.
解決方案:   Allocate more space for the fold text. (Walter Briscoe)
相關文件:   src/eval.c

Patch 6.1.100 (extra, depends on 6.1.088)
問題:	    Win32: VC5 and earlier don't support the /mapinfo option.
解決方案:   Add "/mapinfo" only when "MAP=lines" is specified. (Muraoka Taro)
相關文件:   src/Make_mvc.mak

Patch 6.1.101
問題:	    After using ":options" the tabstop of a new window is 15.  Entry
	    in ":options" window for 'autowriteall' is wrong. (Antoine J
	    Mechelynck)  Can't insert a space in an option value.
解決方案:   Use ":setlocal" instead of ":set".  Change "aw" to "awa".
	    Don't map space in Insert mode.
相關文件:   runtime/optwin.vim

Patch 6.1.102
問題:	    Unprintable and multi-byte characters in a statusline item are not
	    truncated correctly. (Yasuhiro Matsumoto)
解決方案:   Count the width of characters instead of the number of bytes.
相關文件:   src/buffer.c

Patch 6.1.103
問題:	    A function returning from a while loop, with 'verbose' set to 12
	    or higher, doesn't mention the return value.  A function with the
	    'abort' attribute may return -1 while the verbose message says
	    something else.
解決方案:   Move the verbose message about returning from a function to
	    call_func(). (Servatius Brandt)
相關文件:   src/eval.c

Patch 6.1.104
問題:	    GCC 3.1 appears to have an optimizer problem that makes test 3
	    crash.
解決方案:   For GCC 3.1 add -fno-strength-reduce to avoid the optimizer bug.
	    Filter out extra info from "gcc --version".
相關文件:   src/auto/configure, src/configure.in

Patch 6.1.105
問題:	    Win32: The default for 'shellpipe' doesn't redirect stderr. (Dion
	    Nicolaas)
解決方案:   Redirect stderr, depending on the shell (like for 'shellredir').
相關文件:   src/option.c

Patch 6.1.106
問題:	    The maze program crashes.
解決方案:   Change "11" to "27" and it works. (Greg Roelofs)
相關文件:   runtime/macros/maze/mazeansi.c

Patch 6.1.107
問題:	    When 'list' is set the current line in the error window may be
	    displayed wrong. (Muraoka Taro)
解決方案:   Don't continue the line after the $ has been displayed and the
	    rightmost column is reached.
相關文件:   src/screen.c

Patch 6.1.108
問題:	    When interrupting a filter command such as "!!sleep 20" the file
	    becomes read-only. (Mark Brader)
解決方案:   Only set the read-only flag when opening a buffer is interrupted.
	    When the shell command was interrupted, read the output that was
	    produced so far.
相關文件:   src/ex_cmds.c, src/fileio.c

Patch 6.1.109
問題:	    When 'eadirection' is "hor", using CTRL-W = doesn't equalize the
	    window heights. (Roman Neuhauser)
解決方案:   Ignore 'eadirection' for CTRL-W =
相關文件:   src/window.c

Patch 6.1.110
問題:	    When using ":badd file" when "file" is already present but not
	    listed, it stays unlisted. (David Frey)
解決方案:   Set 'buflisted'.
相關文件:   src/buffer.c

Patch 6.1.111
問題:	    It's not possible to detect using the Unix sources on Win32 or Mac.
解決方案:   Add has("macunix") and has("win32unix").
相關文件:   runtime/doc/eval.txt, src/eval.c

Patch 6.1.112
問題:	    When using ":argdo", ":bufdo" or ":windo", CTRL-O doesn't go to
	    the cursor position from before this command but every position
	    where the argument was executed.
解決方案:   Only remember the cursor position from before the ":argdo",
	    ":bufdo" and ":windo".
相關文件:   src/ex_cmds2.c, src/mark.c

Patch 6.1.113
問題:	    ":bufdo bwipe" only wipes out half the buffers.  (Roman Neuhauser)
解決方案:   Decide what buffer to go to next before executing the command.
相關文件:   src/ex_cmds2.c

Patch 6.1.114
問題:	    ":python import vim", ":python vim.current.buffer[0:0] = []" gives
	    a lalloc(0) error. (Chris Southern)
解決方案:   Don't allocate an array when it's size is zero.
相關文件:   src/if_python.c

Patch 6.1.115
問題:	    "das" on the white space at the end of a paragraph does not delete
	    the "." the sentence ends with.
解決方案:   Don't exclude the last character when it is not white space.
相關文件:   src/search.c

Patch 6.1.116
問題:	    When 'endofline' is changed while 'binary' is set a file should be
	    considered modified. (Olaf Buddenhagen)
解決方案:   Remember the 'eol' value when editing started and consider the
	    file changed when the current value is different and 'binary' is
	    set.  Also fix that the window title isn't updated when 'ff' or
	    'bin' changes.
相關文件:   src/option.c, src/structs.h

Patch 6.1.117
問題:	    Small problem with editing a file over ftp: and with Cygwin.
解決方案:   Remove a dot from a ":normal" command.  Use "cygdrive" where
	    appropriate.  (Charles Campbell)
相關文件:   runtime/plugin/netrw.vim

Patch 6.1.118
問題:	    When a file in diff mode is reloaded because it changed outside
	    of Vim, other windows in diff mode are not always updated.
	    (Michael Naumann)
解決方案:   After reloading a file in diff mode mark all windows in diff mode
	    for redraw.
相關文件:   src/diff.c

Patch 6.1.119 (extra)
問題:	    With the Sniff interface, using Sniff 4.0.X on HP-UX, there may be
	    a crash when connecting to Sniff.
解決方案:   Initialize sniff_rq_sep such that its value can be changed.
	    (Martin Egloff)
相關文件:   src/if_sniff.c

Patch 6.1.120 (depends on 6.1.097)
問題:	    When 'scrolloff' is non-zero and there are folds, CTRL-F at the
	    end of the file scrolls part of a closed fold.  (Lubomir Host)
解決方案:   Adjust the first line to the start of a fold.
相關文件:   src/move.c

Patch 6.1.121 (depends on 6.1.098)
問題:	    When starting Select mode from Insert mode, then using the Paste
	    menu entry, the cursor is left before the last pasted character.
	    (Mario Schweigler)
解決方案:   Set the cursor for Insert mode one character to the right.
相關文件:   runtime/menu.vim

Patch 6.1.122
問題:	    ":file name" creates a new buffer to hold the old buffer name,
	    which becomes the alternate file.  This buffer is unexpectedly
	    listed.
解決方案:   Create the buffer for the alternate name unlisted.
相關文件:   src/ex_cmds.c

Patch 6.1.123
問題:	    A ":match" command with more than one argument doesn't report an
	    error.
解決方案:   Check for extra characters. (Servatius Brandt)
相關文件:   src/ex_docmd.c

Patch 6.1.124
問題:	    When trying to exit and there is a hidden buffer that had 'eol'
	    off and 'bin' set exiting isn't possible. (John McGowan)
解決方案:   Set b_start_eol when clearing the buffer.
相關文件:   src/buffer.c

Patch 6.1.125
問題:	    Explorer plugin asks for saving a modified buffer even when it's
	    open in another window as well.
解決方案:   Count the number of windows using the buffer.
相關文件:   runtime/plugin/explorer.vim

Patch 6.1.126
問題:	    Adding the choices in the syntax menu is consuming much of the
	    startup time of the GUI while it's not often used.
解決方案:   Only add the choices when the user wants to use them.
相關文件:   Makefile, runtime/makemenu.vim, runtime/menu.vim,
	    runtime/synmenu.vim, src/Makefile

Patch 6.1.127
問題:	    When using "--remote file" and the server has 'insertmode' set,
	    commands are inserted instead of being executed. (Niklas Volbers)
解決方案:   Go to Normal mode again after the ":drop" command.
相關文件:   src/main.c

Patch 6.1.128
問題:	    The expression "input('very long prompt')" puts the cursor in the
	    wrong line (column is OK).
解決方案:   Add the wrapped lines to the indent. (Yasuhiro Matsumoto)
相關文件:   src/ex_getln.c

Patch 6.1.129
問題:	    On Solaris editing "file/" and then "file" results in using the
	    same buffer.  (Jim Battle)
解決方案:   Before using stat(), check that there is no illegal trailing
	    slash.
相關文件:   src/auto/configure, src/config.h.in, src/configure.in,
	    src/macros.h src/misc2.c, src/proto/misc2.pro

Patch 6.1.130
問題:	    The documentation for some of the 'errorformat' items is unclear.
解決方案:   Add more examples and explain hard to understand items. (Stefan
	    Roemer)
相關文件:   runtime/doc/quickfix.txt

Patch 6.1.131
問題:	    X11 GUI: when expanding a CSI byte in the input stream to K_CSI,
	    the CSI byte itself isn't copied.
解決方案:   Copy the CSI byte.
相關文件:   src/gui_x11.c

Patch 6.1.132
問題:	    Executing a register in Ex mode may cause commands to be skipped.
	    (John McGowan)
解決方案:   In Ex mode use an extra check if the register contents was
	    consumed, to avoid input goes into the typeahead buffer.
相關文件:   src/ex_docmd.c

Patch 6.1.133
問題:	    When drawing double-wide characters in the statusline, may clear
	    half of a character. (Yasuhiro Matsumoto)
解決方案:   Force redraw of the next character by setting the attributes
	    instead of putting a NUL in ScreenLines[].  Do put a NUL in
	    ScreenLines[] when overwriting half of a double-wide character.
相關文件:   src/screen.c

Patch 6.1.134
問題:	    An error for a trailing argument of ":match" should not be given
	    after ":if 0". (Servatius Brandt)
解決方案:   Only do the check when executing commands.
相關文件:   src/ex_docmd.c

Patch 6.1.135
問題:	    Passing a command to the shell that includes a newline always has
	    a backslash before the newline.
解決方案:   Remove one backslash before the newline.  (Servatius Brandt)
相關文件:   src/ex_docmd.c

Patch 6.1.136
問題:	    When $TERM is "linux" the default for 'background' is "dark", even
	    though the GUI uses a light background. (Hugh Allen)
解決方案:   Don't mark the option as set when defaulting to "dark" for the
	    linux console.  Also reset 'background' to "light" when the GUI
	    has a light background.
相關文件:   src/option.c

Patch 6.1.137
問題:	    Converting to HTML has a clumsy way of dealing with tabs which may
	    change the highlighting.
解決方案:   Replace tabs with spaces after converting a line to HTML. (Preben
	    Guldberg)
相關文件:   runtime/syntax/2html.vim

Patch 6.1.138 (depends on 6.1.126)
問題:	    Adding extra items to the Syntax menu can't be done when the "Show
	    individual choices" menu is used.
解決方案:   Use ":runtime!" instead of ":source", so that all synmenu.vim
	    files in the runtime path are loaded. (Servatius Brandt)
	    Also fix that a translated menu can't be removed.
相關文件:   runtime/menu.vim

Patch 6.1.139
問題:	    Cygwin: PATH_MAX is not defined.
解決方案:   Include limits.h. (Dan Sharp)
相關文件:   src/main.c

Patch 6.1.140
問題:	    Cygwin: ":args `ls *.c`" does not work if the shell command
	    produces CR NL line separators.
解決方案:   Remove the CR characters ourselves. (Pavol Juhas)
相關文件:   src/os_unix.c

Patch 6.1.141
問題:	    ":wincmd gx" may cause problems when mixed with other commands.
	    ":wincmd c" doesn't close the window immediately. (Benji Fisher)
解決方案:   Pass the extra command character directly instead of using the
	    stuff buffer and call ex_close() directly.
相關文件:   src/ex_docmd.c, src/normal.c, src/proto/normal.pro,
	    src/proto/window.pro, src/window.c

Patch 6.1.142
問題:	    Defining paragraphs without a separating blank line isn't
	    possible.  Paragraphs can't be formatted automatically.
解決方案:   Allow defining paragraphs with lines that end in white space.
	    Added the 'w' and 'a' flags in 'formatoptions'.
相關文件:   runtime/doc/change.txt, src/edit.c, src/misc1.c, src/normal.c,
	    src/option.h, src/ops.c, src/proto/edit.pro, src/proto/ops.pro,
	    src/vim.h

Patch 6.1.143 (depends on 6.1.142)
問題:	    Auto formatting near the end of the file moves the cursor to a
	    wrong position.  In Insert mode some lines are made one char too
	    narrow.  When deleting a line undo might not always work properly.
解決方案:   Don't always move to the end of the line in the last line.  Don't
	    position the cursor past the end of the line in Insert mode.
	    After deleting a line save the cursor line for undo.
相關文件:   src/edit.c, src/ops.c, src/normal.c

Patch 6.1.144
問題:	    Obtaining the size of a line in screen characters can be wrong.
	    A pointer may wrap around zero.
解決方案:   In win_linetabsize() check for a MAXCOL length argument. (Jim
	    Dunleavy)
相關文件:   src/charset.c

Patch 6.1.145
問題:	    GTK: Drag&drop with more than 3 files may cause a crash. (Mickael
	    Marchand)
解決方案:   Rewrite the code that parses the received list of files to be more
	    robust.
相關文件:   src/charset.c, src/gui_gtk_x11.c

Patch 6.1.146
問題:	    MS-Windows: When $HOME is constructed from $HOMEDRIVE and
	    $HOMEPATH, it is not used for storing the _viminfo file.  (Normal
	    Diamond)
解決方案:   Set $HOME with the value obtained from $HOMEDRIVE and $HOMEPATH.
相關文件:   src/misc1.c

Patch 6.1.147 (extra)
問題:	    MS-Windows: When a dialog has no default button, pressing Enter
	    ends it anyway and all buttons are selected.
解決方案:   Don't end a dialog when there is no default button.  Don't select
	    all button when there is no default. (Vince Negri)
相關文件:   src/gui_w32.c

Patch 6.1.148 (extra)
問題:	    MS-Windows: ACL is not properly supported.
解決方案:   Add an access() replacement that also works for ACL. (Mike
	    Williams)
相關文件:   runtime/doc/editing.txt, src/os_win32.c

Patch 6.1.149 (extra)
問題:	    MS-Windows: Can't use diff mode from the file explorer.
解決方案:   Add a "diff with Vim" context menu entry. (Dan Sharp)
相關文件:   GvimExt/gvimext.cpp, GvimExt/gvimext.h

Patch 6.1.150
問題:	    OS/2, MS-Windows and MS-DOS: When 'shellslash' is set getcwd()
	    still uses backslash. (Yegappan Lakshmanan)
解決方案:   Adjust slashes in getcwd().
相關文件:   src/eval.c

Patch 6.1.151 (extra)
問題:	    Win32: The NTFS substream isn't copied.
解決方案:   Copy the substream when making a backup copy. (Muraoka Taro)
相關文件:   src/fileio.c, src/os_win32.c, src/proto/os_win32.pro

Patch 6.1.152
問題:	    When $LANG is iso8859-1 translated menus are not used.
解決方案:   Change iso8859 to iso_8859.
相關文件:   runtime/menu.vim

Patch 6.1.153
問題:	    Searching in included files may search recursively when the path
	    starts with "../".  (Sven Berkvens-Matthijsse)
解決方案:   Compare full file names, use inode/device when possible.
相關文件:   src/search.c

Patch 6.1.154 (extra)
問題:	    DJGPP: "vim -h" leaves the cursor in a wrong position.
解決方案:   Don't position the cursor using uninitialized variables. (Jim
	    Dunleavy)
相關文件:   src/os_msdos.c

Patch 6.1.155
問題:	    Win32: Cursor may sometimes disappear in Insert mode.
解決方案:   Change "hor10" in 'guicursor' to "hor15". (Walter Briscoe)
相關文件:   src/option.c

Patch 6.1.156
問題:	    Conversion between DBCS and UCS-2 isn't implemented cleanly.
解決方案:   Clean up a few things.
相關文件:   src/mbyte.c, src/structs.h

Patch 6.1.157
問題:	    'hlsearch' highlights only the second comma in ",,,,," with
	    "/,\@<=[^,]*". (Preben Guldberg)
解決方案:   Also check for an empty match to start just after a previous
	    match.
相關文件:   src/screen.c

Patch 6.1.158
問題:	    "zs" and "ze" don't work correctly with ":set nowrap siso=1".
	    (Preben Guldberg)
解決方案:   Take 'siso' into account when computing the horizontal scroll
	    position for "zs" and "ze".
相關文件:   src/normal.c

Patch 6.1.159
問題:	    When expanding an abbreviation that includes a multi-byte
	    character too many characters are deleted. (Andrey Urazov)
解決方案:   Delete the abbreviation counting characters instead of bytes.
相關文件:   src/getchar.c

Patch 6.1.160
問題:	    ":$read file.gz" doesn't work. (Preben Guldberg)
解決方案:   Don't use the '[ mark after it has become invalid.
相關文件:   runtime/plugin/gzip.vim

Patch 6.1.161 (depends on 6.1.158)
問題:	    Warning for signed/unsigned compare.  Can set 'siso' to a negative
	    value. (Mike Williams)
解決方案:   Add a typecast.  Add a check for 'siso' being negative.
相關文件:   src/normal.c, src/option.c

Patch 6.1.162
問題:	    Python interface: Didn't initialize threads properly.
解決方案:   Call PyEval_InitThreads() when starting up.
相關文件:   src/if_python.c

Patch 6.1.163
問題:	    Win32: Can't compile with Python after 6.1.162.
解決方案:   Dynamically load  PyEval_InitThreads(). (Dan Sharp)
相關文件:   src/if_python.c

Patch 6.1.164
問題:	    If 'modifiable' is off, converting to xxd fails and 'filetype' is
	    changed to "xxd" anyway.
解決方案:   Don't change 'filetype' when conversion failed.
相關文件:   runtime/menu.vim

Patch 6.1.165
問題:	    Making changes in several lines and then a change in one of these
	    lines that splits it in two or more lines, undo information was
	    corrupted.  May cause a crash. (Dave Fishburn)
解決方案:   When skipping to save a line for undo because it was already
	    saved, move it to become the last saved line, so that when the
	    command changes the line count other saved lines are not involved.
相關文件:   src/undo.c

Patch 6.1.166
問題:	    When 'autoindent' is set and mswin.vim has been sourced, pasting
	    with CTRL-V just after auto-indenting removes the indent. (Shlomi
	    Fish)
解決方案:   First insert an "x" and delete it again, so that the auto-indent
	    remains.
相關文件:   runtime/mswin.vim

Patch 6.1.167
問題:	    When giving a negative argument to ":retab" strange things start
	    happening. (Hans Ginzel)
解決方案:   Check for a negative value.
相關文件:   src/ex_cmds.c

Patch 6.1.168
問題:	    Pressing CTRL-C at the hit-enter prompt doesn't end the prompt.
解決方案:   Make CTRL-C stop the hit-enter prompt.
相關文件:   src/message.c

Patch 6.1.169
問題:	    bufexists() finds a buffer by using the name of a symbolic link to
	    it, but bufnr() doesn't. (Yegappan Lakshmanan)
解決方案:   When bufnr() can't find a buffer, try using the same method as
	    bufexists().
相關文件:   src/eval.c

Patch 6.1.170
問題:	    Using ":mksession" uses the default session file name, but "vim
	    -S" doesn't. (Hans Ginzel)
解決方案:   Use the default session file name if "-S" is the last command
	    line argument or another option follows.
相關文件:   runtime/doc/starting.txt, src/main.c

Patch 6.1.171
問題:	    When opening a line just above a closed fold with "O" and the
	    comment leader is automatically inserted, the cursor is displayed
	    in the first column. (Sung-Hyun Nam)
解決方案:   Update the flag that indicates the cursor is in a closed fold.
相關文件:   src/misc1.c

Patch 6.1.172
問題:	    Command line completion of ":tag /pat" does not show the same
	    results as the tags the command actually finds. (Gilles Roy)
解決方案:   Don't modify the pattern to make it a regexp.
相關文件:   src/ex_getln.c, src/tag.c

Patch 6.1.173
問題:	    When using remote control to edit a position in a file and this
	    file is the current buffer and it's modified, the window is split
	    and the ":drop" command fails.
解決方案:   Don't split the window, keep editing the same buffer.
	    Use the ":drop" command in VisVim to avoid the problem there.
相關文件:   src/ex_cmds.c, src/ex_cmds2.c, src/proto/ex_cmds2.pro,
	    VisVim/Commands.cpp

Patch 6.1.174
問題:	    It is difficult to know in a script whether an option not only
	    exists but really works.
解決方案:   Add "exists('+option')".
相關文件:   runtime/doc/eval.txt, src/eval.c

Patch 6.1.175
問題:	    When reading commands from a pipe and a CTRL-C is pressed, Vim
	    will hang. (Piet Delport)
解決方案:   Don't keep reading characters to clear typeahead when an interrupt
	    was detected, stop when a single CTRL-C is read.
相關文件:   src/getchar.c, src/ui.c

Patch 6.1.176
問題:	    When the stack limit is very big a false out-of-stack error may
	    be detected.
解決方案:   Add a check for overflow of the stack limit computation. (Jim
	    Dunleavy)
相關文件:   src/os_unix.c

Patch 6.1.177 (depends on 6.1.141)
問題:	    ":wincmd" does not allow a following command. (Gary Johnson)
解決方案:   Check for a following " | cmd".  Also give an error for trailing
	    characters.
相關文件:   src/ex_docmd.c

Patch 6.1.178
問題:	    When 'expandtab' is set "r<C-V><Tab>" still expands the Tab.
	    (Bruce deVisser)
解決方案:   Replace with a literal Tab.
相關文件:   src/normal.c

Patch 6.1.179 (depends on 6.1.091)
問題:	    When using X11R5 XIMPreserveState is undefined. (Albert Chin)
解決方案:   Include the missing definitions.
相關文件:   src/mbyte.c

Patch 6.1.180
問題:	    Use of the GUI code for forking is inconsistent.
解決方案:   Define MAY_FORK and use it for later #ifdefs. (Ben Fowlwer)
相關文件:   src/gui.c

Patch 6.1.181
問題:	    If the terminal doesn't wrap from the last char in a line to the
	    next line, the last column is blanked out. (Peter Karp)
解決方案:   Don't output a space to mark the wrap, but the same character
	    again.
相關文件:   src/screen.c

Patch 6.1.182 (depends on 6.1.142)
問題:	    It is not possible to auto-format comments only. (Moshe Kaminsky)
解決方案:   When the 'a' and 'c' flags are in 'formatoptions' only auto-format
	    comments.
相關文件:   runtime/doc/change.txt, src/edit.c

Patch 6.1.183
問題:	    When 'fencs' is empty and 'enc' is utf-8, reading a file with
	    illegal bytes gives "CONVERSION ERROR" even though no conversion
	    is done.  'readonly' is set, even though writing the file results
	    in an unmodified file.
解決方案:   For this specific error use "ILLEGAL BYTE" and don't set
	    'readonly'.
相關文件:   src/fileio.c

Patch 6.1.184 (extra)
問題:	    The extra mouse buttons found on some mice don't work.
解決方案:   Support two extra buttons for MS-Windows. (Michael Geddes)
相關文件:   runtime/doc/term.txt, src/edit.c, src/ex_getln.c, src/gui.c,
	    src/gui_w32.c, src/gui_w48.c, src/keymap.h, src/message.c,
	    src/misc1.c, src/misc2.c, src/normal.c, src/vim.h

Patch 6.1.185 (depends on 6.1.182)
問題:	    Can't compile without +comments feature.
解決方案:   Add #ifdef FEAT_COMMENTS. (Christian J. Robinson)
相關文件:   src/edit.c

Patch 6.1.186 (depends on 6.1.177)
問題:	    ":wincmd" does not allow a following comment. (Aric Blumer)
解決方案:   Check for a following double quote.
相關文件:   src/ex_docmd.c

Patch 6.1.187
問題:	    Using ":doarg" with 'hidden' set and the current file is the only
	    argument and was modified gives an error message. (Preben
	    Guldberg)
解決方案:   Don't try re-editing the same file.
相關文件:   src/ex_cmds2.c

Patch 6.1.188 (depends on 6.1.173)
問題:	    Unused variable in the small version.
解決方案:   Move the declaration for "p" inside #ifdef FEAT_LISTCMDS.
相關文件:   src/ex_cmds2.c

Patch 6.1.189
問題:	    inputdialog() doesn't work when 'c' is in 'guioptions'. (Aric
	    Blumer)
解決方案:   Fall back to the input() function in this situation.
相關文件:   src/eval.c

Patch 6.1.190 (extra)
問題:	    VMS: doesn't build with GTK GUI.  Various other problems.
解決方案:   Fix building for GTK.  Improved Perl, Python and TCL support.
	    Improved VMS documentation. (Zoltan Arpadffy)
	    Added Vimtutor for VMS (T. R. Wyant)
相關文件:   runtime/doc/os_vms.txt, src/INSTALLvms.txt, src/gui_gtk_f.h,
	    src/if_tcl.c, src/main.c, src/gui_gtk_vms.h, src/Make_vms.mms,
	    src/os_vms.opt, src/proto/if_tcl.pro, vimtutor.com,
	    src/testdir/Make_vms.mms

Patch 6.1.191
問題:	    When using "vim -s script" and redirecting the output, the delay
	    for the "Output is not to a terminal" warning slows Vim down too
	    much.
解決方案:   Don't delay when reading commands from a script.
相關文件:   src/main.c

Patch 6.1.192
問題:	    ":diffsplit" doesn't add "hor" to 'scrollopt'. (Gary Johnson)
解決方案:   Add "hor" to 'scrollopt' each time ":diffsplit" is used.
相關文件:   src/diff.c, src/main.c

Patch 6.1.193
問題:	    Crash in in_id_list() for an item with a "containedin" list. (Dave
	    Fishburn)
解決方案:   Check for a negative syntax id, used for keywords.
相關文件:   src/syntax.c

Patch 6.1.194
問題:	    When "t_ti" is set but it doesn't cause swapping terminal pages,
	    "ZZ" may cause the shell prompt to appear on top of the file-write
	    message.
解決方案:   Scroll the text up in the Vim page before swapping to the terminal
	    page. (Michael Schroeder)
相關文件:   src/os_unix.c

Patch 6.1.195
問題:	    The quickfix and preview windows always keep their height, while
	    other windows can't fix their height.
解決方案:   Add the 'winfixheight' option, so that a fixed height can be
	    specified for any window.  Also fix that the wildmenu may resize a
	    one-line window to a two-line window if 'ls' is zero.
相關文件:   runtime/doc/options.txt, runtime/optwin.vim, src/ex_cmds.c,
	    src/ex_getln.c, src/globals.h, src/option.c, src/quickfix.c,
	    src/screen.c, src/structs.h, src/window.c

Patch 6.1.196  (depends on 6.1.084)
問題:	    On Mac OS X 10.2 generating osdef.h fails.
解決方案:   Add -no-cpp-precomp to avoid using precompiled header files, which
	    disables printing the search path. (Ben Fowler)
相關文件:   src/auto/configure, src/configure.in

Patch 6.1.197
問題:	    ":help <C-V><C-\><C-V><C-N>" (resulting in <1c><0e>) gives an
	    error message. (Servatius Brandt)
解決方案:   Double the backslash in "CTRL-\".
相關文件:   src/ex_cmds.c

Patch 6.1.198 (extra) (depends on 6.1.076)
問題:	    Mac OS X: Dialogues don't work.
解決方案:   Fix a crashing problem for some GUI dialogues.  Fix a problem when
	    saving to a new file from the GUI. (Peter Cucka)
相關文件:   src/feature.h, src/gui_mac.c

Patch 6.1.199
問題:	    'guifontwide' doesn't work on Win32.
解決方案:   Output each wide character separately. (Michael Geddes)
相關文件:   src/gui.c

Patch 6.1.200
問題:	    ":syn sync fromstart" is not skipped after ":if 0".  This can make
	    syntax highlighting very slow.
解決方案:   Check "eap->skip" appropriately. (Rob West)
相關文件:   src/syntax.c

Patch 6.1.201 (depends on 6.1.192)
問題:	    Warning for illegal pointer combination. (Zoltan Arpadffy)
解決方案:   Add a typecast.
相關文件:   src/diff.c

Patch 6.1.202  (extra)(depends on 6.1.148)
問題:	    Win32: filewritable() doesn't work properly on directories.
解決方案:   fix filewritable(). (Mike Williams)
相關文件:   src/os_win32.c

Patch 6.1.203
問題:	    ":%s/~//" causes a crash after ":%s/x//". (Gary Holloway)
解決方案:   Avoid reading past the end of a line when "~" is empty.
相關文件:   src/regexp.c

Patch 6.1.204 (depends on 6.1.129)
問題:	    Warning for an illegal pointer on Solaris.
解決方案:   Add a typecast. (Derek Wyatt)
相關文件:   src/misc2.c

Patch 6.1.205
問題:	    The gzip plugin changes the alternate file when editing a
	    compressed file. (Oliver Fuchs)
解決方案:   Temporarily remove the 'a' and 'A' flags from 'cpo'.
相關文件:   runtime/plugin/gzip.vim

Patch 6.1.206
問題:	    The script generated with ":mksession" doesn't work properly when
	    some commands are mapped.
解決方案:   Use ":normal!" instead of ":normal".  And use ":wincmd" where
	    possible. (Muraoka Taro)
相關文件:   src/ex_docmd.c, src/fold.c

Patch 6.1.207
問題:	    Indenting a Java file hangs below a line with a comment after a
	    command.
解決方案:   Break out of a loop. (Andre Pang)
	    Also line up } with matching {.
相關文件:   runtime/indent/java.vim

Patch 6.1.208
問題:	    Can't use the buffer number from the Python interface.
解決方案:   Add buffer.number. (Michal Vitecek)
相關文件:   src/if_python.c

Patch 6.1.209
問題:	    Printing doesn't work on Mac OS classic.
解決方案:   Use a ":" for path separator when opening the resource file. (Axel
	    Kielhorn)
相關文件:   src/ex_cmds2.c

Patch 6.1.210
問題:	    When there is an iconv() conversion error when reading a file
	    there can be an error the next time iconv() is used.
解決方案:   Reset the state of the iconv() descriptor. (Yasuhiro Matsumoto)
相關文件:   src/fileio.c

Patch 6.1.211
問題:	    The message "use ! to override" is confusing.
解決方案:   Make it "add ! to override".
相關文件:   src/buffer.c, src/eval.c, src/ex_docmd.c, src/fileio.c,
	    src/globals.h

Patch 6.1.212
問題:	    When Vim was started with "-R" ":new" creates a buffer
	    'noreadonly' while ":enew" has 'readonly' set. (Preben Guldberg)
解決方案:   Don't set 'readonly in a new empty buffer for ":enew".
相關文件:   src/ex_docmd.c

Patch 6.1.213
問題:	    Using CTRL-W H may cause a big gap to appear below the last
	    window. (Aric Blumer)
解決方案:   Don't set the window height when there is a vertical split.
	    (Yasuhiro Matsumoto)
相關文件:   src/window.c

Patch 6.1.214
問題:	    When installing Vim and the runtime files were checked out from
	    CVS the CVS directories will also be installed.
解決方案:   Avoid installing the CVS dirs and their contents.
相關文件:   src/Makefile

Patch 6.1.215
問題:	    Win32: ":pwd" uses backslashes even when 'shellslash' is set.
	    (Xiangjiang Ma)
解決方案:   Adjust backslashes before printing the message.
相關文件:   src/ex_docmd.c

Patch 6.1.216
問題:	    When dynamically loading the iconv library, the error codes may be
	    confused.
解決方案:   Use specific error codes for iconv and redefine them for dynamic
	    loading. (Yasuhiro Matsumoto)
相關文件:   src/fileio.c, src/mbyte.c, src/vim.h

Patch 6.1.217
問題:	    When sourcing the same Vim script using a different name (symbolic
	    link or MS-Windows 8.3 name) it is listed twice with
	    ":scriptnames".  (Tony Mechelynck)
解決方案:   Turn the script name into a full path before using it.  On Unix
	    compare inode/device numbers.
相關文件:   src/ex_cmds2.c

Patch 6.1.218
問題:	    No error message for using the function argument "5+".  (Servatius
	    Brandt)
解決方案:   Give an error message if a function or variable is expected but is
	    not found.
相關文件:   src/eval.c

Patch 6.1.219
問題:	    When using ":amenu :b 1<CR>" with a Visual selection and
	    'insertmode' is set, Vim does not return to Insert mode. (Mickael
	    Marchand)
解決方案:   Add the command CTRL-\ CTRL-G that goes to Insert mode if
	    'insertmode' is set and to Normal mode otherwise.  Append this to
	    menus defined with ":amenu".
相關文件:   src/edit.c, src/ex_getln.c, src/normal.c

Patch 6.1.220
問題:	    When using a BufReadPost autocommand that changes the line count,
	    e.g., "$-1join", reloading a file that was changed outside Vim
	    does not work properly. (Alan G Isaac)
解決方案:   Make the buffer empty before reading the new version of the file.
	    Save the lines in a dummy buffer, so that they can be put back
	    when reading the file fails.
相關文件:   src/buffer.c, src/ex_cmds.c, src/fileio.c, src/globals.h,
	    src/proto/buffer.pro

Patch 6.1.221
問題:	    Changing case may not work properly, depending on the current
	    locale.
解決方案:   Add the 'casemap' option to let the user chose how changing case
	    is to be done.
	    Also fix lowering case when an UTF-8 character doesn't keep the
	    same byte length.
相關文件:   runtime/doc/options.txt, src/ascii.h, src/auto/configure,
	    src/buffer.c, src/charset.c, src/config.h.in, src/configure.in,
	    src/diff.c, src/edit.c, src/eval.c, src/ex_cmds2.c,
	    src/ex_docmd.c, src/ex_getln.c, src/fileio.c, src/gui_amiga.c
	    src/gui_mac.c, src/gui_photon.c, src/gui_w48.c, src/gui_beos.cc,
	    src/macros.h, src/main.c, src/mbyte.c, src/menu.c, src/message.c,
	    src/misc1.c, src/misc2.c, src/option.c, src/os_msdos.c,
	    src/os_mswin.c, src/proto/charset.pro, src/regexp.c, src/option.h,
	    src/syntax.c

Patch 6.1.222 (depends on 6.1.219)
問題:	    Patch 6.1.219 was incomplete.
解決方案:   Add the changes for ":amenu".
相關文件:   src/menu.c

Patch 6.1.223 (extra)
問題:	    Win32: When IME is activated 'iminsert' is set, but it might never
	    be reset when IME is disabled. (Muraoka Taro)
	    All systems: 'iminsert' is set to 2 when leaving Insert mode, even
	    when langmap is being used. (Peter Valach)
解決方案:   Don't set "b_p_iminsert" in _OnImeNotify(). (Muraoka Taro)
	    Don't store the status of the input method in 'iminsert' when
	    'iminsert' is one.  Also for editing the command line and for
	    arguments to Normal mode commands.
相關文件:   src/edit.c, src/ex_getln.c, src/gui_w32.c, src/normal.c

Patch 6.1.224
問題:	    "expand('$VAR')" returns an empty string when the expanded $VAR
	    is not an existing file. (Aric Blumer)
解決方案:   Included non-existing files, as documented.
相關文件:   src/eval.c

Patch 6.1.225
問題:	    Using <C-O><C-^> in Insert mode has a delay when starting "vim -u
	    NONE" and ":set nocp hidden". (Emmanuel)  do_ecmd() uses
	    fileinfo(), the redraw is done after a delay to give the user time
	    to read the message.
解決方案:   Put the message from fileio() in "keep_msg", so that the redraw is
	    done before the delay (still needed to avoid the mode message
	    overwrites the fileinfo() message).
相關文件:   src/buffer.c

Patch 6.1.226
問題:	    Using ":debug" with a ":normal" command may cause a hang.  (Colin
	    Keith)
解決方案:   Save the typeahead buffer when obtaining a debug command.
相關文件:   src/ex_cmds2.c, src/getchar.c, src/proto/getchar.pro

Patch 6.1.227
問題:	    It is possible to use a variable name "asdf:asdf" and ":let j:asdf
	    = 5" does not give an error message. (Mikolaj Machowski)
解決方案:   Check for a ":" inside the variable name.
相關文件:   src/eval.c

Patch 6.1.228 (extra)
問題:	    Win32: The special output function for Hangul is used too often,
	    causing special handling for other situations to be skipped.
	    bInComposition is always FALSE, causing ImeGetTempComposition()
	    always to return NULL.
解決方案:   Remove HanExtTextOut().  Delete the dead code around
	    bInComposition and ImeGetTempComposition().
相關文件:   src/gui_w16.c, src/gui_w32.c, src/gui_w48.c

Patch 6.1.229
問題:	    Win32: Conversion to/from often used codepages requires the iconv
	    library, which is not always available.
解決方案:   Use standard MS-Windows functions for the conversion when
	    possible. (mostly by Glenn Maynard)
	    Also fixes missing declaration for patch 6.1.220.
相關文件:   src/fileio.c

Patch 6.1.230 (extra)
問題:	    Win16: building doesn't work.
解決方案:   Exclude the XBUTTON handling. (Vince Negri)
相關文件:   src/gui_w48.c

Patch 6.1.231
問題:	    Double clicking with the mouse to select a word does not work for
	    multi-byte characters.
解決方案:   Use vim_iswordc() instead of vim_isIDc().  This means 'iskeyword'
	    is used instead of 'isident'.  Also fix that mixing ASCII with
	    multi-byte word characters doesn't work, the mouse class for
	    punctuation and word characters was mixed up.
相關文件:   src/normal.c

Patch 6.1.232 (depends on 6.1.226)
問題:	    Using ex_normal_busy while it might not be available. (Axel
	    Kielhorn)
解決方案:   Only use ex_normal_busy when FEAT_EX_EXTRA is defined.
相關文件:   src/ex_cmds2.c

Patch 6.1.233
問題:	    ":help expr-||" does not work.
解決方案:   Don't use the '|' as a command separator
相關文件:   src/ex_cmds.c

Patch 6.1.234 (depends on 6.1.217)
問題:	    Get a warning for using a negative value for st_dev.
解決方案:   Don't assign a negative value to st_dev.
相關文件:   src/ex_cmds2.c

Patch 6.1.235 (depends on 6.1.223)
問題:	    'iminsert' is changed from 1 to 2 when leaving Insert mode. (Peter
	    Valach)
解決方案:   Check "State" before resetting it to NORMAL.
相關文件:   src/edit.c

Patch 6.1.236
問題:	    Memory leaks when appending lines for ":diffget" or ":diffput" and
	    when reloading a changed buffer.
解決方案:   Free a line after calling ml_append().
相關文件:   src/diff.c, src/fileio.c

Patch 6.1.237
問題:	    Putting in Visual block mode does not work correctly when "$" was
	    used or when the first line is short.  (Christian Michon)
解決方案:   First delete the selected text and then put the new text.  Save
	    and restore registers as necessary.
相關文件:   src/globals.h, src/normal.c, src/ops.c, src/proto/ops.pro,
	    src/vim.h

Patch 6.1.238 (extra)
問題:	    Win32: The "icon=" argument for the ":menu" command does not
	    search for the bitmap file.
解決方案:   Expand environment variables and search for the bitmap file.
	    (Vince Negri)
	    Make it consistent, use the same mechanism for X11 and GTK.
相關文件:   src/gui.c src/gui_gtk.c, src/gui_w32.c, src/gui_x11.c,
	    src/proto/gui.pro

Patch 6.1.239
問題:	    Giving an error for missing :endif or :endwhile when being
	    interrupted.
解決方案:   Don't give these messages when interrupted.
相關文件:   src/ex_docmd.c, src/os_unix.c

Patch 6.1.240 (extra)
問題:	    Win32 with BCC 5: CPU may be defined in the environment, which
	    causes a wrong argument for the compiler. (Walter Briscoe)
解決方案:   Use CPUNR instead of CPU.
相關文件:   src/Make_bc5.mak

Patch 6.1.241
問題:	    Something goes wrong when drawing or undrawing the cursor.
解決方案:   Remember when the cursor invalid in a better way.
相關文件:   src/gui.c

Patch 6.1.242
問題:	    When pasting a large number of lines on the command line it is not
	    possible to interrupt. (Jean Jordaan)
解決方案:   Check for an interrupt after each pasted line.
相關文件:   src/ops.c

Patch 6.1.243 (extra)
問題:	    Win32: When the OLE version is started and wasn't registered, a
	    message pops up to suggest registering, even when this isn't
	    possible (when the registry is not writable).
解決方案:   Check if registering is possible before asking whether it should
	    be done. (Walter Briscoe)
	    Also avoid restarting Vim after registering.
相關文件:   src/if_ole.cpp

Patch 6.1.244
問題:	    Patch 6.1.237 was missing the diff for vim.h. (Igor Goldenberg)
解決方案:   Include it here.
相關文件:   src/vim.h

Patch 6.1.245
問題:	    Comparing with ignored case does not work properly for Unicode
	    with a locale where case folding an ASCII character results in a
	    multi-byte character. (Glenn Maynard)
解決方案:   Handle ignore-case compare for Unicode differently.
相關文件:   src/mbyte.c

Patch 6.1.246
問題:	    ":blast" goes to the first buffer if the last one is unlisted.
	    (Andrew Stryker)
解決方案:   From the last buffer search backwards for the first listed buffer
	    instead of forwards.
相關文件:   src/ex_docmd.c

Patch 6.1.247
問題:	    ACL support doesn't always work properly.
解決方案:   Add a configure argument to disable ACL "--disable-acl". (Thierry
	    Vignaud)
相關文件:   src/auto/configure, src/configure.in

Patch 6.1.248
問題:	    Typing 'q' at the more-prompt for ":let" does not quit the
	    listing. (Hari Krishna Dara)
解決方案:   Quit the listing when got_int is set.
相關文件:   src/eval.c

Patch 6.1.249
問題:	    Can't expand a path on the command line if it includes a "|" as a
	    trail byte of a multi-byte character.
解決方案:   Check for multi-byte characters. (Yasuhiro Matsumoto)
相關文件:   src/ex_docmd.c

Patch 6.1.250
問題:	    When changing the value of 'lines' inside the expression set with
	    'diffexpr' Vim might crash. (Dave Fishburn)
解決方案:   Don't allow changing the screen size while updating the screen.
相關文件:   src/globals.h, src/option.c, src/screen.c

Patch 6.1.251
問題:	    Can't use completion for ":lcd" and ":lchdir" like ":cd".
解決方案:   Expand directory names for these commands. (Servatius Brandt)
相關文件:   src/ex_docmd.c

Patch 6.1.252
問題:	    "vi}" does not include a line break when the "}" is at the start
	    of a following line. (Kamil Burzynski)
解決方案:   Include the line break.
相關文件:   src/search.c

Patch 6.1.253 (extra)
問題:	    Win32 with Cygwin: Changes the path of arguments in a wrong way.
	    (Xiangjiang Ma)
解決方案:   Don't use cygwin_conv_to_posix_path() for the Win32 version.
	    Update the Cygwin makefile to support more features.  (Dan Sharp)
相關文件:   src/Make_cyg.mak, src/if_ole.cpp, src/main.c

Patch 6.1.254
問題:	    exists("foo{bar}") does not work.  ':unlet v{"a"}r' does not work.
	    ":let v{a}r1 v{a}r2" does not work. ":func F{(1)}" does not work.
	    ":delfunc F{" does not give an error message.  ':delfunc F{"F"}'
	    does not work.
解決方案:   Support magic braces for the exists() argument. (Vince Negri)
	    Check for trailing comments explicitly for ":unlet".  Add support
	    for magic braces in further arguments of ":let".  Look for a
	    parenthesis only after the function name.  (Servatius Brandt)
	    Also expand magic braces for "exists('*expr')".  Give an error
	    message for an invalid ":delfunc" argument.  Allow quotes in the
	    ":delfunc" argument.
相關文件:   src/eval.c, src/ex_cmds.h, src/ex_docmd.c

Patch 6.1.255 (depends on 6.1.254)
問題:	    Crash when loading menu.vim a second time. (Christian Robinson)
	    ":unlet garbage foo" tries unletting "foo" after an error message.
	    (Servatius Brandt)
	    Very long function arguments cause very long messages when
	    'verbose' is 14 or higher.
解決方案:   Avoid reading from uninitialized memory.
	    Break out of a loop after an invalid argument for ":unlet".
	    Truncate long function arguments to 80 characters.
相關文件:   src/eval.c

Patch 6.1.256 (depends on 6.1.255)
問題:	    Defining a function after ":if 0" could still cause an error
	    message for an existing function.
	    Leaking memory when there are trailing characters for ":delfunc".
解決方案:   Check the "skip" flag.  Free the memory. (Servatius Brandt)
相關文件:   src/eval.c

Patch 6.1.257
問題:	    ":cwindow" always sets the previous window to the last but one
	    window.  (Benji Fisher)
解決方案:   Set the previous window properly.
相關文件:   src/globals.c, src/quickfix.c, src/window.c

Patch 6.1.258
問題:	    Buffers menu doesn't work properly for multibyte buffer names.
解決方案:   Use a pattern to get the left and right part of the name.
	    (Yasuhiro Matsumoto)
相關文件:   runtime/menu.vim

Patch 6.1.259 (extra)
問題:	    Mac: with 'patchmode' is used filenames are truncated.
解決方案:   Increase the BASENAMELEN for Mac OS X. (Ed Ralston)
相關文件:   src/os_mac.h

Patch 6.1.260 (depends on 6.1.104)
問題:	    GCC 3.2 still seems to have an optimizer problem. (Zvi Har'El)
解決方案:   Use the same configure check as used for GCC 3.1.
相關文件:   src/auto/configure, src/configure.in

Patch 6.1.261
問題:	    When deleting a line in a buffer which is not the current buffer,
	    using the Perl interface Delete(), the cursor in the current
	    window may move. (Chris Houser)
解決方案:   Don't adjust the cursor position when changing another buffer.
相關文件:   src/if_perl.xs

Patch 6.1.262
問題:	    When jumping over folds with "z[", "zj" and "zk" the previous
	    position is not remembered. (Hari Krishna Dara)
解決方案:   Set the previous context mark before jumping.
相關文件:   src/fold.c

Patch 6.1.263
問題:	    When typing a multi-byte character that triggers an abbreviation
	    it is not inserted properly.
解決方案:   Handle adding the typed multi-byte character. (Yasuhiro Matsumoto)
相關文件:   src/getchar.c

Patch 6.1.264 (depends on patch 6.1.254)
問題:	    exists() does not work for built-in functions. (Steve Wall)
解決方案:   Don't check for the function name to start with a capital.
相關文件:   src/eval.c

Patch 6.1.265
問題:	    libcall() can be used in 'foldexpr' to call any system function.
	    rename(), delete() and remote_send() can also be used in
	    'foldexpr'.  These are security problems. (Georgi Guninski)
解決方案:   Don't allow using libcall(), rename(), delete(), remote_send() and
	    similar functions in the sandbox.
相關文件:   src/eval.c

Patch 6.1.266 (depends on 6.1.265)
問題:	    Win32: compile error in eval.c. (Bill McCarthy)
解決方案:   Move a variable declaration.
相關文件:   src/eval.c

Patch 6.1.267
問題:	    Using "p" to paste into a Visual selected area may cause a crash.
解決方案:   Allocate enough memory for saving the register contents. (Muraoka
	    Taro)
相關文件:   src/ops.c

Patch 6.1.268
問題:	    When triggering an abbreviation with a multi-byte character, this
	    character is not correctly inserted after expanding the
	    abbreviation. (Taro Muraoka)
解決方案:   Add ABBR_OFF to all characters above 0xff.
相關文件:   src/edit.c, src/ex_getln.c, src/getchar.c

Patch 6.1.269
問題:	    After using input() text written with ":redir" gets extra indent.
	    (David Fishburn)
解決方案:   Restore msg_col after using input().
相關文件:   src/ex_getln.c

Patch 6.1.270 (depends on 6.1.260)
問題:	    GCC 3.2.1 still seems to have an optimizer problem.
解決方案:   Use the same configure check as used for GCC 3.1.
相關文件:   src/auto/configure, src/configure.in

Patch 6.1.271
問題:	    When compiling without the +syntax feature there are errors.
解決方案:   Don't use some code for syntax highlighting. (Roger Cornelius)
	    Make test 45 work without syntax highlighting.
	    Also fix an error in a pattern matching: "\%(" was not supported.
相關文件:   src/ex_cmds2.c, src/regexp.c, src/testdir/test45.in

Patch 6.1.272
問題:	    After using ":set define<" a crash may happen. (Christian Robinson)
解決方案:   Make a copy of the option value in allocated memory.
相關文件:   src/option.c

Patch 6.1.273
問題:	    When the cursor doesn't blink, redrawing an exposed area may hide
	    the cursor.
解決方案:   Always draw the cursor, also when it didn't move. (Muraoka Taro)
相關文件:   src/gui.c

Patch 6.1.274 (depends on 6.1.210)
問題:	    Resetting the iconv() state after each error is wrong for an
	    incomplete sequence.
解決方案:   Don't reset the iconv() state.
相關文件:   src/fileio.c

Patch 6.1.275
問題:	    When using "v" in a startup script, get warning message that
	    terminal cannot highlight. (Charles Campbell)
解決方案:   Only give the message after the terminal has been initialized.
相關文件:   src/normal.c

Patch 6.1.276
問題:	    "gvim --remote file" doesn't prompt for an encryption key.
解決方案:   The further characters the client sends to the server are used.
	    Added inputsave() and inputrestore() to allow prompting the
	    user directly and not using typeahead.
	    Also fix possible memory leak for ":normal".
相關文件:   src/eval.c, src/ex_cmds2.c, src/ex_docmd.c, src/getchar.c,
	    src/main.c, src/proto/getchar.pro, src/proto/ui.pro,
	    src/runtime/doc/eval.txt, src/structs.h, src/ui.c, src/vim.h

Patch 6.1.277 (depends on 6.1.276)
問題:	    Compilation error when building with small features.
解決方案:   Define trash_input_buf() when needed. (Kelvin Lee)
相關文件:   src/ui.c

Patch 6.1.278
問題:	    When using signs the line number of a closed fold doesn't line up
	    with the other line numbers. (Kamil Burzynski)
解決方案:   Insert two spaces for the sign column.
相關文件:   src/screen.c

Patch 6.1.279
問題:	    The prototype for smsg() and smsg_attr() do not match the function
	    definition.  This may cause trouble for some compilers. (Nix)
解決方案:   Use va_list for systems that have stdarg.h.  Use "int" instead of
	    "void" for the return type.
相關文件:   src/auto/configure, src/config.h.in, src/configure.in,
	    src/proto.h, src/message.c

Patch 6.1.280
問題:	    It's possible to use an argument "firstline" or "lastline" for a
	    function but using "a:firstline" or "a:lastline" in the function
	    won't work.  (Benji Fisher)
解決方案:   Give an error message for these arguments.
	    Also avoid that the following function body causes a whole row of
	    errors, skip over it after an error in the first line.
相關文件:   src/eval.c

Patch 6.1.281
問題:	    In Insert mode CTRL-X CTRL-G leaves the cursor after the ruler.
解決方案:   Set the cursor position before waiting for the argument of CTRL-G.
	    (Yasuhiro Matsumoto)
相關文件:   src/edit.c

Patch 6.1.282
問題:	    Elvis uses "se" in a modeline, Vim doesn't recognize this.
解決方案:   Also accept "se " where "set " is accepted in a modeline.
	    (Yasuhiro Matsumoto)
相關文件:   src/buffer.c

Patch 6.1.283
問題:	    For ":sign" the icon file name cannot contain a space.
解決方案:   Handle backslashes in the file name.  (Yasuhiro Matsumoto)
相關文件:   src/ex_cmds.c

Patch 6.1.284
問題:	    On Solaris there is a warning for "struct utimbuf".
解決方案:   Move including "utime.h" to outside the function. (Derek Wyatt)
相關文件:   src/fileio.c

Patch 6.1.285
問題:	    Can't wipe out a buffer with 'bufhide' option.
解決方案:   Add "wipe" value to 'bufhide'. (Yegappan Lakshmanan)
相關文件:   runtime/doc/options.txt, src/buffer.c, src/option.c,
	    src/quickfix.c

Patch 6.1.286
問題:	    'showbreak' cannot contain multi-byte characters.
解決方案:   Allow using all printable characters for 'showbreak'.
相關文件:   src/charset.c, src/move.c, src/option.c

Patch 6.1.287 (depends on 6.1.285)
問題:	    Effect of "delete" and "wipe" in 'bufhide' were mixed up.
解決方案:   Wipe out when wiping out is asked for.
相關文件:   src/buffer.c

Patch 6.1.288
問題:	    ":silent function F" hangs. (Hari Krishna Dara)
解決方案:   Don't use msg_col, it is not incremented when using ":silent".
	    Also made the function output look a bit better.  Don't translate
	    "function".
相關文件:   src/eval.c

Patch 6.1.289 (depends on 6.1.278)
問題:	    Compiler warning for pointer. (Axel Kielhorn)
解決方案:   Add a typecast for "  ".
相關文件:   src/screen.c

Patch 6.1.290 (extra)
問題:	    Truncating long text for message box may break multi-byte
	    character.
解決方案:   Adjust to start of multi-byte character. (Yasuhiro Matsumoto)
相關文件:   src/os_mswin.c

Patch 6.1.291 (extra)
問題:	    Win32: CTRL-@ doesn't work.  Don't even get a message for it.
解決方案:   Recognize the keycode for CTRL-@. (Yasuhiro Matsumoto)
相關文件:   src/gui_w48.c

Patch 6.1.292 (extra, depends on 6.1.253)
問題:	    Win32: Can't compile with new MingW compiler.
	    Borland 5 makefile doesn't generate pathdef.c.
解決方案:   Remove -wwide-multiply argument. (Rene de Zwart)
	    Various fixes for other problems in Win32 makefiles. (Dan Sharp)
相關文件:   src/Make_bc5.mak, src/Make_cyg.mak, src/Make_ming.mak,
	    src/Make_mvc.mak

Patch 6.1.293
問題:	    byte2line() returns a wrong result for some values.
解決方案:   Change ">=" to ">" in ml_find_line_or_offset(). (Bradford C Smith)
	    Add one to the line number when at the end of a block.
相關文件:   src/memline.c

Patch 6.1.294
問題:	    Can't include a multi-byte character in a string by its hex value.
	    (Benji Fisher)
解決方案:   Add "\u....": a character specified with up to four hex numbers
	    and stored according to the value of 'encoding'.
相關文件:   src/eval.c

Patch 6.1.295 (extra)
問題:	    Processing the cs.po file generates an error. (Rahul Agrawal)
解決方案:   Fix the printf format characters in the translation.
相關文件:   src/po/cs.po

Patch 6.1.296
問題:	    Win32: When cancelling the font dialog 'guifont' remains set to
	    "*".
解決方案:   Restore the old value of 'guifont' (Yasuhiro Matsumoto)
相關文件:   src/option.c

Patch 6.1.297
問題:	    "make test" fails in test6 in an UTF-8 environment. (Benji Fisher)
解決方案:   Before executing the BufReadPost autocommands save the current
	    fileencoding, so that the file isn't marked changed.
相關文件:   src/fileio.c

Patch 6.1.298
問題:	    When using signs and the first line of a closed fold has a sign
	    it can be redrawn as if the fold was open.  (Kamil Burzynski)
解決方案:   Don't redraw a sign inside a closed fold.
相關文件:   src/screen.c

Patch 6.1.299
問題:	    ":edit +set\ ro file" doesn't work.
解決方案:   Halve the number of backslashes in the "+cmd" argument.
相關文件:   src/ex_docmd.c

Patch 6.1.300 (extra)
問題:	    Handling of ETO_IGNORELANGUAGE is confusing.
解決方案:   Clean up the handling of ETO_IGNORELANGUAGE. (Glenn Maynard)
相關文件:   src/gui_w32.c

Patch 6.1.301 (extra)
問題:	    French translation of file-save dialog doesn't show file name.
解決方案:   Insert a star in the printf string. (Francois Terrot)
相關文件:   src/po/fr.po

Patch 6.1.302
問題:	    Counting lines of the Visual area is incorrect for closed folds.
	    (Mikolaj Machowski)
解決方案:   Correct the start and end for the closed fold.
相關文件:   src/normal.c

Patch 6.1.303 (extra)
問題:	    The Top/Bottom/All text does not always fit in the ruler when
	    translated to Japanese.  Problem with a character being wider when
	    in a bold font.
解決方案:   Use ETO_PDY to specify the width of each character. (Yasuhiro
	    Matsumoto)
相關文件:   src/gui_w32.c

Patch 6.1.304 (extra, depends on 6.1.292)
問題:	    Win32: Postscript is always enabled in the MingW Makefile.
	    Pathdef.c isn't generated properly with Make_bc5.mak. (Yasuhiro
	    Matsumoto)
解決方案:   Change an ifdef to an ifeq. (Madoka Machitani)
	    Use the Borland make redirection to generate pathdef.c. (Maurice
	    Barnum)
相關文件:   src/Make_bc5.mak, src/Make_ming.mak

Patch 6.1.305
問題:	    When 'verbose' is 14 or higher, a function call may cause reading
	    uninitialized data. (Walter Briscoe)
解決方案:   Check for end-of-string in trunc_string().
相關文件:   src/message.c

Patch 6.1.306
問題:	    The AIX VisualAge cc compiler doesn't define __STDC__.
解決方案:   Use __EXTENDED__ like __STDC__. (Jess Thrysoee)
相關文件:   src/os_unix.h

Patch 6.1.307
問題:	    When a double-byte character has an illegal tail byte the display
	    is messed up. (Yasuhiro Matsumoto)
解決方案:   Draw "XX" instead of the wrong character.
相關文件:   src/screen.c

Patch 6.1.308
問題:	    Can't reset the Visual mode returned by visualmode().
解決方案:   Use an optional argument to visualmode(). (Charles Campbell)
相關文件:   runtime/doc/eval.txt, src/eval.c, src/normal.c,
	    src/structs.h

Patch 6.1.309
問題:	    The tutor doesn't select German if the locale name is
	    "German_Germany.1252". (Joachim Hofmann)
解決方案:   Check for "German" in the locale name.  Also check for
	    ".ge".  And include the German and Greek tutors.
相關文件:   runtime/tutor/tutor.de, runtime/tutor/tutor.vim,
	    runtime/tutor/tutor.gr, runtime/tutor/tutor.gr.cp737

Patch 6.1.310 (depends on 6.1.307)
問題:	    All double-byte characters are displayed as "XX".
解決方案:   Use ">= 32" instead of "< 32".  (Yasuhiro Matsumoto)
相關文件:   src/screen.c

Patch 6.1.311 (extra)
問題:	    VMS: path in window title doesn't include necessary separator.
	    file version doesn't always work properly with Unix.
	    Crashes because of memory overwrite in GUI.
	    Didn't always handle files with lowercase and correct path.
解決方案:   Fix the problems.  Remove unnecessary file name translations.
	    (Zoltan Arpadffy)
相關文件:   src/buffer.c, src/ex_cmds2.c, src/fileio.c, src/memline.c,
	    src/misc1.c, src/misc2.c, src/os_unix.c, src/os_vms.c, src/tag.c

Patch 6.1.312
問題:	    When using ":silent" debugging is also done silently.
解決方案:   Disable silence while at the debug prompt.
相關文件:   src/ex_cmds2.c

Patch 6.1.313
問題:	    When a ":drop fname" command is used and "fname" is open in
	    another window, it is also opened in the current window.
解決方案:   Change to the window with "fname" instead.
	    Don't redefine the argument list when dropping only one file.
相關文件:   runtime/doc/windows.txt, src/ex_cmds2.c, src/ex_cmds.c,
	    src/ex_docmd.c, src/proto/ex_cmds2.pro, src/proto/ex_docmd.pro

Patch 6.1.314 (depends on 6.1.126)
問題:	    Missing backslash in "Generic Config file" syntax menu.
解決方案:   Insert the backslash. (Zak Beck)
相關文件:   runtime/makemenu.vim, runtime/synmenu.vim

Patch 6.1.315 (extra)
問題:	    A very long hostname may lead to an unterminated string.  Failing
	    to obtain a hostname may result in garbage.  (Walter Briscoe)
解決方案:   Add a NUL at the end of the hostname buffer.
相關文件:   src/os_mac.c, src/os_msdos.c, src/os_unix.c, src/os_win16.c,
	    src/os_win32.c

Patch 6.1.316
問題:	    When exiting with "wq" and there is a hidden buffer, after the
	    "file changed" dialog there is a warning for a changed buffer.
	    (Ajit Thakkar)
解決方案:   Do update the buffer timestamps when exiting.
相關文件:   src/fileio.c

Patch 6.1.317
問題:	    Closing a window may cause some of the remaining windows to be
	    positioned wrong if there is a mix of horizontal and vertical
	    splits. (Stefan Ingi Valdimarsson)
解決方案:   Update the frame sizes before updating the window positions.
相關文件:   src/window.c

Patch 6.1.318
問題:	    auto/pathdef.c can include wrong quotes when a compiler flag
	    includes quotes.
解決方案:   Put a backslash before the quotes in compiler flags. (Shinra Aida)
相關文件:   src/Makefile

Patch 6.1.319 (depends on 6.1.276)
問題:	    Using "--remote +cmd file" does not execute "cmd".
解決方案:   Call inputrestore() in the same command line as inputsave(),
	    otherwise it will never get executed.
相關文件:   src/main.c

Patch 6.1.320 (depends on 6.1.313)
問題:	    When a ":drop one\ file" command is used the file "one\ file" is
	    opened, the backslash is not removed. (Taro Muraoka)
解決方案:   Handle backslashes correctly.  Always set the argument list to
	    keep it simple.
相關文件:   runtime/doc/windows.txt, src/ex_cmds.c

Patch 6.1.321
問題:	    When 'mouse' includes 'n' but not 'v', don't allow starting Visual
	    mode with the mouse.
解決方案:   Don't use MOUSE_MAY_VIS when there is no 'v' in 'mouse'. (Flemming
	    Madsen)
相關文件:   src/normal.c

Patch 6.1.322 (extra, depends on 6.1.315)
問題:	    Win32: The host name is always "PC " plus the real host name.
解決方案:   Don't insert "PC " before the host name.
相關文件:   src/os_win32.c

Patch 6.1.323
問題:	    ":registers" doesn't stop listing for a "q" at the more prompt.
	    (Hari Krishna Dara)
解決方案:   Check for interrupt and got_int.
相關文件:   src/ops.c, src/proto/ops.pro

Patch 6.1.324
問題:	    Crash when dragging a vertical separator when <LeftMouse> is
	    remapped to jump to another window.
解決方案:   Pass the window pointer to the function doing the dragging instead
	    of always using the current window. (Daniel Elstner)
	    Also fix that starting a drag changes window focus.
相關文件:   src/normal.c, src/proto/window.pro, src/ui.c, src/vim.h,
	    src/window.c

Patch 6.1.325
問題:	    Shift-Tab is not automatically recognized in an xterm.
解決方案:   Add <Esc>[Z as the termcap code. (Andrew Pimlott)
相關文件:   src/term.c

Patch 6.1.326
問題:	    Using a search pattern may read from uninitialized data (Yasuhiro
	    Matsumoto)
解決方案:   Initialize pointers to NULL.
相關文件:   src/regexp.c

Patch 6.1.327
問題:	    When opening the "mbyte.txt" help file the utf-8 characters are
	    unreadable, because the fileencoding is forced to be latin1.
解決方案:   Check for utf-8 encoding first in help files. (Daniel Elstner)
相關文件:   runtime/doc/mbyte.txt, src/fileio.c

Patch 6.1.328
問題:	    Prototype for enc_canon_search() is missing.
解決方案:   Add the prototype. (Walter Briscoe)
相關文件:   src/mbyte.c

Patch 6.1.329
問題:	    When editing a file "a b c" replacing "%" in ":Cmd %" or ":next %"
	    does not work properly.  (Hari Krishna Dara)
解決方案:   Always escape spaces when expanding "%".  Don't split argument for
	    <f-args> in a user command when only one argument is used.
相關文件:   src/ex_docmd.c

Patch 6.1.330
問題:	    GTK, Motif and Athena: Keypad keys produce the same code as
	    non-keypad keys, making it impossible to map them separately.
解決方案:   Use different termcap codes for the keypad keys. (Neil Bird)
相關文件:   src/gui_gtk_x11.c, src/gui_x11.c

Patch 6.1.331
問題:	    When translating the help files, "LOCAL ADDITIONS" no longer marks
	    the spot where help files from plugins are to be listed.
解決方案:   Add a "local-additions" tag and use that to find the right spot.
相關文件:   runtime/doc/help.txt, src/ex_cmds.c

Patch 6.1.332 (extra)
問題:	    Win32: Loading Perl dynamically doesn't work with Perl 5.8.
	    Perl 5.8 also does not work with Cygwin and Ming.
解決方案:   Adjust the function calls. (Taro Muraoka)
	    Adjust the cyg and ming makefiles. (Dan Sharp)
相關文件:   src/Make_cyg.mak, src/Make_ming.mak, src/Make_mvc.mak,
	    src/if_perl.xs

Patch 6.1.333 (extra)
問題:	    Win32: Can't handle Unicode text on the clipboard.
	    Can't pass NUL byte, it becomes a line break.  (Bruce DeVisser)
解決方案:   Support Unicode for the clipboard (Ron Aaron and Glenn Maynard)
	    Also support copy/paste of NUL bytes.
相關文件:   src/os_mswin.c, src/os_win16.c src/os_win32.c

Patch 6.1.334 (extra, depends on 6.1.303)
問題:	    Problem with drawing Hebrew characters.
解決方案:   Only use ETO_PDY for Windows NT and the like. (Yasuhiro Matsumoto)
相關文件:   src/gui_w32.c

Patch 6.1.335 (extra)
問題:	    Failure of obtaining the cursor position and window size is
	    ignored.
解決方案:   Remove a semicolon after an "if". (Walter Briscoe)
相關文件:   src/gui_w32.c

Patch 6.1.336 (extra)
問題:	    Warning for use of function prototypes of smsg().
解決方案:   Define HAVE_STDARG_H. (Walter Briscoe)
相關文件:   src/os_win32.h

Patch 6.1.337
問題:	    When using "finish" in debug mode in function B() for ":call
	    A(B())" does not stop after B() is finished.
解決方案:   Increase debug_level while evaluating a function.
相關文件:   src/ex_docmd.c

Patch 6.1.338
問題:	    When using a menu that checks out the current file from Insert
	    mode, there is no warning for the changed file until exiting
	    Insert mode.  (Srikanth Sankaran)
解決方案:   Add a check for need_check_timestamps in the Insert mode loop.
相關文件:   src/edit.c

Patch 6.1.339
問題:	    Completion doesn't allow "g:" in ":let g:did_<Tab>". (Benji
	    Fisher)
解決方案:   Return "g:var" for global variables when that is what is being
	    expanded. (Flemming Madsen)
相關文件:   src/eval.c

Patch 6.1.340 (extra, depends on 6.1.332)
問題:	    Win32: Can't compile the Perl interface with nmake.
解決方案:   Don't compare the version number as a string but as a number.
	    (Juergen Kraemer)
相關文件:   src/Make_mvc.mak

Patch 6.1.341
問題:	    In Insert mode with 'rightleft' set the cursor is drawn halfway a
	    double-wide character.  For CTRL-R and CTRL-K in Insert mode the "
	    or ? is not displayed.
解決方案:   Draw the cursor in the next character cell.  Display the " or ?
	    over the right half of the double-wide character. (Yasuhiro
	    Matsumoto)  Also fix that cancelling a digraph doesn't redraw
	    a double-byte character correctly.
相關文件:   src/edit.c, src/gui.c, src/mbyte.c

Patch 6.1.342 (depends on 6.1.341)
問題:	    With 'rightleft' set typing "c" on a double-wide character causes
	    the cursor to be displayed one cell to the left.
解決方案:   Draw the cursor in the next character cell.  (Yasuhiro Matsumoto)
相關文件:   src/gui.c

Patch 6.1.343 (depends on 6.1.342)
問題:	    Cannot compile with the +multi_byte feature but without +rightleft.
	    Cannot compile without the GUI.
解決方案:   Fix the #ifdefs.  (partly by Nam SungHyun)
相關文件:   src/gui.c, src/mbyte.c, src/ui.c

Patch 6.1.344
問題:	    When using ":silent filetype" the output is still put in the
	    message history. (Hari Krishna Dara)
解決方案:   Don't add messages in the history when ":silent" is used.
相關文件:   src/message.c

Patch 6.1.345 (extra)
問題:	    Win32: 'imdisable' doesn't work.
解決方案:   Make 'imdisable' work. (Yasuhiro Matsumoto)
相關文件:   src/gui_w32.c

Patch 6.1.346
問題:	    The scroll wheel can only scroll the current window.
解決方案:   Make the scroll wheel scroll the window that the mouse points to.
	    (Daniel Elstner)
相關文件:   src/edit.c, src/gui.c, src/normal.c, src/term.c

Patch 6.1.347
問題:	    When using cscope to list matching tags, the listed number is
	    sometimes not equal to what cscope uses. (Vihren Milev)
解決方案:   For cscope tags use only one table, don't give tags in the current
	    file a higher priority.
相關文件:   src/tag.c

Patch 6.1.348
問題:	    Wildmode with wildmenu: ":set wildmode=list,full", ":colorscheme
	    <tab>" results in "zellner" instead of the first entry. (Anand
	    Hariharan)
解決方案:   Don't call ExpandOne() from globpath(). (Flemming Madsen)
相關文件:   src/ex_getln.c

Patch 6.1.349
問題:	    "vim --serverlist" when no server was ever started gives an error
	    message without "\n".
	    "vim --serverlist" doesn't exit when the X server can't be
	    contacted, it starts Vim unexpectedly. (Ricardo Signes)
解決方案:   Don't give an error when no Vim server was ever started.
	    Treat failing of opening the display equal to errors inside the
	    remote*() functions. (Flemming Madsen)
相關文件:   src/if_xcmdsrv.c, src/main.c

Patch 6.1.350
問題:	    When entering a buffer with ":bnext" for the first time, using an
	    autocommand to restore the last used cursor position doesn't work.
	    (Paolo Giarusso)
解決方案:   Don't use the last known cursor position of the current Vim
	    invocation if an autocommand changed the position.
相關文件:   src/buffer.c

Patch 6.1.351 (depends on 6.1.349)
問題:	    Crash when starting Vim the first time in an X server. (John
	    McGowan)
解決方案:   Don't call xFree() with a fixed string.
相關文件:   src/if_xcmdsrv.c

Patch 6.1.352 (extra, depends on 6.1.345)
問題:	    Win32: Crash when setting "imdisable" in _vimrc.
解決方案:   Don't call IME functions when imm32.dll was not loaded (yet).
	    Also add typecasts to avoid Compiler warnings for
	    ImmAssociateContext() argument.
相關文件:   src/gui_w32.c

Patch 6.1.353 (extra, depends on 6.1.334)
問題:	    Problem with drawing Arabic characters.
解決方案:   Don't use ETO_PDY, do use padding.
相關文件:   src/gui_w32.c

Patch 6.1.354 (extra, depends on 6.1.333)
問題:	    MS-Windows 98: Notepad can't paste text copied from Vim when
	    'encoding' is "utf-8".
解決方案:   Also make CF_TEXT available on the clipboard. (Ron Aaron)
相關文件:   src/os_mswin.c

Patch 6.1.355
問題:	    In a regexp '\n' will never match anything in a string.
解決方案:   Make '\n' match a newline character.
相關文件:   src/buffer.c, src/edit.c, src/eval.c, src/ex_cmds2.c,
	    src/ex_docmd.c, src/ex_getln.c, src/fileio.c, src/misc1.c,
	    src/option.c, src/os_mac.c, src/os_unix.c, src/quickfix.c,
	    src/regexp.c, src/search.c, src/syntax.c, src/tag.c, src/vim.h

Patch 6.1.356 (extra, depends on, well, eh, several others)
問題:	    Compiler warnings for using convert_setup() and a few other
	    things.
解決方案:   Add typecasts.
相關文件:   src/mbyte.c, src/os_mswin.c, src/proto/os_win32.pro, src/os_win32.c

Patch 6.1.357
問題:	    CR in the quickfix window jumps to the error under the cursor, but
	    this doesn't work in Insert mode. (Srikanth Sankaran)
解決方案:   Handle CR in Insert mode in the quickfix window.
相關文件:   src/edit.c

Patch 6.1.358
問題:	    The tutor doesn't select another locale version properly.
解決方案:   Insert the "let" command. (Yasuhiro Matsumoto)
相關文件:   runtime/tutor/tutor.vim

Patch 6.1.359 (extra)
問題:	    Mac Carbon: Vim doesn't get focus when started from the command
	    line.  Crash when using horizontal scroll bar.
解決方案:   Set Vim as the frontprocess.  Fix scrolling.  (Peter Cucka)
相關文件:   src/gui_mac.c

Patch 6.1.360 (depends on 6.1.341)
問題:	    In Insert mode CTRL-K ESC messes up a multi-byte character.
	    (Anders Helmersson)
解決方案:   Save all bytes of a character when displaying a character
	    temporarily.
相關文件:   src/edit.c, src/proto/screen.pro, src/screen.c

Patch 6.1.361
問題:	    Cannot jump to a file mark with ":'M".
解決方案:   Allow jumping to another file for a mark in an Ex address when it
	    is the only thing in the command line.
相關文件:   src/ex_docmd.c

Patch 6.1.362
問題:	    tgetent() may return zero for success. tgetflag() may return -1
	    for an error.
解決方案:   Check tgetflag() for returning a positive value.  Add an autoconf
	    check for the value that tgetent() returns.
相關文件:   src/auto/configure, src/config.h.in, src/configure.in, src/term.c

Patch 6.1.363
問題:	    byte2line() can return one more than the number of lines.
解決方案:   Return -1 if the offset is one byte past the end.
相關文件:   src/memline.c

Patch 6.1.364
問題:	    That the FileChangedShell autocommand event never nests makes it
	    difficult to reload a file in a normal way.
解決方案:   Allow nesting for the FileChangedShell event but do not allow
	    triggering itself again.
	    Also avoid autocommands for the cmdline window in rare cases.
相關文件:   src/ex_getln.c, src/fileio.c, src/window.c

Patch 6.1.365 (depends on 6.1.217)
問題:	    Setting a breakpoint in a sourced file with a relative path name
	    doesn't work. (Servatius Brandt)
解決方案:   Expand the file name to a full path.
相關文件:   src/ex_cmds2.c

Patch 6.1.366
問題:	    Can't use Vim with Netbeans.
解決方案:   Add the Netbeans interface.  Includes support for sign icons and
	    "-fg" and "-bg" arguments for GTK.  Add the 'autochdir'
	    option.  (Gordon Prieur, George Hernandez, Dave Weatherford)
	    Make it possible to display both a sign with a text and one with
	    line highlighting in the same line.
	    Add support for Agide, interface version 2.1.
	    Also fix that when 'iskeyword' includes '?' the "*" command
	    doesn't work properly on a word that includes "?" (Bill McCarthy):
	    Don't escape "?" to "\?" when searching forward.
相關文件:   runtime/doc/Makefile, runtime/doc/netbeans.txt,
	    runtime/doc/options.txt, runtime/doc/various.txt,
	    src/Makefile, src/auto/configure, src/buffer.c, src/config.h.in,
	    src/config.mk.in, src/configure.in, src/edit.c, src/ex_cmds.c,
	    src/ex_docmd.c, src/feature.h, src/fileio.c, src/globals.h,
	    src/gui.c, src/gui_beval.c, src/gui_gtk_x11.c, src/gui_x11.c,
	    src/main.c, src/memline.c, src/misc1.c, src/misc2.c, src/move.c,
	    src/nbdebug.c, src/nbdebug.h, src/netbeans.c, src/normal.c,
	    src/ops.c, src/option.c, src/option.h, src/proto/buffer.pro,
	    src/proto/gui_beval.pro, src/proto/gui_gtk_x11.pro,
	    src/proto/gui_x11.pro, src/proto/misc2.pro,
	    src/proto/netbeans.pro, src/proto/normal.pro, src/proto/ui.pro,
	    src/proto.h, src/screen.c, src/structs.h, src/ui.c, src/undo.c,
	    src/vim.h, src/window.c, src/workshop.c

Patch 6.1.367 (depends on 6.1.365)
問題:	    Setting a breakpoint in a function doesn't work.  For a sourced
	    file it doesn't work when symbolic links are involved.  (Servatius
	    Brandt)
解決方案:   Expand the file name in the same way as do_source() does.  Don't
	    prepend the path to a function name.
相關文件:   src/ex_cmds2.c

Patch 6.1.368
問題:	    Completion for ":map" does not include <silent> and <script>.
	    ":mkexrc" do not save the <silent> attribute of mappings.
解決方案:   Add "<silent>" to the generated map commands when appropriate.
	    (David Elstner)
	    Add <silent> and <script> to command line completion.
相關文件:   src/getchar.c

Patch 6.1.369 (extra)
問題:	    VMS: Vim hangs when attempting to edit a read-only file in the
	    terminal.  Problem with VMS filenames for quickfix.
解決方案:   Rewrite low level input.  Remove version number from file name in
	    a couple more places.  Fix crash after patch 6.1.362.  Correct
	    return code for system().  (Zoltan Arpadffy, Tomas Stehlik)
相關文件:   src/misc1.c, src/os_unix.c, src/os_vms.c, src/proto/os_vms.pro,
	    src/os_vms_conf.h, src/quickfix.c, src/ui.c

Patch 6.1.370
問題:	    #ifdef nesting is unclear.
解決方案:   Insert spaces to indicate the nesting.
相關文件:   src/os_unix.c

Patch 6.1.371
問題:	    "%V" in 'statusline' doesn't show "0-1" in an empty line.
解決方案:   Add one to the column when comparing with virtual column (Andrew
	    Pimlott)
相關文件:   src/buffer.c

Patch 6.1.372
問題:	    With 16 bit ints there are compiler warnings. (Walter Briscoe)
解決方案:   Change int into long.
相關文件:   src/structs.h, src/syntax.c

Patch 6.1.373
問題:	    The default page header for printing is not translated.
解決方案:   Add _() around the two places where "Page" is used. (Mike
	    Williams)  Translate the default value of the 'titleold' and
	    'printheader' options.
相關文件:   src/ex_cmds2.c, src/option.c

Patch 6.1.374 (extra)
問題:	    MS-Windows: Cannot build GvimExt with MingW or Cygwin.
解決方案:   Add makefile and modified resource files. (Rene de Zwart)
	    Also support Cygwin. (Alejandro Lopez_Valencia)
相關文件:   GvimExt/Make_cyg.mak, GvimExt/Make_ming.mak, GvimExt/Makefile,
	    GvimExt/gvimext_ming.def, GvimExt/gvimext_ming.rc

Patch 6.1.375
問題:	    MS-Windows: ':!dir "%"' does not work for a file name with spaces.
	    (Xiangjiang Ma)
解決方案:   Don't insert backslashes for spaces in a shell command.
相關文件:   src/ex_docmd.c

Patch 6.1.376
問題:	    "vim --version" and "vim --help" have a non-zero exit code.
	    That is unusual. (Petesea)
解決方案:   Use a zero exit code.
相關文件:   src/main.c

Patch 6.1.377
問題:	    Can't add words to 'lispwords' option.
解決方案:   Add P_COMMA and P_NODUP flags. (Haakon Riiser)
相關文件:   src/option.c

Patch 6.1.378
問題:	    When two buffer-local user commands are ambiguous, a full match
	    with a global user command isn't found. (Hari Krishna Dara)
解決方案:   Detect this situation and accept the global command.
相關文件:   src/ex_docmd.c

Patch 6.1.379
問題:	    Linux with kernel 2.2 can't use the alternate stack in combination
	    with threading, causes an infinite loop.
解決方案:   Don't use the alternate stack in this situation.
相關文件:   src/os_unix.c

Patch 6.1.380
問題:	    When 'winminheight' is zero and the quickfix window is zero lines,
	    entering the window doesn't make it higher. (Christian J.
	    Robinson)
解決方案:   Make sure the current window is at least one line high.
相關文件:   src/window.c

Patch 6.1.381
問題:	    When a BufWriteCmd is used and it leaves the buffer modified, the
	    window may still be closed. (Hari Krishna Dara)
解決方案:   Return FAIL from buf_write() when the buffer is still modified
	    after a BufWriteCmd autocommand was used.
相關文件:   src/fileio.c

Patch 6.1.382 (extra)
問題:	    Win32 GUI: When using two monitors, the code that checks/fixes the
	    window size and position (e.g. when a font changes) doesn't work
	    properly.  (George Reilly)
解決方案:   Handle a double monitor situation. (Helmut Stiegler)
相關文件:   src/gui_w32.c

Patch 6.1.383
問題:	    The filling of the status line doesn't work properly for
	    multi-byte characters. (Nam SungHyun)
	    There is no check for going past the end of the buffer.
解決方案:   Properly distinguish characters and bytes.  Properly check for
	    running out of buffer space.
相關文件:   src/buffer.c, src/ex_cmds2.c, src/proto/buffer.pro, src/screen.c

Patch 6.1.384
問題:	    It is not possible to find if a certain patch has been included.
	    (Lubomir Host)
解決方案:   Support using has() to check if a patch was included.
相關文件:   runtime/doc/eval.txt, src/eval.c, src/proto/version.pro,
	    src/version.c

Patch 6.1.385 (depends on 6.1.383)
問題:	    Can't compile without the multi-byte feature.
解決方案:   Move an #ifdef.  (Christian J. Robinson)
相關文件:   src/buffer.c

Patch 6.1.386
問題:	    Get duplicate tags when running ":helptags".
解決方案:   Do the other halve of moving a section to another help file.
相關文件:   runtime/tagsrch.txt

Patch 6.1.387 (depends on 6.1.373)
問題:	    Compiler warning for pointer cast.
解決方案:   Add (char_u *).
相關文件:   src/option.c

Patch 6.1.388 (depends on 6.1.384)
問題:	    Compiler warning for pointer cast.
解決方案:   Add (char *).  Only include has_patch() when used.
相關文件:   src/eval.c, src/version.c

Patch 6.1.389 (depends on 6.1.366)
問題:	    Balloon evaluation doesn't work for GTK.
	    has("balloon_eval") doesn't work.
解決方案:   Add balloon evaluation for GTK.  Also improve displaying of signs.
	    (Daniel Elstner)
	    Also make ":gui" start the netbeans connection and avoid using
	    netbeans functions when the connection is not open.
相關文件:   src/Makefile, src/feature.h, src/gui.c, src/gui.h,
	    src/gui_beval.c, src/gui_beval.h, src/gui_gtk.c,
	    src/gui_gtk_x11.c, src/eval.c, src/memline.c, src/menu.c,
	    src/netbeans.c, src/proto/gui_beval.pro, src/proto/gui_gtk.pro,
	    src/structs.h, src/syntax.c, src/ui.c, src/workshop.c

Patch 6.1.390 (depends on 6.1.389)
問題:	    It's not possible to tell Vim to save and exit through the
	    Netbeans interface.  Would still try to send balloon eval text
	    after the connection is closed.
	    Can't use Unicode characters for sign text.
解決方案:   Add functions "saveAndExit" and "getModified".  Check for a
	    working connection before sending a balloonText event.
	    various other cleanups.
	    Support any character for sign text. (Daniel Elstner)
相關文件:   runtime/doc/netbeans.txt, runtime/doc/sign.txt, src/ex_cmds.c,
	    src/netbeans.c, src/screen.c

Patch 6.1.391
問題:	    ml_get() error when using virtualedit. (Charles Campbell)
解決方案:   Get a line from a specific window, not the current one.
相關文件:   src/charset.c

Patch 6.1.392 (depends on 6.1.383)
問題:	    Highlighting in the 'statusline' is in the wrong position when an
	    item is truncated. (Zak Beck)
解決方案:   Correct the start of 'statusline' items properly for a truncated
	    item.
相關文件:   src/buffer.c

Patch 6.1.393
問題:	    When compiled with Python and threads, detaching the terminal may
	    cause Vim to loop forever.
解決方案:   Add -pthread to $CFLAGS when using Python and gcc. (Daniel
	    Elstner)
相關文件:   src/auto/configure,, src/configure.in

Patch 6.1.394 (depends on 6.1.390)
問題:	    The netbeans interface doesn't recognize multibyte glyph names.
解決方案:   Check the number of cells rather than bytes to decide
	    whether a glyph name is not a filename. (Daniel Elstner)
相關文件:   src/netbeans.c

Patch 6.1.395 (extra, depends on 6.1.369)
問題:	    VMS: OLD_VMS is never defined.  Missing function prototype.
解決方案:   Define OLD_VMS in Make_vms.mms.  Add vms_sys_status() to
	    os_vms.pro. (Zoltan Arpadffy)
相關文件:   src/Make_vms.mms, src/proto/os_vms.pro

Patch 6.1.396 (depends on 6.1.330)
問題:	    Compiler warnings for using enum.
解決方案:   Add typecast to char_u.
相關文件:   src/gui_gtk_x11.c, src/gui_x11.c

Patch 6.1.397 (extra)
問題:	    The install program may use a wrong path for the diff command if
	    there is a space in the install directory path.
解決方案:   Use double quotes around the path if necessary. (Alejandro
	    Lopez-Valencia)  Also use double quotes around the file name
	    arguments.
相關文件:   src/dosinst.c

Patch 6.1.398
問題:	    Saving the typeahead for debug mode causes trouble for a test
	    script. (Servatius Brandt)
解決方案:   Add the ":debuggreedy" command to avoid saving the typeahead.
相關文件:   runtime/doc/repeat.txt, src/ex_cmds.h, src/ex_cmds2.c,
	    src/ex_docmd.c, src/proto/ex_cmds2.pro

Patch 6.1.399
問題:	    Warning for unused variable.
解決方案:   Remove the variable two_or_more.
相關文件:   src/ex_cmds.c

Patch 6.1.400 (depends on 6.1.381)
問題:	    When a BufWriteCmd wipes out the buffer it may still be accessed.
解決方案:   Don't try accessing a buffer that has been wiped out.
相關文件:   src/fileio.c

Patch 6.1.401 (extra)
問題:	    Building the Win16 version with Borland 5.01 doesn't work.
	    "make test" doesn't work with Make_dos.mak. (Walter Briscoe)
解決方案:   Various fixes to the w16 makefile. (Walter Briscoe)
	    Don't use deltree.  Use "mkdir \tmp" instead of "mkdir /tmp".
相關文件:   src/Make_w16.mak, src/testdir/Make_dos.mak

Patch 6.1.402
問題:	    When evaluating a function name with curly braces, an error
	    is not handled consistently.
解決方案:   Accept the result of an curly braces expression when an
	    error was encountered.  Skip evaluating an expression in curly
	    braces when skipping.  (Servatius Brandt)
相關文件:   src/eval.c

Patch 6.1.403 (extra)
問題:	    MS-Windows 16 bit: compiler warnings.
解決方案:   Add typecasts. (Walter Briscoe)
相關文件:   src/ex_cmds2.c, src/gui_w48.c, src/os_mswin.c, src/os_win16.c,
	    src/syntax.c

Patch 6.1.404 (extra)
問題:	    Various small problems.
解決方案:   Fix comments.  Various small additions, changes in indent, removal
	    of unused items and fixes.
相關文件:   Makefile, README.txt, runtime/menu.vim, runtime/vimrc_example.vim,
	    src/INSTALL, src/INSTALLole.txt, src/Make_bc5.mak,
	    src/Make_cyg.mak, src/Make_ming.mak, src/Makefile,
	    src/config.h.in, src/edit.c, src/eval.c, src/ex_cmds2.c,
	    src/ex_docmd.c, src/ex_getln.c, src/fileio.c, src/getchar.c,
	    src/gui.c, src/gui_gtk.c, src/gui_photon.c, src/if_cscope.c,
	    src/if_python.c, src/keymap.h, src/mark.c, src/mbyte.c,
	    src/message.c, src/misc1.c, src/misc2.c, src/normal.c,
	    src/option.c, src/os_os2_cfg.h, src/os_win32.c,
	    src/proto/getchar.pro, src/proto/message.pro,
	    src/proto/regexp.pro, src/screen.c, src/structs.h, src/syntax.c,
	    src/term.c, src/testdir/test15.in, src/testdir/test15.ok,
	    src/vim.rc, src/xxd/Make_cyg.mak, src/xxd/Makefile

Patch 6.1.405
問題:	    A few files are missing from the toplevel Makefile.
解決方案:   Add the missing files.
相關文件:   Makefile

Patch 6.1.406 (depends on 6.1.392)
問題:	    When a statusline item doesn't fit arbitrary text appears.
	    (Christian J. Robinson)
解決方案:   When there is just enough room but not for the "<" truncate the
	    statusline item like there is no room.
相關文件:   src/buffer.c

Patch 6.1.407
問題:	    ":set scrollbind | help" scrollbinds the help window. (Andrew
	    Pimlott)
解決方案:   Reset 'scrollbind' when opening a help window.
相關文件:   src/ex_cmds.c

Patch 6.1.408
問題:	    When 'rightleft' is set unprintable character 0x0c is displayed as
	    ">c0<".
解決方案:   Reverse the text of the hex character.
相關文件:   src/screen.c

Patch 6.1.409
問題:	    Generating tags for the help doesn't work for some locales.
解決方案:   Set LANG=C LC_ALL=C in the environment for "sort". (Daniel
	    Elstner)
相關文件:   runtime/doc/Makefile

Patch 6.1.410 (depends on 6.1.390)
問題:	    Linking error when compiling with Netbeans but without sign icons.
	    (Malte Neumann)
解決方案:   Don't define buf_signcount() when sign icons are unavailable.
相關文件:   src/buffer.c

Patch 6.1.411
問題:	    When 'virtualedit' is set, highlighting a Visual block beyond the
	    end of a line may be wrong.
解決方案:   Correct the virtual column when the end of the line is before the
	    displayed part of the line. (Muraoka Taro)
相關文件:   src/screen.c

Patch 6.1.412
問題:	    When swapping terminal screens and using ":gui" to start the GUI,
	    the shell prompt may be after a hit-enter prompt.
解決方案:   Output a newline in the terminal when starting the GUI and there
	    was a hit-enter prompt..
相關文件:   src/gui.c

Patch 6.1.413
問題:	    When 'clipboard' contains "unnamed", "p" in Visual mode doesn't
	    work correctly.
解決方案:   Save the register before overwriting it and put the resulting text
	    on the clipboard afterwards.  (Muraoka Taro)
相關文件:   src/normal.c, src/ops.c

Patch 6.1.414 (extra, depends on 6.1.369)
問題:	    VMS: Vim busy waits when waiting for input.
解決方案:   Delay for a short while before getting another character.  (Zoltan
	    Arpadffy)
相關文件:   src/os_vms.c

Patch 6.1.415
問題:	    When there is a vertical split and a quickfix window, reducing the
	    size of the Vim window may result in a wrong window layout and a
	    crash.
解決方案:   When reducing the window size and there is not enough space for
	    'winfixheight' set the frame height to the larger height, so that
	    there is a retry while ignoring 'winfixheight'. (Yasuhiro
	    Matsumoto)
相關文件:   src/window.c

Patch 6.1.416 (depends on 6.1.366)
問題:	    When using the Netbeans interface, a line with a sign cannot be
	    changed.
解決方案:   Respect the GUARDEDOFFSET for sign IDs when checking for a guarded
	    area.
相關文件:   src/netbeans.c

Patch 6.1.417
問題:	    Unprintable multi-byte characters are not handled correctly.
	    Multi-byte characters above 0xffff are displayed as another
	    character.
解決方案:   Handle unprintable multi-byte characters.  Display multi-byte
	    characters above 0xffff with a marker.  Recognize UTF-16 words and
	    BOM words as unprintable.  (Daniel Elstner)
相關文件:   src/charset.c, src/mbyte.c, src/screen.c

Patch 6.1.418
問題:	    The result of strftime() is in the current locals.  Need to
	    convert it to 'encoding'.
解決方案:   Obtain the current locale and convert the argument for strftime()
	    to it and the result back to 'encoding'.  (Daniel Elstner)
相關文件:   src/eval.c, src/ex_cmds.c, src/ex_cmds2.c, src/mbyte.c,
	    src/proto/mbyte.pro, src/option.c, src/os_mswin.c

Patch 6.1.419
問題:	    Vim doesn't compile on AIX 5.1.
解決方案:   Don't define _NO_PROTO on this system. (Uribarri)
相關文件:   src/auto/configure, src/configure.in

Patch 6.1.420 (extra)
問題:	    convert_input() has an unnecessary STRLEN().
	    Conversion from UCS-2 to a codepage uses word count instead of
	    byte count.
解決方案:   Remove the STRLEN() call. (Daniel Elstner)
	    Always use byte count for string_convert().
相關文件:   src/gui_w32.c, src/mbyte.c

Patch 6.1.421 (extra, depends on 6.1.354)
問題:	    MS-Windows 9x: When putting text on the clipboard it can be in
	    the wrong encoding.
解決方案:   Convert text to the active codepage for CF_TEXT. (Glenn Maynard)
相關文件:   src/os_mswin.c

Patch 6.1.422
問題:	    Error in .vimrc doesn't cause hit-enter prompt when swapping
	    screens. (Neil Bird)
解決方案:   Set msg_didany also when sending a message to the terminal
	    directly.
相關文件:   src/message.c

Patch 6.1.423
問題:	    Can't find arbitrary text in help files.
解決方案:   Added the ":helpgrep" command.
相關文件:   runtime/doc/various.txt, src/ex_cmds.h, src/ex_docmd.c,
	    src/proto/quickfix.pro, src/quickfix.c

Patch 6.1.424 (extra)
問題:	    Win32: Gvim compiled with VC++ 7.0 run on Windows 95 does not show
	    menu items.
解決方案:   Define $WINVER to avoid an extra item is added to MENUITEMINFO.
	    (Muraoka Taro)
相關文件:   src/Make_mvc.mak

Patch 6.1.425
問題:	    ":helptags $VIMRUNTIME/doc" does not add the "help-tags" tag.
解決方案:   Do add the "help-tags" tag for that specific directory.
相關文件:   src/ex_cmds.c

Patch 6.1.426
問題:	    "--remote-wait +cmd file" waits forever. (Valery Kondakoff)
解決方案:   Don't wait for the "+cmd" argument to have been edited.
相關文件:   src/main.c

Patch 6.1.427
問題:	    Several error messages for regexp patterns are not translated.
解決方案:   Use _() properly. (Muraoka Taro)
相關文件:   src/regexp.c

Patch 6.1.428
問題:	    FreeBSD: wait() may hang when compiled with Python support and
	    doing a system() call in a startup script.
解決方案:   Use waitpid() instead of wait() and poll every 10 msec, just like
	    what is done in the GUI.
相關文件:   src/os_unix.c

Patch 6.1.429 (depends on 6.1.390)
問題:	    Crash when using showmarks.vim plugin. (Charles Campbell)
解決方案:   Check for sign_get_text() returning a NULL pointer.
相關文件:   src/screen.c

Patch 6.1.430
問題:	    In Lisp code backslashed parens should be ignored for "%". (Dorai)
解決方案:   Skip over backslashed parens.
相關文件:   src/search.c

Patch 6.1.431
問題:	    Debug commands end up in redirected text.
解決方案:   Disable redirection while handling debug commands.
相關文件:   src/ex_cmds2.c

Patch 6.1.432 (depends on 6.1.375)
問題:	    MS-Windows: ":make %:p" inserts extra backslashes. (David Rennalls)
解決方案:   Don't add backslashes, handle it like ":!cmd".
相關文件:   src/ex_docmd.c

Patch 6.1.433
問題:	    ":popup" only works for Win32.
解決方案:   Add ":popup" support for GTK.  (Daniel Elstner)
相關文件:   runtime/doc/gui.txt, src/ex_docmd.c, src/gui_gtk.c, src/menu.c,
	    src/proto/gui_gtk.pro

Patch 6.1.434 (extra)
問題:	    Win32: When there are more than 32767 lines, the scrollbar has a
	    roundoff error.
解決方案:   Make a click on an arrow move one line.  Also move the code to
	    gui_w48.c, there is hardly any difference between the 16 bit and
	    32 bit versions. (Walter Briscoe)
相關文件:   src/gui_w16.c, src/gui_w32.c, src/gui_w48.c

Patch 6.1.435
問題:	    ":winsize x" resizes the Vim window to the minimal size. (Andrew
	    Pimlott)
解決方案:   Give an error message for wrong arguments of ":winsize" and
	    ":winpos".
相關文件:   src/ex_docmd.c

Patch 6.1.436
問題:	    When a long UTF-8 file contains an illegal byte it's hard to find
	    out where it is. (Ron Aaron)
解決方案:   Add the line number to the error message.
相關文件:   src/fileio.c

Patch 6.1.437 (extra, depends on 6.1.421)
問題:	    Using multi-byte functions when they are not available.
解決方案:   Put the clipboard conversion inside an #ifdef. (Vince Negri)
	    Also fix a pointer type mistake. (Walter Briscoe)
相關文件:   src/os_mswin.c

Patch 6.1.438
問題:	    When Perl has thread support Vim cannot use the Perl interface.
解決方案:   Add a configure check and disable Perl when it will not work.
	    (Aron Griffis)
相關文件:   src/auto/configure, src/configure.in

Patch 6.1.439
問題:	    Netbeans: A "create" function doesn't actually create a buffer,
	    following functions may fail.
解決方案:   Create a Vim buffer without a name when "create" is called.
	    (Gordon Prieur)
相關文件:   runtime/doc/netbeans.txt, src/netbeans.c

Patch 6.1.440
問題:	    The "@*" command doesn't obtain the actual contents of the
	    clipboard. (Hari Krishna Dara)
解決方案:   Obtain the clipboard text before executing the command.
相關文件:   src/ops.c

Patch 6.1.441
問題:	    "zj" and "zk" cannot be used as a motion command after an
	    operator. (Ralf Hetzel)
解決方案:   Accept these commands as motion commands.
相關文件:   src/normal.c

Patch 6.1.442
問題:	    Unicode 3.2 defines more space and punctuation characters.
解決方案:   Add the new characters to the Unicode tables. (Raphael Finkel)
相關文件:   src/mbyte.c

Patch 6.1.443 (extra)
問題:	    Win32: The gvimext.dll build with Borland 5.5 requires another
	    DLL.
解決方案:   Build a statically linked version by default. (Dan Sharp)
相關文件:   GvimExt/Make_bc5.mak

Patch 6.1.444 (extra)
問題:	    Win32: Enabling a build with gettext support is not consistent.
解決方案:   Use "GETTEXT" for Borland and msvc makefiles. (Dan Sharp)
相關文件:   src/Make_bc5.mak, src/Make_mvc.mak

Patch 6.1.445 (extra)
問題:	    DJGPP: get warning for argument of putenv()
解決方案:   Define HAVE_PUTENV to use DJGPP's putenv(). (Walter Briscoe)
相關文件:   src/os_msdos.h

Patch 6.1.446 (extra)
問題:	    Win32: The MingW makefile uses a different style of arguments than
	    other makefiles.
	    Dynamic IME is not supported for Cygwin.
解決方案:   Use "no" and "yes" style arguments.  Remove the use of the
	    dyn-ming.h include file. (Dan Sharp)
	    Do not include the ime.h file and adjust the makefile. (Alejandro
	    Lopez-Valencia)
相關文件:   src/Make_cyg.mak, src/Make_ming.mak, src/gui_w32.c,
	    src/if_perl.xs, src/if_python.c, src/if_ruby.c, src/os_win32.c

Patch 6.1.447
問題:	    "make install" uses "make" directly for generating help tags.
解決方案:   Use $(MAKE) instead of "make". (Tim Mooney)
相關文件:   src/Makefile

Patch 6.1.448
問題:	    'titlestring' has a default maximum width of 50 chars per item.
解決方案:   Remove the default maximum (also for 'statusline').
相關文件:   src/buffer.c

Patch 6.1.449
問題:	    When "1" and "a" are in 'formatoptions', auto-formatting always
	    moves a newly added character to the next line. (Servatius Brandt)
解決方案:   Don't move a single character to the next line when it was just
	    typed.
相關文件:   src/edit.c

Patch 6.1.450
問題:	    Termcap entry "kB" for back-tab is not recognized.
解決方案:   Use back-tab as the shift-tab code.
相關文件:   src/keymap.h, src/misc2.c, src/term.c

Patch 6.1.451
問題:	    GUI: When text in the find dialog contains a slash, a backslash is
	    inserted the next time it is opened. (Mezz)
解決方案:   Remove escaped backslashes and question marks. (Daniel Elstner)
相關文件:   src/gui.c

Patch 6.1.452 (extra, after 6.1.446)
問題:	    Win32: IME support doesn't work for MSVC.
解決方案:   Use _MSC_VER instead of __MSVC. (Alejandro Lopez-Valencia)
相關文件:   src/gui_w32.c

Patch 6.1.453 (after 6.1.429)
問題:	    When compiled without sign icons but with sign support, adding a
	    sign may cause a crash.
解決方案:   Check for the text sign to exist before using it. (Kamil
	    Burzynski)
相關文件:   src/screen.c

Patch 6.1.454 (extra)
問題:	    Win32: pasting Russian text in Vim with 'enc' set to cp1251
	    results in utf-8 bytes.  (Perelyubskiy)
	    Conversion from DBCS to UCS2 does not work when 'encoding' is not
	    the active codepage.
解決方案:   Introduce enc_codepage and use it for conversion to 'encoding'
	    (Glenn Maynard)
	    Use MultiByteToWideChar() and WideCharToMultiByte() instead of
	    iconv().  Should do most needed conversions without iconv.dll.
相關文件:   src/globals.h, src/gui_w32.c, src/mbyte.c, src/os_mswin.c,
	    src/proto/mbyte.pro, src/proto/os_mswin.pro, src/structs.h

Patch 6.1.455
問題:	    Some Unicode characters can be one or two character cells wide.
解決方案:   Add the 'ambiwidth' option to tell Vim how to display these
	    characters. (Jungshik Shin)
	    Also reset the script ID when setting an option to its default
	    value, so that ":verbose set" won't give wrong info.
相關文件:   runtime/doc/options.txt, src/mbyte.c, src/option.c, src/option.h

Patch 6.1.456 (extra, after 6.1.454)
問題:	    Win32: IME doesn't work.
解決方案:   ImmGetCompositionStringW() returns the size in bytes, not words.
	    (Yasuhiro Matsumoto)  Also fix typecast problem.
相關文件:   src/gui_w32.c, src/os_mswin.c

Patch 6.1.457
問題:	    An empty register in viminfo causes conversion to fail.
解決方案:   Don't convert an empty string. (Yasuhiro Matsumoto)
相關文件:   src/ex_cmds.c, src/mbyte.c

Patch 6.1.458
問題:	    Compiler warning for pointer.
解決方案:   Add a typecast.
相關文件:   src/ex_cmds.c

Patch 6.1.459 (extra)
問題:	    Win32: libcall() may return an invalid pointer and cause Vim to
	    crash.
解決方案:   Add a strict check for the returned pointer. (Bruce Mellows)
相關文件:   src/os_mswin.c

Patch 6.1.460
問題:	    GTK: after scrolling the text one line with a key, clicking the
	    arrow of the scrollbar does not always work. (Nam SungHyun)
解決方案:   Always update the scrollbar thumb when the value changed, even
	    when it would not move, like for RISCOS.  (Daniel Elstner)
相關文件:   src/gui.c, src/gui.h

Patch 6.1.461
問題:	    When a keymap is active, typing a character in Select mode does
	    not use it. (Benji Fisher)
解決方案:   Apply Insert mode mapping to the character typed in Select mode.
相關文件:   src/normal.c

Patch 6.1.462
問題:	    When autocommands wipe out a buffer, a crash may happen. (Hari
	    Krishna Dara)
解決方案:   Don't decrement the window count of a buffer before calling the
	    autocommands for it.  When re-using the current buffer, watch out
	    for autocommands changing the current buffer.
相關文件:   src/buffer.c, src/ex_cmds.c, src/proto/buffer.pro

Patch 6.1.463
問題:	    When writing a compressed file, the file name that gzip stores in
	    the file is the weird temporary file name. (David Rennalls)
解決方案:   Use the real file name when possible.
相關文件:   runtime/plugin/gzip.vim

Patch 6.1.464
問題:	    Crash when using C++ syntax highlighting. (Gerhard Hochholzer)
解決方案:   Check for a negative index.
相關文件:   src/syntax.c

Patch 6.1.465 (after 6.1.454)
問題:	    Compile error when using cygwin.
解決方案:   Change #ifdef WIN32 to #ifdef WIN3264. (Alejandro Lopez-Valencia)
	    Undefine WIN32 after including windows.h
相關文件:   src/mbyte.c

Patch 6.1.466
問題:	    The "-f" argument is a bit obscure.
解決方案:   Add the "--nofork" argument.  Improve the help text a bit.
相關文件:   runtime/doc/starting.txt, src/main.c

Patch 6.1.467
問題:	    Setting the window title doesn't work for Chinese.
解決方案:   Use an X11 function to convert text to a text property. (Kentaro
	    Nakazawa)
相關文件:   src/os_unix.c

Patch 6.1.468
問題:	    ":mksession" also stores folds for buffers which will not be
	    restored.
解決方案:   Only store folds for a buffer with 'buftype' empty and help files.
相關文件:   src/ex_docmd.c

Patch 6.1.469
問題:	    'listchars' cannot contain multi-byte characters.
解決方案:   Handle multi-byte UTF-8 list characters. (Matthew Samsonoff)
相關文件:   src/message.c, src/option.c, src/screen.c

Patch 6.1.470 (lang)
問題:	    Polish messages don't show up correctly on MS-Windows.
解決方案:   Convert messages to cp1250. (Mikolaj Machowski)
	    Also add English message translations, because it got in the way
	    of the patch.
相關文件:   Makefile, src/po/Makefile, src/po/en_gb.po, src/po/pl.po

Patch 6.1.471
問題:	    ":jumps" output continues after pressing "q" at the more-prompt.
	    (Hari Krishna Dara)
解決方案:   Check for "got_int" being set.
相關文件:   src/mark.c

Patch 6.1.472
問題:	    When there is an authentication error when connecting to the X
	    server Vim exits.
解決方案:   Use XSetIOErrorHandler() to catch the error and longjmp() to avoid
	    the exit.  Also do this in the main loop, so that when the X
	    server exits a Vim running in a console isn't killed.
相關文件:   src/globals.h, src/main.c, src/os_unix.c

Patch 6.1.473
問題:	    Referring to $curwin or $curbuf in Perl 5.6 causes a crash.
解決方案:   Add "pTHX_" to cur_val(). (Yasuhiro Matsumoto)
相關文件:   src/if_perl.xs

Patch 6.1.474
問題:	    When opening the command-line window in Ex mode it's impossible to
	    go back. (Pavol Juhas)
解決方案:   Reset "exmode_active" and restore it when the command-line window
	    is closed.
相關文件:   src/ex_getln.c


Patch 6.2f.001
問題:	    The configure check for Ruby didn't work properly for Ruby 1.8.0.
解決方案:   Change the way the Ruby check is done. (Aron Griffis)
相關文件:   src/auto/configure, src/configure.in

Patch 6.2f.002
問題:	    The output of ":ls" doesn't show whether a buffer had read errors.
解決方案:   Add the "x" flag in the ":ls" output.
相關文件:   runtime/doc/windows.txt, src/buffer.c

Patch 6.2f.003
問題:	    Test49 doesn't properly test the behavior of ":catch" without an
	    argument.
解決方案:   Update test49. (Servatius Brandt)
相關文件:   src/testdir/test49.ok, src/testdir/test49.vim

Patch 6.2f.004
問題:	    "vim --version" always uses CR/LF in the output.
解決方案:   Omit the CR.
相關文件:   src/message.c, src/os_unix.c

Patch 6.2f.005
問題:	    Two error messages without a colon after the number.
解決方案:   Add the colon. (Taro Muraoka)
相關文件:   src/if_cscope.c

Patch 6.2f.006
問題:	    When saving a file takes a while and Vim regains focus this can
	    result in a "file changed outside of Vim" warning and ml_get()
	    errors. (Mike Williams)
解決方案:   Add the "b_saving" flag to avoid checking the timestamp while the
	    buffer is being saved. (Michael Schaap)
相關文件:   src/fileio.c, src/structs.h

Patch 6.2f.007
問題:	    Irix compiler complains about multiple defined symbols.
	    vsnprintf() is not available.  (Charles Campbell)
解決方案:   Insert EXTERN for variables in globals.h.  Change the configure
	    check for vsnprintf() from compiling to linking.
相關文件:   src/auto/configure, src/configure.in, src/globals.h

Patch 6.2f.008
問題:	    The Aap recipe doesn't work with Aap 0.149.
解決方案:   Change targetarg to TARGETARG.  Update the mysign file.
相關文件:   src/main.aap, src/mysign

Patch 6.2f.009 (extra)
問題:	    Small problem when building with Borland 5.01.
解決方案:   Use mkdir() instead of _mkdir(). (Walter Briscoe)
相關文件:   src/dosinst.h

Patch 6.2f.010
問題:	    Warning for missing prototypes.
解決方案:   Add missing prototypes. (Walter Briscoe)
相關文件:   src/if_cscope.c

Patch 6.2f.011
問題:	    The configure script doesn't work with autoconf 2.5x.
解決方案:   Add square brackets around a header check. (Aron Griffis)
	    Note: touch src/auto/configure after applying this patch.
相關文件:   src/configure.in

Patch 6.2f.012
問題:	    ":echoerr" doesn't work correctly inside try/endtry.
解決方案:   Don't reset did_emsg inside a try/endtry. (Servatius Brandt)
相關文件:   src/eval.c

Patch 6.2f.013 (extra)
問題:	    Macintosh: Compiler warning for a trigraph.
解決方案:   Insert a backslash before each question mark. (Peter Cucka)
相關文件:   src/os_mac.h

Patch 6.2f.014 (extra)
問題:	    Macintosh: ex_eval is not included in the project file.
解決方案:   Add ex_eval. (Dany St-Amant)
相關文件:   src/os_mac.pbproj/project.pbxproj

Patch 6.2f.015 (extra)
問題:	    Win32: When changing header files not all source files involved
	    are recompiled.
解決方案:   Improve the dependency rules. (Dan Sharp)
相關文件:   src/Make_cyg.mak, src/Make_ming.mak

Patch 6.2f.016
問題:	    "vim --version > ff" on non-Unix systems results in a file with a
	    missing line break at the end. (Bill McCArthy)
解決方案:   Add a line break.
相關文件:   src/main.c

Patch 6.2f.017
問題:	    Unix: starting Vim in the background and then bringing it to the
	    foreground may cause the terminal settings to be wrong.
解決方案:   Check for tcsetattr() to return an error, retry when it does.
	    (Paul Tapper)
相關文件:   src/os_unix.c

Patch 6.2f.018
問題:	    Mac OS X 10.2: OK is defined to zero in cursus.h while Vim uses
	    one.  Redefining it causes a warning message.
解決方案:   Undefine OK before defining it to one. (Taro Muraoka)
相關文件:   src/vim.h

Patch 6.2f.019
問題:	    Mac OS X 10.2: COLOR_BLACK and COLOR_WHITE are defined in
	    curses.h.
解決方案:   Rename them to PRCOLOR_BLACK and PRCOLOR_WHITE.
相關文件:   src/ex_cmds2.c

Patch 6.2f.020
問題:	    Win32: test50 produces beeps and fails with some versions of diff.
解決方案:   Remove empty lines and convert the output to dos fileformat.
相關文件:   src/testdir/test50.in

Patch 6.2f.021
問題:	    Running configure with "--enable-netbeans" disables Netbeans.
	    (Gordon Prieur)
解決方案:   Fix the tests in configure.in where the default is to enable a
	    feature.  Fix that "--enable-acl" reported "yes" confusingly.
相關文件:   src/auto/configure, src/configure.in, src/mysign

Patch 6.2f.022
問題:	    A bogus value for 'foldmarker' is not rejected, possibly causing a
	    hang. (Derek Wyatt)
解決方案:   Check for a non-empty string before and after the comma.
相關文件:   src/option.c

Patch 6.2f.023
問題:	    When the help files are not in $VIMRUNTIME but 'helpfile' is
	    correct Vim still can't find the help files.
解決方案:   Also look for a tags file in the directory of 'helpfile'.
相關文件:   src/tag.c

Patch 6.2f.024
問題:	    When 'delcombine' is set and a character has more than two
	    composing characters "x" deletes them all.
解決方案:   Always delete only the last composing character.
相關文件:   src/misc1.c

Patch 6.2f.025
問題:	    When reading a file from stdin that has DOS line endings but a
	    missing end-of-line for the last line 'fileformat' becomes "unix".
	    (Bill McCarthy)
解決方案:   Don't add the missing line break when re-reading the text from the
	    buffer.
相關文件:   src/fileio.c

Patch 6.2f.026
問題:	    When typing new text at the command line, old composing characters
	    may be displayed.
解決方案:   Don't read composing characters from after the end of the
	    text to be displayed.
相關文件:   src/ex_getln.c, src/mbyte.c, src/message.c, src/proto/mbyte.pro,
	    src/screen.c

Patch 6.2f.027
問題:	    Compiler warnings for unsigned char pointers. (Tony Leneis)
解決方案:   Add typecasts to char pointer.
相關文件:   src/quickfix.c

Patch 6.2f.028
問題:	    GTK: When 'imactivatekey' is empty and XIM is inactive it can't be
	    made active again.  Cursor isn't updated immediately when changing
	    XIM activation.  Japanese XIM may hang when using 'imactivatekey'.
	    Can't activate XIM after typing fFtT command or ":sh".
解決方案:   Properly set the flag that indicates the IM is active.  Update the
	    cursor right away.  Do not send a key-release event.  Handle
	    Normal mode and running an external command differently.
	    (Yasuhiro Matsumoto)
相關文件:   src/mbyte.c

Patch 6.2f.029
問題:	    Mixing use of int and enum.
解決方案:   Adjust argument type of cs_usage_msg().  Fix wrong typedef.
相關文件:   src/if_cscope.c, src/if_cscope.h

Patch 6.2f.030 (after 6.2f.028)
問題:	    Cursor moves up when using XIM.
解決方案:   Reset im_preedit_cursor.  (Yasuhiro Matsumoto)
相關文件:   src/mbyte.c

Patch 6.2f.031
問題:	    Crash when listing a function argument in the debugger. (Ron Aaron)
解決方案:   Init the name field of an argument to NULL.
相關文件:   src/eval.c

Patch 6.2f.032
問題:	    When a write fails for a ":silent!" while inside try/endtry the
	    BufWritePost autocommands are not triggered.
解決方案:   Check the emsg_silent flag in should_abort(). (Servatius Brandt)
相關文件:   src/ex_eval.c, src/testdir/test49.ok, src/testdir/test49.vim

Patch 6.2f.033
問題:	    Cscope: re-entrance problem for ":cscope" command.  Checking for
	    duplicate database didn't work well for Win95.  Didn't check for
	    duplicate databases after an empty entry.
解決方案:   Don't set postponed_split too early.  Remember first empty
	    database entry. (Sergey Khorev)
相關文件:   src/if_cscope.c

Patch 6.2f.034
問題:	    The netbeans interface cannot be used on systems without
	    vsnprintf(). (Tony Leneis)
解決方案:   Use EMSG(), EMSGN() and EMSG2() instead.
相關文件:   src/auto/configure, src/configure.in, src/netbeans.c

Patch 6.2f.035
問題:	    The configure check for the netbeans interface doesn't work if the
	    socket and nsl libraries are required.
解決方案:   Check for the socket and nsl libraries before the netbeans check.
相關文件:   src/auto/configure, src/configure.in

Patch 6.2f.036
問題:	    Moving leftwards over text with an illegal UTF-8 byte moves one
	    byte instead of one character.
解決方案:   Ignore an illegal byte after the cursor position.
相關文件:   src/mbyte.c

Patch 6.2f.037
問題:	    When receiving a Netbeans command at the hit-enter or more prompt
	    the screen is redrawn but Vim is still waiting at the prompt.
解決方案:   Quit the prompt like a CTRL-C was typed.
相關文件:   src/netbeans.c

Patch 6.2f.038
問題:	    The dependency to run autoconf causes a patch for configure.in
	    to run autoconf, even though the configure script was updated as
	    well.
解決方案:   Only run autoconf with "make autoconf".
相關文件:   src/Makefile

Patch 6.2f.039
問題:	    CTRL-W K makes the new top window very high.
解決方案:   When 'equalalways' is set equalize the window heights.
相關文件:   src/window.c


==============================================================================
6.3 版 本						*version-6.3*

本小節討論 6.2 和 6.3 版本之間的改進。

這是一個漏洞修正版。也有一些新特性。主要的新項目來自運行時文件和翻譯。


改動							*changed-6.3*
-------

介紹文字也顯示贊助 Vim 的說明，和幫助烏干達兒童的消息混合在一起。

正常運行時文件裡包含了包含翻譯的菜單、鍵盤映射表和教程。單獨的 "lang" 歸檔現在
只包含翻譯的消息。

翻譯菜單的文件名更加一致。使用 "latin1" 代替 "iso_8859-1" 和 "iso_8859-15"。

發佈裡刪除了 "file_select.vim" 腳本。和 www.vim.org 可以下載的其它腳本比起來，
並不更有用。

"runtime/doc/tags" 文件現在總是 unix 文件格式。MS-Windows 上過去使用 dos 文件
格式，但 ":helptags" 產生 unix 格式的文件。


新增							*added-6.3*
-----

新增命令:
	:cNfile		跳轉到上個文件的最後的一個錯誤
	:cpfile		同上
	:changes	顯示改變表
	:keepmarks	後面跟隨的命令保持位置標記不變
	:keepjumps	後面跟隨的命令保持跳轉表和位置標記不變
	:lockmarks	後面跟隨的命令保持位置標記不變
	:redrawstatus	強制刷新狀態行

新選項:
	'antialias'	Mac OS X: 使用平滑反鋸齒字體
	'helplang'	偏好的幫助語言

語法文件:
	Arch inventory (Nikolai Weibull)
	Calendar (Nikolai Weibull)
	Ch (Wayne Cheng)
	Controllable Regex Mutilator (Nikolai Weibull)
	D (Jason Mills)
	Desktop (Mikolaj Machowski)
	Dircolors (Nikolai Weibull)
	Elinks configuration (Nikolai Weibull)
	FASM (Ron Aaron)
	GrADS 腳本 (Stefan Fronzek)
	Icewm 菜單 (James Mahler)
	LDIF (Zak Johnson)
	Locale input，fdcc。(Dwayne Bailey)
	Pinfo config (Nikolai Weibull)
	Pyrex (Marco Barisione)
	Relax NG Compact (Nikolai Weibull)
	Slice (Morel Bodin)
	VAX Macro Assembly (Tom Uijldert)
	grads (Stefan Fronzek)
	libao (Nikolai Weibull)
	mplayer (Nikolai Weibull)
	rst (Nikolai Weibull)
	tcsh (Gautam Iyer)
	yaml (Nikolai Weibull)

編譯器插件:
	ATT dot (Marcos Macedo)
	Apple Project Builder (Alexander von Below)
	Intel (David Harrison)
	bdf (Nikolai Weibull)
	icc (Peter Puck)
	javac (Doug Kearns)
	neato (Marcos Macedo)
	onsgmls (Robert B. Rowsome)
	perl (Christian J. Robinson)
	rst (Nikolai Weibull)
	se (SmartEiffel) (Doug Kearns)
	tcl (Doug Kearns)
	xmlwf (Robert B. Rowsome)

文件類型插件:
	Aap (Bram Moolenaar)
	Ch (Wayne Cheng)
	Css (Nikolai Weibull)
	Pyrex (Marco Barisione)
	Rst (Nikolai Weibull)

縮進腳本:
	Aap (Bram Moolenaar)
	Ch (Wayne Cheng)
	DocBook (Nikolai Weibull)
	MetaPost (Eugene Minkovskii)
	Objective-C (Kazunobu Kuriyama)
	Pyrex (Marco Barisione)
	Rst (Nikolai Weibull)
	Tcsh (Gautam Iyer)
	XFree86 配置文件 (Nikolai Weibull)
	Zsh (Nikolai Weibull)

鍵盤映射表:
	cp1253 的希臘語 (Panagiotis Louridas)
	匈牙利語 (Magyar) (Laszlo Zavaleta)
	波斯-伊朗語 (Behnam Esfahbod)

消息翻譯:
	加泰隆語 (Ernest Adrogue)
	俄語 (Vassily Ragosin)
	瑞典語 (Johan Svedberg)

菜單翻譯:
	加泰隆語 (Ernest Adrogue)
	俄語 (Tim Alexeevsky)
	瑞典語 (Johan Svedberg)

教程翻譯:
	加泰隆語 (Ernest Adrogue)
	cp1251 的俄語 (Alexey Froloff)
	cp1250 和 iso8859-2 的斯洛伐克語 (Lubos Celko)
	瑞典語 (Johan Svedberg)
	韓語 (Kee-Won Seo)
	UTF-8 版本的日語教程 (Yasuhiro Matsumoto) 這是原版，其它日語教程都是由
		它轉換而成。

包含了 "russian.txt" 幫助文件。(Vassily Ragosin)

extra 歸檔裡包含了 Encapsulated PostScript 和 PDF 版本的 Vim 記號 (logo)。

幫助高亮尋找高亮組，是用它們實際的顏色來顯示它們自身。(Yakov Lerner 的意見)

big 的 Win32 版本現在編譯時加入 Ruby 接口，1.8 版本。Python 使用 2.3 版本。
Perl 使用 5.8 版本。

文檔裡提到了 "ftdetect" 目錄。DOS 安裝程序會建立它。


修正							*fixed-6.3*
-----

Test 42 failed on MS-Windows.  Set and reset 'fileformat' and 'binary' options
here and there.  (Walter Briscoe)

The explorer plugin didn't work for double-byte 'encoding's.

Use "copy /y" in Make_bc5.mak to avoid a prompt for overwriting.

Patch 6.2.001
問題:	    The ":stopinsert" command doesn't have a help tag.
解決方案:   Add the tag. (Antoine J.  Mechelynck)
相關文件:   runtime/doc/insert.txt, runtime/doc/tags

Patch 6.2.002
問題:	    When compiled with the +multi_byte feature but without +eval,
	    displaying UTF-8 characters may cause a crash. (Karsten Hopp)
解決方案:   Also set the default for 'ambiwidth' when compiled without the
	    +eval feature.
相關文件:   src/option.c

Patch 6.2.003
問題:	    GTK 2: double-wide characters below 256 are not displayed
	    correctly.
解決方案:   Check the cell width for characters above 127. (Yasuhiro
	    Matsumoto)
相關文件:   src/gui_gtk_x11.c

Patch 6.2.004
問題:	    With a line-Visual selection at the end of the file a "p" command
	    puts the text one line upwards.
解決方案:   Detect that the last line was deleted and put forward. (Taro
	    Muraoka)
相關文件:   src/normal.c

Patch 6.2.005
問題:	    GTK: the "Find" and "Find and Replace" tools don't work. (Aschwin
	    Marsman)
解決方案:   Show the dialog after creating it.  (David Necas)
相關文件:   src/gui_gtk.c

Patch 6.2.006
問題:	    The Netbeans code contains an obsolete function that uses "vim61"
	    and sets the fall-back value for $VIMRUNTIME.
解決方案:   Delete the obsolete function.
相關文件:   src/main.c, src/netbeans.c, src/proto/netbeans.pro

Patch 6.2.007
問題:	    Listing tags for Cscope doesn't always work.
解決方案:   Avoid using smgs_attr(). (Sergey Khorev)
相關文件:   src/if_cscope.c

Patch 6.2.008
問題:	    XIM with GTK 2: After backspacing preedit characters are wrong.
解決方案:   Reset the cursor position. (Yasuhiro Matsumoto)
相關文件:   src/mbyte.c

Patch 6.2.009
問題:	    Win32: The self-installing executable "Full" selection only
	    selects some of the items to install. (Salman Mohsin)
解決方案:   Change commas to spaces in between section numbers.
相關文件:   nsis/gvim.nsi

Patch 6.2.010
問題:	    When 'virtualedit' is effective and a line starts with a
	    multi-byte character, moving the cursor right doesn't work.
解決方案:   Obtain the right character to compute the column offset. (Taro
	    Muraoka)
相關文件:   src/charset.c

Patch 6.2.011
問題:	    Alpha OSF1: stat() is a macro and doesn't allow an #ifdef halfway.
	    (Moshe Kaminsky)
解決方案:   Move the #ifdef outside of stat().
相關文件:   src/os_unix.c

Patch 6.2.012
問題:	    May hang when polling for a character.
解決方案:   Break the wait loop when not waiting for a character.
相關文件:   src/os_unix.c

Patch 6.2.013 (extra)
問題:	    Win32: The registry key for uninstalling GvimExt still uses "6.1".
解決方案:   Change the version number to "6.2". (Ajit Thakkar)
相關文件:   src/GvimExt/GvimExt.reg

Patch 6.2.014 (after 6.2.012)
問題:	    XSMP doesn't work when using poll().
解決方案:   Use xsmp_idx instead of gpm_idx. (Neil Bird)
相關文件:   src/os_unix.c

Patch 6.2.015
問題:	    The +xsmp feature is never enabled.
解決方案:   Move the #define for USE_XSMP to below where WANT_X11 is defined.
	    (Alexey Froloff)
相關文件:   src/feature.h

Patch 6.2.016
問題:	    Using ":scscope find" with 'cscopequickfix' does not always split
	    the window. (Gary Johnson)
	    Win32: ":cscope add" could make the script that contains it
	    read-only until the corresponding ":cscope kill".
	    Errors during ":cscope add" may not be handled properly.
解決方案:   When using the quickfix window may need to split the window.
	    Avoid file handle inheritance for the script.
	    Check for a failed connection and/or process.  (Sergey Khorev)
相關文件:   src/ex_cmds2.c, src/if_cscope.c

Patch 6.2.017
問題:	    Test11 sometimes prompts the user, because a file would have been
	    changed outside of Vim. (Antonio Colombo)
解決方案:   Add a FileChangedShell autocommand to avoid the prompt.
相關文件:   src/testdir/test11.in

Patch 6.2.018
問題:	    When using the XSMP protocol and reading from stdin Vim may wait
	    for a key to be pressed.
解決方案:   Avoid that RealWaitForChar() is used recursively.
相關文件:   src/os_unix.c

Patch 6.2.019 (lang)
問題:	    Loading the Portuguese menu causes an error message.
解決方案:   Join two lines.  (Jose Pedro Oliveira, José de Paula)
相關文件:   runtime/lang/menu_pt_br.vim

Patch 6.2.020
問題:	    The "Syntax/Set syntax only" menu item causes an error message.
	    (Oyvind Holm)
解決方案:   Set the script-local variable in a function. (Benji Fisher)
相關文件:   runtime/synmenu.vim

Patch 6.2.021
問題:	    The user manual section on exceptions contains small mistakes.
解決方案:   Give a good example of an error that could be missed and other
	    improvements. (Servatius Brandt)
相關文件:   runtime/doc/usr_41.txt

Patch 6.2.022 (extra)
問題:	    Win32: After deleting a menu item it still appears in a tear-off
	    window.
解決方案:   Set the mode to zero for the deleted item. (Yasuhiro Matsumoto)
相關文件:   src/gui_w32.c

Patch 6.2.023 (extra)
問題:	    Win32: Make_ivc.mak does not clean everything.
解決方案:   Delete more files in the clean rule. (Walter Briscoe)
相關文件:   src/Make_ivc.mak

Patch 6.2.024 (extra)
問題:	    Win32: Compiler warnings for typecasts.
解決方案:   Use DWORD instead of WORD. (Walter Briscoe)
相關文件:   src/gui_w32.c

Patch 6.2.025
問題:	    Missing prototype for sigaltstack().
解決方案:   Add the prototype when it is not found in a header file.
相關文件:   src/os_unix.c

Patch 6.2.026
問題:	    Warning for utimes() argument.
解決方案:   Add a typecast.
相關文件:   src/fileio.c

Patch 6.2.027
問題:	    Warning for uninitialized variable.
解決方案:   Set mb_l to one when not using multi-byte characters.
相關文件:   src/message.c

Patch 6.2.028
問題:	    Cscope connection may kill Vim process and others.
解決方案:   Check for pid being larger than one. (Khorev Sergey)
相關文件:   src/if_cscope.c

Patch 6.2.029
問題:	    When using the remote server functionality Vim may leak memory.
	    (Srikanth Sankaran)
解決方案:   Free the result of XListProperties().
相關文件:   src/if_xcmdsrv.c

Patch 6.2.030
問題:	    Mac: Warning for not being able to use precompiled header files.
解決方案:   Don't redefine select.  Use -no-cpp-precomp for compiling, so that
	    function prototypes are still found.
相關文件:   src/os_unix.c, src/osdef.sh

Patch 6.2.031
問題:	    The langmenu entry in the options window doesn't work. (Rodolfo
	    Lima)
	    With GTK 1 the ":options" command causes an error message.
	    (Michael Naumann)
解決方案:   Change "lmenu" to "langmenu".  Only display the 'tbis' option for
	    GTK 2.
相關文件:   runtime/optwin.vim

Patch 6.2.032
問題:	    The lpc filetype is never recognized. (Shizhu Pan)
解決方案:   Check for g:lpc_syntax_for_c instead of the local variable
	    lpc_syntax_for_c. (Benji Fisher)
相關文件:   runtime/filetype.vim

Patch 6.2.033 (extra)
問題:	    Mac: Various compiler warnings.
解決方案:   Don't include Classic-only headers in Unix version.
	    Remove references to several unused variables. (Ben Fowler)
	    Fix double definition of DEFAULT_TERM.
	    Use int instead of unsigned short for pixel values, so that the
	    negative error values are recognized.
相關文件:   src/gui_mac.c, src/term.c

Patch 6.2.034
問題:	    Mac: Compiler warning for redefining DEFAULT_TERM.
解決方案:   Fix double definition of DEFAULT_TERM.
相關文件:   src/term.c

Patch 6.2.035
問題:	    Mac: Compiler warnings in Python interface.
解決方案:   Make a difference between pure Mac and Unix-Mac. (Peter Cucka)
相關文件:   src/if_python.c

Patch 6.2.036 (extra)
問題:	    Mac Unix version: If foo is a directory, then ":e f<Tab>" should
	    expand to ":e foo/" instead of ":e foo" .  (Vadim Zeitlin)
解決方案:   Define DONT_ADD_PATHSEP_TO_DIR only for pure Mac. (Benji Fisher)
相關文件:   src/os_mac.h

Patch 6.2.037
問題:	    Win32: converting an encoding name to a codepage could result in
	    an arbitrary number.
解決方案:   make encname2codepage() return zero if the encoding name doesn't
	    contain a codepage number.
相關文件:   src/mbyte.c

Patch 6.2.038 (extra)
問題:	    Warning messages when using the MingW compiler. (Bill McCarthy)
	    Can't compile console version without +mouse feature.
解決方案:   Initialize variables, add parenthesis.
	    Add an #ifdef around g_nMouseClick. (Ajit Thakkar)
相關文件:   src/eval.c, src/os_win32.c, src/gui_w32.c, src/dosinst.c

Patch 6.2.039 (extra)
問題:	    More warning messages when using the MingW compiler.
解決方案:   Initialize variables. (Bill McCarthy)
相關文件:   src/os_mswin.c

Patch 6.2.040
問題:	    FreeBSD: Crash while starting up when compiled with +xsmp feature.
解決方案:   Pass a non-NULL argument to IceAddConnectionWatch().
相關文件:   src/os_unix.c

Patch 6.2.041 (extra, after 6.2.033)
問題:	    Mac: Compiler warnings for conversion types, missing prototype,
	    missing return type.
解決方案:   Change sscanf "%hd" to "%d", the argument is an int now.  Add
	    gui_mch_init_check() prototype.  Add "int" to termlib functions.
相關文件:   src/gui_mac.c, src/proto/gui_mac.pro, src/termlib.c.

Patch 6.2.042 (extra)
問題:	    Cygwin: gcc 3.2 has an optimizer problem, sometimes causing a
	    crash.
解決方案:   Add -fno-strength-reduce to the compiler arguments. (Dan Sharp)
相關文件:   src/Make_cyg.mak

Patch 6.2.043
問題:	    Compiling with both netbeans and workshop doesn't work.
解決方案:   Move the shellRectangle() function to gui_x11.c. (Gordon Prieur)
相關文件:   src/gui_x11.c, src/integration.c, src/netbeans.c,
	    src/proto/netbeans.pro

Patch 6.2.044
問題:	    ":au filetypedetect" gives an error for a non-existing event name,
	    but it's actually a non-existing group name. (Antoine Mechelynck)
解決方案:   Make the error message clearer.
相關文件:   src/fileio.c

Patch 6.2.045
問題:	    Obtaining the '( mark changes the '' mark. (Gary Holloway)
解決方案:   Don't set the '' mark when searching for the start/end of the
	    current sentence/paragraph.
相關文件:   src/mark.c

Patch 6.2.046
問題:	    When evaluating an argument of a function throws an exception the
	    function is still called. (Hari Krishna Dara)
解決方案:   Don't call the function when an exception was thrown.
相關文件:   src/eval.c

Patch 6.2.047 (extra)
問題:	    Compiler warnings when using MingW. (Bill McCarthy)
解決方案:   Give the s_dwLastClickTime variable a type.  Initialize dwEndTime.
相關文件:   src/os_win32.c

Patch 6.2.048
問題:	    The Python interface doesn't compile with Python 2.3 when
	    dynamically loaded.
解決方案:   Use dll_PyObject_Malloc and dll_PyObject_Free. (Paul Moore)
相關文件:   src/if_python.c

Patch 6.2.049
問題:	    Using a "-range=" argument with ":command" doesn't work and
	    doesn't generate an error message.
解決方案:   Generate an error message.
相關文件:   src/ex_docmd.c

Patch 6.2.050
問題:	    Test 32 didn't work on MS-Windows.
解決方案:   Write the temp file in Unix fileformat. (Walter Briscoe)
相關文件:   src/testdir/test32.in

Patch 6.2.051
問題:	    When using "\=submatch(0)" in a ":s" command, line breaks become
	    NUL characters.
解決方案:   Change NL to CR characters, so that they become line breaks.
相關文件:   src/regexp.c

Patch 6.2.052
問題:	    A few messages are not translated.
解決方案:   Add _() to the messages. (Muraoka Taro)
相關文件:   src/ex_cmds.c

Patch 6.2.053
問題:	    Prototype for bzero() doesn't match most systems.
解決方案:   Use "void *" instead of "char *" and "size_t" instead of "int".
相關文件:   src/osdef1.h.in

Patch 6.2.054
問題:	    A double-byte character with a second byte that is a backslash
	    causes problems inside a string.
解決方案:   Skip over multi-byte characters in a string properly. (Yasuhiro
	    Matsumoto)
相關文件:   src/eval.c

Patch 6.2.055
問題:	    Using col('.') from CTRL-O in Insert mode does not return the
	    correct value for multi-byte characters.
解決方案:   Correct the cursor position when it is necessary, move to the
	    first byte of a multi-byte character. (Yasuhiro Matsumoto)
相關文件:   src/edit.c

Patch 6.2.056 (extra)
問題:	    Building with Sniff++ doesn't work.
解決方案:   Use the multi-threaded libc when needed. (Holger Ditting)
相關文件:   src/Make_mvc.mak

Patch 6.2.057 (extra)
問題:	    Mac: With -DMACOS_X putenv() is defined twice, it is in a system
	    library.  Get a warning for redefining OK.  Unused variables in
	    os_mac.c
解決方案:   Define HAVE_PUTENV.  Undefine OK after including curses.h.
	    Remove declarations for unused variables.
相關文件:   src/os_mac.c, src/os_mac.h, src/vim.h

Patch 6.2.058
問題:	    When 'autochdir' is set ":bnext" to a buffer without a name causes
	    a crash.
解決方案:   Don't call vim_chdirfile() when the file name is NULL. (Taro
	    Muraoka)
相關文件:   src/buffer.c

Patch 6.2.059
問題:	    When 'scrolloff' is a large number and listing completion results
	    on the command line, then executing a command that jumps close to
	    where the cursor was before, part of the screen is not updated.
	    (Yakov Lerner)
解決方案:   Don't skip redrawing part of the window when it was scrolled.
相關文件:   src/screen.c

Patch 6.2.060 (extra)
問題:	    Win32: When 'encoding' is set to "iso-8859-7" copy/paste to/from
	    the clipboard gives a lalloc(0) error. (Kriton Kyrimis)
解決方案:   When the string length is zero allocate one byte.  Also fix that
	    when the length of the Unicode text is zero (conversion from
	    'encoding' to UCS-2 was not possible) the normal text is used.
相關文件:   src/os_mswin.c

Patch 6.2.061
問題:	    GUI: Using the left mouse button with the shift key should work
	    like "*" but it scrolls instead. (Martin Beller)
解決方案:   Don't recognize an rxvt scroll wheel event when using the GUI.
相關文件:   src/term.c

Patch 6.2.062
問題:	    When one buffer uses a syntax with "containedin" and another
	    buffer does not, redrawing depends on what the current buffer is.
	    (Brett Pershing Stahlman)
解決方案:   Use "syn_buf" instead of "curbuf" to get the b_syn_containedin
	    flag.
相關文件:   src/syntax.c

Patch 6.2.063
問題:	    When using custom completion end up with no matches.
解決方案:   Make cmd_numfiles and cmd_files local to completion to avoid that
	    they are overwritten when ExpandOne() is called recursively by
	    f_glob().
相關文件:   src/eval.c, src/ex_docmd.c, src/ex_getln.c, src/proto/ex_getln.pro,
	    src/misc1.c, src/structs.h, src/tag.c

Patch 6.2.064
問題:	    resolve() only handles one symbolic link, need to repeat it to
	    resolve all of them.  Then need to simplify the file name.
解決方案:   Make resolve() resolve all symbolic links and simplify the result.
	    Add simplify() to just simplify a file name.  Fix that test49
	    doesn't work if /tmp is a symbolic link.  (Servatius Brandt)
相關文件:   runtime/doc/eval.txt, src/eval.c, src/tag.c,
	    src/testdir/test49.vim

Patch 6.2.065
問題:	    ":windo 123" only updates other windows when entering them.
	    (Walter Briscoe)
解決方案:   Update the topline before going to the next window.
相關文件:   src/ex_cmds2.c

Patch 6.2.066 (extra)
問題:	    Ruby interface doesn't work with Ruby 1.8.0.
解決方案:   Change "defout" to "stdout". (Aron Griffis)
	    Change dynamic loading. (Taro Muraoka)
相關文件:   src/if_ruby.c, src/Make_mvc.mak

Patch 6.2.067
問題:	    When searching for a string that starts with a composing character
	    the command line isn't drawn properly.
解決方案:   Don't count the space to draw the composing character on and
	    adjust the cursor column after drawing the string.
相關文件:   src/message.c

Patch 6.2.068
問題:	    Events for the netbeans interface that include a file name with
	    special characters don't work properly.
解決方案:   Use nb_quote() on the file name. (Sergey Khorev)
相關文件:   src/netbeans.c

Patch 6.2.069 (after 6.2.064)
問題:	    Unused variables "limit" and "new_st" and unused label "fail" in
	    some situation. (Bill McCarthy)
解決方案:   Put the declarations inside an #ifdef. (Servatius Brandt)
相關文件:   src/eval.c, src/tag.c

Patch 6.2.070 (after 6.2.069)
問題:	    Still unused variable "new_st". (Bill McCarthy)
解決方案:   Move the declaration to the right block this time.
相關文件:   src/tag.c

Patch 6.2.071
問題:	    'statusline' can only contain 50 % items. (Antony Scriven)
解決方案:   Allow 80 items and mention it in the docs.
相關文件:   runtime/doc/option.txt, src/vim.h

Patch 6.2.072
問題:	    When using expression folding, foldexpr() mostly returns -1 for
	    the previous line, which makes it difficult to write a fold
	    expression.
解決方案:   Make the level of the previous line available while still looking
	    for the end of a fold.
相關文件:   src/fold.c

Patch 6.2.073
問題:	    When adding detection of a specific filetype for a plugin you need
	    to edit "filetype.vim".
解決方案:   Source files from the "ftdetect" directory, so that a filetype
	    detection plugin only needs to be dropped in a directory.
相關文件:   runtime/doc/filetype.txt, runtime/doc/usr_05.txt,
	    runtime/doc/usr_41.txt, runtime/filetype.vim

Patch 6.2.074
問題:	    Warnings when compiling the Python interface. (Ajit Thakkar)
解決方案:   Use ANSI function declarations.
相關文件:   src/if_python.c

Patch 6.2.075
問題:	    When the temp file for writing viminfo can't be used "NULL"
	    appears in the error message. (Ben Lavender)
解決方案:   Print the original file name when there is no temp file name.
相關文件:   src/ex_cmds.c

Patch 6.2.076
問題:	    The tags listed for cscope are in the wrong order. (Johannes
	    Stezenbach)
解決方案:   Remove the reordering of tags for the current file. (Sergey
	    Khorev)
相關文件:   src/if_cscope.c

Patch 6.2.077
問題:	    When a user function specifies custom completion, the function
	    gets a zero argument instead of an empty string when there is no
	    word before the cursor. (Preben Guldberg)
解決方案:   Don't convert an empty string to a zero.
相關文件:   src/eval.c

Patch 6.2.078
問題:	    "make test" doesn't work if Vim wasn't compiled yet. (Ed Avis)
解決方案:   Build Vim before running the tests.
相關文件:   src/Makefile

Patch 6.2.079
問題:	    ":w ++enc=utf-8 !cmd" doesn't work.
解決方案:   Check for the "++" argument before the "!".
相關文件:   src/ex_docmd.c

Patch 6.2.080
問題:	    When 't_ti' is not empty but doesn't swap screens, using "ZZ" in
	    an unmodified file doesn't clear the last line.
解決方案:   Call msg_clr_eos() when needed. (Michael Schroeder)
相關文件:   src/os_unix.c

Patch 6.2.081
問題:	    Problem when using a long multibyte string for the statusline.
解決方案:   Use the right pointer to get the cell size. (Taro Muraoka)
相關文件:   src/buffer.c

Patch 6.2.082
問題:	    Can't compile with Perl 5.8.1.
解決方案:   Rename "e_number" to "e_number_exp". (Sascha Blank)
相關文件:   src/digraph.c, src/globals.h

Patch 6.2.083
問題:	    When a compiler uses ^^^^ to mark a word the information is not
	    visible in the quickfix window. (Srikanth Sankaran)
解決方案:   Don't remove the indent for a line that is not recognized as an
	    error message.
相關文件:   src/quickfix.c

Patch 6.2.084
問題:	    "g_" in Visual mode always goes to the character after the line.
	    (Jean-Rene David)
解決方案:   Ignore the NUL at the end of the line.
相關文件:   src/normal.c

Patch 6.2.085
問題:	    ":verbose set ts" doesn't say an option was set with a "-c" or
	    "--cmd" argument.
解決方案:   Remember the option was set from a Vim argument.
相關文件:   src/main.c, src/ex_cmds2.c, src/vim.h

Patch 6.2.086
問題:	    "{" and "}" stop inside a closed fold.
解決方案:   Only stop once inside a closed fold. (Stephen Riehm)
相關文件:   src/search.c

Patch 6.2.087
問題:	    CTRL-^ doesn't use the 'confirm' option.  Same problem with
	    ":bnext". (Yakov Lerner)
解決方案:   Put up a dialog for a changed file when 'confirm' is set in more
	    situations.
相關文件:   src/buffer.c, src/ex_cmds.c

Patch 6.2.088
問題:	    When 'sidescrolloff' is set 'showmatch' doesn't work correctly if
	    the match is less than 'sidescrolloff' off from the side of the
	    window.  (Roland Stahn)
解決方案:   Set 'sidescrolloff' to zero while displaying the match.
相關文件:   src/search.c

Patch 6.2.089
問題:	    ":set isk+=" adds a comma. (Mark Waggoner)
解決方案:   Don't add a comma when the added value is empty.
相關文件:   src/option.c

Patch 6.2.090 (extra)
問題:	    Win32: MingW compiler complains about #pragmas. (Bill McCarthy)
解決方案:   Put an #ifdef around the #pragmas.
相關文件:   src/os_win32.c

Patch 6.2.091
問題:	    When an autocommand is triggered when a file is dropped on Vim and
	    it produces output, messages from a following command may be
	    scrolled unexpectedly. (David Rennalls)
解決方案:   Save and restore msg_scroll in handle_drop().
相關文件:   src/ex_docmd.c

Patch 6.2.092
問題:	    Invalid items appear in the help file tags. (Antonio Colombo)
解決方案:   Only accept tags with white space before the first "*".
相關文件:   runtime/doc/doctags.c, src/ex_cmds.c

Patch 6.2.093
問題:	    ":nnoremenu" also defines menu for Visual mode. (Klaus Bosau)
解決方案:   Check the second command character for an "o", not the third.
相關文件:   src/menu.c

Patch 6.2.094
問題:	    Can't compile with GTK and tiny features.
解決方案:   Include handle_drop() and vim_chdirfile() when FEAT_DND is defined.
	    Do not try to split the window.
相關文件:   src/ex_docmd.c, src/misc2.c

Patch 6.2.095
問題:	    The message "Cannot go to buffer x" is confusing for ":buf 6".
	    (Frans Englich)
解決方案:   Make it "Buffer x does not exist".
相關文件:   src/buffer.c

Patch 6.2.096
問題:	    Win32: ":let @* = ''" put a newline on the clipboard. (Klaus
	    Bosau)
解決方案:   Put zero bytes on the clipboard for an empty string.
相關文件:   src/ops.c

Patch 6.2.097
問題:	    Setting or resetting 'insertmode' in a BufEnter autocommand
	    doesn't always have immediate effect. (Nagger)
解決方案:   When 'insertmode' is set, set need_start_insertmode, when it's
	    reset set stop_insert_mode.
相關文件:   src/option.c

Patch 6.2.098 (after 6.2.097)
問題:	    Can't build Vim with tiny features. (Christian J. Robinson)
解決方案:   Declare stop_insert_mode always.
相關文件:   src/edit.c, src/globals.h

Patch 6.2.099 (extra)
問題:	    Test 49 fails. (Mikolaj Machowski)
解決方案:   The Polish translation must not change "E116" to "R116".
相關文件:   src/po/pl.po

Patch 6.2.100
問題:	    "make proto" fails when compiled with the Perl interface.
解決方案:   Remove "-fno.*" from PERL_CFLAGS, cproto sees it as its option.
相關文件:   src/auto/configure, src/configure.in

Patch 6.2.101
問題:	    When using syntax folding, opening a file slows down a lot when
	    it's size increases by only 20%. (Gary Johnson)
解決方案:   The array with cached syntax states is leaking entries.  After
	    cleaning up the list obtain the current entry again.
相關文件:   src/syntax.c

Patch 6.2.102
問題:	    The macros equal() and CR conflict with a Carbon header file.
解決方案:   Rename equal() to equalpos().  Rename CR to CAR.
	    Do this in the non-extra files only.
相關文件:   src/ascii.h, src/buffer.c, src/charset.c, src/edit.c, src/eval.c,
	    src/ex_cmds.c, src/ex_cmds2.c, src/ex_getln.c, src/fileio.c,
	    src/getchar.c, src/gui.c, src/gui_athena.c, src/gui_gtk_x11.c,
	    src/gui_motif.c, src/macros.h, src/mark.c, src/message.c,
	    src/misc1.c, src/misc2.c, src/normal.c, src/ops.c, src/os_unix.c,
	    src/regexp.c, src/search.c, src/ui.c, src/workshop.c

Patch 6.2.103 (extra)
問題:	    The macros equal() and CR conflict with a Carbon header file.
解決方案:   Rename equal() to equalpos().  Rename CR to CAR.
	    Do this in the extra files only.
相關文件:   src/gui_photon.c, src/gui_w48.c

Patch 6.2.104
問題:	    Unmatched braces in the table with options.
解決方案:   Move the "}," outside of the #ifdef. (Yakov Lerner)
相關文件:   src/option.c

Patch 6.2.105
問題:	    When the cursor is past the end of the line when calling
	    get_c_indent() a crash might occur.
解決方案:   Don't look past the end of the line. (NJ Verenini)
相關文件:   src/misc1.c

Patch 6.2.106
問題:	    Tag searching gets stuck on a very long line in the tags file.
解決方案:   When skipping back to search the first matching tag remember the
	    offset where searching started looking for a line break.
相關文件:   src/tag.c

Patch 6.2.107 (extra)
問題:	    The NetBeans interface cannot be used on Win32.
解決方案:   Add support for the NetBeans for Win32.  Add support for reading
	    XPM files on Win32.  Also fixes that a sign icon with a space in
	    the file name did not work through the NetBeans interface.
	    (Sergey Khorev)
	    Also: avoid repeating error messages when the connection is lost.
相關文件:   Makefile, runtime/doc/netbeans.txt, src/Make_bc5.mak,
	    src/Make_cyg.mak, src/Make_ming.mak, src/Make_mvc.mak,
	    src/bigvim.bat, src/feature.h, src/gui_beval.c, src/gui_beval.h,
	    src/gui_w32.c, src/gui_w48.c, src/menu.c, src/nbdebug.c,
	    src/nbdebug.h, src/netbeans.c, src/os_mswin.c, src/os_win32.h,
	    src/proto/gui_beval.pro, src/proto/gui_w32.pro,
	    src/proto/netbeans.pro, src/proto.h, src/version.c, src/vim.h,
	    src/xpm_w32.c, src/xpm_w32.h

Patch 6.2.108
問題:	    Crash when giving a message about ignoring case in a tag. (Manfred
	    Kuehn)
解決方案:   Use a longer buffer for the message.
相關文件:   src/tag.c

Patch 6.2.109
問題:	    Compiler warnings with various Amiga compilers.
解決方案:   Add typecast, prototypes, et al. that are also useful for other
	    systems.  (Flavio Stanchina)
相關文件:   src/eval.c, src/ops.c

Patch 6.2.110
問題:	    When $LANG includes the encoding, a menu without an encoding name
	    is not found.
解決方案:   Also look for a menu file without any encoding.
相關文件:   runtime/menu.vim

Patch 6.2.111
問題:	    Encoding "cp1251" is not recognized.
解決方案:   Add "cp1251" to the table of encodings. (Alexey Froloff)
相關文件:   src/mbyte.c

Patch 6.2.112
問題:	    After applying patches test32 fails. (Antonio Colombo)
解決方案:   Have "make clean" in the testdir delete *.rej and *.orig files.
	    Use this when doing "make clean" in the src directory.
相關文件:   src/Makefile, src/testdir/Makefile

Patch 6.2.113
問題:	    Using ":startinsert" after "$" works like "a" instead of "i".
	    (Ajit Thakkar)
解決方案:   Reset "w_curswant" for ":startinsert" and reset o_eol in edit().
相關文件:   src/edit.c, src/ex_docmd.c

Patch 6.2.114
問題:	    When stdout is piped through "tee", the size of the screen may not
	    be correct.
解決方案:   Use stdin instead of stdout for ioctl() when stdin is a tty and
	    stdout isn't.
相關文件:   src/os_unix.c

Patch 6.2.115 (extra)
問題:	    Compiler warnings with various Amiga compilers.
解決方案:   Add typecast, prototypes, et al.  Those changes that are
	    Amiga-specific. (Flavio Stanchina)
相關文件:   src/fileio.c, src/memfile.c, src/os_amiga.c, src/os_amiga.h,
	    src/vim.h

Patch 6.2.116 (extra)
問題:	    German keyboard with Numlock set different from system startup
	    causes problems.
解決方案:   Ignore keys with code 0xff. (Helmut Stiegler)
相關文件:   src/gui_w48.c

Patch 6.2.117
問題:	    Breakpoints in loops of sourced files and functions are not
	    detected. (Hari Krishna Dara)
解決方案:   Check for breakpoints when using lines that were previously read.
	    (Servatius Brandt)
相關文件:   src/eval.c, src/ex_cmds2.c, src/ex_docmd.c, src/proto/eval.pro,
	    src/proto/ex_cmds2.pro

Patch 6.2.118 (extra)
問題:	    Mac: Compiling is done in a non-standard way.
解決方案:   Use the Unix method for Mac OS X, with autoconf.  Add "CARBONGUI"
	    to Makefile and configure. (Eric Kow)
	    Move a few prototypes from os_mac.pro to gui_mac.pro.
相關文件:   src/Makefile, src/auto/configure, src/configure.in,
	    src/config.mk.in, src/gui_mac.c, src/os_mac.h, src/os_macosx.c,
	    src/proto/gui_mac.pro, src/proto/os_mac.pro,
	    src/infplist.xml, src/vim.h

Patch 6.2.119 (after 6.2.107)
問題:	    When packing the MS-Windows archives a few files are missing.
	    (Guopeng Wen)
解決方案:   Add gui_beval.* to the list of generic source files.
相關文件:   Makefile

Patch 6.2.120
問題:	    Win32 GUI: The console dialogs are not supported on MS-Windows,
	    disabling the 'c' flag of 'guioptions'. (Servatius Brandt)
解決方案:   Define FEAT_CON_DIALOG also for GUI-only builds.
相關文件:   src/feature.h

Patch 6.2.121 (after 6.2.118)
問題:	    Not all make programs support "+=". (Charles Campbell)
解決方案:   Use a normal assignment.
相關文件:   src/Makefile

Patch 6.2.122 (after 6.2.119)
問題:	    Not all shells can expand [^~].  File missing.  (Guopeng Wen)
解決方案:   Use a simpler pattern.  Add the Aap recipe for the maze program
	    and a clean version of the source code.
相關文件:   Makefile, runtime/macros/maze/Makefile,
	    runtime/macros/maze/README.txt, runtime/macros/maze/main.aap,
	    runtime/macros/maze/mazeclean.c

Patch 6.2.123 (after 6.2.118)
問題:	    Running configure fails. (Tony Leneis)
解決方案:   Change "==" to "=" for a test.
相關文件:   src/auto/configure, src/configure.in

Patch 6.2.124 (after 6.2.121)(extra)
問題:	    Mac: Recursive use of M4FLAGS causes problems.  When running Vim
	    directly it can't find the runtime files.  (Emily Jackson)
	    Using GNU constructs causes warnings with other make programs.
	    (Ronald Schild)
解決方案:   Use another name for the M4FLAGS variable.
	    Don't remove "Vim.app" from the path.
	    Update the explanation for compiling on the Mac. (Eric Kow)
	    Don't use $(shell ) and $(addprefix ).
相關文件:   src/INSTALLmac.txt, src/Makefile, src/misc1.c

Patch 6.2.125 (after 6.2.107)
問題:	    The "winsock2.h" file isn't always available.
解決方案:   Don't include this header file.
相關文件:   src/netbeans.c

Patch 6.2.126
問題:	    Typing CTRL-C at a confirm() prompt doesn't throw an exception.
解決方案:   Reset "mapped_ctrl_c" in get_keystroke(), so that "got_int" is set
	    in _OnChar().
相關文件:   src/misc1.c

Patch 6.2.127 (extra)
問題:	    Win32 console: Typing CTRL-C doesn't throw an exception.
解決方案:   Set got_int immediately when CTRL-C is typed, don't wait for
	    mch_breakcheck() being called.
相關文件:   src/os_win32.c

Patch 6.2.128 (after 6.2.118)
問題:	    src/auto/configure is not consistent with src/configure.in.
解決方案:   Use the newly generated configure script.
相關文件:   src/auto/configure

Patch 6.2.129
問題:	    When 'number' is set 'wrapmargin' does not work Vi-compatible.
	    (Yasuhiro Matsumoto)
解決方案:   Reduce the textwidth when 'number' is set.  Also for 'foldcolumn'
	    and similar things.
相關文件:   src/edit.c

Patch 6.2.130 (extra)
問題:	    Win32 console: When 'restorescreen' is not set exiting Vim causes
	    the screen to be cleared. (Michael A. Mangino)
解決方案:   Don't clear the screen when exiting and 'restorescreen' isn't set.
相關文件:   src/os_win32.c

Patch 6.2.131 (extra)
問題:	    Win32: Font handles are leaked.
解決方案:   Free italic, bold and bold-italic handles before overwriting them.
	    (Michael Wookey)
相關文件:   src/gui_w48.c

Patch 6.2.132 (extra)
問題:	    Win32: console version doesn't work on latest Windows Server 2003.
解決方案:   Copy 12000 instead of 15000 cells at a time to avoid running out
	    of memory.
相關文件:   src/os_win32.c

Patch 6.2.133
問題:	    When starting the GUI a bogus error message about 'imactivatekey'
	    may be given.
解決方案:   Only check the value of 'imactivatekey' when the GUI is running.
相關文件:   src/gui.c, src/option.c

Patch 6.2.134 (extra)
問題:	    Win32: When scrolling parts of the window are redrawn when this
	    isn't necessary.
解決方案:   Only invalidate parts of the window when they are obscured by
	    other windows. (Michael Wookey)
相關文件:   src/gui_w48.c

Patch 6.2.135
問題:	    An item <> in the ":command" argument is interpreted as <args>.
解決方案:   Avoid that <> is recognized as <args>.
相關文件:   src/ex_docmd.c

Patch 6.2.136
問題:	    ":e ++enc=latin1 newfile" doesn't set 'fenc' when the file doesn't
	    exist.  (Miroslaw Dobrzanski-Neumann)
解決方案:   Set 'fileencoding' to the specified encoding when editing a file
	    that does not exist.
相關文件:   src/fileio.c

Patch 6.2.137
問題:	    "d:cmd<CR>" cannot be repeated with ".".  Breaks repeating "d%"
	    when using the matchit plugin.
解決方案:   Store the command to be repeated.  This is restricted to
	    single-line commands.
相關文件:   src/ex_docmd.c, src/globals.h, src/normal.c, src/vim.h

Patch 6.2.138 (extra)
問題:	    Compilation problem on VMS with dynamic buffer on the stack.
解決方案:   Read one byte less than the size of the buffer, so that we can
	    check for the string length without an extra buffer.
相關文件:   src/os_vms.c

Patch 6.2.139
問題:	    Code is repeated in the two Perl files.
解決方案:   Move common code from if_perl.xs and if_perlsfio.c to vim.h.
	    Also fix a problem with generating prototypes.
相關文件:   src/if_perl.xs, src/if_perlsfio.c, src/vim.h

Patch 6.2.140 (after 6.2.121)
問題:	    Mac: Compiling with Python and Perl doesn't work.
解決方案:   Adjust the configure check for Python to use "-framework Python"
	    for Python 2.3 on Mac OS/X.
	    Move "-ldl" after "DynaLoader.a" in the link command.
	    Change "perllibs" to "PERL_LIBS".
相關文件:   src/auto/configure, src/configure.in, src/config.mk.in

Patch 6.2.141 (extra)
問題:	    Mac: The b_FSSpec field is sometimes unused.
解決方案:   Change the #ifdef to FEAT_CW_EDITOR and defined it in feature.h
相關文件:   src/fileio.c, src/gui_mac.c, src/structs.h, src/feature.h

Patch 6.2.142 (after 6.2.124)
問題:	    Mac: building without GUI through configure doesn't work.
	    When the system is slow, unpacking the resource file takes too
	    long.
解決方案:   Don't always define FEAT_GUI_MAC when MACOS is defined, define it
	    in the Makefile.
	    Add a configure option to skip Darwin detection.
	    Use a Python script to unpack the resources to avoid a race
	    condition. (Taro Muraoka)
相關文件:   Makefile, src/Makefile, src/auto/configure, src/configure.in,
	    src/dehqx.py, src/vim.h

Patch 6.2.143
問題:	    Using "K" on Visually selected text doesn't work if it ends in
	    a multi-byte character.
解決方案:   Include all the bytes of the last character. (Taro Muraoka)
相關文件:   src/normal.c

Patch 6.2.144
問題:	    When "g:html_use_css" is set the HTML header generated by the
	    2html script is wrong.
解決方案:   Add the header after adding HREF for links.
	    Also use ":normal!" instead of ":normal" to avoid mappings
	    getting in the way.
相關文件:   runtime/syntax/2html.vim

Patch 6.2.145 (after 6.2.139)
問題:	    Undefining "bool" doesn't work for older systems. (Wojtek Pilorz)
解決方案:   Only undefine "bool" on Mac OS.
相關文件:   src/vim.h

Patch 6.2.146
問題:	    On some systems the prototype for iconv() is wrong, causing a
	    warning message.
解決方案:   Use a cast (void *) to avoid the warning. (Charles Campbell)
相關文件:   src/fileio.c, src/mbyte.c

Patch 6.2.147
問題:	    ":s/pat/\=col('.')" always replaces with "1".
解決方案:   Set the cursor to the start of the match before substituting.
	    (Helmut Stiegler)
相關文件:   src/ex_cmds.c

Patch 6.2.148
問題:	    Can't break an Insert into several undoable parts.
解決方案:   Add the CTRL-G u command.
相關文件:   runtime/doc/insert.txt, src/edit.c

Patch 6.2.149
問題:	    When the cursor is on a line past 21,474,748 the indicated
	    percentage of the position is invalid.  With that many lines
	    "100%" causes a negative cursor line number, resulting in a crash.
	    (Daniel Goujot)
解決方案:   Divide by 100 instead of multiplying.  Avoid overflow when
	    computing the line number for "100%".
相關文件:   src/buffer.c, src/ex_cmds2.c, src/normal.c

Patch 6.2.150
問題:	    When doing "vim - < file" lines are broken at NUL chars.
	    (Daniel Goujot)
解決方案:   Change NL characters back to NUL when reading from the temp
	    buffer.
相關文件:   src/fileio.c

Patch 6.2.151
問題:	    When doing "vim --remote +startinsert file" some commands are
	    inserted as text. (Klaus Bosau)
解決方案:   Put all the init commands in one Ex line, not using a <CR>, so
	    that Insert mode isn't started too early.
相關文件:   src/main.c

Patch 6.2.152
問題:	    The cursor() function doesn't reset the column offset for
	    'virtualedit'.
解決方案:   Reset the offset to zero. (Helmut Stiegler)
相關文件:   src/eval.c

Patch 6.2.153
問題:	    Win32: ":lang german" doesn't use German messages.
解決方案:   Add a table to translate the Win32 language names to two-letter
	    language codes.
相關文件:   src/ex_cmds2.c

Patch 6.2.154
問題:	    Python bails out when giving a warning message. (Eugene
	    Minkovskii)
解決方案:   Set sys.argv[] to an empty string.
相關文件:   src/if_python.c

Patch 6.2.155
問題:	    Win32: Using ":tjump www" in a help file gives two results.
	    (Dave Roberts)
解決方案:   Ignore differences between slashes and backslashes when checking
	    for identical tag matches.
相關文件:   src/tag.c

Patch 6.2.156 (after 6.2.125)
問題:	    Win32: Netbeans fails to build, EINTR is not defined.
解決方案:   Redefine EINTR to WSAEINTR. (Mike Williams)
相關文件:   src/netbeans.c

Patch 6.2.157
問題:	    Using "%p" in 'errorformat' gives a column number that is too
	    high.
解決方案:   Set the flag to use the number as a virtual column.  (Lefteris
	    Koutsoloukas)
相關文件:   src/quickfix.c

Patch 6.2.158
問題:	    The sed command on Solaris and HPUX doesn't work for a line that
	    doesn't end in a newline.
解決方案:   Add a newline when feeding text to sed. (Mark Waggoner)
相關文件:   src/configure.in, src/auto/configure

Patch 6.2.159
問題:	    When using expression folding and 'foldopen' is "undo" an undo
	    command doesn't always open the fold.
解決方案:   Save and restore the KeyTyped variable when evaluating 'foldexpr'.
	    (Taro Muraoka)
相關文件:   src/fold.c

Patch 6.2.160
問題:	    When 'virtualedit' is "all" and 'selection is "exclusive",
	    selecting a double-width character below a single-width character
	    may cause a crash.
解決方案:   Avoid overflow on unsigned integer decrement. (Taro Muraoka)
相關文件:   src/normal.c

Patch 6.2.161 (extra)
問題:	    VMS: Missing header file.  Reading input busy loops.
解決方案:   Include termdef.h.  Avoid the use of a wait function in
	    vms_read().  (Frank Ries)
相關文件:   src/os_unix.h, src/os_vms.c

Patch 6.2.162
問題:	    ":redraw" doesn't always display the text that includes the cursor
	    position, e.g. after ":call cursor(1, 0)". (Eugene Minkovskii)
解決方案:   Call update_topline() before redrawing.
相關文件:   src/ex_docmd.c

Patch 6.2.163
問題:	    "make install" may also copy AAPDIR directories.
解決方案:   Delete AAPDIR directories, just like CVS directories.
相關文件:   src/Makefile

Patch 6.2.164 (after 6.2.144)
問題:	    When "g:html_use_css" is set the HTML header generated by the
	    2html script is still wrong.
解決方案:   Search for a string instead of jumping to a fixed line number.
	    Go to the start of the line before inserting the header.
	    (Jess Thrysoee)
相關文件:   runtime/syntax/2html.vim

Patch 6.2.165
問題:	    The configure checks hang when using autoconf 2.57.
解決方案:   Invoke AC_PROGRAM_EGREP to set $EGREP. (Aron Griffis)
相關文件:   src/auto/configure, src/configure.in

Patch 6.2.166
問題:	    When $GZIP contains "-N" editing compressed files doesn't work
	    properly.
解決方案:   Add "-n" to "gzip -d" to avoid restoring the file name. (Oyvind
	    Holm)
相關文件:   runtime/plugin/gzip.vim

Patch 6.2.167
問題:	    The Python interface leaks memory when assigning lines to a
	    buffer. (Sergey Khorev)
解決方案:   Do not copy the line when calling ml_replace().
相關文件:   src/if_python.c

Patch 6.2.168
問題:	    Python interface: There is no way to get the indices from a range
	    object.
解決方案:   Add the "start" and "end" attributes. (Maurice S. Barnum)
相關文件:   src/if_python.c, runtime/doc/if_pyth.txt

Patch 6.2.169
問題:	    The prototype for _Xmblen() appears in a recent XFree86 header
	    file, causing a warning for our prototype. (Hisashi T Fujinaka)
解決方案:   Move the prototype to an osdef file, so that it's filtered out.
相關文件:   src/mbyte.c, src/osdef2.h.in

Patch 6.2.170
問題:	    When using Sun WorkShop the current directory isn't changed to
	    where the file is.
解決方案:   Set the 'autochdir' option when using WorkShop.  And avoid using
	    the basename when 'autochdir' is not set.
相關文件:   src/gui_x11.c, src/ex_cmds.c

Patch 6.2.171 (after 6.2.163)
問題:	    The "-or" argument of "find" doesn't work for SysV systems.
解決方案:   Use "-o" instead. (Gordon Prieur)
相關文件:   src/Makefile

Patch 6.2.172 (after 6.2.169)
問題:	    The prototype for _Xmblen() still causes trouble.
解決方案:   Include the X11 header file that defines the prototype.
相關文件:   src/osdef2.h.in, src/osdef.sh

Patch 6.2.173 (extra)
問題:	    Win32: Ruby interface doesn't work with Ruby 1.8.0 for other
	    compilers than MSVC.
解決方案:   Fix the BC5, Cygwin and Mingw makefiles. (Dan Sharp)
相關文件:   src/Make_bc5.mak, src/Make_cyg.mak, src/Make_ming.mak

Patch 6.2.174
問題:	    After the ":intro" message only a mouse click in the last line
	    gets past the hit-return prompt.
解決方案:   Accept a click at or below the hit-return prompt.
相關文件:   src/gui.c, src/message.c

Patch 6.2.175
問題:	    Changing 'backupext' in a *WritePre autocommand doesn't work.
	    (William Natter)
解決方案:   Move the use of p_bex to after executing the *WritePre
	    autocommands.  Also avoids reading allocated memory after freeing.
相關文件:   src/fileio.c

Patch 6.2.176
問題:	    Accented characters in translated help files are not handled
	    correctly. (Fabien Vayssiere)
解決方案:   Include "192-255" in 'iskeyword' for the help window.
相關文件:   src/ex_cmds.c

Patch 6.2.177 (extra)
問題:	    VisVim: Opening a file with a space in the name doesn't work. (Rob
	    Retter)  Arbitrary commands are being executed. (Neil Bird)
解決方案:   Put a backslash in front of every space in the file name.
	    (Gerard Blais)  Terminate the CTRL-\ CTRL-N command with a NUL.
相關文件:   src/VisVim/Commands.cpp, src/VisVim/VisVim.rc

Patch 6.2.178
問題:	    People who don't know how to exit Vim try pressing CTRL-C.
解決方案:   Give a message how to exit Vim when CTRL-C is pressed and it
	    doesn't cancel anything.
相關文件:   src/normal.c

Patch 6.2.179 (extra)
問題:	    The en_gb messages file isn't found on case sensitive systems.
解決方案:   Rename en_gb to en_GB. (Mike Williams)
相關文件:   src/po/en_gb.po, src/po/en_GB.po, src/po/Make_ming.mak,
	    src/po/Make_mvc.mak, src/po/Makefile, src/po/README_mvc.txt

Patch 6.2.180
問題:	    Compiling with GTK2 on Win32 doesn't work.
解決方案:   Include gdkwin32.h instead of gdkx.h. (Srinath Avadhanula)
相關文件:   src/gui_gtk.c, src/gui_gtk_f.c, src/gui_gtk_x11.c, src/mbyte.c

Patch 6.2.181 (after 6.2.171)
問題:	    The "-o" argument of "find" has lower priority than the implied
	    "and" with "-print".
解決方案:   Add parenthesis around the "-o" expression. (Gordon Prieur)
相關文件:   src/Makefile

Patch 6.2.182 (after 6.2.094)
問題:	    Compilation with tiny features fails because of missing
	    get_past_head() function.
解決方案:   Adjust the #ifdef for get_past_head().
相關文件:   src/misc1.c

Patch 6.2.183 (after 6.2.178)
問題:	    Warning for char/unsigned char mixup.
解決方案:   Use MSG() instead of msg(). (Tony Leneis)
相關文件:   src/normal.c

Patch 6.2.184
問題:	    With 'formatoptions' set to "1aw" inserting text may cause the
	    paragraph to be ended. (Alan Schmitt)
解決方案:   Temporarily add an extra space to make the paragraph continue
	    after moving the word after the cursor to the next line.
	    Also format when pressing Esc.
相關文件:   src/edit.c, src/normal.c, src/proto/edit.pro

Patch 6.2.185
問題:	    Restoring a session with zero-height windows does not work
	    properly. (Charles Campbell)
解決方案:   Accept a zero argument to ":resize" as intended.  Add a window
	    number argument to ":resize" to be able to set the size of other
	    windows, because the current window cannot be zero-height.
	    Fix the explorer plugin to avoid changing the window sizes.  Add
	    the winrestcmd() function for this.
相關文件:   runtime/doc/eval.txt, runtime/plugin/explorer.vim, src/eval.c,
	    src/ex_cmds.h, src/ex_docmd.c, src/proto/window.pro, src/window.c

Patch 6.2.186 (after 6.2.185)
問題:	    Documentation file eval.txt contains examples without indent.
解決方案:   Insert the indent.  Also fix other mistakes.
相關文件:   runtime/doc/eval.txt

Patch 6.2.187
問題:	    Using Insure++ reveals a number of bugs.  (Dominique Pelle)
解決方案:   Initialize variables where needed.  Free allocated memory to avoid
	    leaks.  Fix comparing tags to avoid reading past allocated memory.
相關文件:   src/buffer.c, src/diff.c, src/fileio.c, src/mark.c, src/misc1.c,
	    src/misc2.c, src/ops.c, src/option.c, src/tag.c, src/ui.c

Patch 6.2.188 (extra)
問題:	    MS-Windows: Multi-byte characters in a filename cause trouble for
	    the window title.
解決方案:   Return when the wide function for setting the title did its work.
相關文件:   src/gui_w48.c

Patch 6.2.189
問題:	    When setting 'viminfo' after editing a new buffer its marks are
	    not stored. (Keith Roberts)
解決方案:   Set the "b_marks_read" flag when skipping to read marks from the
	    viminfo file.
相關文件:   src/fileio.c

Patch 6.2.190
問題:	    When editing a compressed files, marks are lost.
解決方案:   Add the ":lockmarks" modifier and use it in the gzip plugin.
	    Make exists() also check for command modifiers, so that the
	    existence of ":lockmarks" can be checked for.
	    Also add ":keepmarks" to avoid that marks are deleted when
	    filtering text.
	    When deleting lines put marks 'A - 'Z and '0 - '9 at the first
	    deleted line instead of clearing the mark.  They were kept in the
	    viminfo file anyway.
	    Avoid that the gzip plugin puts deleted text in registers.
相關文件:   runtime/doc/motion.txt, runtime/plugin/gzip.vim, src/ex_cmds.c,
	    src/ex_docmd.c, src/mark.c, src/structs.h

Patch 6.2.191
問題:	    The intro message is outdated.  Information about sponsoring and
	    registering is missing.
解決方案:   Show info about sponsoring and registering Vim in the intro
	    message now and then.  Add help file about sponsoring.
相關文件:   runtime/doc/help.txt, runtime/doc/sponsor.txt, runtime/doc/tags,
	    runtime/menu.vim, src/version.c

Patch 6.2.192
問題:	    Using CTRL-T and CTRL-D with "gR" messes up the text.  (Jonathan
	    Hankins)
解決方案:   Avoid calling change_indent() recursively.
相關文件:   src/edit.c

Patch 6.2.193
問題:	    When recalling a search pattern from the history from a ":s,a/c,"
	    command the '/' ends the search string. (JC van Winkel)
解決方案:   Store the separator character with the history entries.  Escape
	    characters when needed, replace the old separator with the new one.
	    Also fixes that recalling a "/" search for a "?" command messes up
	    trailing flags.
相關文件:   src/eval.c, src/ex_getln.c, src/normal.c, src/proto/ex_getln.pro,
	    src/search.c, src/tag.c

Patch 6.2.194 (after 6.2.068)
問題:	    For NetBeans, instead of writing the file and sending an event
	    about it, tell NetBeans to write the file.
解決方案:   Add the "save" command, "netbeansBuffer" command and
	    "buttonRelease" event to the netbeans protocol.  Updated the
	    interface to version 2.2.  (Gordon Prieur)
	    Also: open a fold when the cursor has been positioned.
	    Also: fix memory leak, free result of nb_quote().
相關文件:   runtime/doc/netbeans.txt, src/fileio.c, src/netbeans.c,
	    src/normal.c, src/proto/netbeans.pro, src/structs.h

Patch 6.2.195 (after 6.2.190)
問題:	    Compiling fails for missing CPO_REMMARK symbol.
解決方案:   Add the patch I forgot to include...
相關文件:   src/option.h

Patch 6.2.196 (after 6.2.191)
問題:	    Rebuilding the documentation doesn't use the sponsor.txt file.
解決方案:   Add sponsor.txt to the Makefile. (Christian J. Robinson)
相關文件:   runtime/doc/Makefile

Patch 6.2.197
問題:	    It is not possible to force a redraw of status lines. (Gary
	    Johnson)
解決方案:   Add the ":redrawstatus" command.
相關文件:   runtime/doc/various.txt, src/ex_cmds.h, src/ex_docmd.c,
	    src/screen.c

Patch 6.2.198
問題:	    A few messages are not translated. (Ernest Adrogue)
解決方案:   Mark the messages to be translated.
相關文件:   src/ex_cmds.c

Patch 6.2.199 (after 6.2.194)
問題:	    Vim doesn't work perfectly well with NetBeans.
解決方案:   When NetBeans saves the file, reset the timestamp to avoid "file
	    changed" warnings.  Close a buffer in a proper way.  Don't try
	    giving a debug message with an invalid pointer.  Send a
	    newDotAndMark message when needed.  Report a change by the "r"
	    command to NetBeans.  (Gordon Prieur)
相關文件:   src/netbeans.c, src/normal.c

Patch 6.2.200
問題:	    When recovering a file, 'fileformat' is always the default, thus
	    writing the file may result in differences. (Penelope Fudd)
解決方案:   Before recovering the file try reading the original file to obtain
	    the values of 'fileformat', 'fileencoding', etc.
相關文件:   src/memline.c

Patch 6.2.201
問題:	    When 'autowriteall' is set ":qall" still refuses to exit if there
	    is a modified buffer. (Antoine Mechelynck)
解決方案:   Attempt writing modified buffers as intended.
相關文件:   src/ex_cmds2.c

Patch 6.2.202
問題:	    Filetype names of CHILL and ch script are confusing.
解決方案:   Rename "ch" to "chill" and "chscript" to "ch".
相關文件:   runtime/filetype.vim, runtime/makemenu.vim, runtime/synmenu.vim
	    runtime/syntax/ch.vim, runtime/syntax/chill.vim

Patch 6.2.203
問題:	    With characterwise text that has more than one line, "3P" works
	    wrong.  "3p" has the same problem.  There also is a display
	    problem. (Daniel Goujot)
解決方案:   Perform characterwise puts with a count in the right position.
相關文件:   src/ops.c

Patch 6.2.204 (after 6.2.086)
問題:	    "]]" in a file with closed folds moves to the end of the file.
	    (Nam SungHyun)
解決方案:   Find one position in each closed fold, then move to after the fold.
相關文件:   src/search.c

Patch 6.2.205 (extra)
問題:	    MS-Windows: When the taskbar is at the left or top of the screen,
	    the Vim window placement is wrong.
解決方案:   Compute the size and position of the window correctly. (Taro
	    Muraoka)
相關文件:   src/gui_w32.c, src/gui_w48.c

Patch 6.2.206
問題:	    Multi-byte characters cannot be used as hotkeys in a console
	    dialog.  (Mattias Erkisson)
解決方案:   Handle multi-byte characters properly.  Also put () or [] around
	    default hotkeys.
相關文件:   src/message.c, src/macros.h

Patch 6.2.207
問題:	    When 'encoding' is a multi-byte encoding, expanding an
	    abbreviation that starts where insertion started results in
	    characters before the insertion to be deleted.  (Xiangjiang Ma)
解決方案:   Stop searching leftwards for the start of the word at the position
	    where insertion started.
相關文件:   src/getchar.c

Patch 6.2.208
問題:	    When using fold markers, three lines in a row have the start
	    marker and deleting the first one with "dd", a nested fold is not
	    deleted.  (Kamil Burzynski)
	    Using marker folding, a level 1 fold doesn't stop when it is
	    followed by "{{{2", starting a level 2 fold.
解決方案:   Don't stop updating folds at the end of a change when the nesting
	    level of folds is larger than the fold level.
	    Correctly compute the number of folds that start at "{{{2".
	    Also avoid a crash for a NULL pointer.
相關文件:   src/fold.c

Patch 6.2.209
問題:	    A bogus fold is created when using "P" while the cursor is in the
	    middle of a closed fold. (Kamil Burzynski)
解決方案:   Correct the line number where marks are modified for closed folds.
相關文件:   src/ops.c

Patch 6.2.210 (extra)
問題:	    Mac OSX: antialiased fonts are not supported.
解決方案:   Add the 'antialias' option to switch on antialiasing on Mac OSX
	    10.2 and later. (Peter Cucka)
相關文件:   runtime/doc/options.txt, src/gui_mac.c, src/option.h, src/option.c

Patch 6.2.211 (extra)
問題:	    Code for handling file dropped on Vim is duplicated.
解決方案:   Move the common code to gui_handle_drop().
	    Add code to drop the files in the window under the cursor.
	    Support drag&drop on the Macintosh.  (Taro Muraoka)
	    When dropping a directory name edit that directory (using the
	    explorer plugin)
	    Fix that changing directory with Shift pressed didn't work for
	    relative path names.
相關文件:   src/fileio.c, src/gui.c, src/gui_gtk_x11.c, src/gui_mac.c,
	    src/gui_w48.c, src/proto/fileio.pro, src/proto/gui.pro

Patch 6.2.212 (after 6.2.199)
問題:	    NetBeans: Replacing with a count is not handled correctly.
解決方案:   Move reporting the change outside of the loop for the count.
	    (Gordon Prieur)
相關文件:   src/normal.c

Patch 6.2.213 (after 6.2.208)
問題:	    Using marker folding, "{{{1" doesn't start a new fold when already
	    at fold level 1. (Servatius Brandt)
解決方案:   Correctly compute the number of folds that start at "{{{1".
相關文件:   src/fold.c

Patch 6.2.214 (after 6.2.211) (extra)
問題:	    Warning for an unused variable.
解決方案:   Delete the declaration. (Bill McCarthy)
相關文件:   src/gui_w48.c

Patch 6.2.215
問題:	    NetBeans: problems saving an unmodified file.
解決方案:   Add isNetbeansModified() function.  Disable netbeans_unmodified().
	    (Gordon Prieur)
相關文件:   src/fileio.c, src/netbeans.c, src/proto/netbeans.pro,
	    runtime/doc/netbeans.txt, runtime/doc/tags

Patch 6.2.216 (after 6.2.206)
問題:	    Multi-byte characters still cannot be used as hotkeys in a console
	    dialog.  (Mattias Erkisson)
解決方案:   Make get_keystroke() handle multi-byte characters.
相關文件:   src/misc1.c

Patch 6.2.217
問題:	    GTK: setting the title doesn't always work correctly.
解決方案:   Invoke gui_mch_settitle(). (Tomas Stehlik)
相關文件:   src/os_unix.c

Patch 6.2.218
問題:	    Warning for function without prototype.
解決方案:   Add argument types to the msgCB field of the BalloonEval struct.
相關文件:   src/gui_beval.h

Patch 6.2.219
問題:	    Syntax highlighting hangs on an empty match of an item with a
	    nextgroup.  (Charles Campbell)
解決方案:   Remember that the item has already matched and don't match it
	    again at the same position.
相關文件:   src/syntax.c

Patch 6.2.220
問題:	    When a Vim server runs in a console a remote command isn't handled
	    before a key is typed.  (Joshua Neuheisel)
解決方案:   Don't try reading more input when a client-server command has been
	    received.
相關文件:   src/os_unix.c

Patch 6.2.221
問題:	    No file name completion for ":cscope add".
解決方案:   Add the XFILE flag to ":cscope". (Gary Johnson)
相關文件:   src/ex_cmds.h

Patch 6.2.222
問題:	    Using "--remote" several times on a row only opens some of the
	    files. (Dany St-Amant)
解決方案:   Don't delete all typeahead when the server receives a command from
	    a client, only delete typed characters.
相關文件:   src/main.c

Patch 6.2.223
問題:	    Cscope: Avoid a hang when cscope waits for a response while Vim
	    waits for a prompt.
	    Error messages from Cscope mess up the display.
解決方案:   Detect the hit-enter message and respond by sending a return
	    character to cscope. (Gary Johnson)
	    Use EMSG() and strerror() when possible.  Replace perror() with
	    PERROR() everywhere, add emsg3().
相關文件:   src/diff.c, src/if_cscope.c, src/integration.c, src/message.c,
	    src/proto/message.pro, src/misc2.c, src/netbeans.c, src/vim.h

Patch 6.2.224
問題:	    Mac: Can't compile with small features. (Axel Kielhorn)
解決方案:   Also include vim_chdirfile() when compiling for the Mac.
相關文件:   src/misc2.c

Patch 6.2.225
問題:	    NetBeans: Reported modified state isn't exactly right.
解決方案:   Report a file being modified in the NetBeans way.
相關文件:   src/netbeans.c

Patch 6.2.226 (after 6.2.107) (extra)
問題:	    The "ws2-32.lib" file isn't always available.
解決方案:   Use "WSock32.lib" instead. (Taro Muraoka, Dan Sharp)
相關文件:   src/Make_cyg.mak, src/Make_ming.mak, src/Make_mvc.mak

Patch 6.2.227 (extra)
問題:	    The "PC" symbol is defined but not used anywhere.
解決方案:   Remove "-DPC" from the makefiles.
相關文件:   src/Make_bc3.mak, src/Make_bc5.mak, src/Make_cyg.mak,
	    src/Make_ming.mak

Patch 6.2.228
問題:	    Receiving CTRL-\ CTRL-N after typing "f" or "m" doesn't switch Vim
	    back to Normal mode.  Same for CTRL-\ CTRL-G.
解決方案:   Check if the character typed after a command is CTRL-\ and obtain
	    another character to check for CTRL-N or CTRL-G, waiting up to
	    'ttimeoutlen' msec.
相關文件:   src/normal.c

Patch 6.2.229
問題:	    ":function" with a name that uses magic curlies does not work
	    inside a function.  (Servatius Brandt)
解決方案:   Skip over the function name properly.
相關文件:   src/eval.c

Patch 6.2.230 (extra)
問題:	    Win32: a complex pattern may cause a crash.
解決方案:   Use __try and __except to catch the exception and handle it
	    gracefully, when possible.  Add myresetstkoflw() to reset the
	    stack overflow. (Benjamin Peterson)
相關文件:   src/Make_bc5.mak, src/os_mswin.c src/os_win32.c, src/os_win32.h,
	    src/proto/os_win32.pro, src/regexp.c

Patch 6.2.231 (after 6.2.046)
問題:	    Various problems when an error exception is raised from within a
	    builtin function.  When it is invoked while evaluating arguments
	    to a function following arguments are still evaluated.  When
	    invoked with a line range it will be called for remaining lines.
解決方案:   Update "force_abort" also after calling a builtin function, so
	    that aborting() always returns the correct value. (Servatius
	    Brandt)
相關文件:   src/eval.c, src/ex_eval.c, src/proto/ex_eval.pro,
	    src/testdir/test49.ok, src/testdir/test49.vim

Patch 6.2.232
問題:	    ":python vim.command('python print 2*2')" crashes Vim.  (Eugene
	    Minkovskii)
解決方案:   Disallow executing a Python command recursively and give an error
	    message.
相關文件:   src/if_python.c

Patch 6.2.233
問題:	    On Mac OSX adding -pthread for Python only generates a warning.
	    The test for Perl threads rejects Perl while it's OK.
	    Tcl doesn't work at all.
	    The test for Ruby fails if ruby exists but there are no header
	    files.  The Ruby library isn't detected properly
解決方案:   Avoid adding -pthread on Mac OSX.  Accept Perl threads when it's
	    not the 5.5 threads.
	    Use the Tcl framework for header files.  For Ruby rename cWindow
	    to cVimWindow to avoid a name clash. (Ken Scott)
	    Only enable Ruby when the header files can be found.  Use "-lruby"
	    instead of "libruby.a" when it can't be found.
相關文件:   src/auto/configure, src/configure.in, src/if_ruby.c

Patch 6.2.234
問題:	    GTK 2 GUI: ":sp" and the ":q" leaves the cursor on the command
	    line.
解決方案:   Flush output before removing scrollbars.  Also do this in other
	    places where gui_mch_*() functions are invoked.
相關文件:   src/ex_cmds.c, src/option.c, src/window.c

Patch 6.2.235 (extra)
問題:	    Win32: Cursor isn't removed with a 25x80 window and doing:
	    "1830ia<Esc>400a-<Esc>0w0". (Yasuhiro Matsumoto)
解決方案:   Remove the call to gui_undraw_cursor() from gui_mch_insert_lines().
相關文件:   src/gui_w48.c

Patch 6.2.236
問題:	    Using gvim with Agide gives "connection lost" error messages.
解決方案:   Only give the "connection lost" message when the buffer was once
	    owned by NetBeans.
相關文件:   src/netbeans.c, src/structs.h

Patch 6.2.237
問題:	    GTK 2: Thai text is drawn wrong.  It changes when moving the
	    cursor over it.
解決方案:   Disable the shaping engine, it moves combining characters to a
	    wrong position and combines characters, while drawing the cursor
	    doesn't combine characters.
相關文件:   src/gui_gtk_x11.c

Patch 6.2.238 (after 6.2.231)
問題:	    ":function" does not work inside a while loop. (Servatius Brandt)
解決方案:   Add get_while_line() and pass it to do_one_cmd() when in a while
	    loop, so that all lines are stored and can be used again when
	    repeating the loop.
	    Adjust test 49 so that it checks for the fixed problems.
	    (Servatius Brandt)
相關文件:   src/digraph.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c,
	    src/proto/ex_cmds2.pro, src/proto/ex_docmd.pro,
	    src/testdir/test49.in, src/testdir/test49.ok,
	    src/testdir/test49.vim

Patch 6.2.239
問題:	    GTK 2: With closed folds the arrow buttons of a vertical scrollbar
	    often doesn't scroll. (Moshe Kaminsky)
解決方案:   Hackish solution: Detect that the button was pressed from the
	    mouse pointer position.
相關文件:   src/gui_gtk.c, src/gui.c

Patch 6.2.240
問題:	    GTK 2: Searching for bitmaps for the toolbar doesn't work as with
	    other systems.  Need to explicitly use "icon=name".  (Ned Konz,
	    Christian J.  Robinson)
解決方案:   Search for icons like done for Motif.
相關文件:   src/gui_gtk.c

Patch 6.2.241
問題:	    GTK 2: Search and Search/Replace dialogs are synced, that makes no
	    sense.  Buttons are sometimes greyed-out. (Jeremy Messenger)
解決方案:   Remove the code to sync the two dialogs.  Adjust the code to react
	    to an empty search string to also work for GTK2. (David Necas)
相關文件:   src/gui_gtk.c

Patch 6.2.242
問題:	    Gnome: "vim --help" only shows the Gnome arguments, not the Vim
	    arguments.
解決方案:   Don't let the Gnome code remove the "--help" argument and don't
	    exit at the end of usage().
相關文件:   src/gui_gtk_x11.c, src/main.c

Patch 6.2.243 (extra)
問題:	    Mac: Dropping a file on a Vim icon causes a hit-enter prompt.
解決方案:   Move the dropped files to the global argument list, instead of the
	    usual drop handling. (Eckehard Berns)
相關文件:   src/main.c, src/gui_mac.c

Patch 6.2.244
問題:	    ':echo "\xf7"' displays the illegal byte as if it was a character
	    and leaves "cho" after it.
解決方案:   When checking the length of a UTF-8 byte sequence and it's shorter
	    than the number of bytes available, assume it's an illegal byte.
相關文件:   src/mbyte.c

Patch 6.2.245
問題:	    Completion doesn't work for ":keepmarks" and ":lockmarks".
解決方案:   Add the command modifiers to the table of commands. (Madoka
	    Machitani)
相關文件:   src/ex_cmds.h, src/ex_docmd.c

Patch 6.2.246
問題:	    Mac: Starting Vim from Finder doesn't show error messages.
解決方案:   Recognize that output is being displayed by stderr being
	    "/dev/console".  (Eckehard Berns)
相關文件:   src/main.c, src/message.c

Patch 6.2.247 (after 6.2.193)
問題:	    When using a search pattern from the viminfo file the last
	    character is replaced with a '/'.
解決方案:   Store the separator character in the right place. (Kelvin Lee)
相關文件:   src/ex_getln.c

Patch 6.2.248
問題:	    GTK: When XIM is enabled normal "2" and keypad "2" cannot be
	    distinguished.
解決方案:   Detect that XIM changes the keypad key to the expected ASCII
	    character and fall back to the non-XIM code. (Neil Bird)
相關文件:   src/gui_gtk_x11.c, src/mbyte.c, src/proto/mbyte.pro

Patch 6.2.249
問題:	    ":cnext" moves to the error in the next file, but there is no
	    method to go back.
解決方案:   Add ":cpfile" and ":cNfile".
相關文件:   src/ex_cmds.h, src/quickfix.c, src/vim.h, runtime/doc/quickfix.txt

Patch 6.2.250
問題:	    Memory leaks when using signs. (Xavier de Gaye)
解決方案:   Delete the list of signs when unloading a buffer.
相關文件:   src/buffer.c

Patch 6.2.251
問題:	    GTK: The 'v' flag in 'guioptions' doesn't work. (Steve Hall)
	    Order of buttons is reversed for GTK 2.2.4.  Don't always get
	    focus back after handling a dialog.
解決方案:   Make buttons appear vertically when desired.  Reverse the order in
	    which buttons are added to a dialog.  Move mouse pointer around
	    when the dialog is done and we don't have focus.
相關文件:   src/gui_gtk.c

Patch 6.2.252 (extra, after 6.2.243)
問題:	    Mac: Dropping a file on a Vim icon causes a hit-enter prompt for
	    Mac OS classic.
解決方案:   Remove the #ifdef from the code that fixes it for Mac OSX.
相關文件:   src/gui_mac.c

Patch 6.2.253
問題:	    When 'tagstack' is not set a ":tag id" command does not work after
	    a ":tjump" command.
解決方案:   Set "new_tag" when 'tagstack' isn't set. (G. Narendran)
相關文件:   src/tag.c

Patch 6.2.254
問題:	    May run out of space for error messages.
解決方案:   Keep room for two more bytes.
相關文件:   src/quickfix.c

Patch 6.2.255
問題:	    GTK: A new item in the popup menu is put just after instead of
	    just before the right item. (Gabriel Zachmann)
解決方案:   Don't increment the menu item index.
相關文件:   src/gui_gtk.c

Patch 6.2.256
問題:	    Mac: "macroman" encoding isn't recognized, need to use
	    "8bit-macroman.
解決方案:   Recognize "macroman" with an alias "mac". (Eckehard Berns)
相關文件:   src/mbyte.c

Patch 6.2.257 (after 6.2.250)
問題:	    Signs are deleted for ":bdel", but they could still be useful.
解決方案:   Delete signs only for ":bwipe".
相關文件:   src/buffer.c

Patch 6.2.258
問題:	    GUI: can't disable (grey-out) a popup menu item.  (Ajit Thakkar)
解決方案:   Loop over the popup menus for all modes.
相關文件:   src/menu.c

Patch 6.2.259
問題:	    If there are messages when exiting, on the console there is a
	    hit-enter prompt while the message can be read; in the GUI the
	    message may not be visible.
解決方案:   Use the hit-enter prompt when there is an error message from
	    writing the viminfo file or autocommands, or when there is any
	    output in the GUI and 'verbose' is set.  Don't use a hit-enter
	    prompt for the non-GUI version unless there is an error message.
相關文件:   src/main.c

Patch 6.2.260
問題:	    GTK 2: Can't quit a dialog with <Esc>.
	    GTK 1 and 2: <Enter> always gives a result, even when the default
	    button has been disabled.
解決方案:   Handle these keys explicitly.  When no default button is specified
	    use the first one (works mostly like it was before).
相關文件:   src/gui_gtk.c

Patch 6.2.261
問題:	    When 'autoindent' and 'cindent' are set and a line is recognized
	    as a comment, starting a new line won't do 'cindent' formatting.
解決方案:   Also use 'cindent' formatting for lines that are used as a
	    comment. (Servatius Brandt)
相關文件:   src/misc1.c

Patch 6.2.262
問題:	    1 CTRL-W w beeps, even though going to the first window is
	    possible. (Charles Campbell)
解決方案:   Don't beep.
相關文件:   src/window.c

Patch 6.2.263
問題:	    Lint warnings: Duplicate function prototypes, duplicate macros,
	    use of a zero character instead of a zero pointer, unused
	    variable.  Clearing allocated memory in a complicated way.
解決方案:   Remove the function prototypes from farsi.h.  Remove the
	    duplicated lines in keymap.h.  Change getvcol() argument from NUL
	    to NULL.  Remove the "col" variable in regmatch().  Use
	    lalloc_clear() instead of lalloc(). (Walter Briscoe)
相關文件:   src/farsi.h, src/keymap.h, src/ops.c, src/regexp.c, src/search.c

Patch 6.2.264 (after 6.2.247)
問題:	    Writing past allocated memory when using a command line from the
	    viminfo file.
解決方案:   Store the NUL in the right place.
相關文件:   src/ex_getln.c

Patch 6.2.265
問題:	    Although ":set" is not allowed in the sandbox, ":let &opt = val"
	    works.
解決方案:   Do allow changing options in the sandbox, but not the ones that
	    can't be changed from a modeline.
相關文件:   src/ex_cmds.h, src/options.c

Patch 6.2.266
問題:	    When redirecting output and using ":silent", line breaks are
	    missing from output of ":map" and ":tselect".  Alignment of
	    columns is wrong.
解決方案:   Insert a line break where "msg_didout" was tested.  Update msg_col
	    when redirecting and using ":silent".
相關文件:   src/getchar.c, src/message.c

Patch 6.2.267 (extra)
問題:	    Win32: "&&" in a tearoff menu is not shown. (Luc Hermitte)
解決方案:   Use the "name" item from the menu instead of the "dname" item.
相關文件:   src/gui_w32.c, src/menu.c

Patch 6.2.268
問題:	    GUI: When changing 'guioptions' part of the window may be off
	    screen. (Randall Morris)
解決方案:   Adjust the size of the window when changing 'guioptions', but only
	    when adding something.
相關文件:   src/gui.c

Patch 6.2.269
問題:	    Diff mode does not highlight a change in a combining character.
	    (Raphael Finkel)
解決方案:   Make diff_find_change() multi-byte aware: find the start byte of
	    a character that contains a change.
相關文件:   src/diff.c

Patch 6.2.270
問題:	    Completion in Insert mode, then repeating with ".", doesn't handle
	    composing characters in the completed text. (Raphael Finkel)
解決方案:   Don't skip over composing chars when adding completed text to the
	    redo buffer.
相關文件:   src/getchar.c

Patch 6.2.271
問題:	    NetBeans: Can't do "tail -f" on the log.  Passing socket info with
	    an argument or environment variable is not secure.
解決方案:   Wait after initializing the log.  Allow passing the socket info
	    through a file. (Gordon Prieur)
相關文件:   runtime/doc/netbeans.txt, src/main.c, src/netbeans.c

Patch 6.2.272
問題:	    When the "po" directory exists, but "po/Makefile" doesn't,
	    building fails.  Make loops when the "po" directory has been
	    deleted after running configure.
解決方案:   Check for the "po/Makefile" instead of just the "po" directory.
	    Check this again before trying to run make with that Makefile.
相關文件:   src/auto/configure, src/configure.in, src/Makefile

Patch 6.2.273
問題:	    Changing the sort order in an explorer window for an empty
	    directory produces error messages. (Doug Kearns)
解決方案:   When an invalid range is used for a function that is not going to
	    be executed, skip over the arguments anyway.
相關文件:   src/eval.c

Patch 6.2.274
問題:	    ":print" skips empty lines when 'list' is set and there is no
	    "eol" in 'listchars'. (Yakov Lerner)
解決方案:   Skip outputting a space for an empty line only when 'list' is set
	    and the end-of-line character is not empty.
相關文件:   src/message.c

Patch 6.2.275 (extra, after 6.2.267)
問題:	    Warning for uninitialized variable when using gcc.
解決方案:   Initialize "acLen" to zero. (Bill McCarthy)
相關文件:   src/gui_w32.c

Patch 6.2.276
問題:	    ":echo X()" does not put a line break between the message that X()
	    displays and the text that X() returns. (Yakov Lerner)
解決方案:   Invoke msg_start() after evaluating the argument.
相關文件:   src/eval.c

Patch 6.2.277
問題:	    Vim crashes when a ":runtime ftplugin/ada.vim" causes a recursive
	    loop. (Robert Nowotniak)
解決方案:   Restore "msg_list" before returning from do_cmdline().
相關文件:   src/ex_docmd.c

Patch 6.2.278
問題:	    Using "much" instead of "many".
解決方案:   Correct the error message.
相關文件:   src/eval.c

Patch 6.2.279
問題:	    There is no default choice for a confirm() dialog, now that it is
	    possible not to have a default choice.
解決方案:   Make the first choice the default choice.
相關文件:   runtime/doc/eval.txt, src/eval.c

Patch 6.2.280
問題:	    "do" and ":diffget" don't work in the first line and the last line
	    of a buffer. (Aron Griffis)
解決方案:   Find a difference above the first line and below the last line.
	    Also fix a few display updating bugs.
相關文件:   src/diff.c, src/fold.c, src/move.c

Patch 6.2.281
問題:	    PostScript printing doesn't work on Mac OS X 10.3.2.
解決方案:   Adjust the header file. (Mike Williams)
相關文件:   runtime/print/prolog.ps

Patch 6.2.282
問題:	    When using CTRL-O to go back to a help file, it becomes listed.
	    (Andrew Nesbit)
	    Using ":tag" or ":tjump" in a help file doesn't keep the help file
	    settings (e.g. for 'iskeyword').
解決方案:   Don't mark a buffer as listed when its help flag is set.  Put all
	    the option settings for a help buffer together in do_ecmd().
相關文件:   src/ex_cmds.c

Patch 6.2.283
問題:	    The "local additions" in help.txt are used without conversion,
	    causing latin1 characters showing up wrong when 'enc' is utf-8.
	    (Antoine J. Mechelynck)
解決方案:   Convert the text to 'encoding'.
相關文件:   src/ex_cmds.c

Patch 6.2.284
問題:	    Listing a function puts "endfunction" in the message history.
	    Typing "q" at the more prompt isn't handled correctly when listing
	    variables and functions.  (Hara Krishna Dara)
解決方案:   Don't use msg() for "endfunction".  Check "got_int" regularly.
相關文件:   src/eval.c

Patch 6.2.285
問題:	    GUI: In a single wrapped line that fills the window, "gj" in the
	    last screen line leaves the cursor behind. (Ivan Tarasov)
解決方案:   Undraw the cursor before scrolling the text up.
相關文件:   src/gui.c

Patch 6.2.286
問題:	    When trying to rename a file and it doesn't exist, the destination
	    file is deleted anyway. (Luc Deux)
解決方案:   Don't delete the destination when the source doesn't exist. (Taro
	    Muraoka)
相關文件:   src/fileio.c

Patch 6.2.287 (after 6.2.264)
問題:	    Duplicate lines are added to the viminfo file.
解決方案:   Compare with existing entries without an offset.  Also fixes
	    reading very long history lines from viminfo.
相關文件:   src/ex_getln.c

Patch 6.2.288 (extra)
問題:	    Mac: An external program can't be interrupted.
解決方案:   Don't use the 'c' key for backspace. (Eckehard Berns)
相關文件:   src/gui_mac.c

Patch 6.2.289
問題:	    Compiling the Tcl interface with thread support causes ":make" to
	    fail.  (Juergen Salk)
解決方案:   Use $TCL_DEFS from the Tcl config script to obtain the required
	    compile flags for using the thread library.
相關文件:   src/auto/configure, src/configure.in

Patch 6.2.290 (extra)
問題:	    Mac: The mousewheel doesn't work.
解決方案:   Add mousewheel support.  Also fix updating the thumb after a drag
	    and then using another way to scroll.  (Eckehard Berns)
相關文件:   src/gui_mac.c

Patch 6.2.291 (extra)
問題:	    Mac: the plus button and close button don't do anything.
解決方案:   Make the plus button maximize the window and the close button
	    close Vim. (Eckehard Berns)
相關文件:   src/gui.c, src/gui_mac.c

Patch 6.2.292
問題:	    Motif: When removing GUI arguments from argv[] a "ps -ef" shows
	    the last argument repeated.
解決方案:   Set argv[argc] to NULL. (Michael Jarvis)
相關文件:   src/gui_x11.c

Patch 6.2.293 (after 6.2.255)
問題:	    GTK: A new item in a menu is put before the tearoff item.
解決方案:   Do increment the menu item index for non-popup menu items.
相關文件:   src/gui_gtk.c

Patch 6.2.294 (extra)
問題:	    Mac: Cannot use modifiers with Space, Tab, Enter and Escape.
解決方案:   Handle all modifiers for these keys.  (Eckehard Berns)
相關文件:   src/gui_mac.c

Patch 6.2.295
問題:	    When in debug mode, receiving a message from a remote client
	    causes a crash.  Evaluating an expression causes Vim to wait for
	    "cont" to be typed, without a prompt.  (Hari Krishna Dara)
解決方案:   Disable debugging when evaluating an expression for a client.
	    (Michael Geddes)  Don't try reading into the typeahead buffer when
	    it may have been filled in another way.
相關文件:   src/ex_getln.c, src/getchar.c, src/if_xcmdsrv.c, src/main.c,
	    src/misc1.c, src/proto/getchar.pro, src/proto/main.pro,
	    src/proto/os_unix.pro, src/proto/ui.pro, src/structs.h,
	    src/os_unix.c, src/ui.c

Patch 6.2.296 (extra)
問題:	    Same as 6.2.295.
解決方案:   Extra files for patch 6.2.295.
相關文件:   src/os_amiga.c, src/os_msdos.c, src/os_riscos.c, src/os_win32.c,
	    src/proto/os_amiga.pro, src/proto/os_msdos.pro,
	    src/proto/os_riscos.pro, src/proto/os_win32.pro

Patch 6.2.297 (after 6.2.232)
問題:	    Cannot invoke Python commands recursively.
解決方案:   With Python 2.3 and later use the available mechanisms to invoke
	    Python recursively. (Matthew Mueller)
相關文件:   src/if_python.c

Patch 6.2.298
問題:	    A change always sets the '. mark and an insert always sets the '^
	    mark, even when this is not wanted.
	    Cannot go back to the position of older changes without undoing
	    those changes.
解決方案:   Add the ":keepjumps" command modifier.
	    Add the "g," and "g;" commands.
相關文件:   runtime/doc/motion.txt, src/ex_cmds.h, src/ex_docmd.c, src/edit.c,
	    src/mark.c, src/misc1.c, src/normal.c, src/proto/mark.pro,
	    src/structs.h, src/undo.c

Patch 6.2.299
問題:	    Can only use one language for help files.
解決方案:   Add the 'helplang' option to select the preferred language(s).
	    Make ":helptags" generate tags files for all languages.
相關文件:   runtime/doc/options.txt, runtime/doc/various.txt, src/Makefile,
	    src/ex_cmds.c, src/ex_cmds2.c, src/ex_cmds.h, src/ex_getln.c,
	    src/normal.c, src/option.c, src/option.h, src/proto/ex_cmds.pro,
	    src/proto/ex_cmds2.pro, src/proto/option.pro, src/structs.h,
	    src/tag.c, src/vim.h

Patch 6.2.300 (after 6.2.297)
問題:	    Cannot build Python interface with Python 2.2 or earlier.
解決方案:   Add a semicolon.
相關文件:   src/if_python.c

Patch 6.2.301
問題:	    The "select all" item from the popup menu doesn't work for Select
	    mode.
解決方案:   Use the same commands as for the "Edit.select all" menu.
	    (Benji Fisher)
相關文件:   runtime/menu.vim

Patch 6.2.302
問題:	    Using "CTRL-O ." in Insert mode doesn't work properly. (Benji
	    Fisher)
解決方案:   Restore "restart_edit" after an insert command that was not typed.
	    Avoid waiting with displaying the mode when there is no text to be
	    overwritten.
	    Fix that "CTRL-O ." sometimes doesn't put the cursor back after
	    the end-of-line.  Only reset the flag that CTRL-O was used past
	    the end of the line when restarting editing.  Update "o_lnum"
	    number when inserting text and "o_eol" is set.
相關文件:   src/edit.c, src/normal.c

Patch 6.2.303
問題:	    Cannot use Unicode digraphs while 'encoding' is not Unicode.
解決方案:   Convert the character from Unicode to 'encoding' when needed.
	    Use the Unicode digraphs for the Macintosh. (Eckehard Berns)
相關文件:   src/digraph.c

Patch 6.2.304 (extra, after 6.2.256)
問題:	    Mac: No proper support for 'encoding'.  Conversion without iconv()
	    is not possible.
解決方案:   Convert input from 'termencoding' to 'encoding'.  Add
	    mac_string_convert().  Convert text for the clipboard when needed.
	    (Eckehard Berns)
相關文件:   src/gui_mac.c, src/mbyte.c, src/structs.h, src/vim.h

Patch 6.2.305 (after 6.2.300)
問題:	    Win32: Cannot build Python interface with Python 2.3. (Ajit
	    Thakkar)
解決方案:   Add two functions to the dynamic loading feature.
相關文件:   src/if_python.c

Patch 6.2.306 (extra)
問題:	    Win32: Building console version with BCC 5.5 gives a warning for
	    get_cmd_args() prototype missing.  (Ajit Thakkar)
解決方案:   Don't build os_w32exe.c for the console version.
相關文件:   src/Make_bc5.mak

Patch 6.2.307 (after 6.2.299)
問題:	    Installing help files fails.
解決方案:   Expand wildcards for translated help files separately.
相關文件:   src/Makefile

Patch 6.2.308
問題:	    Not all systems have "whoami", resulting in an empty user name.
解決方案:   Use "logname" when possible, "whoami" otherwise.  (David Boyce)
相關文件:   src/Makefile

Patch 6.2.309
問題:	    "3grx" waits for two ESC to be typed.  (Jens Paulus)
解決方案:   Append the ESC to the stuff buffer when redoing the "gr" insert.
相關文件:   src/edit.c

Patch 6.2.310
問題:	    When setting 'undolevels' to -1, making a change and setting
	    'undolevels' to a positive value an "undo list corrupt" error
	    occurs. (Madoka Machitani)
解決方案:   Sync undo before changing 'undolevels'.
相關文件:   src/option.c

Patch 6.2.311 (after 6.2.298)
問題:	    When making several changes in one line the changelist grows
	    quickly.  There is no error message for reaching the end of the
	    changelist.  Reading changelist marks from viminfo doesn't work
	    properly.
解決方案:   Only make a new entry in the changelist when making a change in
	    another line or 'textwidth' columns away.  Add E662, E663 and E664
	    error messages.  Put a changelist mark from viminfo one position
	    before the end.
相關文件:   runtime/doc/motion.txt, src/mark.c, src/misc1.c, src/normal.c

Patch 6.2.312 (after 6.2.299)
問題:	    "make install" clears the screen when installing the docs.
解決方案:   Execute ":helptags" in silent mode.
相關文件:   runtime/doc/Makefile

Patch 6.2.313
問題:	    When opening folds in a diff window, other diff windows no longer
	    show the same text.
解決方案:   Sync the folds in diff windows.
相關文件:   src/diff.c, src/fold.c, src/move.c, src/proto/diff.pro,
	    src/proto/move.pro

Patch 6.2.314
問題:	    When 'virtualedit' is set "rx" may cause a crash with a blockwise
	    selection and using "$". (Moritz Orbach)
解決方案:   Don't try replacing chars in a line that has no characters in the
	    block.
相關文件:   src/ops.c

Patch 6.2.315
問題:	    Using CTRL-C in a Visual mode mapping while 'insertmode' is set
	    stops Vim from returning to Insert mode.
解決方案:   Don't reset "restart_edit" when a CTRL-C is found and 'insertmode'
	    is set.
相關文件:   src/normal.c

Patch 6.2.316 (after 6.2.312)
問題:	    "make install" tries connecting to the X server when installing
	    the docs. (Stephen Thomas)
解決方案:   Add the "-X" argument.
相關文件:   runtime/doc/Makefile

Patch 6.2.317 (after 6.2.313)
問題:	    When using "zi" in a diff window, other diff windows are not
	    adjusted. (Richard Curnow)
解決方案:   Distribute a change in 'foldenable' to other diff windows.
相關文件:   src/normal.c

Patch 6.2.318
問題:	    When compiling with _THREAD_SAFE external commands don't echo
	    typed characters.
解決方案:   Don't set the terminal mode to TMODE_SLEEP when it's already at
	    TMODE_COOK.
相關文件:   src/os_unix.c

Patch 6.2.319 (extra)
問題:	    Building gvimext.dll with Mingw doesn't work properly.
解決方案:   Use gcc instead of dllwrap.  Use long option names. (Alejandro
	    Lopez-Valencia)
相關文件:   src/GvimExt/Make_ming.mak

Patch 6.2.320
問題:	    Win32: Adding and removing the menubar resizes the Vim window.
	    (Jonathon Merz)
解決方案:   Don't let a resize event change 'lines' unexpectedly.
相關文件:   src/gui.c

Patch 6.2.321
問題:	    When using modeless selection, wrapping lines are not recognized,
	    a line break is always inserted.
解決方案:   Add LineWraps[] to remember whether a line wrapped or not.
相關文件:   src/globals.h, src/screen.c, src/ui.c

Patch 6.2.322
問題:	    With 'showcmd' set, after typing "dd" the next "d" may not be
	    displayed. (Jens Paulus)
解決方案:   Redraw the command line after updating the screen, scrolling may
	    have set "clear_cmdline".
相關文件:   src/screen.c

Patch 6.2.323
問題:	    Win32: expanding "~/file" in an autocommand pattern results in
	    backslashes, while this pattern should only have forward slashes.
解決方案:   Make expanding environment variables respect 'shellslash' and set
	    p_ssl when expanding the autocommand pattern.
相關文件:   src/fileio.c, src/misc1.c, src/proto/fileio.pro

Patch 6.2.324 (extra)
問題:	    Win32: when "vimrun.exe" has a path with white space, such as
	    "Program Files", executing external commands may fail.
解決方案:   Put double quotes around the path to "vimrun".
相關文件:   src/os_win32.c

Patch 6.2.325
問題:	    When $HOME includes a space, doing ":set tags=~/tags" doesn't
	    work, the space is used to separate file names.  (Brett Stahlman)
解決方案:   Escape the space with a backslash.
相關文件:   src/option.c

Patch 6.2.326
問題:	    ":windo set syntax=foo" doesn't work.  (Tim Chase)
解決方案:   Don't change 'eventignore' for ":windo".
相關文件:   src/ex_cmds2.c

Patch 6.2.327
問題:	    When formatting text all marks in the formatted lines are lost.
	    A word is not joined to a previous line when this would be
	    possible.  (Mikolaj Machowski)
解決方案:   Try to keep marks in the same position as much as possible.
	    Also keep mark positions when joining lines.
	    Start auto-formatting in the previous line when appropriate.
	    Add the "gw" operator: Like "gq" but keep the cursor where it is.
相關文件:   runtime/doc/change.txt, src/edit.c, src/globals.h, src/mark.c,
	    src/misc1.c, src/normal.c, src/ops.c, src/proto/edit.pro,
	    src/proto/mark.pro, src/proto/ops.pro, src/structs.h, src/vim.h

Patch 6.2.328
問題:	    XIM with GTK: It is hard to understand what XIM is doing.
解決方案:   Add xim_log() to log XIM events and help with debugging.
相關文件:   src/mbyte.c

Patch 6.2.329
問題:	    ":=" does not work Vi compatible. (Antony Scriven)
解決方案:   Print the last line number instead of the current line.  Don't
	    print "line".
相關文件:   src/ex_cmds.h, src/ex_docmd.c

Patch 6.2.330 (extra, after 6.2.267)
問題:	    Win32: Crash when tearing off a menu.
解決方案:   Terminate a string with a NUL. (Yasuhiro Matsumoto)
相關文件:   src/gui_w32.c

Patch 6.2.331 (after 6.2.327)
問題:	    "gwap" leaves cursor in the wrong line.
解決方案:   Remember the cursor position before finding the ends of the
	    paragraph.
相關文件:   src/normal.c, src/ops.c, src/structs.h

Patch 6.2.332 (extra)
問題:	    Amiga: Compile error for string array. Compiling the Amiga GUI
	    doesn't work.
解決方案:   Use a char pointer instead.  Move including "gui_amiga.h" to after
	    including "vim.h".  Add a semicolon. (Ali Akcaagac)
相關文件:   src/gui_amiga.c, src/os_amiga.c

Patch 6.2.333 (extra)
問題:	    Win32: printing doesn't work with specified font charset.
解決方案:   Use the specified font charset. (Mike Williams)
相關文件:   src/os_mswin.c

Patch 6.2.334 (extra, after 6.2.296)
問題:	    Win32: evaluating client expression in debug mode requires typing
	    "cont".
解決方案:   Use eval_client_expr_to_string().
相關文件:   src/os_mswin.c

Patch 6.2.335
問題:	    The ":sign" command cannot be followed by another command.
解決方案:   Add TRLBAR to the command flags.
相關文件:   src/ex_cmds.h

Patch 6.2.336 (after 6.2.327)
問題:	    Mixup of items in an expression.
解決方案:   Move "== NUL" to the right spot.
相關文件:   src/edit.c

Patch 6.2.337 (extra, after 6.2.319)
問題:	    Building gvimext.dll with Mingw doesn't work properly.
解決方案:   Fix white space and other details. (Alejandro Lopez-Valencia)
相關文件:   src/GvimExt/Make_ming.mak

Patch 6.2.338 (after 6.2.331)
問題:	    When undoing "gwap" the cursor is always put at the start of the
	    paragraph.  When undoing auto-formatting the cursor may be above
	    the change.
解決方案:   Try to move the cursor back to where it was or to the first line
	    that actually changed.
相關文件:   src/normal.c, src/ops.c, src/undo.c

Patch 6.2.339
問題:	    Crash when using many different highlight groups and a User
	    highlight group.  (Juergen Kraemer)
解決方案:   Do not use the sg_name_u pointer when it is NULL.  Also simplify
	    use of the highlight group table.
相關文件:   src/syntax.c

Patch 6.2.340
問題:	    ":reg" doesn't show the actual contents of the clipboard if it was
	    filled outside of Vim. (Stuart MacDonald)
解決方案:   Obtain the clipboard contents before displaying it.
相關文件:   src/ops.c

Patch 6.2.341 (extra)
問題:	    Win32: When the path to diff.exe contains a space and using the
	    vimrc generated by the install program, diff mode does not work.
解決方案:   Put the first double quote just before the space instead of before
	    the path.
相關文件:   src/dosinst.c

Patch 6.2.342 (extra)
問題:	    Win32: macros are not always used as expected.
解決方案:   Define WINVER to 0x0400 instead of 0x400. (Alejandro
	    Lopez-Valencia)
相關文件:   src/Make_bc5.mak, src/Make_cyg.mak, src/Make_mvc.mak

Patch 6.2.343
問題:	    Title doesn't work with some window managers.  X11: Setting the
	    text property for the window title is hard coded.
解決方案:   Use STRING format when possible.  Use the UTF-8 function when
	    it's available and 'encoding' is utf-8. Use
	    XStringListToTextProperty().  Do the same for the icon name.
	    (David Harrison)
相關文件:   src/os_unix.c

Patch 6.2.344 (extra, after 6.2.337)
問題:	    Cannot build gvimext.dll with MingW on Linux.
解決方案:   Add support for cross compiling. (Ronald Hoellwarth)
相關文件:   src/GvimExt/Make_ming.mak

Patch 6.2.345 (extra)
問題:	    Win32: Copy/paste between two Vims fails if 'encoding' is not set
	    properly or there are illegal bytes.
解決方案:   Use a raw byte format.  Always set it when copying.  When pasting
	    use the raw format if 'encoding' is the same.
相關文件:   src/os_mswin.c, src/os_win16.c, src/os_win32.c, src/vim.h

Patch 6.2.346
問題:	    Win32 console: After using "chcp" Vim does not detect the
	    different codepage.
解決方案:   Use GetConsoleCP() and when it is different from GetACP() set
	    'termencoding'.
相關文件:   src/option.c

Patch 6.2.347 (extra)
問題:	    Win32: XP theme support is missing.
解決方案:   Add a manifest and refer to it from the resource file.  (Michael
	    Wookey)
相關文件:   Makefile, src/gvim.exe.mnf, src/vim.rc

Patch 6.2.348
問題:	    Win32: "vim c:\dir\(test)" doesn't work, because the 'isfname'
	    default value doesn't contain parenthesis.
解決方案:   Temporarily add '(' and ')' to 'isfname' when expanding file name
	    arguments.
相關文件:   src/main.c

Patch 6.2.349
問題:	    Finding a match using 'matchpairs' may cause a crash.
	    'matchpairs' is not used for 'showmatch'.
解決方案:   Don't look past the NUL in 'matchpairs'.  Use 'matchpairs' for
	    'showmatch'. (Dave Olszewkski)
相關文件:   src/misc1.c, src/normal.c, src/proto/search.pro, src/search.c

Patch 6.2.350
問題:	    Not enough info about startup timing.
解決方案:   Add a few more TIME_MSG() calls.
相關文件:   src/main.c

Patch 6.2.351
問題:	    Win32: $HOME may be set to %USERPROFILE%.
解決方案:   Expand %VAR% at the start of $HOME.
相關文件:   src/misc1.c

Patch 6.2.352 (after 6.2.335)
問題:	    ":sign texthl=||" does not work.
解決方案:   Remove the check for a following command.  Give an error for extra
	    arguments after "buff=1".
相關文件:   src/ex_cmds.c, src/ex_cmds.h

Patch 6.2.353 (extra)
問題:	    Win32: Supported server name length is limited. (Paul Bossi)
解決方案:   Use MAX_PATH instead of 25.
相關文件:   src/os_mswin.c

Patch 6.2.354 (extra)
問題:	    Win32: When the mouse pointer is on a tear-off menu it is hidden
	    when typing but is not redisplayed when moved. (Markx Hackmann)
解決方案:   Handle the pointer move event for the tear-off menu window.
相關文件:   src/gui_w32.c

Patch 6.2.355 (after 6.2.303)
問題:	    When 'encoding' is a double-byte encoding different from the
	    current locale, the width of characters is not correct.
	    Possible failure and memory leak when using iconv, Unicode
	    digraphs and 'encoding' is not "utf-8".
解決方案:   Use iconv() to discover the actual width of characters.
	    Add the "vc_fail" field to vimconv_T.
	    When converting a digraph, init the conversion type to NONE and
	    cleanup afterwards.
相關文件:   src/digraph.c, src/mbyte.c, src/structs.h

Patch 6.2.356
問題:	    When using a double-byte 'encoding' and 'selection' is
	    "exclusive", "vy" only yanks the first byte of a double-byte
	    character.  (Xiangjiang Ma)
解決方案:   Correct the column in unadjust_for_sel() to position on the first
	    byte, always include the trailing byte of the selected text.
相關文件:   src/normal.c

Patch 6.2.357 (after 6.2.321)
問題:	    Memory leak when resizing the Vim window.
解決方案:   Free the LineWraps array.
相關文件:   src/screen.c

Patch 6.2.358 (after 6.2.299)
問題:	    Memory leak when using ":help" and the language doesn't match.
解決方案:   Free the array with matching tags.
相關文件:   src/ex_cmds.c

Patch 6.2.359 (after 6.2.352)
問題:	    Compiler warning for long to int type cast.
解決方案:   Add explicit type cast.
相關文件:   src/ex_cmds.c

Patch 6.2.360
問題:	    "100|" in an empty line results in a ruler "1,0-100". (Pavol
	    Juhas)
解決方案:   Recompute w_virtcol if the target column was not reached.
相關文件:   src/misc2.c

Patch 6.2.361 (extra)
問題:	    Win32: Run gvim, ":set go-=m", use Alt-Tab, keep Alt pressed while
	    pressing Esc, then release Alt: Cursor disappears and typing a key
	    causes a beep. (Hari Krishna Dara)
解決方案:   Don't ignore the WM_SYSKEYUP event when the menu is disabled.
相關文件:   src/gui_w32.c

Patch 6.2.362 (extra, after 6.2.347)
問題:	    Win32: The manifest causes Gvim not to work. (Dave Roberts)
解決方案:   Change "x86" to "X86". (Serge Pirotte)
相關文件:   src/gvim.exe.mnf

Patch 6.2.363
問題:	    In an empty file with 'showmode' off, "i" doesn't change the ruler
	    from "0-1" to "1".  Typing "x<BS>" does show "1", but then <Esc>
	    doesn't make it "0-1" again.  Same problem for ruler in
	    statusline.  (Andrew Pimlott)
解決方案:   Remember the "empty line" flag with Insert mode and'ed to it.
相關文件:   src/screen.c

Patch 6.2.364
問題:	    HTML version of the documentation doesn't mention the encoding,
	    which is a problem for mbyte.txt.
解決方案:   Adjust the awk script. (Ilya Sher)
相關文件:   runtime/doc/makehtml.awk

Patch 6.2.365
問題:	    The configure checks for Perl and Python may add compile and link
	    arguments that break building Vim.
解決方案:   Do a sanity check: try building with the arguments.
相關文件:   src/auto/configure, src/configure.in

Patch 6.2.366
問題:	    When the GUI can't start because no valid font is found, there is
	    no error message. (Ugen)
解決方案:   Add an error message.
相關文件:   src/gui.c

Patch 6.2.367
問題:	    Building the help tags file while installing may fail if there is
	    another Vim in $PATH.
解決方案:   Specify the just installed Vim executable. (Gordon Prieur)
相關文件:   src/Makefile

Patch 6.2.368
問題:	    When 'autochdir' is set, closing a window doesn't change to the
	    directory of the new current window. (Salman Halim)
解決方案:   Handle 'autochdir' always when a window becomes the current one.
相關文件:   src/window.c

Patch 6.2.369
問題:	    Various memory leaks: when using globpath(), when searching for
	    help tags files, when defining a function inside a function, when
	    giving an error message through an exception, for the final "."
	    line in ":append", in expression "cond ? a : b" that fails and for
	    missing ")" in an expression.  Using NULL pointer when adding
	    first user command and for pointer computations with regexp.
	    (tests by Dominique Pelle)
解決方案:   Fix the leaks by freeing the allocated memory.  Don't use the
	    array of user commands when there are no entries.  Use a macro
	    instead of a function call for saving and restoring regexp states.
相關文件:   src/eval.c, src/ex_cmds.c, src/ex_docmd.c, src/ex_getln.c,
	    src/misc2.c, src/regexp.c, src/screen.c, src/tag.c

Patch 6.2.370 (extra, after6.2.341)
問題:	    Win32: When the path to diff.exe contains a space and using the
	    vimrc generated by the install program, diff mode may not work.
	    (Alejandro Lopez-Valencia)
解決方案:   Do not use double quotes for arguments that do not have a space.
相關文件:   src/dosinst.c

Patch 6.2.371
問題:	    When 'virtualedit' is set and there is a Tab before the next "x",
	    "dtx" does not delete the whole Tab. (Ken Hashishi)
解決方案:   Move the cursor to the last position of the Tab.  Also for
	    "df<Tab>".
相關文件:   src/normal.c

Patch 6.2.372
問題:	    When using balloon evaluation, no value is displayed for members
	    of structures and items of an array.
解決方案:   Include "->", "." and "[*]" in the expression.
相關文件:   src/gui_beval.c, src/normal.c, src/vim.h

Patch 6.2.373
問題:	    When 'winminheight' is zero and a window is reduced to zero
	    height, the ruler always says "Top" instead of the cursor
	    position. (Antoine J. Mechelynck)
解決方案:   Don't recompute w_topline for a zero-height window.
相關文件:   src/window.c

Patch 6.2.374
問題:	    ":echo "hello" | silent normal n" removes the "hello" message.
	    (Servatius Brandt)
解決方案:   Don't echo the search string when ":silent" was used.  Also don't
	    show the mode.  In general: don't clear to the end of the screen.
相關文件:   src/gui.c, src/message.c, src/os_unix.c, src/proto/message.pro,
	    src/screen.c, src/search.c, src/window.c

Patch 6.2.375
問題:	    When changing 'guioptions' the hit-enter prompt may be below the
	    end of the Vim window.
解決方案:   Call screen_alloc() before showing the prompt.
相關文件:   src/message.c

Patch 6.2.376
問題:	    Win32: Ruby interface cannot be dynamically linked with Ruby 1.6.
解決方案:   Add #ifdefs around use of rb_w32_snprintf().  (Benoît Cerrina)
相關文件:   src/if_ruby.c

Patch 6.2.377 (after 6.2.372)
問題:	    Compiler warnings for signed/unsigned compare. (Michael Wookey)
解決方案:   Add type cast.
相關文件:   src/normal.c

Patch 6.2.378 (extra, after 6.2.118)
問題:	    Mac: cannot build with Project Builder.
解決方案:   Add remove_tail_with_ext() to locate and remove the "build"
	    directory from the runtime path.  Include os_unix.c when needed.
	    (Dany St Amant)
相關文件:   src/misc1.c, src/os_macosx.c, src/vim.h

Patch 6.2.379
問題:	    Using ":mkvimrc" in the ":options" window sets 'bufhidden' to
	    "delete". (Michael Naumann)
解決方案:   Do not add buffer-specific option values to a global vimrc file.
相關文件:   src/option.c

Patch 6.2.380 (extra)
問題:	    DOS: "make test" fails when running it again.  Can't "make test"
	    with Borland C.
解決方案:   Make sure ".out" files are deleted when they get in the way.  Add
	    a "test" target to the Borland C Makefile.
相關文件:   src/Make_bc5.mak, src/testdir/Make_dos.mak

Patch 6.2.381
問題:	    Setting 'fileencoding' to a comma separated list (confusing it
	    with 'fileencodings') does not result in an error message.
	    Setting 'fileencoding' in an empty file marks it as modified.
	    There is no "+" in the title after setting 'fileencoding'.
解決方案:   Check for a comma in 'fileencoding'.  Only consider a non-empty
	    file modified by changing 'fileencoding'.  Update the title after
	    changing 'fileencoding'.
相關文件:   src/option.c

Patch 6.2.382
問題:	    Running "make test" puts marks from test files in viminfo.
解決方案:   Specify a different viminfo file to use.
相關文件:   src/testdir/test15.in, src/testdir/test49.in

Patch 6.2.383
問題:	    ":hi foo term='bla" crashes Vim. (Antony Scriven)
解決方案:   Check that the closing ' is there.
相關文件:   src/syntax.c

Patch 6.2.384
問題:	    ":menu a.&b" ":unmenu a.b" only works if "&b" isn't translated.
解決方案:   Also compare the names without '&' characters.
相關文件:   src/menu.c

Patch 6.2.385  (extra)
問題:	    Win32: forward_slash() and trash_input_buf() are undefined when
	    compiling with small features. (Ajit Thakkar)
解決方案:   Change the #ifdefs for forward_slash().  Don't call
	    trash_input_buf() if the input buffer isn't used.
相關文件:   src/fileio.c, src/os_win32.c

Patch 6.2.386
問題:	    Wasting time trying to read marks from the viminfo file for a
	    buffer without a name.
解決方案:   Skip reading marks when the buffer has no name.
相關文件:   src/fileio.c

Patch 6.2.387
問題:	    There is no highlighting of translated items in help files.
解決方案:   Search for a "help_ab.vim" syntax file when the help file is
	    called "*.abx".  Also improve the help highlighting a bit.
相關文件:   runtime/syntax/help.vim

Patch 6.2.388
問題:	    GTK: When displaying some double-width characters they are drawn
	    as single-width, because of conversion to UTF-8.
解決方案:   Check the width that GTK uses and add a space if it's one instead
	    of two.
相關文件:   src/gui_gtk_x11.c

Patch 6.2.389
問題:	    When working over a slow connection, it's very annoying that the
	    last line is partly drawn and then cleared for every change.
解決方案:   Don't redraw the bottom line if no rows were inserted or deleted.
	    Don't draw the line if we know "@" lines will be used.
相關文件:   src/screen.c

Patch 6.2.390
問題:	    Using "r*" in Visual mode on multi-byte characters only replaces
	    every other character. (Tyson Roberts)
解決方案:   Correct the cursor position after replacing each character.
相關文件:   src/ops.c

Patch 6.2.391 (extra)
問題:	    The ":highlight" command is not tested.
解決方案:   Add a test script for ":highlight".
相關文件:   src/testdir/Makefile, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/test51.in,
	    src/testdir/test51.ok

Patch 6.2.392 (after 6.2.384)
問題:	    Unused variable.
解決方案:   Remove "dlen".
相關文件:   src/menu.c

Patch 6.2.393
問題:	    When using very long lines the viminfo file can become very big.
解決方案:   Add the "s" flag to 'viminfo': skip registers with more than the
	    specified Kbyte of text.
相關文件:   runtime/doc/options.txt, src/ops.c, src/option.c

Patch 6.2.394  (after 6.2.391)
問題:	    Test 51 fails on a terminal with 8 colors. (Tony Leneis)
解決方案:   Use "DarkBlue" instead of "Blue" to avoid the "bold" attribute.
相關文件:   src/testdir/test51.in

Patch 6.2.395
問題:	    When using ":tag" or ":pop" the previous matching tag is used.
	    But since the current file is different, the ordering of the tags
	    may change.
解決方案:   Remember what the current buffer was for when re-using cur_match.
相關文件:   src/edit.c, src/ex_cmds.c, src/proto/tag.pro, src/structs.h,
	    src/tag.c

Patch 6.2.396
問題:	    When CTRL-T jumps to another file and an autocommand moves the
	    cursor to the '" mark, don't end up on the right line.  (Michal
	    Malecki)
解決方案:   Set the line number after loading the file.
相關文件:   src/tag.c

Patch 6.2.397
問題:	    When using a double-byte 'encoding' mapping <M-x> doesn't work.
	    (Yasuhiro Matsumoto)
解決方案:   Do not set the 8th bit of the character but use a modifier.
相關文件:   src/gui_gtk_x11.c, src/gui_x11.c, src/misc2.c

Patch 6.2.398 (extra)
問題:	    Win32 console: no extra key modifiers are supported.
解決方案:   Encode the modifiers into the input stream.  Also fix that special
	    keys are converted and stop working when 'tenc' is set.  Also fix
	    that when 'tenc' is initialized the input and output conversion is
	    not setup properly until 'enc' or 'tenc' is set.
相關文件:   src/getchar.c, src/option.c, src/os_win32.c

Patch 6.2.399
問題:	    A ":set" command that fails still writes a message when it is
	    inside a try/catch block.
解決方案:   Include all the text of the message in the error message.
相關文件:   src/charset.c, src/option.c

Patch 6.2.400
問題:	    Can't compile if_xcmdsrv.c on HP-UX 11.0.
解決方案:   Include header file poll.h. (Malte Neumann)
相關文件:   src/if_xcmdsrv.c

Patch 6.2.401
問題:	    When opening a buffer that was previously opened, Vim does not
	    restore the cursor position if the first line starts with white
	    space.  (Gregory Margo)
解決方案:   Don't skip restoring the cursor position if it is past the blanks
	    in the first line.
相關文件:   src/buffer.c

Patch 6.2.402
問題:	    Mac: "make install" doesn't generate help tags. (Benji Fisher)
解決方案:   Generate help tags before copying the runtime files.
相關文件:   src/Makefile

Patch 6.2.403
問題:	    ":@y" checks stdin if there are more commands to execute.  This
	    fails if stdin is not connected, e.g., when starting the GUI from
	    KDE. (Ned Konz)
解決方案:   Only check for a next command if there still is typeahead.
相關文件:   src/ex_docmd.c

Patch 6.2.404
問題:	    Our own function to determine width of Unicode characters may get
	    outdated. (Markus Kuhn)
解決方案:   Use wcwidth() when it is available.  Also use iswprint().
相關文件:   src/auto/configure, src/configure.in, src/config.h.in, src/mbyte.c

Patch 6.2.405
問題:	    Cannot map zero without breaking the count before a command.
	    (Benji Fisher)
解決方案:   Disable mapping zero when entering a count.
相關文件:   src/getchar.c, src/globals.h, src/normal.c

Patch 6.2.406
問題:	    ":help \zs", ":help \@=" and similar don't find useful help.
解決方案:   Prepend "/\" to the arguments to find the desired help tag.
相關文件:   src/ex_cmds.c

Patch 6.2.407 (after 6.2.299)
問題:	    ":help \@<=" doesn't find help.
解決方案:   Avoid that ":help \@<=" searches for the "<=" language.
相關文件:   src/tag.c

Patch 6.2.408
問題:	    ":compiler" is not consistent: Sets local options and a global
	    variable. (Douglas Potts)  There is no error message when a
	    compiler is not supported.
解決方案:   Use ":compiler!" to set a compiler globally, otherwise it's local
	    to the buffer and "b:current_compiler" is used.  Give an error
	    when no compiler script could be found.
	    Note: updated compiler plugins can be found at
	    ftp://ftp.vim.org/pub/vim/runtime/compiler/
相關文件:   runtime/compiler/msvc.vim, runtime/doc/quickfix.txt, src/eval.c,
	    src/ex_cmds2.c

Patch 6.2.409
問題:	    The cursor ends up in the last column instead of after the line
	    when doing "i//<Esc>o" with 'indentexpr' set to "cindent(v:lnum)".
	    (Toby Allsopp)
解決方案:   Adjust the cursor as if in Insert mode.
相關文件:   src/misc1.c

Patch 6.2.410 (after 6.2.389)
問題:	    In diff mode, when there are more filler lines than fit in the
	    window, they are not drawn.
解決方案:   Check for filler lines when skipping to draw a line that doesn't
	    fit.
相關文件:   src/screen.c

Patch 6.2.411
問題:	    A "\n" inside a string is not seen as a line break by the regular
	    expression matching. (Hari Krishna Dara)
解決方案:   Add the vim_regexec_nl() function for strings where "\n" is to be
	    matched with a line break.
相關文件:   src/eval.c, src/ex_eval.c, src/proto/regexp.c, src/regexp.c

Patch 6.2.412
問題:	    Ruby: "ruby << EOF" inside a function doesn't always work.  Also
	    for ":python", ":tcl" and ":perl".
解決方案:   Check for "<< marker" and skip until "marker" before checking for
	    "endfunction".
相關文件:   src/eval.c

Patch 6.2.413 (after 6.2.411)
問題:	    Missing prototype for vim_regexec_nl(). (Marcel Svitalsky)
解決方案:   Now really include the prototype.
相關文件:   src/proto/regexp.pro

Patch 6.2.414
問題:	    The function used for custom completion of user commands cannot
	    have <SID> to make it local. (Hari Krishna Dara)
解決方案:   Pass the SID of the script where the user command was defined on
	    to the completion.  Also clean up #ifdefs.
相關文件:   src/ex_docmd.c, src/eval.c, src/ex_getln.c, src/structs.h

Patch 6.2.415
問題:	    Vim may crash after a sequence of events that change the window
	    size.  The window layout assumes a larger window than is actually
	    available. (Servatius Brandt)
解決方案:   Invoke win_new_shellsize() from screenalloc() instead of from
	    set_shellsize().
相關文件:   src/screen.c, src/term.c

Patch 6.2.416
問題:	    Compiler warning for incompatible pointer.
解決方案:   Remove the "&" in the call to poll(). (Xavier de Gaye)
相關文件:   src/os_unix.c

Patch 6.2.417 (after 6.2.393)
問題:	    Many people forget that the '"' item in 'viminfo' needs to be
	    preceded with a backslash,
解決方案:   Add '<' as an alias for the '"' item.
相關文件:   runtime/doc/options.txt, src/ops.c, src/option.c

Patch 6.2.418
問題:	    Using ":nnoremap <F12> :echo "cheese" and ":cabbr cheese xxx":
	    when pressing <F12> still uses the abbreviation. (Hari Krishna)
解決方案:   Also apply "noremap" to abbreviations.
相關文件:   src/getchar.c

Patch 6.2.419 (extra)
問題:	    Win32: Cannot open the Vim window inside another application.
解決方案:   Add the "-P" argument to specify the window title of the
	    application to run inside. (Zibo Zhao)
相關文件:   runtime/doc/starting.txt, src/main.c, src/gui_w32.c,
	    src/gui_w48.c, src/if_ole.cpp, src/os_mswin.c,
	    src/proto/gui_w32.pro

Patch 6.2.420
問題:	    Cannot specify a file to be edited in binary mode without setting
	    the global value of the 'binary' option.
解決方案:   Support ":edit ++bin file".
相關文件:   runtime/doc/editing.txt, src/buffer.c, src/eval.c, src/ex_cmds.h,
	    src/ex_docmd.c, src/fileio.c, src/misc2.c

Patch 6.2.421
問題:	    Cannot set the '[ and '] mark, which may be necessary when an
	    autocommand simulates reading a file.
解決方案:   Allow using "m[" and "m]".
相關文件:   runtime/doc/motion.txt, src/mark.c

Patch 6.2.422
問題:	    In CTRL-X completion messages the "/" makes them less readable.
解決方案:   Remove the slashes. (Antony Scriven)
相關文件:   src/edit.c

Patch 6.2.423
問題:	    ":vertical wincmd ]" does not split vertically.
解決方案:   Add "postponed_split_flags".
相關文件:   src/ex_docmd.c, src/globals.h, src/if_cscope.c, src/tag.c

Patch 6.2.424
問題:	    A BufEnter autocommand that sets an option stops 'mousefocus' from
	    working in Insert mode (Normal mode is OK). (Gregory Seidman)
解決方案:   In the Insert mode loop invoke gui_mouse_correct() when needed.
相關文件:   src/edit.c

Patch 6.2.425
問題:	    Vertical split and command line window: can only drag status line
	    above the cmdline window on the righthand side, not lefthand side.
解決方案:   Check the status line row instead of the window pointer.
相關文件:   src/ui.c

Patch 6.2.426
問題:	    A syntax region end match with a matchgroup that includes a line
	    break only highlights the last line with matchgroup. (Gary
	    Holloway)
解決方案:   Also use the line number of the position where the region
	    highlighting ends.
相關文件:   src/syntax.c

Patch 6.2.427 (extra)
問題:	    When pasting a lot of text in a multi-byte encoding, conversion
	    from 'termencoding' to 'encoding' may fail for some characters.
	    (Kuang-che Wu)
解決方案:   When there is an incomplete byte sequence at the end of the read
	    text keep it for the next time.
相關文件:   src/mbyte.c, src/os_amiga.c, src/os_mswin.c, src/proto/mbyte.pro,
	    src/proto/os_mswin.pro, src/ui.c

Patch 6.2.428
問題:	    The X11 clipboard supports the Vim selection for char/line/block
	    mode, but since the encoding is not included  can't copy/paste
	    between two Vims with a different 'encoding'.
解決方案:   Add a new selection format that includes the 'encoding'.  Perform
	    conversion when necessary.
相關文件:   src/gui_gtk_x11.c, src/ui.c, src/vim.h

Patch 6.2.429
問題:	    Unix: glob() doesn't work for a directory with a single quote in
	    the name. (Nazri Ramliy)
解決方案:   When using the shell to expand, only put double quotes around
	    spaces and single quotes, not the whole thing.
相關文件:   src/os_unix.c

Patch 6.2.430
問題:	    BOM at start of a vim script file is not recognized and causes an
	    error message.
解決方案:   Detect the BOM and skip over it.  Also fix that after using
	    ":scriptencoding" the iconv() file descriptor was not closed
	    (memory leak).
相關文件:   src/ex_cmds2.c

Patch 6.2.431
問題:	    When using the horizontal scrollbar, the scrolling is limited to
	    the length of the cursor line.
解決方案:   Make the scroll limit depend on the longest visible line.  The
	    cursor is moved when necessary.  Including the 'h' flag in
	    'guioptions' disables this.
相關文件:   runtime/doc/gui.txt, runtime/doc/options.txt, src/gui.c,
	    src/misc2.c, src/option.h

Patch 6.2.432 (after 6.2.430 and 6.2.431)
問題:	    Lint warnings.
解決方案:   Add type casts.
相關文件:   src/ex_cmds2.c, src/gui.c

Patch 6.2.433
問題:	    Translating "VISUAL" and "BLOCK" separately doesn't give a good
	    result. (Alejandro Lopez Valencia)
解決方案:   Use a string for each combination.
相關文件:   src/screen.c

Patch 6.2.434 (after 6.2.431)
問題:	    Compiler warning. (Salman Halim)
解決方案:   Add type casts.
相關文件:   src/gui.c

Patch 6.2.435
問題:	    When there are vertically split windows the minimal Vim window
	    height is computed wrong.
解決方案:   Use frame_minheight() to correctly compute the minimal height.
相關文件:   src/window.c

Patch 6.2.436
問題:	    Running the tests changes the user's viminfo file.
解決方案:   In test 49 tell the extra Vim to use the test viminfo file.
相關文件:   src/testdir/test49.vim

Patch 6.2.437
問題:	    ":mksession" always puts "set nocompatible" in the session file.
	    This changes option settings. (Ron Aaron)
解決方案:   Add an "if" to only change 'compatible' when needed.
相關文件:   src/ex_docmd.c

Patch 6.2.438
問題:	    When the 'v' flag is present in 'cpoptions', backspacing and then
	    typing text again: one character too much is overtyped before
	    inserting is done again.
解決方案:   Set "dollar_vcol" to the right column.
相關文件:   src/edit.c

Patch 6.2.439
問題:	    GTK 2: Changing 'lines' may cause a mismatch between the window
	    layout and the size of the window.
解決方案:   Disable the hack with force_shell_resize_idle().
相關文件:   src/gui_gtk_x11.c

Patch 6.2.440
問題:	    When 'lazyredraw' is set the window title is still updated.
	    The size of the Visual area and the ruler are displayed too often.
解決方案:   Postpone redrawing the window title.  Only show the Visual area
	    size when waiting for a character.  Don't draw the ruler
	    unnecessary.
相關文件:   src/buffer.c, src/normal.c, src/screen.c

Patch 6.2.441
問題:	    ":unabbreviate foo " doesn't work, because of the trailing space,
	    while an abbreviation with a trailing space is not possible. (Paul
	    Jolly)
解決方案:   Accept a match with the lhs of an abbreviation without the
	    trailing space.
相關文件:   src/getchar.c

Patch 6.2.442
問題:	    Cannot manipulate the command line from a function.
解決方案:   Add getcmdline(), getcmdpos() and setcmdpos() functions and the
	    CTRL-\ e command.
相關文件:   runtime/doc/cmdline.txt, runtime/doc/eval.txt, src/eval.c
	    src/ex_getln.c, src/ops.c, src/proto/ex_getln.pro,
	    src/proto/ops.pro

Patch 6.2.443
問題:	    With ":silent! echoerr something" you don't get the position of
	    the error.  emsg() only writes the message itself and returns.
解決方案:   Also redirect the position of the error.
相關文件:   src/message.c

Patch 6.2.444
問題:	    When adding the 'c' flag to a ":substitute" command it may replace
	    more times than without the 'c' flag.  Happens for a  match that
	    starts with "\ze" (Marcel Svitalsk) and when using "\@<=" (Klaus
	    Bosau).
解決方案:   Correct "prev_matchcol" when replacing the line.  Don't replace
	    the line when the pattern uses look-behind matching.
相關文件:   src/ex_cmds.c, src/proto/regexp.pro, src/regexp.c

Patch 6.2.445
問題:	    Copying vimtutor to /tmp/something is not secure, a symlink may
	    cause trouble.
解決方案:   Create a directory and create the file in it.  Use "umask" to
	    create the directory with mode 700.  (Stefan Nordhausen)
相關文件:   src/vimtutor

Patch 6.2.446 (after 6.2.404)
問題:	    Using library functions wcwidth() and iswprint() results in
	    display problems for Hebrew characters. (Ron Aaron)
解決方案:   Disable the code to use the library functions, use our own.
相關文件:   src/mbyte.c

Patch 6.2.447 (after 6.2.440)
問題:	    Now that the title is only updated when redrawing, it is no longer
	    possible to show it while executing a function. (Madoka Machitani)
解決方案:   Make ":redraw" also update the title.
相關文件:   src/ex_docmd.c

Patch 6.2.448 (after 6.2.427)
問題:	    Mac: conversion done when 'termencoding' differs from 'encoding'
	    fails when pasting a longer text.
解決方案:   Check for an incomplete sequence at the end of the chunk to be
	    converted. (Eckehard Berns)
相關文件:   src/mbyte.c

Patch 6.2.449 (after 6.2.431)
問題:	    Get error messages when switching files.
解決方案:   Check for a valid line number when calculating the width of the
	    horizontal scrollbar. (Helmut Stiegler)
相關文件:   src/gui.c

Patch 6.2.450
問題:	    "  #include" and "  #define" are not recognized with the default
	    option values for 'include' and 'defined'. (RG Kiran)
解決方案:   Adjust the default values to allow white space before the #.
相關文件:   runtime/doc/options.txt, src/option.c

Patch 6.2.451
問題:	    GTK: when using XIM there are various problems, including setting
	    'modified' and breaking undo at the wrong moment.
解決方案:   Add "xim_changed_while_preediting", "preedit_end_col" and
	    im_is_preediting(). (Yasuhiro Matsumoto)
相關文件:   src/ex_getln.c, src/globals.h, src/gui_gtk.c, src/gui_gtk_x11.c,
	    src/mbyte.c, src/misc1.c, src/proto/mbyte.pro, src/screen.c,
	    src/undo.c

Patch 6.2.452
問題:	    In diff mode, when DiffAdd and DiffText highlight settings are
	    equal, an added line is highlighted with DiffChange. (Tom Schumm)
解決方案:   Remember the diff highlight type instead of the attributes.
相關文件:   src/screen.c

Patch 6.2.453
問題:	    ":s/foo\|\nbar/x/g" does not replace two times in "foo\nbar".
	    (Pavel Papushev)
解決方案:   When the pattern can match a line break also try matching at the
	    NUL at the end of a line.
相關文件:   src/ex_cmds.c, src/regexp.c

Patch 6.2.454
問題:	    ":let b:changedtick" doesn't work. (Alan Schmitt)  ":let
	    b:changedtick = 99" does not give an error message.
解決方案:   Add code to recognize ":let b:changedtick".
相關文件:   src/eval.c

Patch 6.2.455 (after 6.2.297)
問題:	    In Python commands the current locale changes how certain Python
	    functions work. (Eugene M. Minkovskii)
解決方案:   Set the LC_NUMERIC locale to "C" while executing a Python command.
相關文件:   src/if_python.c

Patch 6.2.456 (extra)
問題:	    Win32: Editing a file by its Unicode name (dropping it on Vim or
	    using the file selection dialog) doesn't work. (Yakov Lerner, Alex
	    Jakushev)
解決方案:   Use wide character functions when file names are involved and
	    convert from/to 'encoding' where needed.
相關文件:   src/gui_w48.c, src/macros.h, src/memfile.c, src/memline.c,
	    src/os_mswin.c, src/os_win32.c

Patch 6.2.457 (after 6.2.244)
問題:	    When 'encoding' is "utf-8" and writing text with chars above 0x80
	    in latin1, conversion is wrong every 8200 bytes. (Oyvind Holm)
解決方案:   Correct the utf_ptr2len_check_len() function and fix the problem
	    of displaying 0xf7 in utfc_ptr2len_check_len().
相關文件:   src/mbyte.c

Patch 6.2.458
問題:	    When 'virtualedit' is set "$" doesn't move to the end of an
	    unprintable character, causing "y$" not to include that character.
	    (Fred Ma)
解決方案:   Set "coladd" to move the cursor to the end of the character.
相關文件:   src/misc2.c

Patch 6.2.459 (after 6.2.454)
問題:	    Variable "b" cannot be written. (Salman Halim)
解決方案:   Compare strings properly.
相關文件:   src/eval.c

Patch 6.2.460 (extra, after 6.2.456)
問題:	    Compiler warnings for missing prototypes.
解決方案:   Include the missing prototypes.
相關文件:   src/proto/os_win32.pro

Patch 6.2.461
問題:	    After using a search command "x" starts putting single characters
	    in the numbered registers.
解決方案:   Reset "use_reg_one" at the right moment.
相關文件:   src/normal.c

Patch 6.2.462
問題:	    Finding a matching parenthesis does not correctly handle a
	    backslash in a trailing byte.
解決方案:   Handle multi-byte characters correctly. (Taro Muraoka)
相關文件:   src/search.c

Patch 6.2.463 (extra)
問題:	    Win32: An NTFS file system may contain files with extra info
	    streams.  The current method to copy them creates one and then
	    deletes it again.  (Peter Toennies)  Also, only three streams with
	    hard coded names are copied.
解決方案:   Use BackupRead() to check which info streams the original file
	    contains and only copy these streams.
相關文件:   src/os_win32.c

Patch 6.2.464 (extra, after 6.2.427)
問題:	    Amiga: Compilation error with gcc. (Ali Akcaagac)
解決方案:   Move the #ifdef outside of Read().
相關文件:   src/os_amiga.c

Patch 6.2.465
問題:	    When resizing the GUI window the window manager sometimes moves it
	    left of or above the screen. (Michael McCarty)
解決方案:   Check the window position after resizing it and move it onto the
	    screen when it isn't.
相關文件:   src/gui.c

Patch 6.2.466 (extra, after 6.2.456)
問題:	    Win32: Compiling with Borland C fails, and an un/signed warning.
解決方案:   Redefine wcsicmp() to wcscmpi() and add type casts. (Yasuhiro
	    Matsumoto)
相關文件:   src/os_win32.c

Patch 6.2.467 (extra, after 6.2.463)
問題:	    Win32: can't compile without multi-byte feature. (Ajit Thakkar)
解決方案:   Add #ifdefs around the info stream code.
相關文件:   src/os_win32.c

Patch 6.2.468
問題:	    Compiler warnings for shadowed variables. (Matthias Mohr)
解決方案:   Delete superfluous variables and rename others.
相關文件:   src/eval.c, src/ex_docmd.c, src/ex_eval.c, src/if_cscope.c,
	    src/fold.c, src/option.c, src/os_unix.c, src/quickfix.c,
	    src/regexp.c

Patch 6.2.469 (extra, after 6.2.456)
問題:	    Win32: Can't create swap file when 'encoding' differs from the
	    active code page. (Kriton Kyrimis)
解決方案:   In enc_to_ucs2() terminate the converted string with a NUL
相關文件:   src/os_mswin.c

Patch 6.2.470
問題:	    The name returned by tempname() may be equal to the file used for
	    shell output when ignoring case.
解決方案:   Skip 'O' and 'I' in tempname().
相關文件:   src/eval.c

Patch 6.2.471
問題:	    "-L/usr/lib" is used in the link command, even though it's
	    supposed to be filtered out. "-lw" and "-ldl" are not
	    automatically added when needed for "-lXmu". (Antonio Colombo)
解決方案:   Check for a space after the argument instead of before.  Also
	    remove "-R/usr/lib" if it's there.  Check for "-lw" and "-ldl"
	    before trying "-lXmu".
相關文件:   src/auto/configure, src/configure.in, src/link.sh

Patch 6.2.472
問題:	    When using a FileChangedShell autocommand that changes the current
	    buffer, a buffer exists that can't be wiped out.
	    Also, Vim sometimes crashes when executing an external command
	    that changes the buffer and a FileChangedShell autocommand is
	    used.  (Hari Krishna Dara)
	    Users are confused by the warning for a file being changed outside
	    of Vim.
解決方案:   Avoid that the window counter for a buffer is incremented twice.
	    Avoid that buf_check_timestamp() is used recursively.
	    Add a hint to look in the help for more info.
相關文件:   src/ex_cmds.c, src/fileio.c

Patch 6.2.473
問題:	    Using CTRL-] in a help buffer without a name causes a crash.
解決方案:   Check for name to be present before using it. (Taro Muraoka)
相關文件:   src/tag.c

Patch 6.2.474 (extra, after 6.2.456)
問題:	    When Vim is starting up conversion is done unnecessarily.  Failure
	    to find the runtime files on Windows 98. (Randall W. Morris)
解決方案:   Init enc_codepage negative, only use it when not negative.
	    Don't use GetFileAttributesW() on Windows 98 or earlier.
相關文件:   src/globals.h, src/gui_w32.c, src/gui_w48.c, src/os_mswin.c,
	    src/os_win32.c

Patch 6.2.475
問題:	    Commands after "perl <<EOF" are parsed as Vim commands when they
	    are not executed.
解決方案:   Properly skip over the perl commands.
相關文件:   src/ex_docmd.c, src/ex_getln.c, src/if_perl.xs, src/if_python.c,
	    src/if_ruby.c, src/if_tcl.c, src/misc2.c

Patch 6.2.476
問題:	    When reloading a hidden buffer changed outside of Vim and the
	    current buffer is read-only, the reloaded buffer becomes
	    read-only.  (Hari Krishna Dara)
解決方案:   Save the 'readonly' flag of the reloaded buffer instead of the
	    current buffer.
相關文件:   src/fileio.c

Patch 6.2.477
問題:	    Using remote_send(v:servername, "\<C-V>") causes Vim to hang.
	    (Yakov Lerner)
解決方案:   When the resulting string is empty don't set received_from_client.
相關文件:   src/main.c

Patch 6.2.478
問題:	    Win32: "--remote file" fails changing directory if the current
	    directory name starts with a single quote.  (Iestyn Walters)
解決方案:   Add a backslash where it will be removed later.
相關文件:   src/main.c, src/misc2.c, src/proto/misc2.pro

Patch 6.2.479
問題:	    The error message for errors during recovery goes unnoticed.
解決方案:   Avoid that the hit-enter prompt overwrites the message.  Add a few
	    lines to make the error stand out.
相關文件:   src/main.c, src/message.c, src/memline.c

Patch 6.2.480
問題:	    NetBeans: Using negative index in array.  backslash at end of
	    message may cause Vim to crash. (Xavier de Gaye)
解決方案:   Initialize buf_list_used to zero. Check for trailing backslash.
相關文件:   src/netbeans.c

Patch 6.2.481
問題:	    When writing a file it is not possible to specify that hard and/or
	    symlinks are to be broken instead of preserved.
解決方案:   Add the "breaksymlink" and "breakhardlink" values to 'backupcopy'.
	    (Simon Ekstrand)
相關文件:   runtime/doc/options.txt, src/fileio.c, src/option.c, src/option.h

Patch 6.2.482
問題:	    Repeating insert of CTRL-K 1 S doesn't work.  The superscript 1 is
	    considered to be a digit. (Juergen Kraemer)
解決方案:   In vim_isdigit() only accept '0' to '9'.  Use VIM_ISDIGIT() for
	    speed where possible.  Also add vim_isxdigit().
相關文件:   src/buffer.c, src/charset.c, src/diff.c, src/digraph.c,
	    src/edit.c, src/eval.c,, src/ex_cmds.c, src/ex_cmds2.c,
	    src/ex_docmd.c, src/ex_eval.c, src/ex_getln.c,
	    src/if_xcmdsrv.c, src/farsi.c, src/fileio.c, src/fold.c,
	    src/getchar.c, src/gui.c, src/if_cscope.c, src/macros.h,
	    src/main.c, src/mark.c, src/mbyte.c, src/menu.c, src/misc1.c,
	    src/misc2.c, src/normal.c, src/ops.c, src/option.c,
	    src/proto/charset.pro, src/regexp.c, src/screen.c, src/search.c,
	    src/syntax.c, src/tag.c, src/term.c, src/termlib.c

Patch 6.2.483 (extra, after 6.2.482)
問題:	    See 6.2.482.
解決方案:   Extra part of patch 6.2.482.
相關文件:   src/gui_photon.c, src/gui_w48.c, src/os_msdos.c, src/os_mswin.c

Patch 6.2.484
問題:	    MS-Windows: With the included diff.exe, differences after a CTRL-Z
	    are not recognized.  (Peter Keresztes)
解決方案:   Write the files with unix fileformat and invoke diff with --binary
	    if possible.
相關文件:   src/diff.c

Patch 6.2.485
問題:	    A BufWriteCmd autocommand cannot know if "!" was used or not.
	    (Hari Krishna Dara)
解決方案:   Add the v:cmdbang variable.
相關文件:   runtime/doc/eval.txt, src/eval.c, src/proto/eval.pro,
	    src/fileio.c, src/vim.h

Patch 6.2.486 (6.2.482)
問題:	    Diff for eval.c is missing.
解決方案:   Addition to patch 6.2.482.
相關文件:   src/eval.c

Patch 6.2.487 (extra, after 6.2.456)
問題:	    Compiler warnings for wrong prototype. (Alejandro Lopez Valencia)
解決方案:   Delete the prototype for Handle_WM_Notify().
相關文件:   src/proto/gui_w32.pro

Patch 6.2.488
問題:	    Missing ")" in *.ch filetype detection.
解決方案:   Add the ")".  (Ciaran McCreesh)
相關文件:   runtime/filetype.vim

Patch 6.2.489
問題:	    When accidentally opening a session in Vim which has already been
	    opened in another Vim there is a long row of ATTENTION prompts.
	    Need to quit each of them to get out. (Robert Webb)
解決方案:   Add the "Abort" alternative to the dialog.
相關文件:   src/memline.c

Patch 6.2.490
問題:	    With 'paragraph' it is not possible to use a single dot as a
	    paragraph boundary.  (Dorai Sitaram)
解決方案:   Allow using "  " (two spaces) in 'paragraph' to match ".$" or
	    ". $"
相關文件:   src/search.c

Patch 6.2.491
問題:	    Decrementing a position doesn't take care of multi-byte chars.
解決方案:   Adjust the column for multi-byte characters.  Remove mb_dec().
	    (Yasuhiro Matsumoto)
相關文件:   src/mbyte.c, src/misc2.c, src/proto/mbyte.pro

Patch 6.2.492
問題:	    When using ":redraw" while there is a message, the next ":echo"
	    still causes text to scroll. (Yasuhiro Matsumoto)
解決方案:   Reset msg_didout and msg_col, so that after ":redraw" the next
	    message overwrites an existing one.
相關文件:   src/ex_docmd.c

Patch 6.2.493
問題:	    "@x" doesn't work when 'insertmode' is set. (Benji Fisher)
解決方案:   Put "restart_edit" in the typeahead buffer, so that it's used
	    after executing the register contents.
相關文件:   src/ops.c

Patch 6.2.494
問題:	    Using diff mode with two windows, when moving horizontally in
	    inserted lines, a fold in the other window may open.
解決方案:   Compute the line number in the other window correctly.
相關文件:   src/diff.c

Patch 6.2.495 (extra, after 6.2.456)
問題:	    Win32: The file dialog doesn't work on Windows 95.
解決方案:   Put the wide code of gui_mch_browse() in gui_mch_browseW() and use
	    it only on Windows NT/2000/XP.
相關文件:   src/gui_w32.c, src/gui_w48.c

Patch 6.2.496
問題:	    FreeBSD 4.x: When compiled with the pthread library (Python) a
	    complicated pattern may cause Vim to crash.  Catching the signal
	    doesn't work.
解決方案:   When compiled with threads, instead of using the normal stacksize
	    limit, use the size of the initial stack.
相關文件:   src/auto/configure, src/config.h.in, src/configure.in,
	    src/os_unix.c

Patch 6.2.497 (extra)
問題:	    Russian messages are only available in one encoding.
解決方案:   Convert the messages to MS-Windows codepages. (Vassily Ragosin)
相關文件:   src/po/Makefile

Patch 6.2.498
問題:	    Non-latin1 help files are not properly supported.
解決方案:   Support utf-8 help files and convert them to 'encoding' when
	    needed.
相關文件:   src/fileio.c

Patch 6.2.499
問題:	    When writing a file and halting the system, the file might be lost
	    when using a journaling file system.
解決方案:   Use fsync() to flush the file data to disk after writing a file.
	    (Radim Kolar)
相關文件:   src/fileio.c

Patch 6.2.500 (extra)
問題:	    The DOS/MS-Windows the installer doesn't use the --binary flag for
	    diff.
解決方案:   Add --binary to the diff argument in MyDiff(). (Alejandro Lopez-
	    Valencia)
相關文件:   src/dosinst.c

Patch 6.2.501
問題:	    Vim does not compile with MorphOS.
解決方案:   Add a Makefile and a few changes to make Vim work with MorphOS.
	    (Ali Akcaagac)
相關文件:   runtime/doc/os_amiga.txt, src/INSTALLami.txt,
	    src/Make_morphos.mak, src/memfile.c, src/term.c

Patch 6.2.502
問題:	    Building fails for generating message files.
解決方案:   Add dummy message files.
相關文件:   src/po/ca.po, src/po/ru.po, src/po/sv.po

Patch 6.2.503
問題:	    Mac: Can't compile MacRoman conversions without the GUI.
解決方案:   Also link with the Carbon framework for the terminal version, for
	    the MacRoman conversion functions. (Eckehard Berns)
	    Remove -ltermcap from the GUI link command, it is not needed.
相關文件:   src/auto/configure, src/Makefile, src/configure.in

Patch 6.2.504
問題:	    Various problems with 'cindent', among which that a
	    list of variable declarations is not indented properly.
解決方案:   Fix the wrong indenting.  Improve indenting of C++ methods.
	    Add the 'i', 'b' and 'W' options to 'cinoptions'. (mostly by
	    Helmut Stiegler)
	    Improve indenting of preprocessor-continuation lines.
相關文件:   runtime/doc/indent.txt, src/misc1.c, src/testdir/test3.in,
	    src/testdir/test3.ok

Patch 6.2.505
問題:	    Help for -P argument is missing. (Ronald Hoellwarth)
解決方案:   Add the patch that was missing in 6.2.419.
相關文件:   runtime/doc/starting.txt

Patch 6.2.506 (extra)
問題:	    Win32: When 'encoding' is a codepage then reading a utf-8 file
	    only works when iconv is available.  Writing a file in another
	    codepage uses the wrong kind of conversion.
解決方案:   Use internal conversion functions.  Enable reading and writing
	    files with 'fileencoding' different from 'encoding' for all valid
	    codepages and utf-8 without the need for iconv.
相關文件:   src/fileio.c, src/testdir/Make_dos.mak, src/testdir/test52.in,
	    src/testdir/test52.ok

Patch 6.2.507
問題:	    The ownership of the file with the password for the NetBeans
	    connection is not checked.  "-nb={file}" doesn't work for GTK.
解決方案:   Only accept the file when owned by the user and not accessible by
	    others.  Detect "-nb=" for GTK.
相關文件:   src/netbeans.c, src/gui_gtk_x11.c

Patch 6.2.508
問題:	    Win32: "v:lang" does not show the current language for messages if
	    it differs from the other locale settings.
解決方案:   Use the value of the $LC_MESSAGES environment variable.
相關文件:   src/ex_cmds2.c

Patch 6.2.509 (after 6.2.508)
問題:	    Crash when $LANG is not set.
解決方案:   Add check for NULL pointer. (Ron Aaron)
相關文件:   src/ex_cmds2.c

Patch 6.2.510 (after 6.2.507)
問題:	    Warning for pointer conversion.
解決方案:   Add a type cast.
相關文件:   src/gui_gtk_x11.c

Patch 6.2.511
問題:	    Tags in Russian help files are in utf-8 encoding, which may be
	    different from 'encoding'.
解決方案:   Use the "TAG_FILE_ENCODING" field in the tags file to specify the
	    encoding of the tags.  Convert help tags from 'encoding' to the
	    tag file encoding when searching for matches, do the reverse when
	    listing help tags.
相關文件:   runtime/doc/tagsrch.txt, src/ex_cmds.c, src/tag.c

Patch 6.2.512
問題:	    Translating "\"\n" is useless. (Gerfried Fuchs)
解決方案:   Remove the _() around it.
相關文件:   src/main.c, src/memline.c

Patch 6.2.513 (after 6.2.507)
問題:	    NetBeans: the check for owning the connection info file can be
	    simplified. (Nikolay Molchanov)
解決方案:   Only check if the access mode is right.
相關文件:   src/netbeans.c

Patch 6.2.514
問題:	    When a highlight/syntax group name contains invalid characters
	    there is no warning.
解決方案:   Add an error for unprintable characters and a warning for other
	    invalid characters.
相關文件:   src/syntax.c

Patch 6.2.515
問題:	    When using the options window 'swapfile' is reset.
解決方案:   Use ":setlocal" instead of ":set".
相關文件:   runtime/optwin.vim

Patch 6.2.516
問題:	    The sign column cannot be seen, looks like there are two spaces
	    before the text. (Rob Retter)
解決方案:   Add the SignColumn highlight group.
相關文件:   runtime/doc/options.txt, runtime/doc/sign.txt, src/option.c,
	    src/screen.c, src/syntax.c, src/vim.h

Patch 6.2.517
問題:	    Using "r*" in Visual mode on multi-byte characters replaces
	    too many characters.  In Visual Block mode replacing with a
	    multi-byte character doesn't work.
解決方案:   Adjust the operator end for the difference in byte length of the
	    original and the replaced character.  Insert all bytes of a
	    multi-byte character, take care of double-wide characters.
相關文件:   src/ops.c

Patch 6.2.518
問題:	    Last line of a window is not updated after using "J" and then "D".
	    (Adri Verhoef)
解決方案:   When no line is found below a change that doesn't need updating,
	    update all lines below the change.
相關文件:   src/screen.c

Patch 6.2.519
問題:	    Mac: cannot read/write files in MacRoman format.
解決方案:   Do internal conversion from/to MacRoman to/from utf-8 and latin1.
	    (Eckehard Berns)
相關文件:   src/fileio.c

Patch 6.2.520 (extra)
問題:	    The NSIS installer is outdated.
解決方案:   Make it work with NSIS 2.0.  Also include console executables for
	    Win 95/98/ME and Win NT/2000/XP.  Use LZWA compression.  Use
	    "/oname" to avoid having to rename files before running NSIS.
相關文件:   Makefile, nsis/gvim.nsi

Patch 6.2.521
問題:	    When using silent Ex mode the "changing a readonly file" warning
	    is omitted but the one second wait isn't. (Yakov Lerner)
解決方案:   Skip the delay when "silent_mode" is set.
相關文件:   src/misc1.c

Patch 6.2.522
問題:	    GUI: when changing 'cmdheight' in the gvimrc file the window
	    layout is messed up. (Keith Dart)
解決方案:   Skip updating the window layout when changing 'cmdheight' while
	    still starting up.
相關文件:   src/option.c

Patch 6.2.523
問題:	    When loading a session and aborting when a swap file already
	    exists, the user is left with useless windows. (Robert Webb)
解決方案:   Load one file before creating the windows.
相關文件:   src/ex_docmd.c

Patch 6.2.524 (extra, after 6.2.520)
問題:	    Win32: (un)installing gvimext.dll may fail if it was used.
	    The desktop and start menu links are created for the current user
	    instead of all users.
	    Using the home directory as working directory for the links is a
	    bad idea for multi-user systems.
	    Cannot use Vim from the "Open With..." menu.
解決方案:   Force a reboot if necessary. (Alejandro Lopez-Valencia)  Also use
	    macros for the directory of the source and runtime files.  Use
	    "CSIDL_COMMON_*" instead of "CSIDL_*" when possible.
	    Do not specify a working directory in the links.
	    Add Vim to the "Open With..." menu. (Giuseppe Bilotta)
相關文件:   nsis/gvim.nsi, src/dosinst.c, src/dosinst.h, src/uninstal.c

Patch 6.2.525
問題:	    When the history contains a very long line ":history" causes a
	    crash. (Volker Kiefel)
解決方案:   Shorten the history entry to fit it in one line.
相關文件:   src/ex_getln.c

Patch 6.2.526
問題:	    When s:lang is "ja" the Japanese menus are not used.
解決方案:   Add 'encoding' to the language when there is no charset.
相關文件:   runtime/menu.vim

Patch 6.2.527
問題:	    The 2html script uses ":wincmd p", which breaks when using some
	    autocommands.
解決方案:   Remember the window numbers and jump to them with ":wincmd w".
	    Also add XHTML support. (Panagiotis Issaris)
相關文件:   runtime/syntax/2html.vim

Patch 6.2.528
問題:	    NetBeans: Changes of the "~" command are not reported.
解決方案:   Call netbeans_inserted() after performing "~". (Gordon Prieur)
	    Also change NetBeans debugging to append to the log file.
	    Also fix that "~" in Visual block mode changes too much if there
	    are multi-byte characters.
相關文件:   src/nbdebug.c, src/normal.c, src/ops.c

Patch 6.2.529 (extra)
問題:	    VisVim only works for Admin.  Doing it for one user doesn't work.
	    (Alexandre Gouraud)
解決方案:   When registering the module fails, simply continue.
相關文件:   src/VisVim/VisVim.cpp

Patch 6.2.530
問題:	    Warning for missing prototype on the Amiga.
解決方案:   Include time.h
相關文件:   src/version.c

Patch 6.2.531
問題:	    In silent ex mode no messages are given, which makes debugging
	    very difficult.
解決方案:   Do output messages when 'verbose' is set.
相關文件:   src/message.c, src/ui.c

Patch 6.2.532 (extra)
問題:	    Compiling for Win32s with VC 4.1 doesn't work.
解決方案:   Don't use CP_UTF8 if it's not defined.  Don't use CSIDL_COMMON*
	    when not defined.
相關文件:   src/dosinst.h, src/fileio.c

Win32 console: After patch 6.2.398 Ex mode did not work. (Yasuhiro Matsumoto)

Patch 6.3a.001
問題:	    Win32: if testing for the "--binary" option fails, diff isn't used
	    at all.
解決方案:   Handle the "ok" flag properly. (Yasuhiro Matsumoto)
相關文件:   src/diff.c

Patch 6.3a.002
問題:	    NetBeans: An insert command from NetBeans beyond the end of a
	    buffer crashes Vim. (Xavier de Gaye)
解決方案:   Use a local pos_T structure for the position.
相關文件:   src/netbeans.c

Patch 6.3a.003
問題:	    E315 error with auto-formatting comments. (Henry Van Roessel)
解決方案:   Pass the line number to same_leader().
相關文件:   src/ops.c

Patch 6.3a.004
問題:	    Test32 fails on Windows XP for the DJGPP version.  Renaming
	    test11.out fails.
解決方案:   Don't try renaming, create new files to use for the test.
相關文件:   src/testdir/test32.in, src/testdir/test32.ok

Patch 6.3a.005
問題:	    ":checkpath!" does not use 'includeexpr'.
解決方案:   Use a file name that was found directly.  When a file was not
	    found and the located name is empty, use the rest of the line.
相關文件:   src/search.c

Patch 6.3a.006
問題:	    "yip" moves the cursor to the first yanked line, but not to the
	    first column.  Looks like not all text was yanked. (Jens Paulus)
解決方案:   Move the cursor to the first column.
相關文件:   src/search.c

Patch 6.3a.007
問題:	    'cindent' recognizes "enum" but not "typedef enum".
解決方案:   Skip over "typedef" before checking for "enum". (Helmut Stiegler)
	    Also avoid that searching for this item goes too far back.
相關文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 6.3a.008 (extra)
問題:	    Windows 98: Some of the wide functions are not implemented,
	    resulting in file I/O to fail.  This depends on what Unicode
	    support is installed.
解決方案:   Handle the failure and fall back to non-wide functions.
相關文件:   src/os_win32.c

Patch 6.3a.009
問題:	    Win32: Completion of filenames does not work properly when
	    'encoding' differs from the active code page.
解決方案:   Use wide functions for expanding wildcards when appropriate.
相關文件:   src/misc1.c

Patch 6.3a.010 (extra)
問題:	    Win32: Characters in the window title that do not appear in the
	    active codepage are replaced by a question mark.
解決方案:   Use DefWindowProcW() instead of DefWindowProc() when possible.
相關文件:   src/glbl_ime.cpp, src/globals.h, src/proto/gui_w16.pro,
	    src/proto/gui_w32.pro, src/gui_w16.c, src/gui_w32.c, src/gui_w48.c

Patch 6.3a.011
問題:	    Using the explorer plugin changes a local directory to the global
	    directory.
解決方案:   Don't use ":chdir" to restore the current directory.  Make
	    "expand('%:p')" remove "/../" and "/./" items from the path.
相關文件:   runtime/plugin/explorer.vim, src/eval.c, src/os_unix.c

Patch 6.3a.012 (extra)
問題:	    On Windows 98 the installer doesn't work, don't even get the "I
	    agree" button.  The check for the path ending in "vim" makes the
	    browse dialog hard to use.  The default path when no previous Vim
	    is installed is "c:\vim" instead of "c:\Program Files\Vim".
解決方案:   Remove the background gradient command.  Change the
	    .onVerifyInstDir function to a leave function for the directory
	    page.  Don't let the install program default to c:\vim when no
	    path could be found.
相關文件:   nsis/gvim.nsi, src/dosinst.c

Patch 6.3a.013 (extra)
問題:	    Win32: Characters in the menu that are not in the active codepage
	    are garbled.
解決方案:   Convert menu strings from 'encoding' to the active codepage.
相關文件:   src/gui_w32.c, src/gui_w48.c

Patch 6.3a.014
問題:	    Using multi-byte text and highlighting in a statusline causes gaps
	    to appear. (Helmut Stiegler)
解決方案:   Advance the column by text width instead of number of bytes.  Add
	    the vim_strnsize() function.
相關文件:   src/charset.c, src/proto/charset.pro, src/screen.c

Patch 6.3a.015
問題:	    Using the "select all" menu item when 'insertmode' is set and
	    clicking the mouse button doesn't return to Insert mode.  The
	    Buffers/Delete menu doesn't offer a choice to abandon a changed
	    buffer.  (Jens Paulus)
解決方案:   Don't use CTRL-\ CTRL-N.  Add ":confirm" for the Buffers menu
	    items.
相關文件:   runtime/menu.vim

Patch 6.3a.016
問題:	    After cancelling the ":confirm" dialog the error message and
	    hit-enter prompt may not be displayed properly.
解決方案:   Flush output after showing the dialog.
相關文件:   src/message.c

Patch 6.3a.017
問題:	    servername() doesn't work when Vim was started with the "-X"
	    argument or when the "exclude" in 'clipboard' matches the terminal
	    name.  (Robert Nowotniak)
解決方案:   Force connecting to the X server when using client-server
	    commands.
相關文件:   src/eval.c, src/globals.h, src/os_unix.c

Patch 6.3a.018 (after 6.3a.017)
問題:	    Compiler warning for return value of make_connection().
解決方案:   Use void return type.
相關文件:   src/eval.c

Patch 6.3a.019 (extra)
問題:	    Win32: typing non-latin1 characters doesn't work.
解決方案:   Invoke _OnChar() directly to avoid that the argument is truncated
	    to a byte.  Convert the UTF-16 character to bytes according to
	    'encoding' and ignore 'termencoding'.  Same for _OnSysChar().
相關文件:   src/gui_w32.c, src/gui_w48.c

Patch 6.3a.020 (extra)
問題:	    Missing support for AROS (AmigaOS reimplementation).  Amiga GUI
	    doesn't work.
解決方案:   Add AROS support.  (Adam Chodorowski)
	    Fix Amiga GUI problems. (Georg Steger, Ali Akcaagac)
相關文件:   Makefile, src/Make_aros.mak, src/gui_amiga.c, src/gui_amiga.h,
	    src/memfile.c, src/os_amiga.c, src/term.c

Patch 6.3a.021 (after 6.3a.017)
問題:	    Can't compile with X11 but without GUI.
解決方案:   Put use of "gui.in_use" inside an #ifdef.
相關文件:   src/eval.c

Patch 6.3a.022
問題:	    When typing Tabs when 'softtabstop' is used and 'list' is set a
	    tab is counted for two spaces.
解決方案:   Use the "L" flag in 'cpoptions' to tell whether a tab is counted
	    as two spaces or as 'tabstop'. (Antony Scriven)
相關文件:   runtime/doc/options.txt, src/edit.c

Patch 6.3a.023
問題:	    Completion on the command line doesn't handle backslashes
	    properly.  Only the tail of matches is shown, even when not
	    completing filenames.
解決方案:   When turning the string into a pattern double backslashes.  Don't
	    omit the path when not expanding files or directories.
相關文件:   src/ex_getln.c

Patch 6.3a.024
問題:	    The "save all" toolbar item fails for buffers that don't have a
	    name.  When using ":wa" or closing the Vim window and there are
	    nameless buffers, browsing for a name may cause the name being
	    given to the wrong buffer or not stored properly.  ":browse" only
	    worked for one file.
解決方案:   Use ":confirm browse" for "save all".
	    Pass buffer argument to setfname().  Restore "browse" flag and
	    "forceit" after doing the work for one file.
相關文件:   runtime/menu.vim, src/buffer.c, src/ex_cmds.c, src/ex_cmds2.c,
	    src/ex_docmd.c, src/ex_getln.c, src/fileio.c, src/memline.c,
	    src/message.c, src/window.c, src/proto/buffer.pro,
	    src/proto/ex_cmds2.pro, src/proto/memline.pro

Patch 6.3a.025
問題:	    Setting 'virtualedit' moves the cursor. (Benji Fisher)
解決方案:   Update the virtual column before using it.
相關文件:   src/option.c

Patch 6.3a.026 (extra, after 6.3a.008)
問題:	    Editing files on Windows 98 doesn't work when 'encoding' is
	    "utf-8" (Antoine Mechelynck)
	    Warning for missing function prototype.
解決方案:   For all wide functions check if it failed because it is not
	    implemented.  Use ANSI function declaration for char_to_string().
相關文件:   src/gui_w48.c, src/os_mswin.c, src/os_win32.c

Patch 6.3a.027 (extra, after 6.3a.026)
問題:	    Compiler warning for function argument.
解決方案:   Declare both char and WCHAR arrays.
相關文件:   src/gui_w48.c

Patch 6.3a.028
問題:	    ":normal ." doesn't work inside a function, because redo is saved
	    and restored. (Benji Fisher)
解決方案:   Make a copy of the redo buffer when executing a function.
相關文件:   src/getchar.c

Patch 6.3b.001 (extra)
問題:	    Bcc 5: The generated auto/pathdef can't be compiled.
解決方案:   Fix the way quotes and backslashes are escaped.
相關文件:   src/Make_bc5.mak

Patch 6.3b.002
問題:	    Win32: conversion during file write fails when a double-byte
	    character is split over two writes.
解決方案:   Fix the conversion retry without a trailing byte. (Taro Muraoka)
相關文件:   src/fileio.c

Patch 6.3b.003 (extra)
問題:	    Win32: When compiling with Borland C 5.5 and 'encoding' is "utf-8"
	    then Vim can't open files under MS-Windows 98. (Antoine J.
	    Mechelynck)
解決方案:   Don't use _wstat(), _wopen() and _wfopen() in this situation.
相關文件:   src/os_mswin.c, src/os_win32.c

Patch 6.3b.004
問題:	    ":helpgrep" includes a trailing CR in the text line.
解決方案:   Remove the CR.
相關文件:   src/quickfix.c

Patch 6.3b.005
問題:	    ":echo &g:ai" results in the local option value. (Salman Halim)
解決方案:   Pass the flags from find_option_end() to get_option_value().
相關文件:   src/eval.c

Patch 6.3b.006
問題:	    When using "mswin.vim", CTRL-V in Insert mode leaves cursor before
	    last pasted character.  (Mathew Davis)
解決方案:   Use the same Paste() function as in menu.vim.
相關文件:   runtime/mswin.vim

Patch 6.3b.007
問題:	    Session file doesn't restore view on windows properly. (Robert
	    Webb)
解決方案:   Restore window sizes both before and after restoring the view, so
	    that the view, cursor position and size are restored properly.
相關文件:   src/ex_docmd.c

Patch 6.3b.008
問題:	    Using ":finally" in a user command doesn't always work. (Hari
	    Krishna Dara)
解決方案:   Don't assume that using getexline() means the command was typed.
相關文件:   src/ex_docmd.c

Patch 6.3b.009 (extra)
問題:	    Win32: When the -P argument is not found in a window title, there
	    is no error message.
解決方案:   When the window can't be found give an error message and exit.
	    Also use try/except to catch failing to open the MDI window.
	    (Michael Wookey)
相關文件:   src/gui_w32.c

Patch 6.3b.010
問題:	    Win32: Using the "-D" argument and expanding arguments may cause a
	    hang, because the terminal isn't initialized yet. (Vince Negri)
解決方案:   Don't go into debug mode before the terminal is initialized.
相關文件:   src/main.c

Patch 6.3b.011
問題:	    Using CTRL-\ e while obtaining an expression aborts the command
	    line. (Hari Krishna Dara)
解決方案:   Insert the CTRL-\ e as typed.
相關文件:   src/ex_getln.c

Patch 6.3b.012 (after 6.3b.010)
問題:	    Can't compile with tiny features. (Norbert Tretkowski)
解決方案:   Add #ifdefs.
相關文件:   src/main.c

Patch 6.3b.013
問題:	    Loading a session file results in editing the wrong file in the
	    first window when this is not the file at the current position in
	    the argument list. (Robert Webb)
解決方案:   Check w_arg_idx_invalid to decide whether to edit a file.
相關文件:   src/ex_docmd.c

Patch 6.3b.014
問題:	    ":runtime! foo*.vim" may using freed memory when a sourced script
	    changes the value of 'runtimepath'.
解決方案:   Make a copy of 'runtimepath' when looping over the matches.
相關文件:   src/ex_cmds2.c

Patch 6.3b.015
問題:	    Get lalloc(0) error when using "p" in Visual mode while
	    'clipboard' contains "autoselect,unnamed". (Mark Wagonner)
解決方案:   Avoid allocating zero bytes.  Obtain the clipboard when necessary.
相關文件:   src/ops.c

Patch 6.3b.016
問題:	    When 'virtualedit' is used "x" doesn't delete the last character
	    of a line that has as many characters as 'columns'. (Yakov Lerner)
解決方案:   When the cursor isn't moved let oneright() return FAIL.
相關文件:   src/edit.c

Patch 6.3b.017
問題:	    Win32: "vim --remote-wait" doesn't exit when the server finished
	    editing the file. (David Fishburn)
解決方案:   In the rrhelper plugin change backslashes to forward slashes and
	    escape special characters.
相關文件:   runtime/plugin/rrhelper.vim

Patch 6.3b.018
問題:	    The list of help files in the "local additions" table doesn't
	    recognize utf-8 encoding. (Yasuhiro Matsumoto)
解決方案:   Recognize utf-8 characters.
相關文件:   src/ex_cmds.c

Patch 6.3b.019
問題:	    When $VIMRUNTIME is not a full path name the "local additions"
	    table lists all the help files.
解決方案:   Use fullpathcmp() instead of fnamecmp() to compare the directory
	    names.
相關文件:   src/ex_cmds.c

Patch 6.3b.020
問題:	    When using CTRL-^ when entering a search string, the item in the
	    statusline that indicates the keymap is not updated. (Ilya
	    Dogolazky)
解決方案:   Mark the statuslines for updating.
相關文件:   src/ex_getln.c

Patch 6.3b.021
問題:	    The swapfile is not readable for others, the ATTENTION prompt does
	    not show all info when someone else is editing the same file.
	    (Marcel Svitalsky)
解決方案:   Use the protection of original file for the swapfile and set it
	    after creating the swapfile.
相關文件:   src/fileio.c

Patch 6.3b.022
問題:	    Using "4v" to select four times the old Visual area may put the
	    cursor beyond the end of the line. (Jens Paulus)
解決方案:   Correct the cursor column.
相關文件:   src/normal.c

Patch 6.3b.023
問題:	    When "3dip" starts in an empty line, white lines after the
	    non-white lines are not deleted. (Jens Paulus)
解決方案:   Include the white lines.
相關文件:   src/search.c

Patch 6.3b.024
問題:	    "2daw" does not delete leading white space like "daw" does.  (Jens
	    Paulus)
解決方案:   Include the white space when a count is used.
相關文件:   src/search.c

Patch 6.3b.025
問題:	    Percentage in ruler isn't updated when a line is deleted. (Jens
	    Paulus)
解決方案:   Check for a change in line count when deciding to update the ruler.
相關文件:   src/screen.c, src/structs.h

Patch 6.3b.026
問題:	    When selecting "abort" at the ATTENTION prompt for a file that is
	    already being edited Vim crashes.
解決方案:   Don't abort creating a new buffer when we really need it.
相關文件:   src/buffer.c, src/vim.h

Patch 6.3b.027
問題:	    Win32: When enabling the menu in a maximized window, Vim uses more
	    lines than what is room for. (Shizhu Pan)
解決方案:   When deciding to call shell_resized(), also compare the text area
	    size with Rows and Columns, not just with screen_Rows and
	    screen_Columns.
相關文件:   src/gui.c

Patch 6.3b.028
問題:	    When in diff mode, setting 'rightleft' causes a crash. (Eddine)
解決方案:   Check for last column differently when 'rightleft' is set.
相關文件:   src/screen.c

Patch 6.3b.029
問題:	    Win32: warning for uninitialized variable.
解決方案:   Initialize to zero.
相關文件:   src/misc1.c

Patch 6.3b.030
問題:	    After Visually selecting four characters, changing it to other
	    text, Visually selecting and yanking two characters: "." changes
	    four characters, another "." changes two characters. (Robert Webb)
解決方案:   Don't store the size of the Visual area when redo is active.
相關文件:   src/normal.c

==============================================================================
6.4 版 本						*version-6.4*

本小節討論 6.3 和 6.4 版本之間的改進。

這是一個漏洞修正版。也有一些新特性。主要的新項目來自運行時文件和翻譯。

MS-Windows 的 big 版本現在使用:
	Ruby 1.8.3 版本
	Perl 5.8.7 版本
	Python 2.4.2 版本


改動							*changed-6.4*
-------

刪除了 runtime/tools/tcltags，Exuberant ctags 做得更好。


新增							*added-6.4*
-----

Alsaconf 語法文件 (Nikolai Weibull)
Eruby 語法、縮進、編譯器和文件類型插件文件 (Doug Kearns)
Esterel 語法文件 (Maurizio Tranchero)
Mathematica 縮進文件 (Steve Layland)
Netrc 語法文件 (Nikolai Weibull)
PHP 編譯器文件 (Doug Kearns)
Pascal 縮進文件 (Neil Carter)
Prescribe 語法文件 (Klaus Muth)
Rubyunit 編譯器文件 (Doug Kearns)
SMTPrc 語法文件 (Kornel Kielczewski)
Sudoers 語法文件 (Nikolai Weibull)
TPP 語法文件 (Gerfried Fuchs)
VHDL 文件類型插件文件 (R. Shankar)
Verilog-AMS 語法文件 (S. Myles Prather)

保加利亞鍵盤映射表 (Alberto Mardegan)
加拿大鍵盤映射表 (Eric Joanis)

匈牙利語菜單翻譯，UTF-8 格式 (Kantra Gergely)
烏克蘭語菜單翻譯 (Bohdan Vlasyuk)

愛爾蘭語消息翻譯 (Kevin Patrick Scannell)

configure 也加入 tclsh8.4 的檢查。


修正							*fixed-6.4*
-----

"dFxd;" deleted the character under the cursor, "d;" didn't remember the
exclusiveness of the motion.

When using "set laststatus=2 cmdheight=2" in the .gvimrc you may only get one
line for the cmdline. (Christian Robinson)  Invoke command_height() after the
GUI has started up.

Gcc would warn "dereferencing type-punned pointer will break strict -aliasing
rules".  Avoid using typecasts for variable pointers.

Gcc 3.x interprets the -MM argument differently.  Change "-I /path" to
"-isystem /path" for "make depend".


Patch 6.3.001
問題:	    ":browse split" gives the file selection dialog twice. (Gordon
	    Bazeley)  Same problem for ":browse diffpatch".
解決方案:   Reset cmdmod.browse before calling do_ecmd().
相關文件:   src/diff.c, src/ex_docmd.c

Patch 6.3.002
問題:	    When using translated help files with non-ASCII latin1 characters
	    in the first line the utf-8 detection is wrong.
解決方案:   Properly detect utf-8 characters.  When a mix of encodings is
	    detected continue with the next language and avoid a "no matches"
	    error because of "got_int" being set.  Add the directory name to
	    the error message for a duplicate tag.
相關文件:   src/ex_cmds.c

Patch 6.3.003
問題:	    Crash when using a console dialog and the first choice does not
	    have a default button. (Darin Ohashi)
解決方案:   Allocate two more characters for the [] around the character for
	    the default choice.
相關文件:   src/message.c

Patch 6.3.004
問題:	    When searching for a long string (140 chars in a 80 column
	    terminal) get three hit-enter prompts. (Robert Webb)
解決方案:   Avoid the hit-enter prompt when giving the message for wrapping
	    around the end of the buffer.  Don't give that message again when
	    the string was not found.
相關文件:   src/message.c, src/search.c

Patch 6.3.005
問題:	    Crash when searching for a pattern with a character offset and
	    starting in a closed fold. (Frank Butler)
解決方案:   Check for the column to be past the end of the line.  Also fix
	    that a pattern with a character offset relative to the end isn't
	    read back from the viminfo properly.
相關文件:   src/search.c

Patch 6.3.006
問題:	    ":breakadd file *foo" prepends the current directory to the file
	    pattern. (Hari Krishna Dara)
解決方案:   Keep the pattern as-is.
相關文件:   src/ex_cmds2.c

Patch 6.3.007
問題:	    When there is a buffer with 'buftype' set to "nofile" and using a
	    ":cd" command, the swap file is not deleted when exiting.
解決方案:   Use the full path of the swap file also for "nofile" buffers.
相關文件:   src/fileio.c

Patch 6.3.008
問題:	    Compiling fails under OS/2.
解決方案:   Include "e_screenmode" also for OS/2. (David Sanders)
相關文件:   src/globals.h

Patch 6.3.009 (after 6.3.006)
問題:	    ":breakadd file /path/foo.vim" does not match when a symbolic link
	    is involved.  (Servatius Brandt)
解決方案:   Do expand the pattern when it does not start with "*".
相關文件:   runtime/doc/repeat.txt, src/ex_cmds2.c

Patch 6.3.010
問題:	    When writing to a named pipe there is an error for fsync()
	    failing.
解決方案:   Ignore the fsync() error for devices.
相關文件:   src/fileio.c

Patch 6.3.011
問題:	    Crash when the completion function of a user-command uses a
	    "normal :cmd" command.  (Hari Krishna Dara)
解決方案:   Save the command line when invoking the completion function.
相關文件:   src/ex_getln.c

Patch 6.3.012
問題:	    Internal lalloc(0) error when using a complicated multi-line
	    pattern in a substitute command. (Luc Hermitte)
解決方案:   Avoid going past the end of a line.
相關文件:   src/ex_cmds.c

Patch 6.3.013
問題:	    Crash when editing a command line and typing CTRL-R = to evaluate
	    a function that uses "normal :cmd". (Hari Krishna Dara)
解決方案:   Save and restore the command line when evaluating an expression
	    for CTRL-R =.
相關文件:   src/ex_getln.c, src/ops.c, src/proto/ex_getln.pro,
	    src/proto/ops.pro

Patch 6.3.014
問題:	    When using Chinese or Taiwanese the default for 'helplang' is
	    wrong. (Simon Liang)
解決方案:   Use the part of the locale name after "zh_".
相關文件:   src/option.c

Patch 6.3.015
問題:	    The string that winrestcmd() returns may end in garbage.
解決方案:   NUL-terminate the string. (Walter Briscoe)
相關文件:   src/eval.c

Patch 6.3.016
問題:	    The default value for 'define' has "\s" before '#'.
解決方案:   Add a star after "\s". (Herculano de Lima Einloft Neto)
相關文件:   src/option.c

Patch 6.3.017
問題:	    "8zz" may leave the cursor beyond the end of the line. (Niko
	    Maatjes)
解決方案:   Correct the cursor column after moving to another line.
相關文件:   src/normal.c

Patch 6.3.018
問題:	    ":0argadd zero" added the argument after the first one, instead of
	    before it. (Adri Verhoef)
解決方案:   Accept a zero range for ":argadd".
相關文件:   src/ex_cmds.h

Patch 6.3.019
問題:	    Crash in startup for debug version. (David Rennals)
解決方案:   Move the call to nbdebug_wait() to after allocating NameBuff.
相關文件:   src/main.c

Patch 6.3.020
問題:	    When 'encoding' is "utf-8" and 'delcombine' is set, "dw" does not
	    delete a word but only a combining character of the first
	    character, if there is one. (Raphael Finkel)
解決方案:   Correctly check that one character is being deleted.
相關文件:   src/misc1.c

Patch 6.3.021
問題:	    When the last character of a file name is a multi-byte character
	    and the last byte is a path separator, the file cannot be edited.
解決方案:   Check for the last byte to be part of a multi-byte character.
	    (Taro Muraoka)
相關文件:   src/fileio.c

Patch 6.3.022 (extra)
問題:	    Win32: When the last character of a file name is a multi-byte
	    character and the last byte is a path separator, the file cannot
	    be written.  A trail byte that is a space makes that a file cannot
	    be opened from the command line.
解決方案:   Recognize double-byte characters when parsing the command line.
	    In mch_stat() check for the last byte to be part of a multi-byte
	    character.  (Taro Muraoka)
相關文件:   src/gui_w48.c, src/os_mswin.c

Patch 6.3.023
問題:	    When the "to" part of a mapping starts with its "from" part,
	    abbreviations for the same characters is not possible.  For
	    example, when <Space> is mapped to something that starts with a
	    space, typing <Space> does not expand abbreviations.
解決方案:   Only disable expanding abbreviations when a mapping is not
	    remapped, don't disable it when the RHS of a mapping starts with
	    the LHS.
相關文件:   src/getchar.c, src/vim.h

Patch 6.3.024
問題:	    In a few places a string in allocated memory is not terminated
	    with a NUL.
解決方案:   Add ga_append(NUL) in script_get(), gui_do_findrepl() and
	    serverGetVimNames().
相關文件:   src/ex_getln.c, src/gui.c, src/if_xcmdsrv.c, src/os_mswin.c

Patch 6.3.025 (extra)
問題:	    Missing NUL for list of server names.
解決方案:   Add ga_append(NUL) in serverGetVimNames().
相關文件:   src/os_mswin.c

Patch 6.3.026
問題:	    When ~/.vim/after/syntax/syncolor.vim contains a command that
	    reloads the colors an endless loop and/or a crash may occur.
解決方案:   Only free the old value of an option when it was originally
	    allocated.  Limit recursiveness of init_highlight() to 5 levels.
相關文件:   src/option.c, src/syntax.c

Patch 6.3.027
問題:	    VMS: Writing a file may insert extra CR characters.  Not all
	    terminals are recognized correctly.  Vt320 doesn't support colors.
	    Environment variables are not expanded correctly.
解決方案:   Use another method to write files.  Add vt320 termcap codes for
	    colors.  (Zoltan Arpadffy)
相關文件:   src/fileio.c, src/misc1.c, src/os_unix.c, src/structs.h,
	    src/term.c

Patch 6.3.028
問題:	    When appending to a file the BOM marker may be written.  (Alex
	    Jakushev)
解決方案:   Do not write the BOM marker when appending.
相關文件:   src/fileio.c

Patch 6.3.029
問題:	    Crash when inserting a line break. (Walter Briscoe)
解決方案:   In the syntax highlighting code, don't use an old state after a
	    change was made, current_col may be past the end of the line.
相關文件:   src/syntax.c

Patch 6.3.030
問題:	    GTK 2: Crash when sourcing a script that deletes the menus, sets
	    'encoding' to "utf-8" and loads the menus again.  GTK error
	    message when tooltip text is in a wrong encoding.
解決方案:   Don't copy characters from the old screen to the new screen when
	    switching 'encoding' to utf-8, they may be invalid.  Only set the
	    tooltip when it is valid utf-8.
相關文件:   src/gui_gtk.c, src/mbyte.c, src/proto/mbyte.pro, src/screen.c

Patch 6.3.031
問題:	    When entering a mapping and pressing Tab halfway the command line
	    isn't redrawn properly. (Adri Verhoef)
解決方案:   Reposition the cursor after drawing over the "..." of the
	    completion attempt.
相關文件:   src/ex_getln.c

Patch 6.3.032
問題:	    Using Python 2.3 with threads doesn't work properly.
解決方案:   Release the lock after initialization.
相關文件:   src/if_python.c

Patch 6.3.033
問題:	    When a mapping ends in a Normal mode command of more than one
	    character Vim doesn't return to Insert mode.
解決方案:   Check that the mapping has ended after obtaining all characters of
	    the Normal mode command.
相關文件:   src/normal.c

Patch 6.3.034
問題:	    VMS: crash when using ":help".
解決方案:   Avoid using "tags-??", some Open VMS systems can't handle the "?"
	    wildcard.  (Zoltan Arpadffy)
相關文件:   src/tag.c

Patch 6.3.035 (extra)
問題:	    RISC OS: Compile errors.
解決方案:   Change e_screnmode to e_screenmode.  Change the way
	    __riscosify_control is set.  Improve the makefile.  (Andy Wingate)
相關文件:   src/os_riscos.c, src/search.c, src/Make_ro.mak

Patch 6.3.036
問題:	    ml_get errors when the whole file is a fold, switching
	    'foldmethod' and doing "zj". (Christian J. Robinson) Was not
	    deleting the fold but creating a fold with zero lines.
解決方案:   Delete the fold properly.
相關文件:   src/fold.c

Patch 6.3.037 (after 6.3.032)
問題:	    Warning for unused variable.
解決方案:   Change the #ifdefs for the saved thread stuff.
相關文件:   src/if_python.c

Patch 6.3.038 (extra)
問題:	    Win32: When the "file changed" dialog pops up after a click that
	    gives gvim focus and not moving the mouse after that, the effect
	    of the click may occur when moving the mouse later. (Ken Clark)
	    Happened because the release event was missed.
解決方案:   Clear the s_button_pending variable when any input is received.
相關文件:   src/gui_w48.c

Patch 6.3.039
問題:	    When 'number' is set and inserting lines just above the first
	    displayed line (in another window on the same buffer), the line
	    numbers are not updated.  (Hitier Sylvain)
解決方案:   When 'number' is set and lines are inserted/deleted redraw all
	    lines below the change.
相關文件:   src/screen.c

Patch 6.3.040
問題:	    Error handling does not always work properly and may cause a
	    buffer to be marked as if it's viewed in a window while it isn't.
	    Also when selecting "Abort" at the attention prompt.
解決方案:   Add enter_cleanup() and leave_cleanup() functions to move
	    saving/restoring things for error handling to one place.
	    Clear a buffer read error when it's unloaded.
相關文件:   src/buffer.c, src/ex_docmd.c, src/ex_eval.c,
	    src/proto/ex_eval.pro, src/structs.h, src/vim.h

Patch 6.3.041 (extra)
問題:	    Win32: When the path to a file has Russian characters, ":cd %:p:h"
	    doesn't work. (Valery Kondakoff)
解決方案:   Use a wide function to change directory.
相關文件:   src/os_mswin.c

Patch 6.3.042
問題:	    When there is a closed fold at the top of the window, CTRL-X
	    CTRL-E in Insert mode reduces the size of the fold instead of
	    scrolling the text up. (Gautam)
解決方案:   Scroll over the closed fold.
相關文件:   src/move.c

Patch 6.3.043
問題:	    'hlsearch' highlighting sometimes disappears when inserting text
	    in PHP code with syntax highlighting. (Marcel Svitalsky)
解決方案:   Don't use pointers to remember where a match was found, use an
	    index.  The pointers may become invalid when searching in other
	    lines.
相關文件:   src/screen.c

Patch 6.3.044 (extra)
問題:	    Mac: When 'linespace' is non-zero the Insert mode cursor leaves
	    pixels behind. (Richard Sandilands)
解決方案:   Erase the character cell before drawing the text when needed.
相關文件:   src/gui_mac.c


Patch 6.3.045
問題:	    Unusual characters in an option value may cause unexpected
	    behavior, especially for a modeline. (Ciaran McCreesh)
解決方案:   Don't allow setting termcap options or 'printdevice' in a
	    modeline.  Don't list options for "termcap" and "all" in a
	    modeline.  Don't allow unusual characters in 'filetype', 'syntax',
	    'backupext', 'keymap', 'patchmode' and 'langmenu'.
相關文件:   src/option.c, runtime/doc/options.txt

Patch 6.3.046
問題:	    ":registers" doesn't show multi-byte characters properly.
	    (Valery Kondakoff)
解決方案:   Get the length of each character before displaying it.
相關文件:   src/ops.c

Patch 6.3.047 (extra)
問題:	    Win32 with Borland C 5.5 on Windows XP: A new file is created with
	    read-only attributes. (Tony Mechelynck)
解決方案:   Don't use the _wopen() function for Borland.
相關文件:   src/os_win32.c

Patch 6.3.048 (extra)
問題:	    Build problems with VMS on IA64.
解決方案:   Add dependencies to the build file. (Zoltan Arpadffy)
相關文件:   src/Make_vms.mms

Patch 6.3.049 (after 6.3.045)
問題:	    Compiler warning for "char" vs "char_u" mixup. (Zoltan Arpadffy)
解決方案:   Add a typecast.
相關文件:   src/option.c

Patch 6.3.050
問題:	    When SIGHUP is received while busy exiting, non-reentrant
	    functions such as free() may cause a crash.
解決方案:   Ignore SIGHUP when exiting because of an error. (Scott Anderson)
相關文件:   src/misc1.c, src/main.c

Patch 6.3.051
問題:	    When 'wildmenu' is set and completed file names contain multi-byte
	    characters Vim may crash.
解決方案:   Reserve room for multi-byte characters. (Yasuhiro Matsumoto)
相關文件:   src/screen.c

Patch 6.3.052 (extra)
問題:	    Windows 98: typed keys that are not ASCII may not work properly.
	    For example with a Russian input method. (Jiri Jezdinsky)
解決方案:   Assume that the characters arrive in the current codepage instead
	    of UCS-2.  Perform conversion based on that.
相關文件:   src/gui_w48.c

Patch 6.3.053
問題:	    Win32: ":loadview" cannot find a file with non-ASCII characters.
	    (Valerie Kondakoff)
解決方案:   Use mch_open() instead of open() to open the file.
相關文件:   src/ex_cmds2.c

Patch 6.3.054
問題:	    When 'insertmode' is set <C-L>4ixxx<C-L> hangs Vim. (Jens Paulus)
	    Vim is actually still working but redraw is disabled.
解決方案:   When stopping Insert mode with CTRL-L don't put an Esc in the redo
	    buffer but a CTRL-L.
相關文件:   src/edit.c

Patch 6.3.055 (after 6.3.013)
問題:	    Can't use getcmdline(), getcmdpos() or setcmdpos() with <C-R>=
	    when editing a command line.  Using <C-\>e may crash Vim. (Peter
	    Winters)
解決方案:   When moving ccline out of the way for recursive use, make it
	    available to the functions that need it.  Also save and restore
	    ccline when calling get_expr_line().  Make ccline.cmdbuf NULL at
	    the end of getcmdline().
相關文件:   src/ex_getln.c

Patch 6.3.056
問題:	    The last characters of a multi-byte file name may not be displayed
	    in the window title.
解決方案:   Avoid to remove a multi-byte character where the last byte looks
	    like a path separator character. (Yasuhiro Matsumoto)
相關文件:   src/buffer.c, src/ex_getln.c

Patch 6.3.057
問題:	    When filtering lines folds are not updated. (Carl Osterwisch)
解決方案:   Update folds for filtered lines.
相關文件:   src/ex_cmds.c

Patch 6.3.058
問題:	    When 'foldcolumn' is equal to the window width and 'wrap' is on
	    Vim may crash.  Disabling the vertical split feature breaks
	    compiling.  (Peter Winters)
解決方案:   Check for zero room for wrapped text.  Make compiling without
	    vertical splits possible.
相關文件:   src/move.c, src/quickfix.c, src/screen.c, src/netbeans.c

Patch 6.3.059
問題:	    Crash when expanding an ":edit" command containing several spaces
	    with the shell. (Brian Hirt)
解決方案:   Allocate enough space for the quotes.
相關文件:   src/os_unix.c

Patch 6.3.060
問題:	    Using CTRL-R CTRL-O in Insert mode with an invalid register name
	    still causes something to be inserted.
解決方案:   Check the register name for being valid.
相關文件:   src/edit.c

Patch 6.3.061
問題:	    When editing a utf-8 file in an utf-8 xterm and there is a
	    multi-byte character in the last column, displaying is messed up.
	    (Joël Rio)
解決方案:   Check for a multi-byte character, not a multi-column character.
相關文件:   src/screen.c

Patch 6.3.062
問題:	    ":normal! gQ" hangs.
解決方案:   Quit getcmdline() and do_exmode() when out of typeahead.
相關文件:   src/ex_getln.c, src/ex_docmd.c

Patch 6.3.063
問題:	    When a CursorHold autocommand changes to another window
	    (temporarily) 'mousefocus' stops working.
解決方案:   Call gui_mouse_correct() after triggering CursorHold.
相關文件:   src/gui.c

Patch 6.3.064
問題:	    line2byte(line("$") + 1) sometimes returns the wrong number.
	    (Charles Campbell)
解決方案:   Flush the cached line before counting the bytes.
相關文件:   src/memline.c

Patch 6.3.065
問題:	    The euro digraph doesn't always work.
解決方案:   Add an "e=" digraph for Unicode euro character and adjust the
	    help files.
相關文件:   src/digraph.c, runtime/doc/digraph.txt

Patch 6.3.066
問題:	    Backup file may get wrong permissions.
解決方案:   Use permissions of original file for backup file in more places.
相關文件:   src/fileio.c

Patch 6.3.067 (after 6.3.066)
問題:	    Newly created file gets execute permission.
解決方案:   Check for "perm" to be negative before using it.
相關文件:   src/fileio.c

Patch 6.3.068
問題:	    When editing a compressed file xxx.gz which is a symbolic link to
	    the actual file a ":write" renames the link.
解決方案:   Resolve the link, so that the actual file is renamed and
	    compressed.
相關文件:   runtime/plugin/gzip.vim

Patch 6.3.069
問題:	    When converting text with illegal characters Vim may crash.
解決方案:   Avoid that too much is subtracted from the length. (Da Woon Jung)
相關文件:   src/mbyte.c

Patch 6.3.070
問題:	    After ":set number linebreak wrap" and a vertical split, moving
	    the vertical separator far left will crash Vim. (Georg Dahn)
解決方案:   Avoid dividing by zero.
相關文件:   src/charset.c

Patch 6.3.071
問題:	    The message for CTRL-X mode is still displayed after an error for
	    'thesaurus' or 'dictionary' being empty.
解決方案:   Clear "edit_submode".
相關文件:   src/edit.c

Patch 6.3.072
問題:	    Crash in giving substitute message when language is Chinese and
	    encoding is utf-8. (Yongwei)
解決方案:   Make the msg_buf size larger when using multi-byte.
相關文件:   src/vim.h

Patch 6.3.073
問題:	    Win32 GUI: When the Vim window is partly above or below the
	    screen, scrolling causes display errors when the taskbar is not on
	    that side.
解決方案:   Use the SW_INVALIDATE flag when the Vim window is partly below or
	    above the screen.
相關文件:   src/gui_w48.c

Patch 6.3.074
問題:	    When mswin.vim is used and 'insertmode' is set, typing text in
	    Select mode and then using CTRL-V results in <SNR>99_Pastegi.
	    (Georg Dahn)
解決方案:   When restart_edit is set use "d" instead of "c" to remove the
	    selected text to avoid calling edit() twice.
相關文件:   src/normal.c

Patch 6.3.075
問題:	    After unloading another buffer, syntax highlighting in the current
	    buffer may be wrong when it uses "containedin". (Eric Arnold)
解決方案:   Use "buf" instead of "curbuf" in syntax_clear().
相關文件:   src/syntax.c

Patch 6.3.076
問題:	    Crash when using cscope and there is a parse error (e.g., line too
	    long). (Alexey I. Froloff)
解決方案:   Pass the actual number of matches to cs_manage_matches() and
	    correctly handle the error situation.
相關文件:   src/if_cscope.c

Patch 6.3.077 (extra)
問題:	    VMS: First character input after ESC was not recognized.
解決方案:   Added TRM$M_TM_TIMED in vms_read().  (Zoltan Arpadffy)
相關文件:   src/os_vms.c

Patch 6.3.078 (extra, after 6.3.077)
問題:	    VMS: Performance issue after patch 6.3.077
解決方案:   Add a timeout in the itemlist.  (Zoltan Arpadffy)
相關文件:   src/os_vms.c

Patch 6.3.079
問題:	    Crash when executing a command in the command line window while
	    syntax highlighting is enabled. (Pero Brbora)
解決方案:   Don't use a pointer to a buffer that has been deleted.
相關文件:   src/syntax.c

Patch 6.3.080 (extra)
問題:	    Win32: With 'encoding' set to utf-8 while the current codepage is
	    Chinese editing a file with some specific characters in the name
	    fails.
解決方案:   Use _wfullpath() instead of _fullpath() when necessary.
相關文件:   src/os_mswin.c

Patch 6.3.081
問題:	    Unix: glob() may execute a shell command when it's not wanted.
	    (Georgi Guninski)
解決方案:   Verify the sandbox flag is not set.
相關文件:   src/os_unix.c

Patch 6.3.082 (after 6.3.081)
問題:	    Unix: expand() may execute a shell command when it's not wanted.
	    (Georgi Guninski)
解決方案:   A more generic solution than 6.3.081.
相關文件:   src/os_unix.c

Patch 6.3.083
問題:	    VMS: The vt320 termcap entry is incomplete.
解決方案:   Add missing function keys.  (Zoltan Arpadffy)
相關文件:   src/term.c

Patch 6.3.084 (extra)
問題:	    Cygwin: compiling with DEBUG doesn't work.  Perl path was ignored.
	    Failure when $(OUTDIR) already exists.  "po" makefile is missing.
解決方案:   Use changes tested in Vim 7. (Tony Mechelynck)
相關文件:   src/Make_cyg.mak, src/po/Make_cyg.mak

Patch 6.3.085
問題:	    Crash in syntax highlighting code. (Marc Espie)
解決方案:   Prevent current_col going past the end of the line.
相關文件:   src/syntax.c

Patch 6.3.086 (extra)
問題:	    Can't produce message translation file with msgfmt that checks
	    printf strings.
解決方案:   Fix the Russian translation.
相關文件:   src/po/ru.po, src/po/ru.cp1251.po

Patch 6.3.087
問題:	    MS-DOS: Crash. (Jason Hood)
解決方案:   Don't call fname_case() with a NULL pointer.
相關文件:   src/ex_cmds.c

Patch 6.3.088
問題:	    Editing ".in" causes error E218. (Stefan Karlsson)
解決方案:   Require some characters before ".in".  Same for ".orig" and others.
相關文件:   runtime/filetype.vim

Patch 6.3.089
問題:	    A session file doesn't work when created while the current
	    directory contains a space or the directory of the session files
	    contains a space. (Paolo Giarrusso)
解決方案:   Escape spaces with a backslash.
相關文件:   src/ex_docmd.c

Patch 6.3.090
問題:	    A very big value for 'columns' or 'lines' may cause a crash.
解決方案:   Limit the values to 10000 and 1000.
相關文件:   src/option.c

Patch 6.4a.001
問題:	    The Unix Makefile contained too many dependencies and a few
	    uncommented lines.
解決方案:   Run "make depend" with manual changes to avoid a gcc
	    incompatibility.  Comment a few lines.
相關文件:   src/Makefile

Patch 6.4b.001
問題:	    Vim reports "Vim 6.4a" in the ":version" output.
解決方案:   Change "a" to "b". (Tony Mechelynck)
相關文件:   src/version.h

Patch 6.4b.002
問題:	    In Insert mode, pasting a multi-byte character after the end of
	    the line leaves the cursor just before that character.
解決方案:   Make sure "gP" leaves the cursor in the right place when
	    'virtualedit' is set.
相關文件:   src/ops.c

Patch 6.4b.003 (after 6.4b.002)
問題:	    The problem still exists when 'encoding' is set to "cp936".
解決方案:   Fix the problem in getvvcol(), compute the coladd field correctly.
相關文件:   src/charset.c, src/ops.c

Patch 6.4b.004
問題:	    Selecting a {} block with "viB" includes the '}' when there is an
	    empty line before it.
解決方案:   Don't advance the cursor to include a line break when it's already
	    at the line break.
相關文件:   src/search.c


 vim:tw=78:ts=8:ft=help:norl:
